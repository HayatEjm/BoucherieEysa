"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["vendors-node_modules_pinia_dist_pinia_mjs"],{

/***/ "./node_modules/@vue/devtools-kit/dist/index.js":
/*!******************************************************!*\
  !*** ./node_modules/@vue/devtools-kit/dist/index.js ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DevToolsContextHookKeys: () => (/* binding */ DevToolsContextHookKeys),
/* harmony export */   DevToolsMessagingHookKeys: () => (/* binding */ DevToolsMessagingHookKeys),
/* harmony export */   DevToolsV6PluginAPIHookKeys: () => (/* binding */ DevToolsV6PluginAPIHookKeys),
/* harmony export */   INFINITY: () => (/* binding */ INFINITY),
/* harmony export */   NAN: () => (/* binding */ NAN),
/* harmony export */   NEGATIVE_INFINITY: () => (/* binding */ NEGATIVE_INFINITY),
/* harmony export */   ROUTER_INFO_KEY: () => (/* binding */ ROUTER_INFO_KEY),
/* harmony export */   ROUTER_KEY: () => (/* binding */ ROUTER_KEY),
/* harmony export */   UNDEFINED: () => (/* binding */ UNDEFINED),
/* harmony export */   activeAppRecord: () => (/* binding */ activeAppRecord),
/* harmony export */   addCustomCommand: () => (/* binding */ addCustomCommand),
/* harmony export */   addCustomTab: () => (/* binding */ addCustomTab),
/* harmony export */   addDevToolsAppRecord: () => (/* binding */ addDevToolsAppRecord),
/* harmony export */   addDevToolsPluginToBuffer: () => (/* binding */ addDevToolsPluginToBuffer),
/* harmony export */   addInspector: () => (/* binding */ addInspector),
/* harmony export */   callConnectedUpdatedHook: () => (/* binding */ callConnectedUpdatedHook),
/* harmony export */   callDevToolsPluginSetupFn: () => (/* binding */ callDevToolsPluginSetupFn),
/* harmony export */   callInspectorUpdatedHook: () => (/* binding */ callInspectorUpdatedHook),
/* harmony export */   callStateUpdatedHook: () => (/* binding */ callStateUpdatedHook),
/* harmony export */   createComponentsDevToolsPlugin: () => (/* binding */ createComponentsDevToolsPlugin),
/* harmony export */   createDevToolsApi: () => (/* binding */ createDevToolsApi),
/* harmony export */   createDevToolsCtxHooks: () => (/* binding */ createDevToolsCtxHooks),
/* harmony export */   createRpcClient: () => (/* binding */ createRpcClient),
/* harmony export */   createRpcProxy: () => (/* binding */ createRpcProxy),
/* harmony export */   createRpcServer: () => (/* binding */ createRpcServer),
/* harmony export */   devtools: () => (/* binding */ devtools),
/* harmony export */   devtoolsAppRecords: () => (/* binding */ devtoolsAppRecords),
/* harmony export */   devtoolsContext: () => (/* binding */ devtoolsContext),
/* harmony export */   devtoolsInspector: () => (/* binding */ devtoolsInspector),
/* harmony export */   devtoolsPluginBuffer: () => (/* binding */ devtoolsPluginBuffer),
/* harmony export */   devtoolsRouter: () => (/* binding */ devtoolsRouter),
/* harmony export */   devtoolsRouterInfo: () => (/* binding */ devtoolsRouterInfo),
/* harmony export */   devtoolsState: () => (/* binding */ devtoolsState),
/* harmony export */   escape: () => (/* binding */ escape),
/* harmony export */   formatInspectorStateValue: () => (/* binding */ formatInspectorStateValue),
/* harmony export */   getActiveInspectors: () => (/* binding */ getActiveInspectors),
/* harmony export */   getDevToolsEnv: () => (/* binding */ getDevToolsEnv),
/* harmony export */   getExtensionClientContext: () => (/* binding */ getExtensionClientContext),
/* harmony export */   getInspector: () => (/* binding */ getInspector),
/* harmony export */   getInspectorActions: () => (/* binding */ getInspectorActions),
/* harmony export */   getInspectorInfo: () => (/* binding */ getInspectorInfo),
/* harmony export */   getInspectorNodeActions: () => (/* binding */ getInspectorNodeActions),
/* harmony export */   getInspectorStateValueType: () => (/* binding */ getInspectorStateValueType),
/* harmony export */   getRaw: () => (/* binding */ getRaw),
/* harmony export */   getRpcClient: () => (/* binding */ getRpcClient),
/* harmony export */   getRpcServer: () => (/* binding */ getRpcServer),
/* harmony export */   getViteRpcClient: () => (/* binding */ getViteRpcClient),
/* harmony export */   getViteRpcServer: () => (/* binding */ getViteRpcServer),
/* harmony export */   initDevTools: () => (/* binding */ initDevTools),
/* harmony export */   isPlainObject: () => (/* binding */ isPlainObject),
/* harmony export */   onDevToolsClientConnected: () => (/* binding */ onDevToolsClientConnected),
/* harmony export */   onDevToolsConnected: () => (/* binding */ onDevToolsConnected),
/* harmony export */   parse: () => (/* binding */ parse2),
/* harmony export */   registerDevToolsPlugin: () => (/* binding */ registerDevToolsPlugin),
/* harmony export */   removeCustomCommand: () => (/* binding */ removeCustomCommand),
/* harmony export */   removeDevToolsAppRecord: () => (/* binding */ removeDevToolsAppRecord),
/* harmony export */   removeRegisteredPluginApp: () => (/* binding */ removeRegisteredPluginApp),
/* harmony export */   resetDevToolsState: () => (/* binding */ resetDevToolsState),
/* harmony export */   setActiveAppRecord: () => (/* binding */ setActiveAppRecord),
/* harmony export */   setActiveAppRecordId: () => (/* binding */ setActiveAppRecordId),
/* harmony export */   setDevToolsEnv: () => (/* binding */ setDevToolsEnv),
/* harmony export */   setElectronClientContext: () => (/* binding */ setElectronClientContext),
/* harmony export */   setElectronProxyContext: () => (/* binding */ setElectronProxyContext),
/* harmony export */   setElectronServerContext: () => (/* binding */ setElectronServerContext),
/* harmony export */   setExtensionClientContext: () => (/* binding */ setExtensionClientContext),
/* harmony export */   setIframeServerContext: () => (/* binding */ setIframeServerContext),
/* harmony export */   setOpenInEditorBaseUrl: () => (/* binding */ setOpenInEditorBaseUrl),
/* harmony export */   setRpcServerToGlobal: () => (/* binding */ setRpcServerToGlobal),
/* harmony export */   setViteClientContext: () => (/* binding */ setViteClientContext),
/* harmony export */   setViteRpcClientToGlobal: () => (/* binding */ setViteRpcClientToGlobal),
/* harmony export */   setViteRpcServerToGlobal: () => (/* binding */ setViteRpcServerToGlobal),
/* harmony export */   setViteServerContext: () => (/* binding */ setViteServerContext),
/* harmony export */   setupDevToolsPlugin: () => (/* binding */ setupDevToolsPlugin),
/* harmony export */   stringify: () => (/* binding */ stringify2),
/* harmony export */   toEdit: () => (/* binding */ toEdit),
/* harmony export */   toSubmit: () => (/* binding */ toSubmit),
/* harmony export */   toggleClientConnected: () => (/* binding */ toggleClientConnected),
/* harmony export */   toggleComponentInspectorEnabled: () => (/* binding */ toggleComponentInspectorEnabled),
/* harmony export */   toggleHighPerfMode: () => (/* binding */ toggleHighPerfMode),
/* harmony export */   updateDevToolsClientDetected: () => (/* binding */ updateDevToolsClientDetected),
/* harmony export */   updateDevToolsState: () => (/* binding */ updateDevToolsState),
/* harmony export */   updateTimelineLayersState: () => (/* binding */ updateTimelineLayersState)
/* harmony export */ });
/* harmony import */ var _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @vue/devtools-shared */ "./node_modules/@vue/devtools-shared/dist/index.js");
/* harmony import */ var perfect_debounce__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! perfect-debounce */ "./node_modules/perfect-debounce/dist/index.mjs");
/* harmony import */ var hookable__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! hookable */ "./node_modules/hookable/dist/index.mjs");
/* harmony import */ var birpc__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! birpc */ "./node_modules/birpc/dist/index.mjs");
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target22) => (target22 = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target22, "default", { value: mod, enumerable: true }) : target22,
  mod
));

// ../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js
var init_esm_shims = __esm({
  "../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"() {
    "use strict";
  }
});

// ../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js
var require_speakingurl = __commonJS({
  "../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/lib/speakingurl.js"(exports, module) {
    "use strict";
    init_esm_shims();
    (function(root) {
      "use strict";
      var charMap = {
        // latin
        "\xC0": "A",
        "\xC1": "A",
        "\xC2": "A",
        "\xC3": "A",
        "\xC4": "Ae",
        "\xC5": "A",
        "\xC6": "AE",
        "\xC7": "C",
        "\xC8": "E",
        "\xC9": "E",
        "\xCA": "E",
        "\xCB": "E",
        "\xCC": "I",
        "\xCD": "I",
        "\xCE": "I",
        "\xCF": "I",
        "\xD0": "D",
        "\xD1": "N",
        "\xD2": "O",
        "\xD3": "O",
        "\xD4": "O",
        "\xD5": "O",
        "\xD6": "Oe",
        "\u0150": "O",
        "\xD8": "O",
        "\xD9": "U",
        "\xDA": "U",
        "\xDB": "U",
        "\xDC": "Ue",
        "\u0170": "U",
        "\xDD": "Y",
        "\xDE": "TH",
        "\xDF": "ss",
        "\xE0": "a",
        "\xE1": "a",
        "\xE2": "a",
        "\xE3": "a",
        "\xE4": "ae",
        "\xE5": "a",
        "\xE6": "ae",
        "\xE7": "c",
        "\xE8": "e",
        "\xE9": "e",
        "\xEA": "e",
        "\xEB": "e",
        "\xEC": "i",
        "\xED": "i",
        "\xEE": "i",
        "\xEF": "i",
        "\xF0": "d",
        "\xF1": "n",
        "\xF2": "o",
        "\xF3": "o",
        "\xF4": "o",
        "\xF5": "o",
        "\xF6": "oe",
        "\u0151": "o",
        "\xF8": "o",
        "\xF9": "u",
        "\xFA": "u",
        "\xFB": "u",
        "\xFC": "ue",
        "\u0171": "u",
        "\xFD": "y",
        "\xFE": "th",
        "\xFF": "y",
        "\u1E9E": "SS",
        // language specific
        // Arabic
        "\u0627": "a",
        "\u0623": "a",
        "\u0625": "i",
        "\u0622": "aa",
        "\u0624": "u",
        "\u0626": "e",
        "\u0621": "a",
        "\u0628": "b",
        "\u062A": "t",
        "\u062B": "th",
        "\u062C": "j",
        "\u062D": "h",
        "\u062E": "kh",
        "\u062F": "d",
        "\u0630": "th",
        "\u0631": "r",
        "\u0632": "z",
        "\u0633": "s",
        "\u0634": "sh",
        "\u0635": "s",
        "\u0636": "dh",
        "\u0637": "t",
        "\u0638": "z",
        "\u0639": "a",
        "\u063A": "gh",
        "\u0641": "f",
        "\u0642": "q",
        "\u0643": "k",
        "\u0644": "l",
        "\u0645": "m",
        "\u0646": "n",
        "\u0647": "h",
        "\u0648": "w",
        "\u064A": "y",
        "\u0649": "a",
        "\u0629": "h",
        "\uFEFB": "la",
        "\uFEF7": "laa",
        "\uFEF9": "lai",
        "\uFEF5": "laa",
        // Persian additional characters than Arabic
        "\u06AF": "g",
        "\u0686": "ch",
        "\u067E": "p",
        "\u0698": "zh",
        "\u06A9": "k",
        "\u06CC": "y",
        // Arabic diactrics
        "\u064E": "a",
        "\u064B": "an",
        "\u0650": "e",
        "\u064D": "en",
        "\u064F": "u",
        "\u064C": "on",
        "\u0652": "",
        // Arabic numbers
        "\u0660": "0",
        "\u0661": "1",
        "\u0662": "2",
        "\u0663": "3",
        "\u0664": "4",
        "\u0665": "5",
        "\u0666": "6",
        "\u0667": "7",
        "\u0668": "8",
        "\u0669": "9",
        // Persian numbers
        "\u06F0": "0",
        "\u06F1": "1",
        "\u06F2": "2",
        "\u06F3": "3",
        "\u06F4": "4",
        "\u06F5": "5",
        "\u06F6": "6",
        "\u06F7": "7",
        "\u06F8": "8",
        "\u06F9": "9",
        // Burmese consonants
        "\u1000": "k",
        "\u1001": "kh",
        "\u1002": "g",
        "\u1003": "ga",
        "\u1004": "ng",
        "\u1005": "s",
        "\u1006": "sa",
        "\u1007": "z",
        "\u1005\u103B": "za",
        "\u100A": "ny",
        "\u100B": "t",
        "\u100C": "ta",
        "\u100D": "d",
        "\u100E": "da",
        "\u100F": "na",
        "\u1010": "t",
        "\u1011": "ta",
        "\u1012": "d",
        "\u1013": "da",
        "\u1014": "n",
        "\u1015": "p",
        "\u1016": "pa",
        "\u1017": "b",
        "\u1018": "ba",
        "\u1019": "m",
        "\u101A": "y",
        "\u101B": "ya",
        "\u101C": "l",
        "\u101D": "w",
        "\u101E": "th",
        "\u101F": "h",
        "\u1020": "la",
        "\u1021": "a",
        // consonant character combos
        "\u103C": "y",
        "\u103B": "ya",
        "\u103D": "w",
        "\u103C\u103D": "yw",
        "\u103B\u103D": "ywa",
        "\u103E": "h",
        // independent vowels
        "\u1027": "e",
        "\u104F": "-e",
        "\u1023": "i",
        "\u1024": "-i",
        "\u1009": "u",
        "\u1026": "-u",
        "\u1029": "aw",
        "\u101E\u103C\u1031\u102C": "aw",
        "\u102A": "aw",
        // numbers
        "\u1040": "0",
        "\u1041": "1",
        "\u1042": "2",
        "\u1043": "3",
        "\u1044": "4",
        "\u1045": "5",
        "\u1046": "6",
        "\u1047": "7",
        "\u1048": "8",
        "\u1049": "9",
        // virama and tone marks which are silent in transliteration
        "\u1039": "",
        "\u1037": "",
        "\u1038": "",
        // Czech
        "\u010D": "c",
        "\u010F": "d",
        "\u011B": "e",
        "\u0148": "n",
        "\u0159": "r",
        "\u0161": "s",
        "\u0165": "t",
        "\u016F": "u",
        "\u017E": "z",
        "\u010C": "C",
        "\u010E": "D",
        "\u011A": "E",
        "\u0147": "N",
        "\u0158": "R",
        "\u0160": "S",
        "\u0164": "T",
        "\u016E": "U",
        "\u017D": "Z",
        // Dhivehi
        "\u0780": "h",
        "\u0781": "sh",
        "\u0782": "n",
        "\u0783": "r",
        "\u0784": "b",
        "\u0785": "lh",
        "\u0786": "k",
        "\u0787": "a",
        "\u0788": "v",
        "\u0789": "m",
        "\u078A": "f",
        "\u078B": "dh",
        "\u078C": "th",
        "\u078D": "l",
        "\u078E": "g",
        "\u078F": "gn",
        "\u0790": "s",
        "\u0791": "d",
        "\u0792": "z",
        "\u0793": "t",
        "\u0794": "y",
        "\u0795": "p",
        "\u0796": "j",
        "\u0797": "ch",
        "\u0798": "tt",
        "\u0799": "hh",
        "\u079A": "kh",
        "\u079B": "th",
        "\u079C": "z",
        "\u079D": "sh",
        "\u079E": "s",
        "\u079F": "d",
        "\u07A0": "t",
        "\u07A1": "z",
        "\u07A2": "a",
        "\u07A3": "gh",
        "\u07A4": "q",
        "\u07A5": "w",
        "\u07A6": "a",
        "\u07A7": "aa",
        "\u07A8": "i",
        "\u07A9": "ee",
        "\u07AA": "u",
        "\u07AB": "oo",
        "\u07AC": "e",
        "\u07AD": "ey",
        "\u07AE": "o",
        "\u07AF": "oa",
        "\u07B0": "",
        // Georgian https://en.wikipedia.org/wiki/Romanization_of_Georgian
        // National system (2002)
        "\u10D0": "a",
        "\u10D1": "b",
        "\u10D2": "g",
        "\u10D3": "d",
        "\u10D4": "e",
        "\u10D5": "v",
        "\u10D6": "z",
        "\u10D7": "t",
        "\u10D8": "i",
        "\u10D9": "k",
        "\u10DA": "l",
        "\u10DB": "m",
        "\u10DC": "n",
        "\u10DD": "o",
        "\u10DE": "p",
        "\u10DF": "zh",
        "\u10E0": "r",
        "\u10E1": "s",
        "\u10E2": "t",
        "\u10E3": "u",
        "\u10E4": "p",
        "\u10E5": "k",
        "\u10E6": "gh",
        "\u10E7": "q",
        "\u10E8": "sh",
        "\u10E9": "ch",
        "\u10EA": "ts",
        "\u10EB": "dz",
        "\u10EC": "ts",
        "\u10ED": "ch",
        "\u10EE": "kh",
        "\u10EF": "j",
        "\u10F0": "h",
        // Greek
        "\u03B1": "a",
        "\u03B2": "v",
        "\u03B3": "g",
        "\u03B4": "d",
        "\u03B5": "e",
        "\u03B6": "z",
        "\u03B7": "i",
        "\u03B8": "th",
        "\u03B9": "i",
        "\u03BA": "k",
        "\u03BB": "l",
        "\u03BC": "m",
        "\u03BD": "n",
        "\u03BE": "ks",
        "\u03BF": "o",
        "\u03C0": "p",
        "\u03C1": "r",
        "\u03C3": "s",
        "\u03C4": "t",
        "\u03C5": "y",
        "\u03C6": "f",
        "\u03C7": "x",
        "\u03C8": "ps",
        "\u03C9": "o",
        "\u03AC": "a",
        "\u03AD": "e",
        "\u03AF": "i",
        "\u03CC": "o",
        "\u03CD": "y",
        "\u03AE": "i",
        "\u03CE": "o",
        "\u03C2": "s",
        "\u03CA": "i",
        "\u03B0": "y",
        "\u03CB": "y",
        "\u0390": "i",
        "\u0391": "A",
        "\u0392": "B",
        "\u0393": "G",
        "\u0394": "D",
        "\u0395": "E",
        "\u0396": "Z",
        "\u0397": "I",
        "\u0398": "TH",
        "\u0399": "I",
        "\u039A": "K",
        "\u039B": "L",
        "\u039C": "M",
        "\u039D": "N",
        "\u039E": "KS",
        "\u039F": "O",
        "\u03A0": "P",
        "\u03A1": "R",
        "\u03A3": "S",
        "\u03A4": "T",
        "\u03A5": "Y",
        "\u03A6": "F",
        "\u03A7": "X",
        "\u03A8": "PS",
        "\u03A9": "O",
        "\u0386": "A",
        "\u0388": "E",
        "\u038A": "I",
        "\u038C": "O",
        "\u038E": "Y",
        "\u0389": "I",
        "\u038F": "O",
        "\u03AA": "I",
        "\u03AB": "Y",
        // Latvian
        "\u0101": "a",
        // 'č': 'c', // duplicate
        "\u0113": "e",
        "\u0123": "g",
        "\u012B": "i",
        "\u0137": "k",
        "\u013C": "l",
        "\u0146": "n",
        // 'š': 's', // duplicate
        "\u016B": "u",
        // 'ž': 'z', // duplicate
        "\u0100": "A",
        // 'Č': 'C', // duplicate
        "\u0112": "E",
        "\u0122": "G",
        "\u012A": "I",
        "\u0136": "k",
        "\u013B": "L",
        "\u0145": "N",
        // 'Š': 'S', // duplicate
        "\u016A": "U",
        // 'Ž': 'Z', // duplicate
        // Macedonian
        "\u040C": "Kj",
        "\u045C": "kj",
        "\u0409": "Lj",
        "\u0459": "lj",
        "\u040A": "Nj",
        "\u045A": "nj",
        "\u0422\u0441": "Ts",
        "\u0442\u0441": "ts",
        // Polish
        "\u0105": "a",
        "\u0107": "c",
        "\u0119": "e",
        "\u0142": "l",
        "\u0144": "n",
        // 'ó': 'o', // duplicate
        "\u015B": "s",
        "\u017A": "z",
        "\u017C": "z",
        "\u0104": "A",
        "\u0106": "C",
        "\u0118": "E",
        "\u0141": "L",
        "\u0143": "N",
        "\u015A": "S",
        "\u0179": "Z",
        "\u017B": "Z",
        // Ukranian
        "\u0404": "Ye",
        "\u0406": "I",
        "\u0407": "Yi",
        "\u0490": "G",
        "\u0454": "ye",
        "\u0456": "i",
        "\u0457": "yi",
        "\u0491": "g",
        // Romanian
        "\u0103": "a",
        "\u0102": "A",
        "\u0219": "s",
        "\u0218": "S",
        // 'ş': 's', // duplicate
        // 'Ş': 'S', // duplicate
        "\u021B": "t",
        "\u021A": "T",
        "\u0163": "t",
        "\u0162": "T",
        // Russian https://en.wikipedia.org/wiki/Romanization_of_Russian
        // ICAO
        "\u0430": "a",
        "\u0431": "b",
        "\u0432": "v",
        "\u0433": "g",
        "\u0434": "d",
        "\u0435": "e",
        "\u0451": "yo",
        "\u0436": "zh",
        "\u0437": "z",
        "\u0438": "i",
        "\u0439": "i",
        "\u043A": "k",
        "\u043B": "l",
        "\u043C": "m",
        "\u043D": "n",
        "\u043E": "o",
        "\u043F": "p",
        "\u0440": "r",
        "\u0441": "s",
        "\u0442": "t",
        "\u0443": "u",
        "\u0444": "f",
        "\u0445": "kh",
        "\u0446": "c",
        "\u0447": "ch",
        "\u0448": "sh",
        "\u0449": "sh",
        "\u044A": "",
        "\u044B": "y",
        "\u044C": "",
        "\u044D": "e",
        "\u044E": "yu",
        "\u044F": "ya",
        "\u0410": "A",
        "\u0411": "B",
        "\u0412": "V",
        "\u0413": "G",
        "\u0414": "D",
        "\u0415": "E",
        "\u0401": "Yo",
        "\u0416": "Zh",
        "\u0417": "Z",
        "\u0418": "I",
        "\u0419": "I",
        "\u041A": "K",
        "\u041B": "L",
        "\u041C": "M",
        "\u041D": "N",
        "\u041E": "O",
        "\u041F": "P",
        "\u0420": "R",
        "\u0421": "S",
        "\u0422": "T",
        "\u0423": "U",
        "\u0424": "F",
        "\u0425": "Kh",
        "\u0426": "C",
        "\u0427": "Ch",
        "\u0428": "Sh",
        "\u0429": "Sh",
        "\u042A": "",
        "\u042B": "Y",
        "\u042C": "",
        "\u042D": "E",
        "\u042E": "Yu",
        "\u042F": "Ya",
        // Serbian
        "\u0452": "dj",
        "\u0458": "j",
        // 'љ': 'lj',  // duplicate
        // 'њ': 'nj', // duplicate
        "\u045B": "c",
        "\u045F": "dz",
        "\u0402": "Dj",
        "\u0408": "j",
        // 'Љ': 'Lj', // duplicate
        // 'Њ': 'Nj', // duplicate
        "\u040B": "C",
        "\u040F": "Dz",
        // Slovak
        "\u013E": "l",
        "\u013A": "l",
        "\u0155": "r",
        "\u013D": "L",
        "\u0139": "L",
        "\u0154": "R",
        // Turkish
        "\u015F": "s",
        "\u015E": "S",
        "\u0131": "i",
        "\u0130": "I",
        // 'ç': 'c', // duplicate
        // 'Ç': 'C', // duplicate
        // 'ü': 'u', // duplicate, see langCharMap
        // 'Ü': 'U', // duplicate, see langCharMap
        // 'ö': 'o', // duplicate, see langCharMap
        // 'Ö': 'O', // duplicate, see langCharMap
        "\u011F": "g",
        "\u011E": "G",
        // Vietnamese
        "\u1EA3": "a",
        "\u1EA2": "A",
        "\u1EB3": "a",
        "\u1EB2": "A",
        "\u1EA9": "a",
        "\u1EA8": "A",
        "\u0111": "d",
        "\u0110": "D",
        "\u1EB9": "e",
        "\u1EB8": "E",
        "\u1EBD": "e",
        "\u1EBC": "E",
        "\u1EBB": "e",
        "\u1EBA": "E",
        "\u1EBF": "e",
        "\u1EBE": "E",
        "\u1EC1": "e",
        "\u1EC0": "E",
        "\u1EC7": "e",
        "\u1EC6": "E",
        "\u1EC5": "e",
        "\u1EC4": "E",
        "\u1EC3": "e",
        "\u1EC2": "E",
        "\u1ECF": "o",
        "\u1ECD": "o",
        "\u1ECC": "o",
        "\u1ED1": "o",
        "\u1ED0": "O",
        "\u1ED3": "o",
        "\u1ED2": "O",
        "\u1ED5": "o",
        "\u1ED4": "O",
        "\u1ED9": "o",
        "\u1ED8": "O",
        "\u1ED7": "o",
        "\u1ED6": "O",
        "\u01A1": "o",
        "\u01A0": "O",
        "\u1EDB": "o",
        "\u1EDA": "O",
        "\u1EDD": "o",
        "\u1EDC": "O",
        "\u1EE3": "o",
        "\u1EE2": "O",
        "\u1EE1": "o",
        "\u1EE0": "O",
        "\u1EDE": "o",
        "\u1EDF": "o",
        "\u1ECB": "i",
        "\u1ECA": "I",
        "\u0129": "i",
        "\u0128": "I",
        "\u1EC9": "i",
        "\u1EC8": "i",
        "\u1EE7": "u",
        "\u1EE6": "U",
        "\u1EE5": "u",
        "\u1EE4": "U",
        "\u0169": "u",
        "\u0168": "U",
        "\u01B0": "u",
        "\u01AF": "U",
        "\u1EE9": "u",
        "\u1EE8": "U",
        "\u1EEB": "u",
        "\u1EEA": "U",
        "\u1EF1": "u",
        "\u1EF0": "U",
        "\u1EEF": "u",
        "\u1EEE": "U",
        "\u1EED": "u",
        "\u1EEC": "\u01B0",
        "\u1EF7": "y",
        "\u1EF6": "y",
        "\u1EF3": "y",
        "\u1EF2": "Y",
        "\u1EF5": "y",
        "\u1EF4": "Y",
        "\u1EF9": "y",
        "\u1EF8": "Y",
        "\u1EA1": "a",
        "\u1EA0": "A",
        "\u1EA5": "a",
        "\u1EA4": "A",
        "\u1EA7": "a",
        "\u1EA6": "A",
        "\u1EAD": "a",
        "\u1EAC": "A",
        "\u1EAB": "a",
        "\u1EAA": "A",
        // 'ă': 'a', // duplicate
        // 'Ă': 'A', // duplicate
        "\u1EAF": "a",
        "\u1EAE": "A",
        "\u1EB1": "a",
        "\u1EB0": "A",
        "\u1EB7": "a",
        "\u1EB6": "A",
        "\u1EB5": "a",
        "\u1EB4": "A",
        "\u24EA": "0",
        "\u2460": "1",
        "\u2461": "2",
        "\u2462": "3",
        "\u2463": "4",
        "\u2464": "5",
        "\u2465": "6",
        "\u2466": "7",
        "\u2467": "8",
        "\u2468": "9",
        "\u2469": "10",
        "\u246A": "11",
        "\u246B": "12",
        "\u246C": "13",
        "\u246D": "14",
        "\u246E": "15",
        "\u246F": "16",
        "\u2470": "17",
        "\u2471": "18",
        "\u2472": "18",
        "\u2473": "18",
        "\u24F5": "1",
        "\u24F6": "2",
        "\u24F7": "3",
        "\u24F8": "4",
        "\u24F9": "5",
        "\u24FA": "6",
        "\u24FB": "7",
        "\u24FC": "8",
        "\u24FD": "9",
        "\u24FE": "10",
        "\u24FF": "0",
        "\u24EB": "11",
        "\u24EC": "12",
        "\u24ED": "13",
        "\u24EE": "14",
        "\u24EF": "15",
        "\u24F0": "16",
        "\u24F1": "17",
        "\u24F2": "18",
        "\u24F3": "19",
        "\u24F4": "20",
        "\u24B6": "A",
        "\u24B7": "B",
        "\u24B8": "C",
        "\u24B9": "D",
        "\u24BA": "E",
        "\u24BB": "F",
        "\u24BC": "G",
        "\u24BD": "H",
        "\u24BE": "I",
        "\u24BF": "J",
        "\u24C0": "K",
        "\u24C1": "L",
        "\u24C2": "M",
        "\u24C3": "N",
        "\u24C4": "O",
        "\u24C5": "P",
        "\u24C6": "Q",
        "\u24C7": "R",
        "\u24C8": "S",
        "\u24C9": "T",
        "\u24CA": "U",
        "\u24CB": "V",
        "\u24CC": "W",
        "\u24CD": "X",
        "\u24CE": "Y",
        "\u24CF": "Z",
        "\u24D0": "a",
        "\u24D1": "b",
        "\u24D2": "c",
        "\u24D3": "d",
        "\u24D4": "e",
        "\u24D5": "f",
        "\u24D6": "g",
        "\u24D7": "h",
        "\u24D8": "i",
        "\u24D9": "j",
        "\u24DA": "k",
        "\u24DB": "l",
        "\u24DC": "m",
        "\u24DD": "n",
        "\u24DE": "o",
        "\u24DF": "p",
        "\u24E0": "q",
        "\u24E1": "r",
        "\u24E2": "s",
        "\u24E3": "t",
        "\u24E4": "u",
        "\u24E6": "v",
        "\u24E5": "w",
        "\u24E7": "x",
        "\u24E8": "y",
        "\u24E9": "z",
        // symbols
        "\u201C": '"',
        "\u201D": '"',
        "\u2018": "'",
        "\u2019": "'",
        "\u2202": "d",
        "\u0192": "f",
        "\u2122": "(TM)",
        "\xA9": "(C)",
        "\u0153": "oe",
        "\u0152": "OE",
        "\xAE": "(R)",
        "\u2020": "+",
        "\u2120": "(SM)",
        "\u2026": "...",
        "\u02DA": "o",
        "\xBA": "o",
        "\xAA": "a",
        "\u2022": "*",
        "\u104A": ",",
        "\u104B": ".",
        // currency
        "$": "USD",
        "\u20AC": "EUR",
        "\u20A2": "BRN",
        "\u20A3": "FRF",
        "\xA3": "GBP",
        "\u20A4": "ITL",
        "\u20A6": "NGN",
        "\u20A7": "ESP",
        "\u20A9": "KRW",
        "\u20AA": "ILS",
        "\u20AB": "VND",
        "\u20AD": "LAK",
        "\u20AE": "MNT",
        "\u20AF": "GRD",
        "\u20B1": "ARS",
        "\u20B2": "PYG",
        "\u20B3": "ARA",
        "\u20B4": "UAH",
        "\u20B5": "GHS",
        "\xA2": "cent",
        "\xA5": "CNY",
        "\u5143": "CNY",
        "\u5186": "YEN",
        "\uFDFC": "IRR",
        "\u20A0": "EWE",
        "\u0E3F": "THB",
        "\u20A8": "INR",
        "\u20B9": "INR",
        "\u20B0": "PF",
        "\u20BA": "TRY",
        "\u060B": "AFN",
        "\u20BC": "AZN",
        "\u043B\u0432": "BGN",
        "\u17DB": "KHR",
        "\u20A1": "CRC",
        "\u20B8": "KZT",
        "\u0434\u0435\u043D": "MKD",
        "z\u0142": "PLN",
        "\u20BD": "RUB",
        "\u20BE": "GEL"
      };
      var lookAheadCharArray = [
        // burmese
        "\u103A",
        // Dhivehi
        "\u07B0"
      ];
      var diatricMap = {
        // Burmese
        // dependent vowels
        "\u102C": "a",
        "\u102B": "a",
        "\u1031": "e",
        "\u1032": "e",
        "\u102D": "i",
        "\u102E": "i",
        "\u102D\u102F": "o",
        "\u102F": "u",
        "\u1030": "u",
        "\u1031\u102B\u1004\u103A": "aung",
        "\u1031\u102C": "aw",
        "\u1031\u102C\u103A": "aw",
        "\u1031\u102B": "aw",
        "\u1031\u102B\u103A": "aw",
        "\u103A": "\u103A",
        // this is special case but the character will be converted to latin in the code
        "\u1000\u103A": "et",
        "\u102D\u102F\u1000\u103A": "aik",
        "\u1031\u102C\u1000\u103A": "auk",
        "\u1004\u103A": "in",
        "\u102D\u102F\u1004\u103A": "aing",
        "\u1031\u102C\u1004\u103A": "aung",
        "\u1005\u103A": "it",
        "\u100A\u103A": "i",
        "\u1010\u103A": "at",
        "\u102D\u1010\u103A": "eik",
        "\u102F\u1010\u103A": "ok",
        "\u103D\u1010\u103A": "ut",
        "\u1031\u1010\u103A": "it",
        "\u1012\u103A": "d",
        "\u102D\u102F\u1012\u103A": "ok",
        "\u102F\u1012\u103A": "ait",
        "\u1014\u103A": "an",
        "\u102C\u1014\u103A": "an",
        "\u102D\u1014\u103A": "ein",
        "\u102F\u1014\u103A": "on",
        "\u103D\u1014\u103A": "un",
        "\u1015\u103A": "at",
        "\u102D\u1015\u103A": "eik",
        "\u102F\u1015\u103A": "ok",
        "\u103D\u1015\u103A": "ut",
        "\u1014\u103A\u102F\u1015\u103A": "nub",
        "\u1019\u103A": "an",
        "\u102D\u1019\u103A": "ein",
        "\u102F\u1019\u103A": "on",
        "\u103D\u1019\u103A": "un",
        "\u101A\u103A": "e",
        "\u102D\u102F\u101C\u103A": "ol",
        "\u1009\u103A": "in",
        "\u1036": "an",
        "\u102D\u1036": "ein",
        "\u102F\u1036": "on",
        // Dhivehi
        "\u07A6\u0787\u07B0": "ah",
        "\u07A6\u0781\u07B0": "ah"
      };
      var langCharMap = {
        "en": {},
        // default language
        "az": {
          // Azerbaijani
          "\xE7": "c",
          "\u0259": "e",
          "\u011F": "g",
          "\u0131": "i",
          "\xF6": "o",
          "\u015F": "s",
          "\xFC": "u",
          "\xC7": "C",
          "\u018F": "E",
          "\u011E": "G",
          "\u0130": "I",
          "\xD6": "O",
          "\u015E": "S",
          "\xDC": "U"
        },
        "cs": {
          // Czech
          "\u010D": "c",
          "\u010F": "d",
          "\u011B": "e",
          "\u0148": "n",
          "\u0159": "r",
          "\u0161": "s",
          "\u0165": "t",
          "\u016F": "u",
          "\u017E": "z",
          "\u010C": "C",
          "\u010E": "D",
          "\u011A": "E",
          "\u0147": "N",
          "\u0158": "R",
          "\u0160": "S",
          "\u0164": "T",
          "\u016E": "U",
          "\u017D": "Z"
        },
        "fi": {
          // Finnish
          // 'å': 'a', duplicate see charMap/latin
          // 'Å': 'A', duplicate see charMap/latin
          "\xE4": "a",
          // ok
          "\xC4": "A",
          // ok
          "\xF6": "o",
          // ok
          "\xD6": "O"
          // ok
        },
        "hu": {
          // Hungarian
          "\xE4": "a",
          // ok
          "\xC4": "A",
          // ok
          // 'á': 'a', duplicate see charMap/latin
          // 'Á': 'A', duplicate see charMap/latin
          "\xF6": "o",
          // ok
          "\xD6": "O",
          // ok
          // 'ő': 'o', duplicate see charMap/latin
          // 'Ő': 'O', duplicate see charMap/latin
          "\xFC": "u",
          "\xDC": "U",
          "\u0171": "u",
          "\u0170": "U"
        },
        "lt": {
          // Lithuanian
          "\u0105": "a",
          "\u010D": "c",
          "\u0119": "e",
          "\u0117": "e",
          "\u012F": "i",
          "\u0161": "s",
          "\u0173": "u",
          "\u016B": "u",
          "\u017E": "z",
          "\u0104": "A",
          "\u010C": "C",
          "\u0118": "E",
          "\u0116": "E",
          "\u012E": "I",
          "\u0160": "S",
          "\u0172": "U",
          "\u016A": "U"
        },
        "lv": {
          // Latvian
          "\u0101": "a",
          "\u010D": "c",
          "\u0113": "e",
          "\u0123": "g",
          "\u012B": "i",
          "\u0137": "k",
          "\u013C": "l",
          "\u0146": "n",
          "\u0161": "s",
          "\u016B": "u",
          "\u017E": "z",
          "\u0100": "A",
          "\u010C": "C",
          "\u0112": "E",
          "\u0122": "G",
          "\u012A": "i",
          "\u0136": "k",
          "\u013B": "L",
          "\u0145": "N",
          "\u0160": "S",
          "\u016A": "u",
          "\u017D": "Z"
        },
        "pl": {
          // Polish
          "\u0105": "a",
          "\u0107": "c",
          "\u0119": "e",
          "\u0142": "l",
          "\u0144": "n",
          "\xF3": "o",
          "\u015B": "s",
          "\u017A": "z",
          "\u017C": "z",
          "\u0104": "A",
          "\u0106": "C",
          "\u0118": "e",
          "\u0141": "L",
          "\u0143": "N",
          "\xD3": "O",
          "\u015A": "S",
          "\u0179": "Z",
          "\u017B": "Z"
        },
        "sv": {
          // Swedish
          // 'å': 'a', duplicate see charMap/latin
          // 'Å': 'A', duplicate see charMap/latin
          "\xE4": "a",
          // ok
          "\xC4": "A",
          // ok
          "\xF6": "o",
          // ok
          "\xD6": "O"
          // ok
        },
        "sk": {
          // Slovak
          "\xE4": "a",
          "\xC4": "A"
        },
        "sr": {
          // Serbian
          "\u0459": "lj",
          "\u045A": "nj",
          "\u0409": "Lj",
          "\u040A": "Nj",
          "\u0111": "dj",
          "\u0110": "Dj"
        },
        "tr": {
          // Turkish
          "\xDC": "U",
          "\xD6": "O",
          "\xFC": "u",
          "\xF6": "o"
        }
      };
      var symbolMap = {
        "ar": {
          "\u2206": "delta",
          "\u221E": "la-nihaya",
          "\u2665": "hob",
          "&": "wa",
          "|": "aw",
          "<": "aqal-men",
          ">": "akbar-men",
          "\u2211": "majmou",
          "\xA4": "omla"
        },
        "az": {},
        "ca": {
          "\u2206": "delta",
          "\u221E": "infinit",
          "\u2665": "amor",
          "&": "i",
          "|": "o",
          "<": "menys que",
          ">": "mes que",
          "\u2211": "suma dels",
          "\xA4": "moneda"
        },
        "cs": {
          "\u2206": "delta",
          "\u221E": "nekonecno",
          "\u2665": "laska",
          "&": "a",
          "|": "nebo",
          "<": "mensi nez",
          ">": "vetsi nez",
          "\u2211": "soucet",
          "\xA4": "mena"
        },
        "de": {
          "\u2206": "delta",
          "\u221E": "unendlich",
          "\u2665": "Liebe",
          "&": "und",
          "|": "oder",
          "<": "kleiner als",
          ">": "groesser als",
          "\u2211": "Summe von",
          "\xA4": "Waehrung"
        },
        "dv": {
          "\u2206": "delta",
          "\u221E": "kolunulaa",
          "\u2665": "loabi",
          "&": "aai",
          "|": "noonee",
          "<": "ah vure kuda",
          ">": "ah vure bodu",
          "\u2211": "jumula",
          "\xA4": "faisaa"
        },
        "en": {
          "\u2206": "delta",
          "\u221E": "infinity",
          "\u2665": "love",
          "&": "and",
          "|": "or",
          "<": "less than",
          ">": "greater than",
          "\u2211": "sum",
          "\xA4": "currency"
        },
        "es": {
          "\u2206": "delta",
          "\u221E": "infinito",
          "\u2665": "amor",
          "&": "y",
          "|": "u",
          "<": "menos que",
          ">": "mas que",
          "\u2211": "suma de los",
          "\xA4": "moneda"
        },
        "fa": {
          "\u2206": "delta",
          "\u221E": "bi-nahayat",
          "\u2665": "eshgh",
          "&": "va",
          "|": "ya",
          "<": "kamtar-az",
          ">": "bishtar-az",
          "\u2211": "majmooe",
          "\xA4": "vahed"
        },
        "fi": {
          "\u2206": "delta",
          "\u221E": "aarettomyys",
          "\u2665": "rakkaus",
          "&": "ja",
          "|": "tai",
          "<": "pienempi kuin",
          ">": "suurempi kuin",
          "\u2211": "summa",
          "\xA4": "valuutta"
        },
        "fr": {
          "\u2206": "delta",
          "\u221E": "infiniment",
          "\u2665": "Amour",
          "&": "et",
          "|": "ou",
          "<": "moins que",
          ">": "superieure a",
          "\u2211": "somme des",
          "\xA4": "monnaie"
        },
        "ge": {
          "\u2206": "delta",
          "\u221E": "usasruloba",
          "\u2665": "siqvaruli",
          "&": "da",
          "|": "an",
          "<": "naklebi",
          ">": "meti",
          "\u2211": "jami",
          "\xA4": "valuta"
        },
        "gr": {},
        "hu": {
          "\u2206": "delta",
          "\u221E": "vegtelen",
          "\u2665": "szerelem",
          "&": "es",
          "|": "vagy",
          "<": "kisebb mint",
          ">": "nagyobb mint",
          "\u2211": "szumma",
          "\xA4": "penznem"
        },
        "it": {
          "\u2206": "delta",
          "\u221E": "infinito",
          "\u2665": "amore",
          "&": "e",
          "|": "o",
          "<": "minore di",
          ">": "maggiore di",
          "\u2211": "somma",
          "\xA4": "moneta"
        },
        "lt": {
          "\u2206": "delta",
          "\u221E": "begalybe",
          "\u2665": "meile",
          "&": "ir",
          "|": "ar",
          "<": "maziau nei",
          ">": "daugiau nei",
          "\u2211": "suma",
          "\xA4": "valiuta"
        },
        "lv": {
          "\u2206": "delta",
          "\u221E": "bezgaliba",
          "\u2665": "milestiba",
          "&": "un",
          "|": "vai",
          "<": "mazak neka",
          ">": "lielaks neka",
          "\u2211": "summa",
          "\xA4": "valuta"
        },
        "my": {
          "\u2206": "kwahkhyaet",
          "\u221E": "asaonasme",
          "\u2665": "akhyait",
          "&": "nhin",
          "|": "tho",
          "<": "ngethaw",
          ">": "kyithaw",
          "\u2211": "paungld",
          "\xA4": "ngwekye"
        },
        "mk": {},
        "nl": {
          "\u2206": "delta",
          "\u221E": "oneindig",
          "\u2665": "liefde",
          "&": "en",
          "|": "of",
          "<": "kleiner dan",
          ">": "groter dan",
          "\u2211": "som",
          "\xA4": "valuta"
        },
        "pl": {
          "\u2206": "delta",
          "\u221E": "nieskonczonosc",
          "\u2665": "milosc",
          "&": "i",
          "|": "lub",
          "<": "mniejsze niz",
          ">": "wieksze niz",
          "\u2211": "suma",
          "\xA4": "waluta"
        },
        "pt": {
          "\u2206": "delta",
          "\u221E": "infinito",
          "\u2665": "amor",
          "&": "e",
          "|": "ou",
          "<": "menor que",
          ">": "maior que",
          "\u2211": "soma",
          "\xA4": "moeda"
        },
        "ro": {
          "\u2206": "delta",
          "\u221E": "infinit",
          "\u2665": "dragoste",
          "&": "si",
          "|": "sau",
          "<": "mai mic ca",
          ">": "mai mare ca",
          "\u2211": "suma",
          "\xA4": "valuta"
        },
        "ru": {
          "\u2206": "delta",
          "\u221E": "beskonechno",
          "\u2665": "lubov",
          "&": "i",
          "|": "ili",
          "<": "menshe",
          ">": "bolshe",
          "\u2211": "summa",
          "\xA4": "valjuta"
        },
        "sk": {
          "\u2206": "delta",
          "\u221E": "nekonecno",
          "\u2665": "laska",
          "&": "a",
          "|": "alebo",
          "<": "menej ako",
          ">": "viac ako",
          "\u2211": "sucet",
          "\xA4": "mena"
        },
        "sr": {},
        "tr": {
          "\u2206": "delta",
          "\u221E": "sonsuzluk",
          "\u2665": "ask",
          "&": "ve",
          "|": "veya",
          "<": "kucuktur",
          ">": "buyuktur",
          "\u2211": "toplam",
          "\xA4": "para birimi"
        },
        "uk": {
          "\u2206": "delta",
          "\u221E": "bezkinechnist",
          "\u2665": "lubov",
          "&": "i",
          "|": "abo",
          "<": "menshe",
          ">": "bilshe",
          "\u2211": "suma",
          "\xA4": "valjuta"
        },
        "vn": {
          "\u2206": "delta",
          "\u221E": "vo cuc",
          "\u2665": "yeu",
          "&": "va",
          "|": "hoac",
          "<": "nho hon",
          ">": "lon hon",
          "\u2211": "tong",
          "\xA4": "tien te"
        }
      };
      var uricChars = [";", "?", ":", "@", "&", "=", "+", "$", ",", "/"].join("");
      var uricNoSlashChars = [";", "?", ":", "@", "&", "=", "+", "$", ","].join("");
      var markChars = [".", "!", "~", "*", "'", "(", ")"].join("");
      var getSlug = function getSlug2(input, opts) {
        var separator = "-";
        var result = "";
        var diatricString = "";
        var convertSymbols = true;
        var customReplacements = {};
        var maintainCase;
        var titleCase;
        var truncate;
        var uricFlag;
        var uricNoSlashFlag;
        var markFlag;
        var symbol;
        var langChar;
        var lucky;
        var i;
        var ch;
        var l;
        var lastCharWasSymbol;
        var lastCharWasDiatric;
        var allowedChars = "";
        if (typeof input !== "string") {
          return "";
        }
        if (typeof opts === "string") {
          separator = opts;
        }
        symbol = symbolMap.en;
        langChar = langCharMap.en;
        if (typeof opts === "object") {
          maintainCase = opts.maintainCase || false;
          customReplacements = opts.custom && typeof opts.custom === "object" ? opts.custom : customReplacements;
          truncate = +opts.truncate > 1 && opts.truncate || false;
          uricFlag = opts.uric || false;
          uricNoSlashFlag = opts.uricNoSlash || false;
          markFlag = opts.mark || false;
          convertSymbols = opts.symbols === false || opts.lang === false ? false : true;
          separator = opts.separator || separator;
          if (uricFlag) {
            allowedChars += uricChars;
          }
          if (uricNoSlashFlag) {
            allowedChars += uricNoSlashChars;
          }
          if (markFlag) {
            allowedChars += markChars;
          }
          symbol = opts.lang && symbolMap[opts.lang] && convertSymbols ? symbolMap[opts.lang] : convertSymbols ? symbolMap.en : {};
          langChar = opts.lang && langCharMap[opts.lang] ? langCharMap[opts.lang] : opts.lang === false || opts.lang === true ? {} : langCharMap.en;
          if (opts.titleCase && typeof opts.titleCase.length === "number" && Array.prototype.toString.call(opts.titleCase)) {
            opts.titleCase.forEach(function(v) {
              customReplacements[v + ""] = v + "";
            });
            titleCase = true;
          } else {
            titleCase = !!opts.titleCase;
          }
          if (opts.custom && typeof opts.custom.length === "number" && Array.prototype.toString.call(opts.custom)) {
            opts.custom.forEach(function(v) {
              customReplacements[v + ""] = v + "";
            });
          }
          Object.keys(customReplacements).forEach(function(v) {
            var r;
            if (v.length > 1) {
              r = new RegExp("\\b" + escapeChars(v) + "\\b", "gi");
            } else {
              r = new RegExp(escapeChars(v), "gi");
            }
            input = input.replace(r, customReplacements[v]);
          });
          for (ch in customReplacements) {
            allowedChars += ch;
          }
        }
        allowedChars += separator;
        allowedChars = escapeChars(allowedChars);
        input = input.replace(/(^\s+|\s+$)/g, "");
        lastCharWasSymbol = false;
        lastCharWasDiatric = false;
        for (i = 0, l = input.length; i < l; i++) {
          ch = input[i];
          if (isReplacedCustomChar(ch, customReplacements)) {
            lastCharWasSymbol = false;
          } else if (langChar[ch]) {
            ch = lastCharWasSymbol && langChar[ch].match(/[A-Za-z0-9]/) ? " " + langChar[ch] : langChar[ch];
            lastCharWasSymbol = false;
          } else if (ch in charMap) {
            if (i + 1 < l && lookAheadCharArray.indexOf(input[i + 1]) >= 0) {
              diatricString += ch;
              ch = "";
            } else if (lastCharWasDiatric === true) {
              ch = diatricMap[diatricString] + charMap[ch];
              diatricString = "";
            } else {
              ch = lastCharWasSymbol && charMap[ch].match(/[A-Za-z0-9]/) ? " " + charMap[ch] : charMap[ch];
            }
            lastCharWasSymbol = false;
            lastCharWasDiatric = false;
          } else if (ch in diatricMap) {
            diatricString += ch;
            ch = "";
            if (i === l - 1) {
              ch = diatricMap[diatricString];
            }
            lastCharWasDiatric = true;
          } else if (
            // process symbol chars
            symbol[ch] && !(uricFlag && uricChars.indexOf(ch) !== -1) && !(uricNoSlashFlag && uricNoSlashChars.indexOf(ch) !== -1)
          ) {
            ch = lastCharWasSymbol || result.substr(-1).match(/[A-Za-z0-9]/) ? separator + symbol[ch] : symbol[ch];
            ch += input[i + 1] !== void 0 && input[i + 1].match(/[A-Za-z0-9]/) ? separator : "";
            lastCharWasSymbol = true;
          } else {
            if (lastCharWasDiatric === true) {
              ch = diatricMap[diatricString] + ch;
              diatricString = "";
              lastCharWasDiatric = false;
            } else if (lastCharWasSymbol && (/[A-Za-z0-9]/.test(ch) || result.substr(-1).match(/A-Za-z0-9]/))) {
              ch = " " + ch;
            }
            lastCharWasSymbol = false;
          }
          result += ch.replace(new RegExp("[^\\w\\s" + allowedChars + "_-]", "g"), separator);
        }
        if (titleCase) {
          result = result.replace(/(\w)(\S*)/g, function(_, i2, r) {
            var j = i2.toUpperCase() + (r !== null ? r : "");
            return Object.keys(customReplacements).indexOf(j.toLowerCase()) < 0 ? j : j.toLowerCase();
          });
        }
        result = result.replace(/\s+/g, separator).replace(new RegExp("\\" + separator + "+", "g"), separator).replace(new RegExp("(^\\" + separator + "+|\\" + separator + "+$)", "g"), "");
        if (truncate && result.length > truncate) {
          lucky = result.charAt(truncate) === separator;
          result = result.slice(0, truncate);
          if (!lucky) {
            result = result.slice(0, result.lastIndexOf(separator));
          }
        }
        if (!maintainCase && !titleCase) {
          result = result.toLowerCase();
        }
        return result;
      };
      var createSlug = function createSlug2(opts) {
        return function getSlugWithConfig(input) {
          return getSlug(input, opts);
        };
      };
      var escapeChars = function escapeChars2(input) {
        return input.replace(/[-\\^$*+?.()|[\]{}\/]/g, "\\$&");
      };
      var isReplacedCustomChar = function(ch, customReplacements) {
        for (var c in customReplacements) {
          if (customReplacements[c] === ch) {
            return true;
          }
        }
      };
      if (typeof module !== "undefined" && module.exports) {
        module.exports = getSlug;
        module.exports.createSlug = createSlug;
      } else if (typeof define !== "undefined" && define.amd) {
        define([], function() {
          return getSlug;
        });
      } else {
        try {
          if (root.getSlug || root.createSlug) {
            throw "speakingurl: globals exists /(getSlug|createSlug)/";
          } else {
            root.getSlug = getSlug;
            root.createSlug = createSlug;
          }
        } catch (e) {
        }
      }
    })(exports);
  }
});

// ../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js
var require_speakingurl2 = __commonJS({
  "../../node_modules/.pnpm/speakingurl@14.0.1/node_modules/speakingurl/index.js"(exports, module) {
    "use strict";
    init_esm_shims();
    module.exports = require_speakingurl();
  }
});

// src/index.ts
init_esm_shims();

// src/core/index.ts
init_esm_shims();


// src/compat/index.ts
init_esm_shims();

function onLegacyDevToolsPluginApiAvailable(cb) {
  if (_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__) {
    cb();
    return;
  }
  Object.defineProperty(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target, "__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__", {
    set(value) {
      if (value)
        cb();
    },
    configurable: true
  });
}

// src/ctx/index.ts
init_esm_shims();


// src/ctx/api.ts
init_esm_shims();


// src/core/component-highlighter/index.ts
init_esm_shims();

// src/core/component/state/bounding-rect.ts
init_esm_shims();

// src/core/component/utils/index.ts
init_esm_shims();

function getComponentTypeName(options) {
  var _a25;
  const name = options.name || options._componentTag || options.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__ || options.__name;
  if (name === "index" && ((_a25 = options.__file) == null ? void 0 : _a25.endsWith("index.vue"))) {
    return "";
  }
  return name;
}
function getComponentFileName(options) {
  const file = options.__file;
  if (file)
    return (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.classify)((0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.basename)(file, ".vue"));
}
function getComponentName(options) {
  const name = options.displayName || options.name || options._componentTag;
  if (name)
    return name;
  return getComponentFileName(options);
}
function saveComponentGussedName(instance, name) {
  instance.type.__VUE_DEVTOOLS_COMPONENT_GUSSED_NAME__ = name;
  return name;
}
function getAppRecord(instance) {
  if (instance.__VUE_DEVTOOLS_NEXT_APP_RECORD__)
    return instance.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
  else if (instance.root)
    return instance.appContext.app.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
}
async function getComponentId(options) {
  const { app, uid, instance } = options;
  try {
    if (instance.__VUE_DEVTOOLS_NEXT_UID__)
      return instance.__VUE_DEVTOOLS_NEXT_UID__;
    const appRecord = await getAppRecord(app);
    if (!appRecord)
      return null;
    const isRoot = appRecord.rootInstance === instance;
    return `${appRecord.id}:${isRoot ? "root" : uid}`;
  } catch (e) {
  }
}
function isFragment(instance) {
  var _a25, _b25;
  const subTreeType = (_a25 = instance.subTree) == null ? void 0 : _a25.type;
  const appRecord = getAppRecord(instance);
  if (appRecord) {
    return ((_b25 = appRecord == null ? void 0 : appRecord.types) == null ? void 0 : _b25.Fragment) === subTreeType;
  }
  return false;
}
function isBeingDestroyed(instance) {
  return instance._isBeingDestroyed || instance.isUnmounted;
}
function getInstanceName(instance) {
  var _a25, _b25, _c;
  const name = getComponentTypeName((instance == null ? void 0 : instance.type) || {});
  if (name)
    return name;
  if ((instance == null ? void 0 : instance.root) === instance)
    return "Root";
  for (const key in (_b25 = (_a25 = instance.parent) == null ? void 0 : _a25.type) == null ? void 0 : _b25.components) {
    if (instance.parent.type.components[key] === (instance == null ? void 0 : instance.type))
      return saveComponentGussedName(instance, key);
  }
  for (const key in (_c = instance.appContext) == null ? void 0 : _c.components) {
    if (instance.appContext.components[key] === (instance == null ? void 0 : instance.type))
      return saveComponentGussedName(instance, key);
  }
  const fileName = getComponentFileName((instance == null ? void 0 : instance.type) || {});
  if (fileName)
    return fileName;
  return "Anonymous Component";
}
function getUniqueComponentId(instance) {
  var _a25, _b25, _c;
  const appId = (_c = (_b25 = (_a25 = instance == null ? void 0 : instance.appContext) == null ? void 0 : _a25.app) == null ? void 0 : _b25.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__) != null ? _c : 0;
  const instanceId = instance === (instance == null ? void 0 : instance.root) ? "root" : instance.uid;
  return `${appId}:${instanceId}`;
}
function getRenderKey(value) {
  if (value == null)
    return "";
  if (typeof value === "number")
    return value;
  else if (typeof value === "string")
    return `'${value}'`;
  else if (Array.isArray(value))
    return "Array";
  else
    return "Object";
}
function returnError(cb) {
  try {
    return cb();
  } catch (e) {
    return e;
  }
}
function getComponentInstance(appRecord, instanceId) {
  instanceId = instanceId || `${appRecord.id}:root`;
  const instance = appRecord.instanceMap.get(instanceId);
  return instance || appRecord.instanceMap.get(":root");
}
function ensurePropertyExists(obj, key, skipObjCheck = false) {
  return skipObjCheck ? key in obj : typeof obj === "object" && obj !== null ? key in obj : false;
}

// src/core/component/state/bounding-rect.ts
function createRect() {
  const rect = {
    top: 0,
    bottom: 0,
    left: 0,
    right: 0,
    get width() {
      return rect.right - rect.left;
    },
    get height() {
      return rect.bottom - rect.top;
    }
  };
  return rect;
}
var range;
function getTextRect(node) {
  if (!range)
    range = document.createRange();
  range.selectNode(node);
  return range.getBoundingClientRect();
}
function getFragmentRect(vnode) {
  const rect = createRect();
  if (!vnode.children)
    return rect;
  for (let i = 0, l = vnode.children.length; i < l; i++) {
    const childVnode = vnode.children[i];
    let childRect;
    if (childVnode.component) {
      childRect = getComponentBoundingRect(childVnode.component);
    } else if (childVnode.el) {
      const el = childVnode.el;
      if (el.nodeType === 1 || el.getBoundingClientRect)
        childRect = el.getBoundingClientRect();
      else if (el.nodeType === 3 && el.data.trim())
        childRect = getTextRect(el);
    }
    if (childRect)
      mergeRects(rect, childRect);
  }
  return rect;
}
function mergeRects(a, b) {
  if (!a.top || b.top < a.top)
    a.top = b.top;
  if (!a.bottom || b.bottom > a.bottom)
    a.bottom = b.bottom;
  if (!a.left || b.left < a.left)
    a.left = b.left;
  if (!a.right || b.right > a.right)
    a.right = b.right;
  return a;
}
var DEFAULT_RECT = {
  top: 0,
  left: 0,
  right: 0,
  bottom: 0,
  width: 0,
  height: 0
};
function getComponentBoundingRect(instance) {
  const el = instance.subTree.el;
  if (typeof window === "undefined") {
    return DEFAULT_RECT;
  }
  if (isFragment(instance))
    return getFragmentRect(instance.subTree);
  else if ((el == null ? void 0 : el.nodeType) === 1)
    return el == null ? void 0 : el.getBoundingClientRect();
  else if (instance.subTree.component)
    return getComponentBoundingRect(instance.subTree.component);
  else
    return DEFAULT_RECT;
}

// src/core/component/tree/el.ts
init_esm_shims();
function getRootElementsFromComponentInstance(instance) {
  if (isFragment(instance))
    return getFragmentRootElements(instance.subTree);
  if (!instance.subTree)
    return [];
  return [instance.subTree.el];
}
function getFragmentRootElements(vnode) {
  if (!vnode.children)
    return [];
  const list = [];
  vnode.children.forEach((childVnode) => {
    if (childVnode.component)
      list.push(...getRootElementsFromComponentInstance(childVnode.component));
    else if (childVnode == null ? void 0 : childVnode.el)
      list.push(childVnode.el);
  });
  return list;
}

// src/core/component-highlighter/index.ts
var CONTAINER_ELEMENT_ID = "__vue-devtools-component-inspector__";
var CARD_ELEMENT_ID = "__vue-devtools-component-inspector__card__";
var COMPONENT_NAME_ELEMENT_ID = "__vue-devtools-component-inspector__name__";
var INDICATOR_ELEMENT_ID = "__vue-devtools-component-inspector__indicator__";
var containerStyles = {
  display: "block",
  zIndex: 2147483640,
  position: "fixed",
  backgroundColor: "#42b88325",
  border: "1px solid #42b88350",
  borderRadius: "5px",
  transition: "all 0.1s ease-in",
  pointerEvents: "none"
};
var cardStyles = {
  fontFamily: "Arial, Helvetica, sans-serif",
  padding: "5px 8px",
  borderRadius: "4px",
  textAlign: "left",
  position: "absolute",
  left: 0,
  color: "#e9e9e9",
  fontSize: "14px",
  fontWeight: 600,
  lineHeight: "24px",
  backgroundColor: "#42b883",
  boxShadow: "0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px -1px rgba(0, 0, 0, 0.1)"
};
var indicatorStyles = {
  display: "inline-block",
  fontWeight: 400,
  fontStyle: "normal",
  fontSize: "12px",
  opacity: 0.7
};
function getContainerElement() {
  return document.getElementById(CONTAINER_ELEMENT_ID);
}
function getCardElement() {
  return document.getElementById(CARD_ELEMENT_ID);
}
function getIndicatorElement() {
  return document.getElementById(INDICATOR_ELEMENT_ID);
}
function getNameElement() {
  return document.getElementById(COMPONENT_NAME_ELEMENT_ID);
}
function getStyles(bounds) {
  return {
    left: `${Math.round(bounds.left * 100) / 100}px`,
    top: `${Math.round(bounds.top * 100) / 100}px`,
    width: `${Math.round(bounds.width * 100) / 100}px`,
    height: `${Math.round(bounds.height * 100) / 100}px`
  };
}
function create(options) {
  var _a25;
  const containerEl = document.createElement("div");
  containerEl.id = (_a25 = options.elementId) != null ? _a25 : CONTAINER_ELEMENT_ID;
  Object.assign(containerEl.style, {
    ...containerStyles,
    ...getStyles(options.bounds),
    ...options.style
  });
  const cardEl = document.createElement("span");
  cardEl.id = CARD_ELEMENT_ID;
  Object.assign(cardEl.style, {
    ...cardStyles,
    top: options.bounds.top < 35 ? 0 : "-35px"
  });
  const nameEl = document.createElement("span");
  nameEl.id = COMPONENT_NAME_ELEMENT_ID;
  nameEl.innerHTML = `&lt;${options.name}&gt;&nbsp;&nbsp;`;
  const indicatorEl = document.createElement("i");
  indicatorEl.id = INDICATOR_ELEMENT_ID;
  indicatorEl.innerHTML = `${Math.round(options.bounds.width * 100) / 100} x ${Math.round(options.bounds.height * 100) / 100}`;
  Object.assign(indicatorEl.style, indicatorStyles);
  cardEl.appendChild(nameEl);
  cardEl.appendChild(indicatorEl);
  containerEl.appendChild(cardEl);
  document.body.appendChild(containerEl);
  return containerEl;
}
function update(options) {
  const containerEl = getContainerElement();
  const cardEl = getCardElement();
  const nameEl = getNameElement();
  const indicatorEl = getIndicatorElement();
  if (containerEl) {
    Object.assign(containerEl.style, {
      ...containerStyles,
      ...getStyles(options.bounds)
    });
    Object.assign(cardEl.style, {
      top: options.bounds.top < 35 ? 0 : "-35px"
    });
    nameEl.innerHTML = `&lt;${options.name}&gt;&nbsp;&nbsp;`;
    indicatorEl.innerHTML = `${Math.round(options.bounds.width * 100) / 100} x ${Math.round(options.bounds.height * 100) / 100}`;
  }
}
function highlight(instance) {
  const bounds = getComponentBoundingRect(instance);
  if (!bounds.width && !bounds.height)
    return;
  const name = getInstanceName(instance);
  const container = getContainerElement();
  container ? update({ bounds, name }) : create({ bounds, name });
}
function unhighlight() {
  const el = getContainerElement();
  if (el)
    el.style.display = "none";
}
var inspectInstance = null;
function inspectFn(e) {
  const target22 = e.target;
  if (target22) {
    const instance = target22.__vueParentComponent;
    if (instance) {
      inspectInstance = instance;
      const el = instance.vnode.el;
      if (el) {
        const bounds = getComponentBoundingRect(instance);
        const name = getInstanceName(instance);
        const container = getContainerElement();
        container ? update({ bounds, name }) : create({ bounds, name });
      }
    }
  }
}
function selectComponentFn(e, cb) {
  e.preventDefault();
  e.stopPropagation();
  if (inspectInstance) {
    const uniqueComponentId = getUniqueComponentId(inspectInstance);
    cb(uniqueComponentId);
  }
}
var inspectComponentHighLighterSelectFn = null;
function cancelInspectComponentHighLighter() {
  unhighlight();
  window.removeEventListener("mouseover", inspectFn);
  window.removeEventListener("click", inspectComponentHighLighterSelectFn, true);
  inspectComponentHighLighterSelectFn = null;
}
function inspectComponentHighLighter() {
  window.addEventListener("mouseover", inspectFn);
  return new Promise((resolve) => {
    function onSelect(e) {
      e.preventDefault();
      e.stopPropagation();
      selectComponentFn(e, (id) => {
        window.removeEventListener("click", onSelect, true);
        inspectComponentHighLighterSelectFn = null;
        window.removeEventListener("mouseover", inspectFn);
        const el = getContainerElement();
        if (el)
          el.style.display = "none";
        resolve(JSON.stringify({ id }));
      });
    }
    inspectComponentHighLighterSelectFn = onSelect;
    window.addEventListener("click", onSelect, true);
  });
}
function scrollToComponent(options) {
  const instance = getComponentInstance(activeAppRecord.value, options.id);
  if (instance) {
    const [el] = getRootElementsFromComponentInstance(instance);
    if (typeof el.scrollIntoView === "function") {
      el.scrollIntoView({
        behavior: "smooth"
      });
    } else {
      const bounds = getComponentBoundingRect(instance);
      const scrollTarget = document.createElement("div");
      const styles = {
        ...getStyles(bounds),
        position: "absolute"
      };
      Object.assign(scrollTarget.style, styles);
      document.body.appendChild(scrollTarget);
      scrollTarget.scrollIntoView({
        behavior: "smooth"
      });
      setTimeout(() => {
        document.body.removeChild(scrollTarget);
      }, 2e3);
    }
    setTimeout(() => {
      const bounds = getComponentBoundingRect(instance);
      if (bounds.width || bounds.height) {
        const name = getInstanceName(instance);
        const el2 = getContainerElement();
        el2 ? update({ ...options, name, bounds }) : create({ ...options, name, bounds });
        setTimeout(() => {
          if (el2)
            el2.style.display = "none";
        }, 1500);
      }
    }, 1200);
  }
}

// src/core/component-inspector/index.ts
init_esm_shims();

var _a, _b;
(_b = (_a = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__) != null ? _b : _a.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__ = true;
function toggleComponentInspectorEnabled(enabled) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_COMPONENT_INSPECTOR_ENABLED__ = enabled;
}
function waitForInspectorInit(cb) {
  let total = 0;
  const timer = setInterval(() => {
    if (_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_INSPECTOR__) {
      clearInterval(timer);
      total += 30;
      cb();
    }
    if (total >= /* 5s */
    5e3)
      clearInterval(timer);
  }, 30);
}
function setupInspector() {
  const inspector = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_INSPECTOR__;
  const _openInEditor = inspector.openInEditor;
  inspector.openInEditor = async (...params) => {
    inspector.disable();
    _openInEditor(...params);
  };
}
function getComponentInspector() {
  return new Promise((resolve) => {
    function setup() {
      setupInspector();
      resolve(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_INSPECTOR__);
    }
    if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_INSPECTOR__) {
      waitForInspectorInit(() => {
        setup();
      });
    } else {
      setup();
    }
  });
}

// src/core/component/state/editor.ts
init_esm_shims();

// src/shared/stub-vue.ts
init_esm_shims();
function isReadonly(value) {
  return !!(value && value["__v_isReadonly" /* IS_READONLY */]);
}
function isReactive(value) {
  if (isReadonly(value)) {
    return isReactive(value["__v_raw" /* RAW */]);
  }
  return !!(value && value["__v_isReactive" /* IS_REACTIVE */]);
}
function isRef(r) {
  return !!(r && r.__v_isRef === true);
}
function toRaw(observed) {
  const raw = observed && observed["__v_raw" /* RAW */];
  return raw ? toRaw(raw) : observed;
}
var Fragment = Symbol.for("v-fgt");

// src/core/component/state/editor.ts
var StateEditor = class {
  constructor() {
    this.refEditor = new RefStateEditor();
  }
  set(object, path, value, cb) {
    const sections = Array.isArray(path) ? path : path.split(".");
    const markRef = false;
    while (sections.length > 1) {
      const section = sections.shift();
      if (object instanceof Map)
        object = object.get(section);
      else if (object instanceof Set)
        object = Array.from(object.values())[section];
      else object = object[section];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
    }
    const field = sections[0];
    const item = this.refEditor.get(object)[field];
    if (cb) {
      cb(object, field, value);
    } else {
      if (this.refEditor.isRef(item))
        this.refEditor.set(item, value);
      else if (markRef)
        object[field] = value;
      else
        object[field] = value;
    }
  }
  get(object, path) {
    const sections = Array.isArray(path) ? path : path.split(".");
    for (let i = 0; i < sections.length; i++) {
      if (object instanceof Map)
        object = object.get(sections[i]);
      else
        object = object[sections[i]];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
      if (!object)
        return void 0;
    }
    return object;
  }
  has(object, path, parent = false) {
    if (typeof object === "undefined")
      return false;
    const sections = Array.isArray(path) ? path.slice() : path.split(".");
    const size = !parent ? 1 : 2;
    while (object && sections.length > size) {
      const section = sections.shift();
      object = object[section];
      if (this.refEditor.isRef(object))
        object = this.refEditor.get(object);
    }
    return object != null && Object.prototype.hasOwnProperty.call(object, sections[0]);
  }
  createDefaultSetCallback(state) {
    return (object, field, value) => {
      if (state.remove || state.newKey) {
        if (Array.isArray(object))
          object.splice(field, 1);
        else if (toRaw(object) instanceof Map)
          object.delete(field);
        else if (toRaw(object) instanceof Set)
          object.delete(Array.from(object.values())[field]);
        else Reflect.deleteProperty(object, field);
      }
      if (!state.remove) {
        const target22 = object[state.newKey || field];
        if (this.refEditor.isRef(target22))
          this.refEditor.set(target22, value);
        else if (toRaw(object) instanceof Map)
          object.set(state.newKey || field, value);
        else if (toRaw(object) instanceof Set)
          object.add(value);
        else
          object[state.newKey || field] = value;
      }
    };
  }
};
var RefStateEditor = class {
  set(ref, value) {
    if (isRef(ref)) {
      ref.value = value;
    } else {
      if (ref instanceof Set && Array.isArray(value)) {
        ref.clear();
        value.forEach((v) => ref.add(v));
        return;
      }
      const currentKeys = Object.keys(value);
      if (ref instanceof Map) {
        const previousKeysSet2 = new Set(ref.keys());
        currentKeys.forEach((key) => {
          ref.set(key, Reflect.get(value, key));
          previousKeysSet2.delete(key);
        });
        previousKeysSet2.forEach((key) => ref.delete(key));
        return;
      }
      const previousKeysSet = new Set(Object.keys(ref));
      currentKeys.forEach((key) => {
        Reflect.set(ref, key, Reflect.get(value, key));
        previousKeysSet.delete(key);
      });
      previousKeysSet.forEach((key) => Reflect.deleteProperty(ref, key));
    }
  }
  get(ref) {
    return isRef(ref) ? ref.value : ref;
  }
  isRef(ref) {
    return isRef(ref) || isReactive(ref);
  }
};
async function editComponentState(payload, stateEditor2) {
  const { path, nodeId, state, type } = payload;
  const instance = getComponentInstance(activeAppRecord.value, nodeId);
  if (!instance)
    return;
  const targetPath = path.slice();
  let target22;
  if (Object.keys(instance.props).includes(path[0])) {
    target22 = instance.props;
  } else if (instance.devtoolsRawSetupState && Object.keys(instance.devtoolsRawSetupState).includes(path[0])) {
    target22 = instance.devtoolsRawSetupState;
  } else if (instance.data && Object.keys(instance.data).includes(path[0])) {
    target22 = instance.data;
  } else {
    target22 = instance.proxy;
  }
  if (target22 && targetPath) {
    if (state.type === "object" && type === "reactive") {
    }
    stateEditor2.set(target22, targetPath, state.value, stateEditor2.createDefaultSetCallback(state));
  }
}
var stateEditor = new StateEditor();
async function editState(payload) {
  editComponentState(payload, stateEditor);
}

// src/core/open-in-editor/index.ts
init_esm_shims();


// src/ctx/state.ts
init_esm_shims();



// src/core/timeline/storage.ts
init_esm_shims();

var TIMELINE_LAYERS_STATE_STORAGE_ID = "__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS_STATE__";
function addTimelineLayersStateToStorage(state) {
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser || typeof localStorage === "undefined" || localStorage === null) {
    return;
  }
  localStorage.setItem(TIMELINE_LAYERS_STATE_STORAGE_ID, JSON.stringify(state));
}
function getTimelineLayersStateFromStorage() {
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser || typeof localStorage === "undefined" || localStorage === null) {
    return {
      recordingState: false,
      mouseEventEnabled: false,
      keyboardEventEnabled: false,
      componentEventEnabled: false,
      performanceEventEnabled: false,
      selected: ""
    };
  }
  const state = localStorage.getItem(TIMELINE_LAYERS_STATE_STORAGE_ID);
  return state ? JSON.parse(state) : {
    recordingState: false,
    mouseEventEnabled: false,
    keyboardEventEnabled: false,
    componentEventEnabled: false,
    performanceEventEnabled: false,
    selected: ""
  };
}

// src/ctx/hook.ts
init_esm_shims();



// src/ctx/inspector.ts
init_esm_shims();



// src/ctx/timeline.ts
init_esm_shims();

var _a2, _b2;
(_b2 = (_a2 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS) != null ? _b2 : _a2.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS = [];
var devtoolsTimelineLayers = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_TIMELINE_LAYERS, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
function addTimelineLayer(options, descriptor) {
  devtoolsState.timelineLayersState[descriptor.id] = false;
  devtoolsTimelineLayers.push({
    ...options,
    descriptorId: descriptor.id,
    appRecord: getAppRecord(descriptor.app)
  });
}
function updateTimelineLayersState(state) {
  const updatedState = {
    ...devtoolsState.timelineLayersState,
    ...state
  };
  addTimelineLayersStateToStorage(updatedState);
  updateDevToolsState({
    timelineLayersState: updatedState
  });
}

// src/ctx/inspector.ts
var _a3, _b3;
(_b3 = (_a3 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_INSPECTOR__) != null ? _b3 : _a3.__VUE_DEVTOOLS_KIT_INSPECTOR__ = [];
var devtoolsInspector = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_INSPECTOR__, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
var callInspectorUpdatedHook = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(() => {
  devtoolsContext.hooks.callHook("sendInspectorToClient" /* SEND_INSPECTOR_TO_CLIENT */, getActiveInspectors());
});
function addInspector(inspector, descriptor) {
  var _a25, _b25;
  devtoolsInspector.push({
    options: inspector,
    descriptor,
    treeFilterPlaceholder: (_a25 = inspector.treeFilterPlaceholder) != null ? _a25 : "Search tree...",
    stateFilterPlaceholder: (_b25 = inspector.stateFilterPlaceholder) != null ? _b25 : "Search state...",
    treeFilter: "",
    selectedNodeId: "",
    appRecord: getAppRecord(descriptor.app)
  });
  callInspectorUpdatedHook();
}
function getActiveInspectors() {
  return devtoolsInspector.filter((inspector) => inspector.descriptor.app === activeAppRecord.value.app).filter((inspector) => inspector.descriptor.id !== "components").map((inspector) => {
    var _a25;
    const descriptor = inspector.descriptor;
    const options = inspector.options;
    return {
      id: options.id,
      label: options.label,
      logo: descriptor.logo,
      icon: `custom-ic-baseline-${(_a25 = options == null ? void 0 : options.icon) == null ? void 0 : _a25.replace(/_/g, "-")}`,
      packageName: descriptor.packageName,
      homepage: descriptor.homepage,
      pluginId: descriptor.id
    };
  });
}
function getInspectorInfo(id) {
  const inspector = getInspector(id, activeAppRecord.value.app);
  if (!inspector)
    return;
  const descriptor = inspector.descriptor;
  const options = inspector.options;
  const timelineLayers = devtoolsTimelineLayers.filter((layer) => layer.descriptorId === descriptor.id).map((item) => ({
    id: item.id,
    label: item.label,
    color: item.color
  }));
  return {
    id: options.id,
    label: options.label,
    logo: descriptor.logo,
    packageName: descriptor.packageName,
    homepage: descriptor.homepage,
    timelineLayers,
    treeFilterPlaceholder: inspector.treeFilterPlaceholder,
    stateFilterPlaceholder: inspector.stateFilterPlaceholder
  };
}
function getInspector(id, app) {
  return devtoolsInspector.find((inspector) => inspector.options.id === id && (app ? inspector.descriptor.app === app : true));
}
function getInspectorActions(id) {
  const inspector = getInspector(id);
  return inspector == null ? void 0 : inspector.options.actions;
}
function getInspectorNodeActions(id) {
  const inspector = getInspector(id);
  return inspector == null ? void 0 : inspector.options.nodeActions;
}

// src/ctx/hook.ts
var DevToolsV6PluginAPIHookKeys = /* @__PURE__ */ ((DevToolsV6PluginAPIHookKeys2) => {
  DevToolsV6PluginAPIHookKeys2["VISIT_COMPONENT_TREE"] = "visitComponentTree";
  DevToolsV6PluginAPIHookKeys2["INSPECT_COMPONENT"] = "inspectComponent";
  DevToolsV6PluginAPIHookKeys2["EDIT_COMPONENT_STATE"] = "editComponentState";
  DevToolsV6PluginAPIHookKeys2["GET_INSPECTOR_TREE"] = "getInspectorTree";
  DevToolsV6PluginAPIHookKeys2["GET_INSPECTOR_STATE"] = "getInspectorState";
  DevToolsV6PluginAPIHookKeys2["EDIT_INSPECTOR_STATE"] = "editInspectorState";
  DevToolsV6PluginAPIHookKeys2["INSPECT_TIMELINE_EVENT"] = "inspectTimelineEvent";
  DevToolsV6PluginAPIHookKeys2["TIMELINE_CLEARED"] = "timelineCleared";
  DevToolsV6PluginAPIHookKeys2["SET_PLUGIN_SETTINGS"] = "setPluginSettings";
  return DevToolsV6PluginAPIHookKeys2;
})(DevToolsV6PluginAPIHookKeys || {});
var DevToolsContextHookKeys = /* @__PURE__ */ ((DevToolsContextHookKeys2) => {
  DevToolsContextHookKeys2["ADD_INSPECTOR"] = "addInspector";
  DevToolsContextHookKeys2["SEND_INSPECTOR_TREE"] = "sendInspectorTree";
  DevToolsContextHookKeys2["SEND_INSPECTOR_STATE"] = "sendInspectorState";
  DevToolsContextHookKeys2["CUSTOM_INSPECTOR_SELECT_NODE"] = "customInspectorSelectNode";
  DevToolsContextHookKeys2["TIMELINE_LAYER_ADDED"] = "timelineLayerAdded";
  DevToolsContextHookKeys2["TIMELINE_EVENT_ADDED"] = "timelineEventAdded";
  DevToolsContextHookKeys2["GET_COMPONENT_INSTANCES"] = "getComponentInstances";
  DevToolsContextHookKeys2["GET_COMPONENT_BOUNDS"] = "getComponentBounds";
  DevToolsContextHookKeys2["GET_COMPONENT_NAME"] = "getComponentName";
  DevToolsContextHookKeys2["COMPONENT_HIGHLIGHT"] = "componentHighlight";
  DevToolsContextHookKeys2["COMPONENT_UNHIGHLIGHT"] = "componentUnhighlight";
  return DevToolsContextHookKeys2;
})(DevToolsContextHookKeys || {});
var DevToolsMessagingHookKeys = /* @__PURE__ */ ((DevToolsMessagingHookKeys2) => {
  DevToolsMessagingHookKeys2["SEND_INSPECTOR_TREE_TO_CLIENT"] = "sendInspectorTreeToClient";
  DevToolsMessagingHookKeys2["SEND_INSPECTOR_STATE_TO_CLIENT"] = "sendInspectorStateToClient";
  DevToolsMessagingHookKeys2["SEND_TIMELINE_EVENT_TO_CLIENT"] = "sendTimelineEventToClient";
  DevToolsMessagingHookKeys2["SEND_INSPECTOR_TO_CLIENT"] = "sendInspectorToClient";
  DevToolsMessagingHookKeys2["SEND_ACTIVE_APP_UNMOUNTED_TO_CLIENT"] = "sendActiveAppUpdatedToClient";
  DevToolsMessagingHookKeys2["DEVTOOLS_STATE_UPDATED"] = "devtoolsStateUpdated";
  DevToolsMessagingHookKeys2["DEVTOOLS_CONNECTED_UPDATED"] = "devtoolsConnectedUpdated";
  DevToolsMessagingHookKeys2["ROUTER_INFO_UPDATED"] = "routerInfoUpdated";
  return DevToolsMessagingHookKeys2;
})(DevToolsMessagingHookKeys || {});
function createDevToolsCtxHooks() {
  const hooks2 = (0,hookable__WEBPACK_IMPORTED_MODULE_1__.createHooks)();
  hooks2.hook("addInspector" /* ADD_INSPECTOR */, ({ inspector, plugin }) => {
    addInspector(inspector, plugin.descriptor);
  });
  const debounceSendInspectorTree = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(async ({ inspectorId, plugin }) => {
    var _a25;
    if (!inspectorId || !((_a25 = plugin == null ? void 0 : plugin.descriptor) == null ? void 0 : _a25.app) || devtoolsState.highPerfModeEnabled)
      return;
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    const _payload = {
      app: plugin.descriptor.app,
      inspectorId,
      filter: (inspector == null ? void 0 : inspector.treeFilter) || "",
      rootNodes: []
    };
    await new Promise((resolve) => {
      hooks2.callHookWith(async (callbacks) => {
        await Promise.all(callbacks.map((cb) => cb(_payload)));
        resolve();
      }, "getInspectorTree" /* GET_INSPECTOR_TREE */);
    });
    hooks2.callHookWith(async (callbacks) => {
      await Promise.all(callbacks.map((cb) => cb({
        inspectorId,
        rootNodes: _payload.rootNodes
      })));
    }, "sendInspectorTreeToClient" /* SEND_INSPECTOR_TREE_TO_CLIENT */);
  }, 120);
  hooks2.hook("sendInspectorTree" /* SEND_INSPECTOR_TREE */, debounceSendInspectorTree);
  const debounceSendInspectorState = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(async ({ inspectorId, plugin }) => {
    var _a25;
    if (!inspectorId || !((_a25 = plugin == null ? void 0 : plugin.descriptor) == null ? void 0 : _a25.app) || devtoolsState.highPerfModeEnabled)
      return;
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    const _payload = {
      app: plugin.descriptor.app,
      inspectorId,
      nodeId: (inspector == null ? void 0 : inspector.selectedNodeId) || "",
      state: null
    };
    const ctx = {
      currentTab: `custom-inspector:${inspectorId}`
    };
    if (_payload.nodeId) {
      await new Promise((resolve) => {
        hooks2.callHookWith(async (callbacks) => {
          await Promise.all(callbacks.map((cb) => cb(_payload, ctx)));
          resolve();
        }, "getInspectorState" /* GET_INSPECTOR_STATE */);
      });
    }
    hooks2.callHookWith(async (callbacks) => {
      await Promise.all(callbacks.map((cb) => cb({
        inspectorId,
        nodeId: _payload.nodeId,
        state: _payload.state
      })));
    }, "sendInspectorStateToClient" /* SEND_INSPECTOR_STATE_TO_CLIENT */);
  }, 120);
  hooks2.hook("sendInspectorState" /* SEND_INSPECTOR_STATE */, debounceSendInspectorState);
  hooks2.hook("customInspectorSelectNode" /* CUSTOM_INSPECTOR_SELECT_NODE */, ({ inspectorId, nodeId, plugin }) => {
    const inspector = getInspector(inspectorId, plugin.descriptor.app);
    if (!inspector)
      return;
    inspector.selectedNodeId = nodeId;
  });
  hooks2.hook("timelineLayerAdded" /* TIMELINE_LAYER_ADDED */, ({ options, plugin }) => {
    addTimelineLayer(options, plugin.descriptor);
  });
  hooks2.hook("timelineEventAdded" /* TIMELINE_EVENT_ADDED */, ({ options, plugin }) => {
    var _a25;
    const internalLayerIds = ["performance", "component-event", "keyboard", "mouse"];
    if (devtoolsState.highPerfModeEnabled || !((_a25 = devtoolsState.timelineLayersState) == null ? void 0 : _a25[plugin.descriptor.id]) && !internalLayerIds.includes(options.layerId))
      return;
    hooks2.callHookWith(async (callbacks) => {
      await Promise.all(callbacks.map((cb) => cb(options)));
    }, "sendTimelineEventToClient" /* SEND_TIMELINE_EVENT_TO_CLIENT */);
  });
  hooks2.hook("getComponentInstances" /* GET_COMPONENT_INSTANCES */, async ({ app }) => {
    const appRecord = app.__VUE_DEVTOOLS_NEXT_APP_RECORD__;
    if (!appRecord)
      return null;
    const appId = appRecord.id.toString();
    const instances = [...appRecord.instanceMap].filter(([key]) => key.split(":")[0] === appId).map(([, instance]) => instance);
    return instances;
  });
  hooks2.hook("getComponentBounds" /* GET_COMPONENT_BOUNDS */, async ({ instance }) => {
    const bounds = getComponentBoundingRect(instance);
    return bounds;
  });
  hooks2.hook("getComponentName" /* GET_COMPONENT_NAME */, ({ instance }) => {
    const name = getInstanceName(instance);
    return name;
  });
  hooks2.hook("componentHighlight" /* COMPONENT_HIGHLIGHT */, ({ uid }) => {
    const instance = activeAppRecord.value.instanceMap.get(uid);
    if (instance) {
      highlight(instance);
    }
  });
  hooks2.hook("componentUnhighlight" /* COMPONENT_UNHIGHLIGHT */, () => {
    unhighlight();
  });
  return hooks2;
}

// src/ctx/state.ts
var _a4, _b4;
(_b4 = (_a4 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_APP_RECORDS__) != null ? _b4 : _a4.__VUE_DEVTOOLS_KIT_APP_RECORDS__ = [];
var _a5, _b5;
(_b5 = (_a5 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__) != null ? _b5 : _a5.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__ = {};
var _a6, _b6;
(_b6 = (_a6 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__) != null ? _b6 : _a6.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__ = "";
var _a7, _b7;
(_b7 = (_a7 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_CUSTOM_TABS__) != null ? _b7 : _a7.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__ = [];
var _a8, _b8;
(_b8 = (_a8 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__) != null ? _b8 : _a8.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__ = [];
var STATE_KEY = "__VUE_DEVTOOLS_KIT_GLOBAL_STATE__";
function initStateFactory() {
  return {
    connected: false,
    clientConnected: false,
    vitePluginDetected: true,
    appRecords: [],
    activeAppRecordId: "",
    tabs: [],
    commands: [],
    highPerfModeEnabled: true,
    devtoolsClientDetected: {},
    perfUniqueGroupId: 0,
    timelineLayersState: getTimelineLayersStateFromStorage()
  };
}
var _a9, _b9;
(_b9 = (_a9 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target)[STATE_KEY]) != null ? _b9 : _a9[STATE_KEY] = initStateFactory();
var callStateUpdatedHook = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)((state) => {
  devtoolsContext.hooks.callHook("devtoolsStateUpdated" /* DEVTOOLS_STATE_UPDATED */, { state });
});
var callConnectedUpdatedHook = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)((state, oldState) => {
  devtoolsContext.hooks.callHook("devtoolsConnectedUpdated" /* DEVTOOLS_CONNECTED_UPDATED */, { state, oldState });
});
var devtoolsAppRecords = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__, {
  get(_target, prop, receiver) {
    if (prop === "value")
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__;
    return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__[prop];
  }
});
var addDevToolsAppRecord = (app) => {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__ = [
    ..._vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__,
    app
  ];
};
var removeDevToolsAppRecord = (app) => {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_APP_RECORDS__ = devtoolsAppRecords.value.filter((record) => record.app !== app);
};
var activeAppRecord = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__, {
  get(_target, prop, receiver) {
    if (prop === "value")
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__;
    else if (prop === "id")
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__;
    return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__[prop];
  }
});
function updateAllStates() {
  callStateUpdatedHook({
    ..._vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY],
    appRecords: devtoolsAppRecords.value,
    activeAppRecordId: activeAppRecord.id,
    tabs: _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__,
    commands: _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__
  });
}
function setActiveAppRecord(app) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD__ = app;
  updateAllStates();
}
function setActiveAppRecordId(id) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_ACTIVE_APP_RECORD_ID__ = id;
  updateAllStates();
}
var devtoolsState = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY], {
  get(target22, property) {
    if (property === "appRecords") {
      return devtoolsAppRecords;
    } else if (property === "activeAppRecordId") {
      return activeAppRecord.id;
    } else if (property === "tabs") {
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__;
    } else if (property === "commands") {
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__;
    }
    return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY][property];
  },
  deleteProperty(target22, property) {
    delete target22[property];
    return true;
  },
  set(target22, property, value) {
    const oldState = { ..._vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY] };
    target22[property] = value;
    _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY][property] = value;
    return true;
  }
});
function resetDevToolsState() {
  Object.assign(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY], initStateFactory());
}
function updateDevToolsState(state) {
  const oldState = {
    ..._vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY],
    appRecords: devtoolsAppRecords.value,
    activeAppRecordId: activeAppRecord.id
  };
  if (oldState.connected !== state.connected && state.connected || oldState.clientConnected !== state.clientConnected && state.clientConnected) {
    callConnectedUpdatedHook(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY], oldState);
  }
  Object.assign(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[STATE_KEY], state);
  updateAllStates();
}
function onDevToolsConnected(fn) {
  return new Promise((resolve) => {
    if (devtoolsState.connected) {
      fn();
      resolve();
    }
    devtoolsContext.hooks.hook("devtoolsConnectedUpdated" /* DEVTOOLS_CONNECTED_UPDATED */, ({ state }) => {
      if (state.connected) {
        fn();
        resolve();
      }
    });
  });
}
var resolveIcon = (icon) => {
  if (!icon)
    return;
  if (icon.startsWith("baseline-")) {
    return `custom-ic-${icon}`;
  }
  if (icon.startsWith("i-") || (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isUrlString)(icon))
    return icon;
  return `custom-ic-baseline-${icon}`;
};
function addCustomTab(tab) {
  const tabs = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_TABS__;
  if (tabs.some((t) => t.name === tab.name))
    return;
  tabs.push({
    ...tab,
    icon: resolveIcon(tab.icon)
  });
  updateAllStates();
}
function addCustomCommand(action) {
  const commands = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__;
  if (commands.some((t) => t.id === action.id))
    return;
  commands.push({
    ...action,
    icon: resolveIcon(action.icon),
    children: action.children ? action.children.map((child) => ({
      ...child,
      icon: resolveIcon(child.icon)
    })) : void 0
  });
  updateAllStates();
}
function removeCustomCommand(actionId) {
  const commands = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CUSTOM_COMMANDS__;
  const index = commands.findIndex((t) => t.id === actionId);
  if (index === -1)
    return;
  commands.splice(index, 1);
  updateAllStates();
}
function toggleClientConnected(state) {
  updateDevToolsState({ clientConnected: state });
}

// src/core/open-in-editor/index.ts
function setOpenInEditorBaseUrl(url) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__ = url;
}
function openInEditor(options = {}) {
  var _a25, _b25, _c;
  const { file, host, baseUrl = window.location.origin, line = 0, column = 0 } = options;
  if (file) {
    if (host === "chrome-extension") {
      const fileName = file.replace(/\\/g, "\\\\");
      const _baseUrl = (_b25 = (_a25 = window.VUE_DEVTOOLS_CONFIG) == null ? void 0 : _a25.openInEditorHost) != null ? _b25 : "/";
      fetch(`${_baseUrl}__open-in-editor?file=${encodeURI(file)}`).then((response) => {
        if (!response.ok) {
          const msg = `Opening component ${fileName} failed`;
          console.log(`%c${msg}`, "color:red");
        }
      });
    } else if (devtoolsState.vitePluginDetected) {
      const _baseUrl = (_c = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_OPEN_IN_EDITOR_BASE_URL__) != null ? _c : baseUrl;
      _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_INSPECTOR__.openInEditor(_baseUrl, file, line, column);
    }
  }
}

// src/core/plugin/index.ts
init_esm_shims();


// src/api/index.ts
init_esm_shims();

// src/api/v6/index.ts
init_esm_shims();

// src/core/plugin/plugin-settings.ts
init_esm_shims();

// src/ctx/plugin.ts
init_esm_shims();

var _a10, _b10;
(_b10 = (_a10 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__) != null ? _b10 : _a10.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__ = [];
var devtoolsPluginBuffer = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_PLUGIN_BUFFER__, {
  get(target22, prop, receiver) {
    return Reflect.get(target22, prop, receiver);
  }
});
function addDevToolsPluginToBuffer(pluginDescriptor, setupFn) {
  devtoolsPluginBuffer.push([pluginDescriptor, setupFn]);
}

// src/core/plugin/plugin-settings.ts
function _getSettings(settings) {
  const _settings = {};
  Object.keys(settings).forEach((key) => {
    _settings[key] = settings[key].defaultValue;
  });
  return _settings;
}
function getPluginLocalKey(pluginId) {
  return `__VUE_DEVTOOLS_NEXT_PLUGIN_SETTINGS__${pluginId}__`;
}
function getPluginSettingsOptions(pluginId) {
  var _a25, _b25, _c;
  const item = (_b25 = (_a25 = devtoolsPluginBuffer.find((item2) => {
    var _a26;
    return item2[0].id === pluginId && !!((_a26 = item2[0]) == null ? void 0 : _a26.settings);
  })) == null ? void 0 : _a25[0]) != null ? _b25 : null;
  return (_c = item == null ? void 0 : item.settings) != null ? _c : null;
}
function getPluginSettings(pluginId, fallbackValue) {
  var _a25, _b25, _c;
  const localKey = getPluginLocalKey(pluginId);
  if (localKey) {
    const localSettings = localStorage.getItem(localKey);
    if (localSettings) {
      return JSON.parse(localSettings);
    }
  }
  if (pluginId) {
    const item = (_b25 = (_a25 = devtoolsPluginBuffer.find((item2) => item2[0].id === pluginId)) == null ? void 0 : _a25[0]) != null ? _b25 : null;
    return _getSettings((_c = item == null ? void 0 : item.settings) != null ? _c : {});
  }
  return _getSettings(fallbackValue);
}
function initPluginSettings(pluginId, settings) {
  const localKey = getPluginLocalKey(pluginId);
  const localSettings = localStorage.getItem(localKey);
  if (!localSettings) {
    localStorage.setItem(localKey, JSON.stringify(_getSettings(settings)));
  }
}
function setPluginSettings(pluginId, key, value) {
  const localKey = getPluginLocalKey(pluginId);
  const localSettings = localStorage.getItem(localKey);
  const parsedLocalSettings = JSON.parse(localSettings || "{}");
  const updated = {
    ...parsedLocalSettings,
    [key]: value
  };
  localStorage.setItem(localKey, JSON.stringify(updated));
  devtoolsContext.hooks.callHookWith((callbacks) => {
    callbacks.forEach((cb) => cb({
      pluginId,
      key,
      oldValue: parsedLocalSettings[key],
      newValue: value,
      settings: updated
    }));
  }, "setPluginSettings" /* SET_PLUGIN_SETTINGS */);
}

// src/hook/index.ts
init_esm_shims();



// src/types/index.ts
init_esm_shims();

// src/types/app.ts
init_esm_shims();

// src/types/command.ts
init_esm_shims();

// src/types/component.ts
init_esm_shims();

// src/types/hook.ts
init_esm_shims();

// src/types/inspector.ts
init_esm_shims();

// src/types/plugin.ts
init_esm_shims();

// src/types/router.ts
init_esm_shims();

// src/types/tab.ts
init_esm_shims();

// src/types/timeline.ts
init_esm_shims();

// src/hook/index.ts
var _a11, _b11;
var devtoolsHooks = (_b11 = (_a11 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_HOOK) != null ? _b11 : _a11.__VUE_DEVTOOLS_HOOK = (0,hookable__WEBPACK_IMPORTED_MODULE_1__.createHooks)();
var on = {
  vueAppInit(fn) {
    devtoolsHooks.hook("app:init" /* APP_INIT */, fn);
  },
  vueAppUnmount(fn) {
    devtoolsHooks.hook("app:unmount" /* APP_UNMOUNT */, fn);
  },
  vueAppConnected(fn) {
    devtoolsHooks.hook("app:connected" /* APP_CONNECTED */, fn);
  },
  componentAdded(fn) {
    return devtoolsHooks.hook("component:added" /* COMPONENT_ADDED */, fn);
  },
  componentEmit(fn) {
    return devtoolsHooks.hook("component:emit" /* COMPONENT_EMIT */, fn);
  },
  componentUpdated(fn) {
    return devtoolsHooks.hook("component:updated" /* COMPONENT_UPDATED */, fn);
  },
  componentRemoved(fn) {
    return devtoolsHooks.hook("component:removed" /* COMPONENT_REMOVED */, fn);
  },
  setupDevtoolsPlugin(fn) {
    devtoolsHooks.hook("devtools-plugin:setup" /* SETUP_DEVTOOLS_PLUGIN */, fn);
  },
  perfStart(fn) {
    return devtoolsHooks.hook("perf:start" /* PERFORMANCE_START */, fn);
  },
  perfEnd(fn) {
    return devtoolsHooks.hook("perf:end" /* PERFORMANCE_END */, fn);
  }
};
function createDevToolsHook() {
  return {
    id: "vue-devtools-next",
    devtoolsVersion: "7.0",
    enabled: false,
    appRecords: [],
    apps: [],
    events: /* @__PURE__ */ new Map(),
    on(event, fn) {
      var _a25;
      if (!this.events.has(event))
        this.events.set(event, []);
      (_a25 = this.events.get(event)) == null ? void 0 : _a25.push(fn);
      return () => this.off(event, fn);
    },
    once(event, fn) {
      const onceFn = (...args) => {
        this.off(event, onceFn);
        fn(...args);
      };
      this.on(event, onceFn);
      return [event, onceFn];
    },
    off(event, fn) {
      if (this.events.has(event)) {
        const eventCallbacks = this.events.get(event);
        const index = eventCallbacks.indexOf(fn);
        if (index !== -1)
          eventCallbacks.splice(index, 1);
      }
    },
    emit(event, ...payload) {
      if (this.events.has(event))
        this.events.get(event).forEach((fn) => fn(...payload));
    }
  };
}
function subscribeDevToolsHook(hook2) {
  hook2.on("app:init" /* APP_INIT */, (app, version, types) => {
    var _a25, _b25, _c;
    if ((_c = (_b25 = (_a25 = app == null ? void 0 : app._instance) == null ? void 0 : _a25.type) == null ? void 0 : _b25.devtools) == null ? void 0 : _c.hide)
      return;
    devtoolsHooks.callHook("app:init" /* APP_INIT */, app, version, types);
  });
  hook2.on("app:unmount" /* APP_UNMOUNT */, (app) => {
    devtoolsHooks.callHook("app:unmount" /* APP_UNMOUNT */, app);
  });
  hook2.on("component:added" /* COMPONENT_ADDED */, async (app, uid, parentUid, component) => {
    var _a25, _b25, _c;
    if (((_c = (_b25 = (_a25 = app == null ? void 0 : app._instance) == null ? void 0 : _a25.type) == null ? void 0 : _b25.devtools) == null ? void 0 : _c.hide) || devtoolsState.highPerfModeEnabled)
      return;
    if (!app || typeof uid !== "number" && !uid || !component)
      return;
    devtoolsHooks.callHook("component:added" /* COMPONENT_ADDED */, app, uid, parentUid, component);
  });
  hook2.on("component:updated" /* COMPONENT_UPDATED */, (app, uid, parentUid, component) => {
    if (!app || typeof uid !== "number" && !uid || !component || devtoolsState.highPerfModeEnabled)
      return;
    devtoolsHooks.callHook("component:updated" /* COMPONENT_UPDATED */, app, uid, parentUid, component);
  });
  hook2.on("component:removed" /* COMPONENT_REMOVED */, async (app, uid, parentUid, component) => {
    if (!app || typeof uid !== "number" && !uid || !component || devtoolsState.highPerfModeEnabled)
      return;
    devtoolsHooks.callHook("component:removed" /* COMPONENT_REMOVED */, app, uid, parentUid, component);
  });
  hook2.on("component:emit" /* COMPONENT_EMIT */, async (app, instance, event, params) => {
    if (!app || !instance || devtoolsState.highPerfModeEnabled)
      return;
    devtoolsHooks.callHook("component:emit" /* COMPONENT_EMIT */, app, instance, event, params);
  });
  hook2.on("perf:start" /* PERFORMANCE_START */, (app, uid, vm, type, time) => {
    if (!app || devtoolsState.highPerfModeEnabled)
      return;
    devtoolsHooks.callHook("perf:start" /* PERFORMANCE_START */, app, uid, vm, type, time);
  });
  hook2.on("perf:end" /* PERFORMANCE_END */, (app, uid, vm, type, time) => {
    if (!app || devtoolsState.highPerfModeEnabled)
      return;
    devtoolsHooks.callHook("perf:end" /* PERFORMANCE_END */, app, uid, vm, type, time);
  });
  hook2.on("devtools-plugin:setup" /* SETUP_DEVTOOLS_PLUGIN */, (pluginDescriptor, setupFn, options) => {
    if ((options == null ? void 0 : options.target) === "legacy")
      return;
    devtoolsHooks.callHook("devtools-plugin:setup" /* SETUP_DEVTOOLS_PLUGIN */, pluginDescriptor, setupFn);
  });
}
var hook = {
  on,
  setupDevToolsPlugin(pluginDescriptor, setupFn) {
    return devtoolsHooks.callHook("devtools-plugin:setup" /* SETUP_DEVTOOLS_PLUGIN */, pluginDescriptor, setupFn);
  }
};

// src/api/v6/index.ts
var DevToolsV6PluginAPI = class {
  constructor({ plugin, ctx }) {
    this.hooks = ctx.hooks;
    this.plugin = plugin;
  }
  get on() {
    return {
      // component inspector
      visitComponentTree: (handler) => {
        this.hooks.hook("visitComponentTree" /* VISIT_COMPONENT_TREE */, handler);
      },
      inspectComponent: (handler) => {
        this.hooks.hook("inspectComponent" /* INSPECT_COMPONENT */, handler);
      },
      editComponentState: (handler) => {
        this.hooks.hook("editComponentState" /* EDIT_COMPONENT_STATE */, handler);
      },
      // custom inspector
      getInspectorTree: (handler) => {
        this.hooks.hook("getInspectorTree" /* GET_INSPECTOR_TREE */, handler);
      },
      getInspectorState: (handler) => {
        this.hooks.hook("getInspectorState" /* GET_INSPECTOR_STATE */, handler);
      },
      editInspectorState: (handler) => {
        this.hooks.hook("editInspectorState" /* EDIT_INSPECTOR_STATE */, handler);
      },
      // timeline
      inspectTimelineEvent: (handler) => {
        this.hooks.hook("inspectTimelineEvent" /* INSPECT_TIMELINE_EVENT */, handler);
      },
      timelineCleared: (handler) => {
        this.hooks.hook("timelineCleared" /* TIMELINE_CLEARED */, handler);
      },
      // settings
      setPluginSettings: (handler) => {
        this.hooks.hook("setPluginSettings" /* SET_PLUGIN_SETTINGS */, handler);
      }
    };
  }
  // component inspector
  notifyComponentUpdate(instance) {
    var _a25;
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    const inspector = getActiveInspectors().find((i) => i.packageName === this.plugin.descriptor.packageName);
    if (inspector == null ? void 0 : inspector.id) {
      if (instance) {
        const args = [
          instance.appContext.app,
          instance.uid,
          (_a25 = instance.parent) == null ? void 0 : _a25.uid,
          instance
        ];
        devtoolsHooks.callHook("component:updated" /* COMPONENT_UPDATED */, ...args);
      } else {
        devtoolsHooks.callHook("component:updated" /* COMPONENT_UPDATED */);
      }
      this.hooks.callHook("sendInspectorState" /* SEND_INSPECTOR_STATE */, { inspectorId: inspector.id, plugin: this.plugin });
    }
  }
  // custom inspector
  addInspector(options) {
    this.hooks.callHook("addInspector" /* ADD_INSPECTOR */, { inspector: options, plugin: this.plugin });
    if (this.plugin.descriptor.settings) {
      initPluginSettings(options.id, this.plugin.descriptor.settings);
    }
  }
  sendInspectorTree(inspectorId) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("sendInspectorTree" /* SEND_INSPECTOR_TREE */, { inspectorId, plugin: this.plugin });
  }
  sendInspectorState(inspectorId) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("sendInspectorState" /* SEND_INSPECTOR_STATE */, { inspectorId, plugin: this.plugin });
  }
  selectInspectorNode(inspectorId, nodeId) {
    this.hooks.callHook("customInspectorSelectNode" /* CUSTOM_INSPECTOR_SELECT_NODE */, { inspectorId, nodeId, plugin: this.plugin });
  }
  visitComponentTree(payload) {
    return this.hooks.callHook("visitComponentTree" /* VISIT_COMPONENT_TREE */, payload);
  }
  // timeline
  now() {
    if (devtoolsState.highPerfModeEnabled) {
      return 0;
    }
    return Date.now();
  }
  addTimelineLayer(options) {
    this.hooks.callHook("timelineLayerAdded" /* TIMELINE_LAYER_ADDED */, { options, plugin: this.plugin });
  }
  addTimelineEvent(options) {
    if (devtoolsState.highPerfModeEnabled) {
      return;
    }
    this.hooks.callHook("timelineEventAdded" /* TIMELINE_EVENT_ADDED */, { options, plugin: this.plugin });
  }
  // settings
  getSettings(pluginId) {
    return getPluginSettings(pluginId != null ? pluginId : this.plugin.descriptor.id, this.plugin.descriptor.settings);
  }
  // utilities
  getComponentInstances(app) {
    return this.hooks.callHook("getComponentInstances" /* GET_COMPONENT_INSTANCES */, { app });
  }
  getComponentBounds(instance) {
    return this.hooks.callHook("getComponentBounds" /* GET_COMPONENT_BOUNDS */, { instance });
  }
  getComponentName(instance) {
    return this.hooks.callHook("getComponentName" /* GET_COMPONENT_NAME */, { instance });
  }
  highlightElement(instance) {
    const uid = instance.__VUE_DEVTOOLS_NEXT_UID__;
    return this.hooks.callHook("componentHighlight" /* COMPONENT_HIGHLIGHT */, { uid });
  }
  unhighlightElement() {
    return this.hooks.callHook("componentUnhighlight" /* COMPONENT_UNHIGHLIGHT */);
  }
};

// src/api/index.ts
var DevToolsPluginAPI = DevToolsV6PluginAPI;

// src/core/plugin/components.ts
init_esm_shims();


// src/core/component/state/index.ts
init_esm_shims();

// src/core/component/state/process.ts
init_esm_shims();


// src/core/component/state/constants.ts
init_esm_shims();
var vueBuiltins = /* @__PURE__ */ new Set([
  "nextTick",
  "defineComponent",
  "defineAsyncComponent",
  "defineCustomElement",
  "ref",
  "computed",
  "reactive",
  "readonly",
  "watchEffect",
  "watchPostEffect",
  "watchSyncEffect",
  "watch",
  "isRef",
  "unref",
  "toRef",
  "toRefs",
  "isProxy",
  "isReactive",
  "isReadonly",
  "shallowRef",
  "triggerRef",
  "customRef",
  "shallowReactive",
  "shallowReadonly",
  "toRaw",
  "markRaw",
  "effectScope",
  "getCurrentScope",
  "onScopeDispose",
  "onMounted",
  "onUpdated",
  "onUnmounted",
  "onBeforeMount",
  "onBeforeUpdate",
  "onBeforeUnmount",
  "onErrorCaptured",
  "onRenderTracked",
  "onRenderTriggered",
  "onActivated",
  "onDeactivated",
  "onServerPrefetch",
  "provide",
  "inject",
  "h",
  "mergeProps",
  "cloneVNode",
  "isVNode",
  "resolveComponent",
  "resolveDirective",
  "withDirectives",
  "withModifiers"
]);
var symbolRE = /^\[native Symbol Symbol\((.*)\)\]$/;
var rawTypeRE = /^\[object (\w+)\]$/;
var specialTypeRE = /^\[native (\w+) (.*?)(<>(([\s\S])*))?\]$/;
var fnTypeRE = /^(?:function|class) (\w+)/;
var MAX_STRING_SIZE = 1e4;
var MAX_ARRAY_SIZE = 5e3;
var UNDEFINED = "__vue_devtool_undefined__";
var INFINITY = "__vue_devtool_infinity__";
var NEGATIVE_INFINITY = "__vue_devtool_negative_infinity__";
var NAN = "__vue_devtool_nan__";
var ESC = {
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "&": "&amp;"
};

// src/core/component/state/util.ts
init_esm_shims();

// src/core/component/state/is.ts
init_esm_shims();
function isVueInstance(value) {
  if (!ensurePropertyExists(value, "_")) {
    return false;
  }
  if (!isPlainObject(value._)) {
    return false;
  }
  return Object.keys(value._).includes("vnode");
}
function isPlainObject(obj) {
  return Object.prototype.toString.call(obj) === "[object Object]";
}
function isPrimitive(data) {
  if (data == null)
    return true;
  const type = typeof data;
  return type === "string" || type === "number" || type === "boolean";
}
function isRef2(raw) {
  return !!raw.__v_isRef;
}
function isComputed(raw) {
  return isRef2(raw) && !!raw.effect;
}
function isReactive2(raw) {
  return !!raw.__v_isReactive;
}
function isReadOnly(raw) {
  return !!raw.__v_isReadonly;
}

// src/core/component/state/util.ts
var tokenMap = {
  [UNDEFINED]: "undefined",
  [NAN]: "NaN",
  [INFINITY]: "Infinity",
  [NEGATIVE_INFINITY]: "-Infinity"
};
var reversedTokenMap = Object.entries(tokenMap).reduce((acc, [key, value]) => {
  acc[value] = key;
  return acc;
}, {});
function internalStateTokenToString(value) {
  if (value === null)
    return "null";
  return typeof value === "string" && tokenMap[value] || false;
}
function replaceTokenToString(value) {
  const replaceRegex = new RegExp(`"(${Object.keys(tokenMap).join("|")})"`, "g");
  return value.replace(replaceRegex, (_, g1) => tokenMap[g1]);
}
function replaceStringToToken(value) {
  const literalValue = reversedTokenMap[value.trim()];
  if (literalValue)
    return `"${literalValue}"`;
  const replaceRegex = new RegExp(`:\\s*(${Object.keys(reversedTokenMap).join("|")})`, "g");
  return value.replace(replaceRegex, (_, g1) => `:"${reversedTokenMap[g1]}"`);
}
function getPropType(type) {
  if (Array.isArray(type))
    return type.map((t) => getPropType(t)).join(" or ");
  if (type == null)
    return "null";
  const match = type.toString().match(fnTypeRE);
  return typeof type === "function" ? match && match[1] || "any" : "any";
}
function sanitize(data) {
  if (!isPrimitive(data) && !Array.isArray(data) && !isPlainObject(data)) {
    return Object.prototype.toString.call(data);
  } else {
    return data;
  }
}
function getSetupStateType(raw) {
  try {
    return {
      ref: isRef2(raw),
      computed: isComputed(raw),
      reactive: isReactive2(raw),
      readonly: isReadOnly(raw)
    };
  } catch (e) {
    return {
      ref: false,
      computed: false,
      reactive: false,
      readonly: false
    };
  }
}
function toRaw2(value) {
  if (value == null ? void 0 : value.__v_raw)
    return value.__v_raw;
  return value;
}
function escape(s) {
  return s.replace(/[<>"&]/g, (s2) => {
    return ESC[s2] || s2;
  });
}

// src/core/component/state/process.ts
function mergeOptions(to, from, instance) {
  if (typeof from === "function")
    from = from.options;
  if (!from)
    return to;
  const { mixins, extends: extendsOptions } = from;
  extendsOptions && mergeOptions(to, extendsOptions, instance);
  mixins && mixins.forEach(
    (m) => mergeOptions(to, m, instance)
  );
  for (const key of ["computed", "inject"]) {
    if (Object.prototype.hasOwnProperty.call(from, key)) {
      if (!to[key])
        to[key] = from[key];
      else
        Object.assign(to[key], from[key]);
    }
  }
  return to;
}
function resolveMergedOptions(instance) {
  const raw = instance == null ? void 0 : instance.type;
  if (!raw)
    return {};
  const { mixins, extends: extendsOptions } = raw;
  const globalMixins = instance.appContext.mixins;
  if (!globalMixins.length && !mixins && !extendsOptions)
    return raw;
  const options = {};
  globalMixins.forEach((m) => mergeOptions(options, m, instance));
  mergeOptions(options, raw, instance);
  return options;
}
function processProps(instance) {
  var _a25;
  const props = [];
  const propDefinitions = (_a25 = instance == null ? void 0 : instance.type) == null ? void 0 : _a25.props;
  for (const key in instance == null ? void 0 : instance.props) {
    const propDefinition = propDefinitions ? propDefinitions[key] : null;
    const camelizeKey = (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.camelize)(key);
    props.push({
      type: "props",
      key: camelizeKey,
      value: returnError(() => instance.props[key]),
      editable: true,
      meta: propDefinition ? {
        type: propDefinition.type ? getPropType(propDefinition.type) : "any",
        required: !!propDefinition.required,
        ...propDefinition.default ? {
          default: propDefinition.default.toString()
        } : {}
      } : { type: "invalid" }
    });
  }
  return props;
}
function processState(instance) {
  const type = instance.type;
  const props = type == null ? void 0 : type.props;
  const getters = type.vuex && type.vuex.getters;
  const computedDefs = type.computed;
  const data = {
    ...instance.data,
    ...instance.renderContext
  };
  return Object.keys(data).filter((key) => !(props && key in props) && !(getters && key in getters) && !(computedDefs && key in computedDefs)).map((key) => ({
    key,
    type: "data",
    value: returnError(() => data[key]),
    editable: true
  }));
}
function getStateTypeAndName(info) {
  const stateType = info.computed ? "computed" : info.ref ? "ref" : info.reactive ? "reactive" : null;
  const stateTypeName = stateType ? `${stateType.charAt(0).toUpperCase()}${stateType.slice(1)}` : null;
  return {
    stateType,
    stateTypeName
  };
}
function processSetupState(instance) {
  const raw = instance.devtoolsRawSetupState || {};
  return Object.keys(instance.setupState).filter((key) => !vueBuiltins.has(key) && key.split(/(?=[A-Z])/)[0] !== "use").map((key) => {
    var _a25, _b25, _c, _d;
    const value = returnError(() => toRaw2(instance.setupState[key]));
    const accessError = value instanceof Error;
    const rawData = raw[key];
    let result;
    let isOtherType = accessError || typeof value === "function" || ensurePropertyExists(value, "render") && typeof value.render === "function" || ensurePropertyExists(value, "__asyncLoader") && typeof value.__asyncLoader === "function" || typeof value === "object" && value && ("setup" in value || "props" in value) || /^v[A-Z]/.test(key);
    if (rawData && !accessError) {
      const info = getSetupStateType(rawData);
      const { stateType, stateTypeName } = getStateTypeAndName(info);
      const isState = info.ref || info.computed || info.reactive;
      const raw2 = ensurePropertyExists(rawData, "effect") ? ((_b25 = (_a25 = rawData.effect) == null ? void 0 : _a25.raw) == null ? void 0 : _b25.toString()) || ((_d = (_c = rawData.effect) == null ? void 0 : _c.fn) == null ? void 0 : _d.toString()) : null;
      if (stateType)
        isOtherType = false;
      result = {
        ...stateType ? { stateType, stateTypeName } : {},
        ...raw2 ? { raw: raw2 } : {},
        editable: isState && !info.readonly
      };
    }
    const type = isOtherType ? "setup (other)" : "setup";
    return {
      key,
      value,
      type,
      // @ts-expect-error ignore
      ...result
    };
  });
}
function processComputed(instance, mergedType) {
  const type = mergedType;
  const computed = [];
  const defs = type.computed || {};
  for (const key in defs) {
    const def = defs[key];
    const type2 = typeof def === "function" && def.vuex ? "vuex bindings" : "computed";
    computed.push({
      type: type2,
      key,
      value: returnError(() => {
        var _a25;
        return (_a25 = instance == null ? void 0 : instance.proxy) == null ? void 0 : _a25[key];
      }),
      editable: typeof def.set === "function"
    });
  }
  return computed;
}
function processAttrs(instance) {
  return Object.keys(instance.attrs).map((key) => ({
    type: "attrs",
    key,
    value: returnError(() => instance.attrs[key])
  }));
}
function processProvide(instance) {
  return Reflect.ownKeys(instance.provides).map((key) => ({
    type: "provided",
    key: key.toString(),
    value: returnError(() => instance.provides[key])
  }));
}
function processInject(instance, mergedType) {
  if (!(mergedType == null ? void 0 : mergedType.inject))
    return [];
  let keys = [];
  let defaultValue;
  if (Array.isArray(mergedType.inject)) {
    keys = mergedType.inject.map((key) => ({
      key,
      originalKey: key
    }));
  } else {
    keys = Reflect.ownKeys(mergedType.inject).map((key) => {
      const value = mergedType.inject[key];
      let originalKey;
      if (typeof value === "string" || typeof value === "symbol") {
        originalKey = value;
      } else {
        originalKey = value.from;
        defaultValue = value.default;
      }
      return {
        key,
        originalKey
      };
    });
  }
  return keys.map(({ key, originalKey }) => ({
    type: "injected",
    key: originalKey && key !== originalKey ? `${originalKey.toString()} \u279E ${key.toString()}` : key.toString(),
    // eslint-disable-next-line no-prototype-builtins
    value: returnError(() => instance.ctx.hasOwnProperty(key) ? instance.ctx[key] : instance.provides.hasOwnProperty(originalKey) ? instance.provides[originalKey] : defaultValue)
  }));
}
function processRefs(instance) {
  return Object.keys(instance.refs).map((key) => ({
    type: "template refs",
    key,
    value: returnError(() => instance.refs[key])
  }));
}
function processEventListeners(instance) {
  var _a25, _b25;
  const emitsDefinition = instance.type.emits;
  const declaredEmits = Array.isArray(emitsDefinition) ? emitsDefinition : Object.keys(emitsDefinition != null ? emitsDefinition : {});
  const keys = Object.keys((_b25 = (_a25 = instance == null ? void 0 : instance.vnode) == null ? void 0 : _a25.props) != null ? _b25 : {});
  const result = [];
  for (const key of keys) {
    const [prefix, ...eventNameParts] = key.split(/(?=[A-Z])/);
    if (prefix === "on") {
      const eventName = eventNameParts.join("-").toLowerCase();
      const isDeclared = declaredEmits.includes(eventName);
      result.push({
        type: "event listeners",
        key: eventName,
        value: {
          _custom: {
            displayText: isDeclared ? "\u2705 Declared" : "\u26A0\uFE0F Not declared",
            key: isDeclared ? "\u2705 Declared" : "\u26A0\uFE0F Not declared",
            value: isDeclared ? "\u2705 Declared" : "\u26A0\uFE0F Not declared",
            tooltipText: !isDeclared ? `The event <code>${eventName}</code> is not declared in the <code>emits</code> option. It will leak into the component's attributes (<code>$attrs</code>).` : null
          }
        }
      });
    }
  }
  return result;
}
function processInstanceState(instance) {
  const mergedType = resolveMergedOptions(instance);
  return processProps(instance).concat(
    processState(instance),
    processSetupState(instance),
    processComputed(instance, mergedType),
    processAttrs(instance),
    processProvide(instance),
    processInject(instance, mergedType),
    processRefs(instance),
    processEventListeners(instance)
  );
}

// src/core/component/state/index.ts
function getInstanceState(params) {
  var _a25;
  const instance = getComponentInstance(activeAppRecord.value, params.instanceId);
  const id = getUniqueComponentId(instance);
  const name = getInstanceName(instance);
  const file = (_a25 = instance == null ? void 0 : instance.type) == null ? void 0 : _a25.__file;
  const state = processInstanceState(instance);
  return {
    id,
    name,
    file,
    state,
    instance
  };
}

// src/core/component/tree/walker.ts
init_esm_shims();

// src/core/component/tree/filter.ts
init_esm_shims();

var ComponentFilter = class {
  constructor(filter) {
    this.filter = filter || "";
  }
  /**
   * Check if an instance is qualified.
   *
   * @param {Vue|Vnode} instance
   * @return {boolean}
   */
  isQualified(instance) {
    const name = getInstanceName(instance);
    return (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.classify)(name).toLowerCase().includes(this.filter) || (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.kebabize)(name).toLowerCase().includes(this.filter);
  }
};
function createComponentFilter(filterText) {
  return new ComponentFilter(filterText);
}

// src/core/component/tree/walker.ts
var ComponentWalker = class {
  constructor(options) {
    // Dedupe instances (Some instances may be both on a component and on a child abstract/functional component)
    this.captureIds = /* @__PURE__ */ new Map();
    const { filterText = "", maxDepth, recursively, api } = options;
    this.componentFilter = createComponentFilter(filterText);
    this.maxDepth = maxDepth;
    this.recursively = recursively;
    this.api = api;
  }
  getComponentTree(instance) {
    this.captureIds = /* @__PURE__ */ new Map();
    return this.findQualifiedChildren(instance, 0);
  }
  getComponentParents(instance) {
    this.captureIds = /* @__PURE__ */ new Map();
    const parents = [];
    this.captureId(instance);
    let parent = instance;
    while (parent = parent.parent) {
      this.captureId(parent);
      parents.push(parent);
    }
    return parents;
  }
  captureId(instance) {
    if (!instance)
      return null;
    const id = instance.__VUE_DEVTOOLS_NEXT_UID__ != null ? instance.__VUE_DEVTOOLS_NEXT_UID__ : getUniqueComponentId(instance);
    instance.__VUE_DEVTOOLS_NEXT_UID__ = id;
    if (this.captureIds.has(id))
      return null;
    else
      this.captureIds.set(id, void 0);
    this.mark(instance);
    return id;
  }
  /**
   * Capture the meta information of an instance. (recursive)
   *
   * @param {Vue} instance
   * @return {object}
   */
  async capture(instance, depth) {
    var _a25;
    if (!instance)
      return null;
    const id = this.captureId(instance);
    const name = getInstanceName(instance);
    const children = this.getInternalInstanceChildren(instance.subTree).filter((child) => !isBeingDestroyed(child));
    const parents = this.getComponentParents(instance) || [];
    const inactive = !!instance.isDeactivated || parents.some((parent) => parent.isDeactivated);
    const treeNode = {
      uid: instance.uid,
      id,
      name,
      renderKey: getRenderKey(instance.vnode ? instance.vnode.key : null),
      inactive,
      children: [],
      isFragment: isFragment(instance),
      tags: typeof instance.type !== "function" ? [] : [
        {
          label: "functional",
          textColor: 5592405,
          backgroundColor: 15658734
        }
      ],
      autoOpen: this.recursively,
      file: instance.type.__file || ""
    };
    if (depth < this.maxDepth || instance.type.__isKeepAlive || parents.some((parent) => parent.type.__isKeepAlive)) {
      treeNode.children = await Promise.all(children.map((child) => this.capture(child, depth + 1)).filter(Boolean));
    }
    if (this.isKeepAlive(instance)) {
      const cachedComponents = this.getKeepAliveCachedInstances(instance);
      const childrenIds = children.map((child) => child.__VUE_DEVTOOLS_NEXT_UID__);
      for (const cachedChild of cachedComponents) {
        if (!childrenIds.includes(cachedChild.__VUE_DEVTOOLS_NEXT_UID__)) {
          const node = await this.capture({ ...cachedChild, isDeactivated: true }, depth + 1);
          if (node)
            treeNode.children.push(node);
        }
      }
    }
    const rootElements = getRootElementsFromComponentInstance(instance);
    const firstElement = rootElements[0];
    if (firstElement == null ? void 0 : firstElement.parentElement) {
      const parentInstance = instance.parent;
      const parentRootElements = parentInstance ? getRootElementsFromComponentInstance(parentInstance) : [];
      let el = firstElement;
      const indexList = [];
      do {
        indexList.push(Array.from(el.parentElement.childNodes).indexOf(el));
        el = el.parentElement;
      } while (el.parentElement && parentRootElements.length && !parentRootElements.includes(el));
      treeNode.domOrder = indexList.reverse();
    } else {
      treeNode.domOrder = [-1];
    }
    if ((_a25 = instance.suspense) == null ? void 0 : _a25.suspenseKey) {
      treeNode.tags.push({
        label: instance.suspense.suspenseKey,
        backgroundColor: 14979812,
        textColor: 16777215
      });
      this.mark(instance, true);
    }
    this.api.visitComponentTree({
      treeNode,
      componentInstance: instance,
      app: instance.appContext.app,
      filter: this.componentFilter.filter
    });
    return treeNode;
  }
  /**
   * Find qualified children from a single instance.
   * If the instance itself is qualified, just return itself.
   * This is ok because [].concat works in both cases.
   *
   * @param {Vue|Vnode} instance
   * @return {Vue|Array}
   */
  async findQualifiedChildren(instance, depth) {
    var _a25;
    if (this.componentFilter.isQualified(instance) && !((_a25 = instance.type.devtools) == null ? void 0 : _a25.hide)) {
      return [await this.capture(instance, depth)];
    } else if (instance.subTree) {
      const list = this.isKeepAlive(instance) ? this.getKeepAliveCachedInstances(instance) : this.getInternalInstanceChildren(instance.subTree);
      return this.findQualifiedChildrenFromList(list, depth);
    } else {
      return [];
    }
  }
  /**
   * Iterate through an array of instances and flatten it into
   * an array of qualified instances. This is a depth-first
   * traversal - e.g. if an instance is not matched, we will
   * recursively go deeper until a qualified child is found.
   *
   * @param {Array} instances
   * @return {Array}
   */
  async findQualifiedChildrenFromList(instances, depth) {
    instances = instances.filter((child) => {
      var _a25;
      return !isBeingDestroyed(child) && !((_a25 = child.type.devtools) == null ? void 0 : _a25.hide);
    });
    if (!this.componentFilter.filter)
      return Promise.all(instances.map((child) => this.capture(child, depth)));
    else
      return Array.prototype.concat.apply([], await Promise.all(instances.map((i) => this.findQualifiedChildren(i, depth))));
  }
  /**
   * Get children from a component instance.
   */
  getInternalInstanceChildren(subTree, suspense = null) {
    const list = [];
    if (subTree) {
      if (subTree.component) {
        !suspense ? list.push(subTree.component) : list.push({ ...subTree.component, suspense });
      } else if (subTree.suspense) {
        const suspenseKey = !subTree.suspense.isInFallback ? "suspense default" : "suspense fallback";
        list.push(...this.getInternalInstanceChildren(subTree.suspense.activeBranch, { ...subTree.suspense, suspenseKey }));
      } else if (Array.isArray(subTree.children)) {
        subTree.children.forEach((childSubTree) => {
          if (childSubTree.component)
            !suspense ? list.push(childSubTree.component) : list.push({ ...childSubTree.component, suspense });
          else
            list.push(...this.getInternalInstanceChildren(childSubTree, suspense));
        });
      }
    }
    return list.filter((child) => {
      var _a25;
      return !isBeingDestroyed(child) && !((_a25 = child.type.devtools) == null ? void 0 : _a25.hide);
    });
  }
  /**
   * Mark an instance as captured and store it in the instance map.
   *
   * @param {Vue} instance
   */
  mark(instance, force = false) {
    const instanceMap = getAppRecord(instance).instanceMap;
    if (force || !instanceMap.has(instance.__VUE_DEVTOOLS_NEXT_UID__)) {
      instanceMap.set(instance.__VUE_DEVTOOLS_NEXT_UID__, instance);
      activeAppRecord.value.instanceMap = instanceMap;
    }
  }
  isKeepAlive(instance) {
    return instance.type.__isKeepAlive && instance.__v_cache;
  }
  getKeepAliveCachedInstances(instance) {
    return Array.from(instance.__v_cache.values()).map((vnode) => vnode.component).filter(Boolean);
  }
};

// src/core/timeline/index.ts
init_esm_shims();


// src/core/timeline/perf.ts
init_esm_shims();
var markEndQueue = /* @__PURE__ */ new Map();
var PERFORMANCE_EVENT_LAYER_ID = "performance";
async function performanceMarkStart(api, app, uid, vm, type, time) {
  const appRecord = await getAppRecord(app);
  if (!appRecord) {
    return;
  }
  const componentName = getInstanceName(vm) || "Unknown Component";
  const groupId = devtoolsState.perfUniqueGroupId++;
  const groupKey = `${uid}-${type}`;
  appRecord.perfGroupIds.set(groupKey, { groupId, time });
  await api.addTimelineEvent({
    layerId: PERFORMANCE_EVENT_LAYER_ID,
    event: {
      time: Date.now(),
      data: {
        component: componentName,
        type,
        measure: "start"
      },
      title: componentName,
      subtitle: type,
      groupId
    }
  });
  if (markEndQueue.has(groupKey)) {
    const {
      app: app2,
      uid: uid2,
      instance,
      type: type2,
      time: time2
    } = markEndQueue.get(groupKey);
    markEndQueue.delete(groupKey);
    await performanceMarkEnd(
      api,
      app2,
      uid2,
      instance,
      type2,
      time2
    );
  }
}
function performanceMarkEnd(api, app, uid, vm, type, time) {
  const appRecord = getAppRecord(app);
  if (!appRecord)
    return;
  const componentName = getInstanceName(vm) || "Unknown Component";
  const groupKey = `${uid}-${type}`;
  const groupInfo = appRecord.perfGroupIds.get(groupKey);
  if (groupInfo) {
    const groupId = groupInfo.groupId;
    const startTime = groupInfo.time;
    const duration = time - startTime;
    api.addTimelineEvent({
      layerId: PERFORMANCE_EVENT_LAYER_ID,
      event: {
        time: Date.now(),
        data: {
          component: componentName,
          type,
          measure: "end",
          duration: {
            _custom: {
              type: "Duration",
              value: duration,
              display: `${duration} ms`
            }
          }
        },
        title: componentName,
        subtitle: type,
        groupId
      }
    });
  } else {
    markEndQueue.set(groupKey, { app, uid, instance: vm, type, time });
  }
}

// src/core/timeline/index.ts
var COMPONENT_EVENT_LAYER_ID = "component-event";
function setupBuiltinTimelineLayers(api) {
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser)
    return;
  api.addTimelineLayer({
    id: "mouse",
    label: "Mouse",
    color: 10768815
  });
  ["mousedown", "mouseup", "click", "dblclick"].forEach((eventType) => {
    if (!devtoolsState.timelineLayersState.recordingState || !devtoolsState.timelineLayersState.mouseEventEnabled)
      return;
    window.addEventListener(eventType, async (event) => {
      await api.addTimelineEvent({
        layerId: "mouse",
        event: {
          time: Date.now(),
          data: {
            type: eventType,
            x: event.clientX,
            y: event.clientY
          },
          title: eventType
        }
      });
    }, {
      capture: true,
      passive: true
    });
  });
  api.addTimelineLayer({
    id: "keyboard",
    label: "Keyboard",
    color: 8475055
  });
  ["keyup", "keydown", "keypress"].forEach((eventType) => {
    window.addEventListener(eventType, async (event) => {
      if (!devtoolsState.timelineLayersState.recordingState || !devtoolsState.timelineLayersState.keyboardEventEnabled)
        return;
      await api.addTimelineEvent({
        layerId: "keyboard",
        event: {
          time: Date.now(),
          data: {
            type: eventType,
            key: event.key,
            ctrlKey: event.ctrlKey,
            shiftKey: event.shiftKey,
            altKey: event.altKey,
            metaKey: event.metaKey
          },
          title: event.key
        }
      });
    }, {
      capture: true,
      passive: true
    });
  });
  api.addTimelineLayer({
    id: COMPONENT_EVENT_LAYER_ID,
    label: "Component events",
    color: 5226637
  });
  hook.on.componentEmit(async (app, instance, event, params) => {
    if (!devtoolsState.timelineLayersState.recordingState || !devtoolsState.timelineLayersState.componentEventEnabled)
      return;
    const appRecord = await getAppRecord(app);
    if (!appRecord)
      return;
    const componentId = `${appRecord.id}:${instance.uid}`;
    const componentName = getInstanceName(instance) || "Unknown Component";
    api.addTimelineEvent({
      layerId: COMPONENT_EVENT_LAYER_ID,
      event: {
        time: Date.now(),
        data: {
          component: {
            _custom: {
              type: "component-definition",
              display: componentName
            }
          },
          event,
          params
        },
        title: event,
        subtitle: `by ${componentName}`,
        meta: {
          componentId
        }
      }
    });
  });
  api.addTimelineLayer({
    id: "performance",
    label: PERFORMANCE_EVENT_LAYER_ID,
    color: 4307050
  });
  hook.on.perfStart((app, uid, vm, type, time) => {
    if (!devtoolsState.timelineLayersState.recordingState || !devtoolsState.timelineLayersState.performanceEventEnabled)
      return;
    performanceMarkStart(api, app, uid, vm, type, time);
  });
  hook.on.perfEnd((app, uid, vm, type, time) => {
    if (!devtoolsState.timelineLayersState.recordingState || !devtoolsState.timelineLayersState.performanceEventEnabled)
      return;
    performanceMarkEnd(api, app, uid, vm, type, time);
  });
}

// src/core/vm/index.ts
init_esm_shims();
var MAX_$VM = 10;
var $vmQueue = [];
function exposeInstanceToWindow(componentInstance) {
  if (typeof window === "undefined")
    return;
  const win = window;
  if (!componentInstance)
    return;
  win.$vm = componentInstance;
  if ($vmQueue[0] !== componentInstance) {
    if ($vmQueue.length >= MAX_$VM) {
      $vmQueue.pop();
    }
    for (let i = $vmQueue.length; i > 0; i--) {
      win[`$vm${i}`] = $vmQueue[i] = $vmQueue[i - 1];
    }
    win.$vm0 = $vmQueue[0] = componentInstance;
  }
}

// src/core/plugin/components.ts
var INSPECTOR_ID = "components";
function createComponentsDevToolsPlugin(app) {
  const descriptor = {
    id: INSPECTOR_ID,
    label: "Components",
    app
  };
  const setupFn = (api) => {
    api.addInspector({
      id: INSPECTOR_ID,
      label: "Components",
      treeFilterPlaceholder: "Search components"
    });
    setupBuiltinTimelineLayers(api);
    api.on.getInspectorTree(async (payload) => {
      if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
        const instance = getComponentInstance(activeAppRecord.value, payload.instanceId);
        if (instance) {
          const walker2 = new ComponentWalker({
            filterText: payload.filter,
            // @TODO: should make this configurable?
            maxDepth: 100,
            recursively: false,
            api
          });
          payload.rootNodes = await walker2.getComponentTree(instance);
        }
      }
    });
    api.on.getInspectorState(async (payload) => {
      var _a25;
      if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
        const result = getInstanceState({
          instanceId: payload.nodeId
        });
        const componentInstance = result.instance;
        const app2 = (_a25 = result.instance) == null ? void 0 : _a25.appContext.app;
        const _payload = {
          componentInstance,
          app: app2,
          instanceData: result
        };
        devtoolsContext.hooks.callHookWith((callbacks) => {
          callbacks.forEach((cb) => cb(_payload));
        }, "inspectComponent" /* INSPECT_COMPONENT */);
        payload.state = result;
        exposeInstanceToWindow(componentInstance);
      }
    });
    api.on.editInspectorState(async (payload) => {
      if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
        editState(payload);
        await api.sendInspectorState("components");
      }
    });
    const debounceSendInspectorTree = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(() => {
      api.sendInspectorTree(INSPECTOR_ID);
    }, 120);
    const debounceSendInspectorState = (0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(() => {
      api.sendInspectorState(INSPECTOR_ID);
    }, 120);
    const componentAddedCleanup = hook.on.componentAdded(async (app2, uid, parentUid, component) => {
      var _a25, _b25, _c;
      if (devtoolsState.highPerfModeEnabled)
        return;
      if ((_c = (_b25 = (_a25 = app2 == null ? void 0 : app2._instance) == null ? void 0 : _a25.type) == null ? void 0 : _b25.devtools) == null ? void 0 : _c.hide)
        return;
      if (!app2 || typeof uid !== "number" && !uid || !component)
        return;
      const id = await getComponentId({
        app: app2,
        uid,
        instance: component
      });
      const appRecord = await getAppRecord(app2);
      if (component) {
        if (component.__VUE_DEVTOOLS_NEXT_UID__ == null)
          component.__VUE_DEVTOOLS_NEXT_UID__ = id;
        if (!(appRecord == null ? void 0 : appRecord.instanceMap.has(id))) {
          appRecord == null ? void 0 : appRecord.instanceMap.set(id, component);
          if (activeAppRecord.value.id === (appRecord == null ? void 0 : appRecord.id))
            activeAppRecord.value.instanceMap = appRecord.instanceMap;
        }
      }
      if (!appRecord)
        return;
      debounceSendInspectorTree();
    });
    const componentUpdatedCleanup = hook.on.componentUpdated(async (app2, uid, parentUid, component) => {
      var _a25, _b25, _c;
      if (devtoolsState.highPerfModeEnabled)
        return;
      if ((_c = (_b25 = (_a25 = app2 == null ? void 0 : app2._instance) == null ? void 0 : _a25.type) == null ? void 0 : _b25.devtools) == null ? void 0 : _c.hide)
        return;
      if (!app2 || typeof uid !== "number" && !uid || !component)
        return;
      const id = await getComponentId({
        app: app2,
        uid,
        instance: component
      });
      const appRecord = await getAppRecord(app2);
      if (component) {
        if (component.__VUE_DEVTOOLS_NEXT_UID__ == null)
          component.__VUE_DEVTOOLS_NEXT_UID__ = id;
        if (!(appRecord == null ? void 0 : appRecord.instanceMap.has(id))) {
          appRecord == null ? void 0 : appRecord.instanceMap.set(id, component);
          if (activeAppRecord.value.id === (appRecord == null ? void 0 : appRecord.id))
            activeAppRecord.value.instanceMap = appRecord.instanceMap;
        }
      }
      if (!appRecord)
        return;
      debounceSendInspectorTree();
      debounceSendInspectorState();
    });
    const componentRemovedCleanup = hook.on.componentRemoved(async (app2, uid, parentUid, component) => {
      var _a25, _b25, _c;
      if (devtoolsState.highPerfModeEnabled)
        return;
      if ((_c = (_b25 = (_a25 = app2 == null ? void 0 : app2._instance) == null ? void 0 : _a25.type) == null ? void 0 : _b25.devtools) == null ? void 0 : _c.hide)
        return;
      if (!app2 || typeof uid !== "number" && !uid || !component)
        return;
      const appRecord = await getAppRecord(app2);
      if (!appRecord)
        return;
      const id = await getComponentId({
        app: app2,
        uid,
        instance: component
      });
      appRecord == null ? void 0 : appRecord.instanceMap.delete(id);
      if (activeAppRecord.value.id === (appRecord == null ? void 0 : appRecord.id))
        activeAppRecord.value.instanceMap = appRecord.instanceMap;
      debounceSendInspectorTree();
    });
  };
  return [descriptor, setupFn];
}

// src/core/plugin/index.ts
var _a12, _b12;
(_b12 = (_a12 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__) != null ? _b12 : _a12.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__ = /* @__PURE__ */ new Set();
function setupDevToolsPlugin(pluginDescriptor, setupFn) {
  return hook.setupDevToolsPlugin(pluginDescriptor, setupFn);
}
function callDevToolsPluginSetupFn(plugin, app) {
  const [pluginDescriptor, setupFn] = plugin;
  if (pluginDescriptor.app !== app)
    return;
  const api = new DevToolsPluginAPI({
    plugin: {
      setupFn,
      descriptor: pluginDescriptor
    },
    ctx: devtoolsContext
  });
  if (pluginDescriptor.packageName === "vuex") {
    api.on.editInspectorState((payload) => {
      api.sendInspectorState(payload.inspectorId);
    });
  }
  setupFn(api);
}
function removeRegisteredPluginApp(app) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.delete(app);
}
function registerDevToolsPlugin(app, options) {
  if (_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.has(app)) {
    return;
  }
  if (devtoolsState.highPerfModeEnabled && !(options == null ? void 0 : options.inspectingComponent)) {
    return;
  }
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT__REGISTERED_PLUGIN_APPS__.add(app);
  devtoolsPluginBuffer.forEach((plugin) => {
    callDevToolsPluginSetupFn(plugin, app);
  });
}

// src/core/router/index.ts
init_esm_shims();



// src/ctx/router.ts
init_esm_shims();

var ROUTER_KEY = "__VUE_DEVTOOLS_ROUTER__";
var ROUTER_INFO_KEY = "__VUE_DEVTOOLS_ROUTER_INFO__";
var _a13, _b13;
(_b13 = (_a13 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target)[ROUTER_INFO_KEY]) != null ? _b13 : _a13[ROUTER_INFO_KEY] = {
  currentRoute: null,
  routes: []
};
var _a14, _b14;
(_b14 = (_a14 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target)[ROUTER_KEY]) != null ? _b14 : _a14[ROUTER_KEY] = {};
var devtoolsRouterInfo = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_INFO_KEY], {
  get(target22, property) {
    return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_INFO_KEY][property];
  }
});
var devtoolsRouter = new Proxy(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_KEY], {
  get(target22, property) {
    if (property === "value") {
      return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_KEY];
    }
  }
});

// src/core/router/index.ts
function getRoutes(router) {
  const routesMap = /* @__PURE__ */ new Map();
  return ((router == null ? void 0 : router.getRoutes()) || []).filter((i) => !routesMap.has(i.path) && routesMap.set(i.path, 1));
}
function filterRoutes(routes) {
  return routes.map((item) => {
    let { path, name, children, meta } = item;
    if (children == null ? void 0 : children.length)
      children = filterRoutes(children);
    return {
      path,
      name,
      children,
      meta
    };
  });
}
function filterCurrentRoute(route) {
  if (route) {
    const { fullPath, hash, href, path, name, matched, params, query } = route;
    return {
      fullPath,
      hash,
      href,
      path,
      name,
      params,
      query,
      matched: filterRoutes(matched)
    };
  }
  return route;
}
function normalizeRouterInfo(appRecord, activeAppRecord2) {
  function init() {
    var _a25;
    const router = (_a25 = appRecord.app) == null ? void 0 : _a25.config.globalProperties.$router;
    const currentRoute = filterCurrentRoute(router == null ? void 0 : router.currentRoute.value);
    const routes = filterRoutes(getRoutes(router));
    const c = console.warn;
    console.warn = () => {
    };
    _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_INFO_KEY] = {
      currentRoute: currentRoute ? (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.deepClone)(currentRoute) : {},
      routes: (0,_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.deepClone)(routes)
    };
    _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_KEY] = router;
    console.warn = c;
  }
  init();
  hook.on.componentUpdated((0,perfect_debounce__WEBPACK_IMPORTED_MODULE_2__.debounce)(() => {
    var _a25;
    if (((_a25 = activeAppRecord2.value) == null ? void 0 : _a25.app) !== appRecord.app)
      return;
    init();
    if (devtoolsState.highPerfModeEnabled)
      return;
    devtoolsContext.hooks.callHook("routerInfoUpdated" /* ROUTER_INFO_UPDATED */, { state: _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[ROUTER_INFO_KEY] });
  }, 200));
}

// src/ctx/api.ts
function createDevToolsApi(hooks2) {
  return {
    // get inspector tree
    async getInspectorTree(payload) {
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        rootNodes: []
      };
      await new Promise((resolve) => {
        hooks2.callHookWith(async (callbacks) => {
          await Promise.all(callbacks.map((cb) => cb(_payload)));
          resolve();
        }, "getInspectorTree" /* GET_INSPECTOR_TREE */);
      });
      return _payload.rootNodes;
    },
    // get inspector state
    async getInspectorState(payload) {
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        state: null
      };
      const ctx = {
        currentTab: `custom-inspector:${payload.inspectorId}`
      };
      await new Promise((resolve) => {
        hooks2.callHookWith(async (callbacks) => {
          await Promise.all(callbacks.map((cb) => cb(_payload, ctx)));
          resolve();
        }, "getInspectorState" /* GET_INSPECTOR_STATE */);
      });
      return _payload.state;
    },
    // edit inspector state
    editInspectorState(payload) {
      const stateEditor2 = new StateEditor();
      const _payload = {
        ...payload,
        app: activeAppRecord.value.app,
        set: (obj, path = payload.path, value = payload.state.value, cb) => {
          stateEditor2.set(obj, path, value, cb || stateEditor2.createDefaultSetCallback(payload.state));
        }
      };
      hooks2.callHookWith((callbacks) => {
        callbacks.forEach((cb) => cb(_payload));
      }, "editInspectorState" /* EDIT_INSPECTOR_STATE */);
    },
    // send inspector state
    sendInspectorState(inspectorId) {
      const inspector = getInspector(inspectorId);
      hooks2.callHook("sendInspectorState" /* SEND_INSPECTOR_STATE */, { inspectorId, plugin: {
        descriptor: inspector.descriptor,
        setupFn: () => ({})
      } });
    },
    // inspect component inspector
    inspectComponentInspector() {
      return inspectComponentHighLighter();
    },
    // cancel inspect component inspector
    cancelInspectComponentInspector() {
      return cancelInspectComponentHighLighter();
    },
    // get component render code
    getComponentRenderCode(id) {
      const instance = getComponentInstance(activeAppRecord.value, id);
      if (instance)
        return !(typeof (instance == null ? void 0 : instance.type) === "function") ? instance.render.toString() : instance.type.toString();
    },
    // scroll to component
    scrollToComponent(id) {
      return scrollToComponent({ id });
    },
    // open in editor
    openInEditor,
    // get vue inspector
    getVueInspector: getComponentInspector,
    // toggle app
    toggleApp(id, options) {
      const appRecord = devtoolsAppRecords.value.find((record) => record.id === id);
      if (appRecord) {
        setActiveAppRecordId(id);
        setActiveAppRecord(appRecord);
        normalizeRouterInfo(appRecord, activeAppRecord);
        callInspectorUpdatedHook();
        registerDevToolsPlugin(appRecord.app, options);
      }
    },
    // inspect dom
    inspectDOM(instanceId) {
      const instance = getComponentInstance(activeAppRecord.value, instanceId);
      if (instance) {
        const [el] = getRootElementsFromComponentInstance(instance);
        if (el) {
          _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_INSPECT_DOM_TARGET__ = el;
        }
      }
    },
    updatePluginSettings(pluginId, key, value) {
      setPluginSettings(pluginId, key, value);
    },
    getPluginSettings(pluginId) {
      return {
        options: getPluginSettingsOptions(pluginId),
        values: getPluginSettings(pluginId)
      };
    }
  };
}

// src/ctx/env.ts
init_esm_shims();

var _a15, _b15;
(_b15 = (_a15 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_ENV__) != null ? _b15 : _a15.__VUE_DEVTOOLS_ENV__ = {
  vitePluginDetected: false
};
function getDevToolsEnv() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_ENV__;
}
function setDevToolsEnv(env) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_ENV__ = {
    ..._vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_ENV__,
    ...env
  };
}

// src/ctx/index.ts
var hooks = createDevToolsCtxHooks();
var _a16, _b16;
(_b16 = (_a16 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_CONTEXT__) != null ? _b16 : _a16.__VUE_DEVTOOLS_KIT_CONTEXT__ = {
  hooks,
  get state() {
    return {
      ...devtoolsState,
      activeAppRecordId: activeAppRecord.id,
      activeAppRecord: activeAppRecord.value,
      appRecords: devtoolsAppRecords.value
    };
  },
  api: createDevToolsApi(hooks)
};
var devtoolsContext = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_CONTEXT__;

// src/core/app/index.ts
init_esm_shims();
var import_speakingurl = __toESM(require_speakingurl2(), 1);

var _a17, _b17;
var appRecordInfo = (_b17 = (_a17 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__) != null ? _b17 : _a17.__VUE_DEVTOOLS_NEXT_APP_RECORD_INFO__ = {
  id: 0,
  appIds: /* @__PURE__ */ new Set()
};
function getAppRecordName(app, fallbackName) {
  var _a25;
  return ((_a25 = app == null ? void 0 : app._component) == null ? void 0 : _a25.name) || `App ${fallbackName}`;
}
function getAppRootInstance(app) {
  var _a25, _b25, _c, _d;
  if (app._instance)
    return app._instance;
  else if ((_b25 = (_a25 = app._container) == null ? void 0 : _a25._vnode) == null ? void 0 : _b25.component)
    return (_d = (_c = app._container) == null ? void 0 : _c._vnode) == null ? void 0 : _d.component;
}
function removeAppRecordId(app) {
  const id = app.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__;
  if (id != null) {
    appRecordInfo.appIds.delete(id);
    appRecordInfo.id--;
  }
}
function getAppRecordId(app, defaultId) {
  if (app.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__ != null)
    return app.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__;
  let id = defaultId != null ? defaultId : (appRecordInfo.id++).toString();
  if (defaultId && appRecordInfo.appIds.has(id)) {
    let count = 1;
    while (appRecordInfo.appIds.has(`${defaultId}_${count}`))
      count++;
    id = `${defaultId}_${count}`;
  }
  appRecordInfo.appIds.add(id);
  app.__VUE_DEVTOOLS_NEXT_APP_RECORD_ID__ = id;
  return id;
}
function createAppRecord(app, types) {
  var _a25, _b25;
  const rootInstance = getAppRootInstance(app);
  if (rootInstance) {
    appRecordInfo.id++;
    const name = getAppRecordName(app, appRecordInfo.id.toString());
    const id = getAppRecordId(app, (0, import_speakingurl.default)(name));
    const [el] = getRootElementsFromComponentInstance(rootInstance);
    const record = {
      id,
      name,
      types,
      instanceMap: /* @__PURE__ */ new Map(),
      perfGroupIds: /* @__PURE__ */ new Map(),
      rootInstance,
      iframe: _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser && document !== (el == null ? void 0 : el.ownerDocument) ? (_b25 = (_a25 = el == null ? void 0 : el.ownerDocument) == null ? void 0 : _a25.location) == null ? void 0 : _b25.pathname : void 0
    };
    app.__VUE_DEVTOOLS_NEXT_APP_RECORD__ = record;
    const rootId = `${record.id}:root`;
    record.instanceMap.set(rootId, record.rootInstance);
    record.rootInstance.__VUE_DEVTOOLS_NEXT_UID__ = rootId;
    return record;
  } else {
    return {};
  }
}

// src/core/iframe/index.ts
init_esm_shims();
function detectIframeApp(target22, inIframe = false) {
  if (inIframe) {
    let sendEventToParent2 = function(cb) {
      try {
        const hook3 = window.parent.__VUE_DEVTOOLS_GLOBAL_HOOK__;
        if (hook3) {
          cb(hook3);
        }
      } catch (e) {
      }
    };
    var sendEventToParent = sendEventToParent2;
    const hook2 = {
      id: "vue-devtools-next",
      devtoolsVersion: "7.0",
      on: (event, cb) => {
        sendEventToParent2((hook3) => {
          hook3.on(event, cb);
        });
      },
      once: (event, cb) => {
        sendEventToParent2((hook3) => {
          hook3.once(event, cb);
        });
      },
      off: (event, cb) => {
        sendEventToParent2((hook3) => {
          hook3.off(event, cb);
        });
      },
      emit: (event, ...payload) => {
        sendEventToParent2((hook3) => {
          hook3.emit(event, ...payload);
        });
      }
    };
    Object.defineProperty(target22, "__VUE_DEVTOOLS_GLOBAL_HOOK__", {
      get() {
        return hook2;
      },
      configurable: true
    });
  }
  function injectVueHookToIframe(iframe) {
    if (iframe.__vdevtools__injected) {
      return;
    }
    try {
      iframe.__vdevtools__injected = true;
      const inject = () => {
        try {
          iframe.contentWindow.__VUE_DEVTOOLS_IFRAME__ = iframe;
          const script = iframe.contentDocument.createElement("script");
          script.textContent = `;(${detectIframeApp.toString()})(window, true)`;
          iframe.contentDocument.documentElement.appendChild(script);
          script.parentNode.removeChild(script);
        } catch (e) {
        }
      };
      inject();
      iframe.addEventListener("load", () => inject());
    } catch (e) {
    }
  }
  function injectVueHookToIframes() {
    if (typeof window === "undefined") {
      return;
    }
    const iframes = Array.from(document.querySelectorAll("iframe:not([data-vue-devtools-ignore])"));
    for (const iframe of iframes) {
      injectVueHookToIframe(iframe);
    }
  }
  injectVueHookToIframes();
  let iframeAppChecks = 0;
  const iframeAppCheckTimer = setInterval(() => {
    injectVueHookToIframes();
    iframeAppChecks++;
    if (iframeAppChecks >= 5) {
      clearInterval(iframeAppCheckTimer);
    }
  }, 1e3);
}

// src/core/index.ts
function initDevTools() {
  var _a25;
  detectIframeApp(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target);
  updateDevToolsState({
    vitePluginDetected: getDevToolsEnv().vitePluginDetected
  });
  const isDevToolsNext = ((_a25 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_GLOBAL_HOOK__) == null ? void 0 : _a25.id) === "vue-devtools-next";
  if (_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_GLOBAL_HOOK__ && isDevToolsNext)
    return;
  const _devtoolsHook = createDevToolsHook();
  if (_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_HOOK_REPLAY__) {
    try {
      _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_HOOK_REPLAY__.forEach((cb) => cb(_devtoolsHook));
      _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_HOOK_REPLAY__ = [];
    } catch (e) {
      console.error("[vue-devtools] Error during hook replay", e);
    }
  }
  _devtoolsHook.once("init", (Vue) => {
    _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_VUE2_APP_DETECTED__ = true;
    console.log("%c[_____Vue DevTools v7 log_____]", "color: red; font-bold: 600; font-size: 16px;");
    console.log("%cVue DevTools v7 detected in your Vue2 project. v7 only supports Vue3 and will not work.", "font-bold: 500; font-size: 14px;");
    const legacyChromeUrl = "https://chromewebstore.google.com/detail/vuejs-devtools/iaajmlceplecbljialhhkmedjlpdblhp";
    const legacyFirefoxUrl = "https://addons.mozilla.org/firefox/addon/vue-js-devtools-v6-legacy";
    console.log(`%cThe legacy version of chrome extension that supports both Vue 2 and Vue 3 has been moved to %c ${legacyChromeUrl}`, "font-size: 14px;", "text-decoration: underline; cursor: pointer;font-size: 14px;");
    console.log(`%cThe legacy version of firefox extension that supports both Vue 2 and Vue 3 has been moved to %c ${legacyFirefoxUrl}`, "font-size: 14px;", "text-decoration: underline; cursor: pointer;font-size: 14px;");
    console.log("%cPlease install and enable only the legacy version for your Vue2 app.", "font-bold: 500; font-size: 14px;");
    console.log("%c[_____Vue DevTools v7 log_____]", "color: red; font-bold: 600; font-size: 16px;");
  });
  hook.on.setupDevtoolsPlugin((pluginDescriptor, setupFn) => {
    var _a26;
    addDevToolsPluginToBuffer(pluginDescriptor, setupFn);
    const { app } = (_a26 = activeAppRecord) != null ? _a26 : {};
    if (pluginDescriptor.settings) {
      initPluginSettings(pluginDescriptor.id, pluginDescriptor.settings);
    }
    if (!app)
      return;
    callDevToolsPluginSetupFn([pluginDescriptor, setupFn], app);
  });
  onLegacyDevToolsPluginApiAvailable(() => {
    const normalizedPluginBuffer = devtoolsPluginBuffer.filter(([item]) => item.id !== "components");
    normalizedPluginBuffer.forEach(([pluginDescriptor, setupFn]) => {
      _devtoolsHook.emit("devtools-plugin:setup" /* SETUP_DEVTOOLS_PLUGIN */, pluginDescriptor, setupFn, { target: "legacy" });
    });
  });
  hook.on.vueAppInit(async (app, version, types) => {
    const appRecord = createAppRecord(app, types);
    const normalizedAppRecord = {
      ...appRecord,
      app,
      version
    };
    addDevToolsAppRecord(normalizedAppRecord);
    if (devtoolsAppRecords.value.length === 1) {
      setActiveAppRecord(normalizedAppRecord);
      setActiveAppRecordId(normalizedAppRecord.id);
      normalizeRouterInfo(normalizedAppRecord, activeAppRecord);
      registerDevToolsPlugin(normalizedAppRecord.app);
    }
    setupDevToolsPlugin(...createComponentsDevToolsPlugin(normalizedAppRecord.app));
    updateDevToolsState({
      connected: true
    });
    _devtoolsHook.apps.push(app);
  });
  hook.on.vueAppUnmount(async (app) => {
    const activeRecords = devtoolsAppRecords.value.filter((appRecord) => appRecord.app !== app);
    if (activeRecords.length === 0) {
      updateDevToolsState({
        connected: false
      });
    }
    removeDevToolsAppRecord(app);
    removeAppRecordId(app);
    if (activeAppRecord.value.app === app) {
      setActiveAppRecord(activeRecords[0]);
      devtoolsContext.hooks.callHook("sendActiveAppUpdatedToClient" /* SEND_ACTIVE_APP_UNMOUNTED_TO_CLIENT */);
    }
    _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_GLOBAL_HOOK__.apps.splice(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_GLOBAL_HOOK__.apps.indexOf(app), 1);
    removeRegisteredPluginApp(app);
  });
  subscribeDevToolsHook(_devtoolsHook);
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_GLOBAL_HOOK__) {
    Object.defineProperty(_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target, "__VUE_DEVTOOLS_GLOBAL_HOOK__", {
      get() {
        return _devtoolsHook;
      },
      configurable: true
    });
  } else {
    if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isNuxtApp) {
      Object.assign(__VUE_DEVTOOLS_GLOBAL_HOOK__, _devtoolsHook);
    }
  }
}
function onDevToolsClientConnected(fn) {
  return new Promise((resolve) => {
    if (devtoolsState.connected && devtoolsState.clientConnected) {
      fn();
      resolve();
      return;
    }
    devtoolsContext.hooks.hook("devtoolsConnectedUpdated" /* DEVTOOLS_CONNECTED_UPDATED */, ({ state }) => {
      if (state.connected && state.clientConnected) {
        fn();
        resolve();
      }
    });
  });
}

// src/core/high-perf-mode/index.ts
init_esm_shims();
function toggleHighPerfMode(state) {
  devtoolsState.highPerfModeEnabled = state != null ? state : !devtoolsState.highPerfModeEnabled;
  if (!state && activeAppRecord.value) {
    registerDevToolsPlugin(activeAppRecord.value.app);
  }
}

// src/core/component/state/format.ts
init_esm_shims();

// src/core/component/state/reviver.ts
init_esm_shims();

function reviveSet(val) {
  const result = /* @__PURE__ */ new Set();
  const list = val._custom.value;
  for (let i = 0; i < list.length; i++) {
    const value = list[i];
    result.add(revive(value));
  }
  return result;
}
function reviveMap(val) {
  const result = /* @__PURE__ */ new Map();
  const list = val._custom.value;
  for (let i = 0; i < list.length; i++) {
    const { key, value } = list[i];
    result.set(key, revive(value));
  }
  return result;
}
function revive(val) {
  if (val === UNDEFINED) {
    return void 0;
  } else if (val === INFINITY) {
    return Number.POSITIVE_INFINITY;
  } else if (val === NEGATIVE_INFINITY) {
    return Number.NEGATIVE_INFINITY;
  } else if (val === NAN) {
    return Number.NaN;
  } else if (val && val._custom) {
    const { _custom: custom } = val;
    if (custom.type === "component")
      return activeAppRecord.value.instanceMap.get(custom.id);
    else if (custom.type === "map")
      return reviveMap(val);
    else if (custom.type === "set")
      return reviveSet(val);
    else if (custom.type === "bigint")
      return BigInt(custom.value);
    else
      return revive(custom.value);
  } else if (symbolRE.test(val)) {
    const [, string] = symbolRE.exec(val);
    return Symbol.for(string);
  } else if (specialTypeRE.test(val)) {
    const [, type, string, , details] = specialTypeRE.exec(val);
    const result = new _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[type](string);
    if (type === "Error" && details)
      result.stack = details;
    return result;
  } else {
    return val;
  }
}
function reviver(key, value) {
  return revive(value);
}

// src/core/component/state/format.ts
function getInspectorStateValueType(value, raw = true) {
  const type = typeof value;
  if (value == null || value === UNDEFINED || value === "undefined") {
    return "null";
  } else if (type === "boolean" || type === "number" || value === INFINITY || value === NEGATIVE_INFINITY || value === NAN) {
    return "literal";
  } else if (value == null ? void 0 : value._custom) {
    if (raw || value._custom.display != null || value._custom.displayText != null)
      return "custom";
    else
      return getInspectorStateValueType(value._custom.value);
  } else if (typeof value === "string") {
    const typeMatch = specialTypeRE.exec(value);
    if (typeMatch) {
      const [, type2] = typeMatch;
      return `native ${type2}`;
    } else {
      return "string";
    }
  } else if (Array.isArray(value) || (value == null ? void 0 : value._isArray)) {
    return "array";
  } else if (isPlainObject(value)) {
    return "plain-object";
  } else {
    return "unknown";
  }
}
function formatInspectorStateValue(value, quotes = false, options) {
  var _a25, _b25, _c;
  const { customClass } = options != null ? options : {};
  let result;
  const type = getInspectorStateValueType(value, false);
  if (type !== "custom" && (value == null ? void 0 : value._custom))
    value = value._custom.value;
  if (result = internalStateTokenToString(value)) {
    return result;
  } else if (type === "custom") {
    const nestedName = ((_a25 = value._custom.value) == null ? void 0 : _a25._custom) && formatInspectorStateValue(value._custom.value, quotes, options);
    return nestedName || value._custom.displayText || value._custom.display;
  } else if (type === "array") {
    return `Array[${value.length}]`;
  } else if (type === "plain-object") {
    return `Object${Object.keys(value).length ? "" : " (empty)"}`;
  } else if (type == null ? void 0 : type.includes("native")) {
    return escape((_b25 = specialTypeRE.exec(value)) == null ? void 0 : _b25[2]);
  } else if (typeof value === "string") {
    const typeMatch = value.match(rawTypeRE);
    if (typeMatch) {
      value = escapeString(typeMatch[1]);
    } else if (quotes) {
      value = `<span>"</span>${(customClass == null ? void 0 : customClass.string) ? `<span class=${customClass.string}>${escapeString(value)}</span>` : escapeString(value)}<span>"</span>`;
    } else {
      value = (customClass == null ? void 0 : customClass.string) ? `<span class="${(_c = customClass == null ? void 0 : customClass.string) != null ? _c : ""}">${escapeString(value)}</span>` : escapeString(value);
    }
  }
  return value;
}
function escapeString(value) {
  return escape(value).replace(/ /g, "&nbsp;").replace(/\n/g, "<span>\\n</span>");
}
function getRaw(value) {
  var _a25, _b25, _c;
  let customType;
  const isCustom = getInspectorStateValueType(value) === "custom";
  let inherit = {};
  if (isCustom) {
    const data = value;
    const customValue = (_a25 = data._custom) == null ? void 0 : _a25.value;
    const currentCustomType = (_b25 = data._custom) == null ? void 0 : _b25.type;
    const nestedCustom = typeof customValue === "object" && customValue !== null && "_custom" in customValue ? getRaw(customValue) : { inherit: void 0, value: void 0, customType: void 0 };
    inherit = nestedCustom.inherit || ((_c = data._custom) == null ? void 0 : _c.fields) || {};
    value = nestedCustom.value || customValue;
    customType = nestedCustom.customType || currentCustomType;
  }
  if (value && value._isArray)
    value = value.items;
  return { value, inherit, customType };
}
function toEdit(value, customType) {
  if (customType === "bigint")
    return value;
  if (customType === "date")
    return value;
  return replaceTokenToString(JSON.stringify(value));
}
function toSubmit(value, customType) {
  if (customType === "bigint")
    return BigInt(value);
  if (customType === "date")
    return new Date(value);
  return JSON.parse(replaceStringToToken(value), reviver);
}

// src/core/devtools-client/detected.ts
init_esm_shims();

function updateDevToolsClientDetected(params) {
  devtoolsState.devtoolsClientDetected = {
    ...devtoolsState.devtoolsClientDetected,
    ...params
  };
  const devtoolsClientVisible = Object.values(devtoolsState.devtoolsClientDetected).some(Boolean);
  toggleHighPerfMode(!devtoolsClientVisible);
}
var _a18, _b18;
(_b18 = (_a18 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__) != null ? _b18 : _a18.__VUE_DEVTOOLS_UPDATE_CLIENT_DETECTED__ = updateDevToolsClientDetected;

// src/messaging/index.ts
init_esm_shims();



// src/messaging/presets/index.ts
init_esm_shims();

// src/messaging/presets/broadcast-channel/index.ts
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/index.js
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/class-registry.js
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/registry.js
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/double-indexed-kv.js
init_esm_shims();
var DoubleIndexedKV = class {
  constructor() {
    this.keyToValue = /* @__PURE__ */ new Map();
    this.valueToKey = /* @__PURE__ */ new Map();
  }
  set(key, value) {
    this.keyToValue.set(key, value);
    this.valueToKey.set(value, key);
  }
  getByKey(key) {
    return this.keyToValue.get(key);
  }
  getByValue(value) {
    return this.valueToKey.get(value);
  }
  clear() {
    this.keyToValue.clear();
    this.valueToKey.clear();
  }
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/registry.js
var Registry = class {
  constructor(generateIdentifier) {
    this.generateIdentifier = generateIdentifier;
    this.kv = new DoubleIndexedKV();
  }
  register(value, identifier) {
    if (this.kv.getByValue(value)) {
      return;
    }
    if (!identifier) {
      identifier = this.generateIdentifier(value);
    }
    this.kv.set(identifier, value);
  }
  clear() {
    this.kv.clear();
  }
  getIdentifier(value) {
    return this.kv.getByValue(value);
  }
  getValue(identifier) {
    return this.kv.getByKey(identifier);
  }
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/class-registry.js
var ClassRegistry = class extends Registry {
  constructor() {
    super((c) => c.name);
    this.classToAllowedProps = /* @__PURE__ */ new Map();
  }
  register(value, options) {
    if (typeof options === "object") {
      if (options.allowProps) {
        this.classToAllowedProps.set(value, options.allowProps);
      }
      super.register(value, options.identifier);
    } else {
      super.register(value, options);
    }
  }
  getAllowedProps(value) {
    return this.classToAllowedProps.get(value);
  }
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/custom-transformer-registry.js
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/util.js
init_esm_shims();
function valuesOfObj(record) {
  if ("values" in Object) {
    return Object.values(record);
  }
  const values = [];
  for (const key in record) {
    if (record.hasOwnProperty(key)) {
      values.push(record[key]);
    }
  }
  return values;
}
function find(record, predicate) {
  const values = valuesOfObj(record);
  if ("find" in values) {
    return values.find(predicate);
  }
  const valuesNotNever = values;
  for (let i = 0; i < valuesNotNever.length; i++) {
    const value = valuesNotNever[i];
    if (predicate(value)) {
      return value;
    }
  }
  return void 0;
}
function forEach(record, run) {
  Object.entries(record).forEach(([key, value]) => run(value, key));
}
function includes(arr, value) {
  return arr.indexOf(value) !== -1;
}
function findArr(record, predicate) {
  for (let i = 0; i < record.length; i++) {
    const value = record[i];
    if (predicate(value)) {
      return value;
    }
  }
  return void 0;
}

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/custom-transformer-registry.js
var CustomTransformerRegistry = class {
  constructor() {
    this.transfomers = {};
  }
  register(transformer) {
    this.transfomers[transformer.name] = transformer;
  }
  findApplicable(v) {
    return find(this.transfomers, (transformer) => transformer.isApplicable(v));
  }
  findByName(name) {
    return this.transfomers[name];
  }
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/plainer.js
init_esm_shims();

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/is.js
init_esm_shims();
var getType = (payload) => Object.prototype.toString.call(payload).slice(8, -1);
var isUndefined = (payload) => typeof payload === "undefined";
var isNull = (payload) => payload === null;
var isPlainObject2 = (payload) => {
  if (typeof payload !== "object" || payload === null)
    return false;
  if (payload === Object.prototype)
    return false;
  if (Object.getPrototypeOf(payload) === null)
    return true;
  return Object.getPrototypeOf(payload) === Object.prototype;
};
var isEmptyObject = (payload) => isPlainObject2(payload) && Object.keys(payload).length === 0;
var isArray = (payload) => Array.isArray(payload);
var isString = (payload) => typeof payload === "string";
var isNumber = (payload) => typeof payload === "number" && !isNaN(payload);
var isBoolean = (payload) => typeof payload === "boolean";
var isRegExp = (payload) => payload instanceof RegExp;
var isMap = (payload) => payload instanceof Map;
var isSet = (payload) => payload instanceof Set;
var isSymbol = (payload) => getType(payload) === "Symbol";
var isDate = (payload) => payload instanceof Date && !isNaN(payload.valueOf());
var isError = (payload) => payload instanceof Error;
var isNaNValue = (payload) => typeof payload === "number" && isNaN(payload);
var isPrimitive2 = (payload) => isBoolean(payload) || isNull(payload) || isUndefined(payload) || isNumber(payload) || isString(payload) || isSymbol(payload);
var isBigint = (payload) => typeof payload === "bigint";
var isInfinite = (payload) => payload === Infinity || payload === -Infinity;
var isTypedArray = (payload) => ArrayBuffer.isView(payload) && !(payload instanceof DataView);
var isURL = (payload) => payload instanceof URL;

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/pathstringifier.js
init_esm_shims();
var escapeKey = (key) => key.replace(/\./g, "\\.");
var stringifyPath = (path) => path.map(String).map(escapeKey).join(".");
var parsePath = (string) => {
  const result = [];
  let segment = "";
  for (let i = 0; i < string.length; i++) {
    let char = string.charAt(i);
    const isEscapedDot = char === "\\" && string.charAt(i + 1) === ".";
    if (isEscapedDot) {
      segment += ".";
      i++;
      continue;
    }
    const isEndOfSegment = char === ".";
    if (isEndOfSegment) {
      result.push(segment);
      segment = "";
      continue;
    }
    segment += char;
  }
  const lastSegment = segment;
  result.push(lastSegment);
  return result;
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/transformer.js
init_esm_shims();
function simpleTransformation(isApplicable, annotation, transform, untransform) {
  return {
    isApplicable,
    annotation,
    transform,
    untransform
  };
}
var simpleRules = [
  simpleTransformation(isUndefined, "undefined", () => null, () => void 0),
  simpleTransformation(isBigint, "bigint", (v) => v.toString(), (v) => {
    if (typeof BigInt !== "undefined") {
      return BigInt(v);
    }
    console.error("Please add a BigInt polyfill.");
    return v;
  }),
  simpleTransformation(isDate, "Date", (v) => v.toISOString(), (v) => new Date(v)),
  simpleTransformation(isError, "Error", (v, superJson) => {
    const baseError = {
      name: v.name,
      message: v.message
    };
    superJson.allowedErrorProps.forEach((prop) => {
      baseError[prop] = v[prop];
    });
    return baseError;
  }, (v, superJson) => {
    const e = new Error(v.message);
    e.name = v.name;
    e.stack = v.stack;
    superJson.allowedErrorProps.forEach((prop) => {
      e[prop] = v[prop];
    });
    return e;
  }),
  simpleTransformation(isRegExp, "regexp", (v) => "" + v, (regex) => {
    const body = regex.slice(1, regex.lastIndexOf("/"));
    const flags = regex.slice(regex.lastIndexOf("/") + 1);
    return new RegExp(body, flags);
  }),
  simpleTransformation(
    isSet,
    "set",
    // (sets only exist in es6+)
    // eslint-disable-next-line es5/no-es6-methods
    (v) => [...v.values()],
    (v) => new Set(v)
  ),
  simpleTransformation(isMap, "map", (v) => [...v.entries()], (v) => new Map(v)),
  simpleTransformation((v) => isNaNValue(v) || isInfinite(v), "number", (v) => {
    if (isNaNValue(v)) {
      return "NaN";
    }
    if (v > 0) {
      return "Infinity";
    } else {
      return "-Infinity";
    }
  }, Number),
  simpleTransformation((v) => v === 0 && 1 / v === -Infinity, "number", () => {
    return "-0";
  }, Number),
  simpleTransformation(isURL, "URL", (v) => v.toString(), (v) => new URL(v))
];
function compositeTransformation(isApplicable, annotation, transform, untransform) {
  return {
    isApplicable,
    annotation,
    transform,
    untransform
  };
}
var symbolRule = compositeTransformation((s, superJson) => {
  if (isSymbol(s)) {
    const isRegistered = !!superJson.symbolRegistry.getIdentifier(s);
    return isRegistered;
  }
  return false;
}, (s, superJson) => {
  const identifier = superJson.symbolRegistry.getIdentifier(s);
  return ["symbol", identifier];
}, (v) => v.description, (_, a, superJson) => {
  const value = superJson.symbolRegistry.getValue(a[1]);
  if (!value) {
    throw new Error("Trying to deserialize unknown symbol");
  }
  return value;
});
var constructorToName = [
  Int8Array,
  Uint8Array,
  Int16Array,
  Uint16Array,
  Int32Array,
  Uint32Array,
  Float32Array,
  Float64Array,
  Uint8ClampedArray
].reduce((obj, ctor) => {
  obj[ctor.name] = ctor;
  return obj;
}, {});
var typedArrayRule = compositeTransformation(isTypedArray, (v) => ["typed-array", v.constructor.name], (v) => [...v], (v, a) => {
  const ctor = constructorToName[a[1]];
  if (!ctor) {
    throw new Error("Trying to deserialize unknown typed array");
  }
  return new ctor(v);
});
function isInstanceOfRegisteredClass(potentialClass, superJson) {
  if (potentialClass == null ? void 0 : potentialClass.constructor) {
    const isRegistered = !!superJson.classRegistry.getIdentifier(potentialClass.constructor);
    return isRegistered;
  }
  return false;
}
var classRule = compositeTransformation(isInstanceOfRegisteredClass, (clazz, superJson) => {
  const identifier = superJson.classRegistry.getIdentifier(clazz.constructor);
  return ["class", identifier];
}, (clazz, superJson) => {
  const allowedProps = superJson.classRegistry.getAllowedProps(clazz.constructor);
  if (!allowedProps) {
    return { ...clazz };
  }
  const result = {};
  allowedProps.forEach((prop) => {
    result[prop] = clazz[prop];
  });
  return result;
}, (v, a, superJson) => {
  const clazz = superJson.classRegistry.getValue(a[1]);
  if (!clazz) {
    throw new Error(`Trying to deserialize unknown class '${a[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);
  }
  return Object.assign(Object.create(clazz.prototype), v);
});
var customRule = compositeTransformation((value, superJson) => {
  return !!superJson.customTransformerRegistry.findApplicable(value);
}, (value, superJson) => {
  const transformer = superJson.customTransformerRegistry.findApplicable(value);
  return ["custom", transformer.name];
}, (value, superJson) => {
  const transformer = superJson.customTransformerRegistry.findApplicable(value);
  return transformer.serialize(value);
}, (v, a, superJson) => {
  const transformer = superJson.customTransformerRegistry.findByName(a[1]);
  if (!transformer) {
    throw new Error("Trying to deserialize unknown custom value");
  }
  return transformer.deserialize(v);
});
var compositeRules = [classRule, symbolRule, customRule, typedArrayRule];
var transformValue = (value, superJson) => {
  const applicableCompositeRule = findArr(compositeRules, (rule) => rule.isApplicable(value, superJson));
  if (applicableCompositeRule) {
    return {
      value: applicableCompositeRule.transform(value, superJson),
      type: applicableCompositeRule.annotation(value, superJson)
    };
  }
  const applicableSimpleRule = findArr(simpleRules, (rule) => rule.isApplicable(value, superJson));
  if (applicableSimpleRule) {
    return {
      value: applicableSimpleRule.transform(value, superJson),
      type: applicableSimpleRule.annotation
    };
  }
  return void 0;
};
var simpleRulesByAnnotation = {};
simpleRules.forEach((rule) => {
  simpleRulesByAnnotation[rule.annotation] = rule;
});
var untransformValue = (json, type, superJson) => {
  if (isArray(type)) {
    switch (type[0]) {
      case "symbol":
        return symbolRule.untransform(json, type, superJson);
      case "class":
        return classRule.untransform(json, type, superJson);
      case "custom":
        return customRule.untransform(json, type, superJson);
      case "typed-array":
        return typedArrayRule.untransform(json, type, superJson);
      default:
        throw new Error("Unknown transformation: " + type);
    }
  } else {
    const transformation = simpleRulesByAnnotation[type];
    if (!transformation) {
      throw new Error("Unknown transformation: " + type);
    }
    return transformation.untransform(json, superJson);
  }
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/accessDeep.js
init_esm_shims();
var getNthKey = (value, n) => {
  if (n > value.size)
    throw new Error("index out of bounds");
  const keys = value.keys();
  while (n > 0) {
    keys.next();
    n--;
  }
  return keys.next().value;
};
function validatePath(path) {
  if (includes(path, "__proto__")) {
    throw new Error("__proto__ is not allowed as a property");
  }
  if (includes(path, "prototype")) {
    throw new Error("prototype is not allowed as a property");
  }
  if (includes(path, "constructor")) {
    throw new Error("constructor is not allowed as a property");
  }
}
var getDeep = (object, path) => {
  validatePath(path);
  for (let i = 0; i < path.length; i++) {
    const key = path[i];
    if (isSet(object)) {
      object = getNthKey(object, +key);
    } else if (isMap(object)) {
      const row = +key;
      const type = +path[++i] === 0 ? "key" : "value";
      const keyOfRow = getNthKey(object, row);
      switch (type) {
        case "key":
          object = keyOfRow;
          break;
        case "value":
          object = object.get(keyOfRow);
          break;
      }
    } else {
      object = object[key];
    }
  }
  return object;
};
var setDeep = (object, path, mapper) => {
  validatePath(path);
  if (path.length === 0) {
    return mapper(object);
  }
  let parent = object;
  for (let i = 0; i < path.length - 1; i++) {
    const key = path[i];
    if (isArray(parent)) {
      const index = +key;
      parent = parent[index];
    } else if (isPlainObject2(parent)) {
      parent = parent[key];
    } else if (isSet(parent)) {
      const row = +key;
      parent = getNthKey(parent, row);
    } else if (isMap(parent)) {
      const isEnd = i === path.length - 2;
      if (isEnd) {
        break;
      }
      const row = +key;
      const type = +path[++i] === 0 ? "key" : "value";
      const keyOfRow = getNthKey(parent, row);
      switch (type) {
        case "key":
          parent = keyOfRow;
          break;
        case "value":
          parent = parent.get(keyOfRow);
          break;
      }
    }
  }
  const lastKey = path[path.length - 1];
  if (isArray(parent)) {
    parent[+lastKey] = mapper(parent[+lastKey]);
  } else if (isPlainObject2(parent)) {
    parent[lastKey] = mapper(parent[lastKey]);
  }
  if (isSet(parent)) {
    const oldValue = getNthKey(parent, +lastKey);
    const newValue = mapper(oldValue);
    if (oldValue !== newValue) {
      parent.delete(oldValue);
      parent.add(newValue);
    }
  }
  if (isMap(parent)) {
    const row = +path[path.length - 2];
    const keyToRow = getNthKey(parent, row);
    const type = +lastKey === 0 ? "key" : "value";
    switch (type) {
      case "key": {
        const newKey = mapper(keyToRow);
        parent.set(newKey, parent.get(keyToRow));
        if (newKey !== keyToRow) {
          parent.delete(keyToRow);
        }
        break;
      }
      case "value": {
        parent.set(keyToRow, mapper(parent.get(keyToRow)));
        break;
      }
    }
  }
  return object;
};

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/plainer.js
function traverse(tree, walker2, origin = []) {
  if (!tree) {
    return;
  }
  if (!isArray(tree)) {
    forEach(tree, (subtree, key) => traverse(subtree, walker2, [...origin, ...parsePath(key)]));
    return;
  }
  const [nodeValue, children] = tree;
  if (children) {
    forEach(children, (child, key) => {
      traverse(child, walker2, [...origin, ...parsePath(key)]);
    });
  }
  walker2(nodeValue, origin);
}
function applyValueAnnotations(plain, annotations, superJson) {
  traverse(annotations, (type, path) => {
    plain = setDeep(plain, path, (v) => untransformValue(v, type, superJson));
  });
  return plain;
}
function applyReferentialEqualityAnnotations(plain, annotations) {
  function apply(identicalPaths, path) {
    const object = getDeep(plain, parsePath(path));
    identicalPaths.map(parsePath).forEach((identicalObjectPath) => {
      plain = setDeep(plain, identicalObjectPath, () => object);
    });
  }
  if (isArray(annotations)) {
    const [root, other] = annotations;
    root.forEach((identicalPath) => {
      plain = setDeep(plain, parsePath(identicalPath), () => plain);
    });
    if (other) {
      forEach(other, apply);
    }
  } else {
    forEach(annotations, apply);
  }
  return plain;
}
var isDeep = (object, superJson) => isPlainObject2(object) || isArray(object) || isMap(object) || isSet(object) || isInstanceOfRegisteredClass(object, superJson);
function addIdentity(object, path, identities) {
  const existingSet = identities.get(object);
  if (existingSet) {
    existingSet.push(path);
  } else {
    identities.set(object, [path]);
  }
}
function generateReferentialEqualityAnnotations(identitites, dedupe) {
  const result = {};
  let rootEqualityPaths = void 0;
  identitites.forEach((paths) => {
    if (paths.length <= 1) {
      return;
    }
    if (!dedupe) {
      paths = paths.map((path) => path.map(String)).sort((a, b) => a.length - b.length);
    }
    const [representativePath, ...identicalPaths] = paths;
    if (representativePath.length === 0) {
      rootEqualityPaths = identicalPaths.map(stringifyPath);
    } else {
      result[stringifyPath(representativePath)] = identicalPaths.map(stringifyPath);
    }
  });
  if (rootEqualityPaths) {
    if (isEmptyObject(result)) {
      return [rootEqualityPaths];
    } else {
      return [rootEqualityPaths, result];
    }
  } else {
    return isEmptyObject(result) ? void 0 : result;
  }
}
var walker = (object, identities, superJson, dedupe, path = [], objectsInThisPath = [], seenObjects = /* @__PURE__ */ new Map()) => {
  var _a25;
  const primitive = isPrimitive2(object);
  if (!primitive) {
    addIdentity(object, path, identities);
    const seen = seenObjects.get(object);
    if (seen) {
      return dedupe ? {
        transformedValue: null
      } : seen;
    }
  }
  if (!isDeep(object, superJson)) {
    const transformed2 = transformValue(object, superJson);
    const result2 = transformed2 ? {
      transformedValue: transformed2.value,
      annotations: [transformed2.type]
    } : {
      transformedValue: object
    };
    if (!primitive) {
      seenObjects.set(object, result2);
    }
    return result2;
  }
  if (includes(objectsInThisPath, object)) {
    return {
      transformedValue: null
    };
  }
  const transformationResult = transformValue(object, superJson);
  const transformed = (_a25 = transformationResult == null ? void 0 : transformationResult.value) != null ? _a25 : object;
  const transformedValue = isArray(transformed) ? [] : {};
  const innerAnnotations = {};
  forEach(transformed, (value, index) => {
    if (index === "__proto__" || index === "constructor" || index === "prototype") {
      throw new Error(`Detected property ${index}. This is a prototype pollution risk, please remove it from your object.`);
    }
    const recursiveResult = walker(value, identities, superJson, dedupe, [...path, index], [...objectsInThisPath, object], seenObjects);
    transformedValue[index] = recursiveResult.transformedValue;
    if (isArray(recursiveResult.annotations)) {
      innerAnnotations[index] = recursiveResult.annotations;
    } else if (isPlainObject2(recursiveResult.annotations)) {
      forEach(recursiveResult.annotations, (tree, key) => {
        innerAnnotations[escapeKey(index) + "." + key] = tree;
      });
    }
  });
  const result = isEmptyObject(innerAnnotations) ? {
    transformedValue,
    annotations: !!transformationResult ? [transformationResult.type] : void 0
  } : {
    transformedValue,
    annotations: !!transformationResult ? [transformationResult.type, innerAnnotations] : innerAnnotations
  };
  if (!primitive) {
    seenObjects.set(object, result);
  }
  return result;
};

// ../../node_modules/.pnpm/copy-anything@3.0.5/node_modules/copy-anything/dist/index.js
init_esm_shims();

// ../../node_modules/.pnpm/is-what@4.1.16/node_modules/is-what/dist/index.js
init_esm_shims();
function getType2(payload) {
  return Object.prototype.toString.call(payload).slice(8, -1);
}
function isArray2(payload) {
  return getType2(payload) === "Array";
}
function isPlainObject3(payload) {
  if (getType2(payload) !== "Object")
    return false;
  const prototype = Object.getPrototypeOf(payload);
  return !!prototype && prototype.constructor === Object && prototype === Object.prototype;
}
function isNull2(payload) {
  return getType2(payload) === "Null";
}
function isOneOf(a, b, c, d, e) {
  return (value) => a(value) || b(value) || !!c && c(value) || !!d && d(value) || !!e && e(value);
}
function isUndefined2(payload) {
  return getType2(payload) === "Undefined";
}
var isNullOrUndefined = isOneOf(isNull2, isUndefined2);

// ../../node_modules/.pnpm/copy-anything@3.0.5/node_modules/copy-anything/dist/index.js
function assignProp(carry, key, newVal, originalObject, includeNonenumerable) {
  const propType = {}.propertyIsEnumerable.call(originalObject, key) ? "enumerable" : "nonenumerable";
  if (propType === "enumerable")
    carry[key] = newVal;
  if (includeNonenumerable && propType === "nonenumerable") {
    Object.defineProperty(carry, key, {
      value: newVal,
      enumerable: false,
      writable: true,
      configurable: true
    });
  }
}
function copy(target22, options = {}) {
  if (isArray2(target22)) {
    return target22.map((item) => copy(item, options));
  }
  if (!isPlainObject3(target22)) {
    return target22;
  }
  const props = Object.getOwnPropertyNames(target22);
  const symbols = Object.getOwnPropertySymbols(target22);
  return [...props, ...symbols].reduce((carry, key) => {
    if (isArray2(options.props) && !options.props.includes(key)) {
      return carry;
    }
    const val = target22[key];
    const newVal = copy(val, options);
    assignProp(carry, key, newVal, target22, options.nonenumerable);
    return carry;
  }, {});
}

// ../../node_modules/.pnpm/superjson@2.2.2/node_modules/superjson/dist/index.js
var SuperJSON = class {
  /**
   * @param dedupeReferentialEqualities  If true, SuperJSON will make sure only one instance of referentially equal objects are serialized and the rest are replaced with `null`.
   */
  constructor({ dedupe = false } = {}) {
    this.classRegistry = new ClassRegistry();
    this.symbolRegistry = new Registry((s) => {
      var _a25;
      return (_a25 = s.description) != null ? _a25 : "";
    });
    this.customTransformerRegistry = new CustomTransformerRegistry();
    this.allowedErrorProps = [];
    this.dedupe = dedupe;
  }
  serialize(object) {
    const identities = /* @__PURE__ */ new Map();
    const output = walker(object, identities, this, this.dedupe);
    const res = {
      json: output.transformedValue
    };
    if (output.annotations) {
      res.meta = {
        ...res.meta,
        values: output.annotations
      };
    }
    const equalityAnnotations = generateReferentialEqualityAnnotations(identities, this.dedupe);
    if (equalityAnnotations) {
      res.meta = {
        ...res.meta,
        referentialEqualities: equalityAnnotations
      };
    }
    return res;
  }
  deserialize(payload) {
    const { json, meta } = payload;
    let result = copy(json);
    if (meta == null ? void 0 : meta.values) {
      result = applyValueAnnotations(result, meta.values, this);
    }
    if (meta == null ? void 0 : meta.referentialEqualities) {
      result = applyReferentialEqualityAnnotations(result, meta.referentialEqualities);
    }
    return result;
  }
  stringify(object) {
    return JSON.stringify(this.serialize(object));
  }
  parse(string) {
    return this.deserialize(JSON.parse(string));
  }
  registerClass(v, options) {
    this.classRegistry.register(v, options);
  }
  registerSymbol(v, identifier) {
    this.symbolRegistry.register(v, identifier);
  }
  registerCustom(transformer, name) {
    this.customTransformerRegistry.register({
      name,
      ...transformer
    });
  }
  allowErrorProps(...props) {
    this.allowedErrorProps.push(...props);
  }
};
SuperJSON.defaultInstance = new SuperJSON();
SuperJSON.serialize = SuperJSON.defaultInstance.serialize.bind(SuperJSON.defaultInstance);
SuperJSON.deserialize = SuperJSON.defaultInstance.deserialize.bind(SuperJSON.defaultInstance);
SuperJSON.stringify = SuperJSON.defaultInstance.stringify.bind(SuperJSON.defaultInstance);
SuperJSON.parse = SuperJSON.defaultInstance.parse.bind(SuperJSON.defaultInstance);
SuperJSON.registerClass = SuperJSON.defaultInstance.registerClass.bind(SuperJSON.defaultInstance);
SuperJSON.registerSymbol = SuperJSON.defaultInstance.registerSymbol.bind(SuperJSON.defaultInstance);
SuperJSON.registerCustom = SuperJSON.defaultInstance.registerCustom.bind(SuperJSON.defaultInstance);
SuperJSON.allowErrorProps = SuperJSON.defaultInstance.allowErrorProps.bind(SuperJSON.defaultInstance);
var serialize = SuperJSON.serialize;
var deserialize = SuperJSON.deserialize;
var stringify = SuperJSON.stringify;
var parse = SuperJSON.parse;
var registerClass = SuperJSON.registerClass;
var registerCustom = SuperJSON.registerCustom;
var registerSymbol = SuperJSON.registerSymbol;
var allowErrorProps = SuperJSON.allowErrorProps;

// src/messaging/presets/broadcast-channel/context.ts
init_esm_shims();
var __DEVTOOLS_KIT_BROADCAST_MESSAGING_EVENT_KEY = "__devtools-kit-broadcast-messaging-event-key__";

// src/messaging/presets/broadcast-channel/index.ts
var BROADCAST_CHANNEL_NAME = "__devtools-kit:broadcast-channel__";
function createBroadcastChannel() {
  const channel = new BroadcastChannel(BROADCAST_CHANNEL_NAME);
  return {
    post: (data) => {
      channel.postMessage(SuperJSON.stringify({
        event: __DEVTOOLS_KIT_BROADCAST_MESSAGING_EVENT_KEY,
        data
      }));
    },
    on: (handler) => {
      channel.onmessage = (event) => {
        const parsed = SuperJSON.parse(event.data);
        if (parsed.event === __DEVTOOLS_KIT_BROADCAST_MESSAGING_EVENT_KEY) {
          handler(parsed.data);
        }
      };
    }
  };
}

// src/messaging/presets/electron/index.ts
init_esm_shims();

// src/messaging/presets/electron/client.ts
init_esm_shims();

// src/messaging/presets/electron/context.ts
init_esm_shims();

var __ELECTRON_CLIENT_CONTEXT__ = "electron:client-context";
var __ELECTRON_RPOXY_CONTEXT__ = "electron:proxy-context";
var __ELECTRON_SERVER_CONTEXT__ = "electron:server-context";
var __DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__ = {
  // client
  CLIENT_TO_PROXY: "client->proxy",
  // on: proxy->client
  // proxy
  PROXY_TO_CLIENT: "proxy->client",
  // on: server->proxy
  PROXY_TO_SERVER: "proxy->server",
  // on: client->proxy
  // server
  SERVER_TO_PROXY: "server->proxy"
  // on: proxy->server
};
function getElectronClientContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_CLIENT_CONTEXT__];
}
function setElectronClientContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_CLIENT_CONTEXT__] = context;
}
function getElectronProxyContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_RPOXY_CONTEXT__];
}
function setElectronProxyContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_RPOXY_CONTEXT__] = context;
}
function getElectronServerContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_SERVER_CONTEXT__];
}
function setElectronServerContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__ELECTRON_SERVER_CONTEXT__] = context;
}

// src/messaging/presets/electron/client.ts
function createElectronClientChannel() {
  const socket = getElectronClientContext();
  return {
    post: (data) => {
      socket.emit(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.CLIENT_TO_PROXY, SuperJSON.stringify(data));
    },
    on: (handler) => {
      socket.on(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.PROXY_TO_CLIENT, (e) => {
        handler(SuperJSON.parse(e));
      });
    }
  };
}

// src/messaging/presets/electron/proxy.ts
init_esm_shims();
function createElectronProxyChannel() {
  const socket = getElectronProxyContext();
  return {
    post: (data) => {
    },
    on: (handler) => {
      socket.on(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.SERVER_TO_PROXY, (data) => {
        socket.broadcast.emit(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.PROXY_TO_CLIENT, data);
      });
      socket.on(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.CLIENT_TO_PROXY, (data) => {
        socket.broadcast.emit(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.PROXY_TO_SERVER, data);
      });
    }
  };
}

// src/messaging/presets/electron/server.ts
init_esm_shims();
function createElectronServerChannel() {
  const socket = getElectronServerContext();
  return {
    post: (data) => {
      socket.emit(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.SERVER_TO_PROXY, SuperJSON.stringify(data));
    },
    on: (handler) => {
      socket.on(__DEVTOOLS_KIT_ELECTRON_MESSAGING_EVENT_KEY__.PROXY_TO_SERVER, (data) => {
        handler(SuperJSON.parse(data));
      });
    }
  };
}

// src/messaging/presets/extension/index.ts
init_esm_shims();

// src/messaging/presets/extension/client.ts
init_esm_shims();

// src/messaging/presets/extension/context.ts
init_esm_shims();

var __EXTENSION_CLIENT_CONTEXT__ = "electron:client-context";
var __DEVTOOLS_KIT_EXTENSION_MESSAGING_EVENT_KEY__ = {
  // client
  CLIENT_TO_PROXY: "client->proxy",
  // on: proxy->client
  // proxy
  PROXY_TO_CLIENT: "proxy->client",
  // on: server->proxy
  PROXY_TO_SERVER: "proxy->server",
  // on: client->proxy
  // server
  SERVER_TO_PROXY: "server->proxy"
  // on: proxy->server
};
function getExtensionClientContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__EXTENSION_CLIENT_CONTEXT__];
}
function setExtensionClientContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__EXTENSION_CLIENT_CONTEXT__] = context;
}

// src/messaging/presets/extension/client.ts
function createExtensionClientChannel() {
  let disconnected = false;
  let port = null;
  let reconnectTimer = null;
  let onMessageHandler = null;
  function connect() {
    try {
      clearTimeout(reconnectTimer);
      port = chrome.runtime.connect({
        name: `${chrome.devtools.inspectedWindow.tabId}`
      });
      setExtensionClientContext(port);
      disconnected = false;
      port == null ? void 0 : port.onMessage.addListener(onMessageHandler);
      port.onDisconnect.addListener(() => {
        disconnected = true;
        port == null ? void 0 : port.onMessage.removeListener(onMessageHandler);
        reconnectTimer = setTimeout(connect, 1e3);
      });
    } catch (e) {
      disconnected = true;
    }
  }
  connect();
  return {
    post: (data) => {
      if (disconnected) {
        return;
      }
      port == null ? void 0 : port.postMessage(SuperJSON.stringify(data));
    },
    on: (handler) => {
      onMessageHandler = (data) => {
        if (disconnected) {
          return;
        }
        handler(SuperJSON.parse(data));
      };
      port == null ? void 0 : port.onMessage.addListener(onMessageHandler);
    }
  };
}

// src/messaging/presets/extension/proxy.ts
init_esm_shims();
function createExtensionProxyChannel() {
  const port = chrome.runtime.connect({
    name: "content-script"
  });
  function sendMessageToUserApp(payload) {
    window.postMessage({
      source: __DEVTOOLS_KIT_EXTENSION_MESSAGING_EVENT_KEY__.PROXY_TO_SERVER,
      payload
    }, "*");
  }
  function sendMessageToDevToolsClient(e) {
    if (e.data && e.data.source === __DEVTOOLS_KIT_EXTENSION_MESSAGING_EVENT_KEY__.SERVER_TO_PROXY) {
      try {
        port.postMessage(e.data.payload);
      } catch (e2) {
      }
    }
  }
  port.onMessage.addListener(sendMessageToUserApp);
  window.addEventListener("message", sendMessageToDevToolsClient);
  port.onDisconnect.addListener(() => {
    window.removeEventListener("message", sendMessageToDevToolsClient);
    sendMessageToUserApp(SuperJSON.stringify({
      event: "shutdown"
    }));
  });
  sendMessageToUserApp(SuperJSON.stringify({
    event: "init"
  }));
  return {
    post: (data) => {
    },
    on: (handler) => {
    }
  };
}

// src/messaging/presets/extension/server.ts
init_esm_shims();
function createExtensionServerChannel() {
  return {
    post: (data) => {
      window.postMessage({
        source: __DEVTOOLS_KIT_EXTENSION_MESSAGING_EVENT_KEY__.SERVER_TO_PROXY,
        payload: SuperJSON.stringify(data)
      }, "*");
    },
    on: (handler) => {
      const listener = (event) => {
        if (event.data.source === __DEVTOOLS_KIT_EXTENSION_MESSAGING_EVENT_KEY__.PROXY_TO_SERVER && event.data.payload) {
          handler(SuperJSON.parse(event.data.payload));
        }
      };
      window.addEventListener("message", listener);
      return () => {
        window.removeEventListener("message", listener);
      };
    }
  };
}

// src/messaging/presets/iframe/index.ts
init_esm_shims();

// src/messaging/presets/iframe/client.ts
init_esm_shims();


// src/messaging/presets/iframe/context.ts
init_esm_shims();

var __DEVTOOLS_KIT_IFRAME_MESSAGING_EVENT_KEY = "__devtools-kit-iframe-messaging-event-key__";
var __IFRAME_SERVER_CONTEXT__ = "iframe:server-context";
function getIframeServerContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__IFRAME_SERVER_CONTEXT__];
}
function setIframeServerContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__IFRAME_SERVER_CONTEXT__] = context;
}

// src/messaging/presets/iframe/client.ts
function createIframeClientChannel() {
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser) {
    return {
      post: (data) => {
      },
      on: (handler) => {
      }
    };
  }
  return {
    post: (data) => window.parent.postMessage(SuperJSON.stringify({
      event: __DEVTOOLS_KIT_IFRAME_MESSAGING_EVENT_KEY,
      data
    }), "*"),
    on: (handler) => window.addEventListener("message", (event) => {
      try {
        const parsed = SuperJSON.parse(event.data);
        if (event.source === window.parent && parsed.event === __DEVTOOLS_KIT_IFRAME_MESSAGING_EVENT_KEY) {
          handler(parsed.data);
        }
      } catch (e) {
      }
    })
  };
}

// src/messaging/presets/iframe/server.ts
init_esm_shims();

function createIframeServerChannel() {
  if (!_vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.isBrowser) {
    return {
      post: (data) => {
      },
      on: (handler) => {
      }
    };
  }
  return {
    post: (data) => {
      var _a25;
      const iframe = getIframeServerContext();
      (_a25 = iframe == null ? void 0 : iframe.contentWindow) == null ? void 0 : _a25.postMessage(SuperJSON.stringify({
        event: __DEVTOOLS_KIT_IFRAME_MESSAGING_EVENT_KEY,
        data
      }), "*");
    },
    on: (handler) => {
      window.addEventListener("message", (event) => {
        const iframe = getIframeServerContext();
        try {
          const parsed = SuperJSON.parse(event.data);
          if (event.source === (iframe == null ? void 0 : iframe.contentWindow) && parsed.event === __DEVTOOLS_KIT_IFRAME_MESSAGING_EVENT_KEY) {
            handler(parsed.data);
          }
        } catch (e) {
        }
      });
    }
  };
}

// src/messaging/presets/vite/index.ts
init_esm_shims();

// src/messaging/presets/vite/client.ts
init_esm_shims();

// src/messaging/presets/vite/context.ts
init_esm_shims();

var __DEVTOOLS_KIT_VITE_MESSAGING_EVENT_KEY = "__devtools-kit-vite-messaging-event-key__";
var __VITE_CLIENT_CONTEXT__ = "vite:client-context";
var __VITE_SERVER_CONTEXT__ = "vite:server-context";
function getViteClientContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__VITE_CLIENT_CONTEXT__];
}
function setViteClientContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__VITE_CLIENT_CONTEXT__] = context;
}
function getViteServerContext() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__VITE_SERVER_CONTEXT__];
}
function setViteServerContext(context) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target[__VITE_SERVER_CONTEXT__] = context;
}

// src/messaging/presets/vite/client.ts
function createViteClientChannel() {
  const client = getViteClientContext();
  return {
    post: (data) => {
      client == null ? void 0 : client.send(__DEVTOOLS_KIT_VITE_MESSAGING_EVENT_KEY, SuperJSON.stringify(data));
    },
    on: (handler) => {
      client == null ? void 0 : client.on(__DEVTOOLS_KIT_VITE_MESSAGING_EVENT_KEY, (event) => {
        handler(SuperJSON.parse(event));
      });
    }
  };
}

// src/messaging/presets/vite/server.ts
init_esm_shims();
function createViteServerChannel() {
  var _a25;
  const viteServer = getViteServerContext();
  const ws = (_a25 = viteServer.hot) != null ? _a25 : viteServer.ws;
  return {
    post: (data) => ws == null ? void 0 : ws.send(__DEVTOOLS_KIT_VITE_MESSAGING_EVENT_KEY, SuperJSON.stringify(data)),
    on: (handler) => ws == null ? void 0 : ws.on(__DEVTOOLS_KIT_VITE_MESSAGING_EVENT_KEY, (event) => {
      handler(SuperJSON.parse(event));
    })
  };
}

// src/messaging/presets/ws/index.ts
init_esm_shims();

// src/messaging/presets/ws/client.ts
init_esm_shims();

// src/messaging/presets/ws/context.ts
init_esm_shims();


// src/messaging/presets/ws/server.ts
init_esm_shims();

// src/messaging/index.ts
var _a19, _b19;
(_b19 = (_a19 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__) != null ? _b19 : _a19.__VUE_DEVTOOLS_KIT_MESSAGE_CHANNELS__ = [];
var _a20, _b20;
(_b20 = (_a20 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_RPC_CLIENT__) != null ? _b20 : _a20.__VUE_DEVTOOLS_KIT_RPC_CLIENT__ = null;
var _a21, _b21;
(_b21 = (_a21 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_RPC_SERVER__) != null ? _b21 : _a21.__VUE_DEVTOOLS_KIT_RPC_SERVER__ = null;
var _a22, _b22;
(_b22 = (_a22 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__) != null ? _b22 : _a22.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__ = null;
var _a23, _b23;
(_b23 = (_a23 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__) != null ? _b23 : _a23.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__ = null;
var _a24, _b24;
(_b24 = (_a24 = _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target).__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__) != null ? _b24 : _a24.__VUE_DEVTOOLS_KIT_BROADCAST_RPC_SERVER__ = null;
function setRpcClientToGlobal(rpc) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_RPC_CLIENT__ = rpc;
}
function setRpcServerToGlobal(rpc) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_RPC_SERVER__ = rpc;
}
function getRpcClient() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_RPC_CLIENT__;
}
function getRpcServer() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_RPC_SERVER__;
}
function setViteRpcClientToGlobal(rpc) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__ = rpc;
}
function setViteRpcServerToGlobal(rpc) {
  _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__ = rpc;
}
function getViteRpcClient() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_VITE_RPC_CLIENT__;
}
function getViteRpcServer() {
  return _vue_devtools_shared__WEBPACK_IMPORTED_MODULE_0__.target.__VUE_DEVTOOLS_KIT_VITE_RPC_SERVER__;
}
function getChannel(preset, host = "client") {
  const channel = {
    iframe: {
      client: createIframeClientChannel,
      server: createIframeServerChannel
    }[host],
    electron: {
      client: createElectronClientChannel,
      proxy: createElectronProxyChannel,
      server: createElectronServerChannel
    }[host],
    vite: {
      client: createViteClientChannel,
      server: createViteServerChannel
    }[host],
    broadcast: {
      client: createBroadcastChannel,
      server: createBroadcastChannel
    }[host],
    extension: {
      client: createExtensionClientChannel,
      proxy: createExtensionProxyChannel,
      server: createExtensionServerChannel
    }[host]
  }[preset];
  return channel();
}
function createRpcClient(functions, options = {}) {
  const { channel: _channel, options: _options, preset } = options;
  const channel = preset ? getChannel(preset) : _channel;
  const rpc = (0,birpc__WEBPACK_IMPORTED_MODULE_3__.createBirpc)(functions, {
    ..._options,
    ...channel,
    timeout: -1
  });
  if (preset === "vite") {
    setViteRpcClientToGlobal(rpc);
    return;
  }
  setRpcClientToGlobal(rpc);
  return rpc;
}
function createRpcServer(functions, options = {}) {
  const { channel: _channel, options: _options, preset } = options;
  const channel = preset ? getChannel(preset, "server") : _channel;
  const rpcServer = getRpcServer();
  if (!rpcServer) {
    const group = (0,birpc__WEBPACK_IMPORTED_MODULE_3__.createBirpcGroup)(functions, [channel], {
      ..._options,
      timeout: -1
    });
    if (preset === "vite") {
      setViteRpcServerToGlobal(group);
      return;
    }
    setRpcServerToGlobal(group);
  } else {
    rpcServer.updateChannels((channels) => {
      channels.push(channel);
    });
  }
}
function createRpcProxy(options = {}) {
  const { channel: _channel, options: _options, preset } = options;
  const channel = preset ? getChannel(preset, "proxy") : _channel;
  return (0,birpc__WEBPACK_IMPORTED_MODULE_3__.createBirpc)({}, {
    ..._options,
    ...channel,
    timeout: -1
  });
}

// src/shared/index.ts
init_esm_shims();

// src/shared/env.ts
init_esm_shims();

// src/shared/time.ts
init_esm_shims();

// src/shared/util.ts
init_esm_shims();

// src/core/component/state/replacer.ts
init_esm_shims();

// src/core/component/state/custom.ts
init_esm_shims();
function getFunctionDetails(func) {
  let string = "";
  let matches = null;
  try {
    string = Function.prototype.toString.call(func);
    matches = String.prototype.match.call(string, /\([\s\S]*?\)/);
  } catch (e) {
  }
  const match = matches && matches[0];
  const args = typeof match === "string" ? match : "(?)";
  const name = typeof func.name === "string" ? func.name : "";
  return {
    _custom: {
      type: "function",
      displayText: `<span style="opacity:.8;margin-right:5px;">function</span> <span style="white-space:nowrap;">${escape(name)}${args}</span>`,
      tooltipText: string.trim() ? `<pre>${string}</pre>` : null
    }
  };
}
function getBigIntDetails(val) {
  const stringifiedBigInt = BigInt.prototype.toString.call(val);
  return {
    _custom: {
      type: "bigint",
      displayText: `BigInt(${stringifiedBigInt})`,
      value: stringifiedBigInt
    }
  };
}
function getDateDetails(val) {
  const date = new Date(val.getTime());
  date.setMinutes(date.getMinutes() - date.getTimezoneOffset());
  return {
    _custom: {
      type: "date",
      displayText: Date.prototype.toString.call(val),
      value: date.toISOString().slice(0, -1)
    }
  };
}
function getMapDetails(val) {
  const list = Object.fromEntries(val);
  return {
    _custom: {
      type: "map",
      displayText: "Map",
      value: list,
      readOnly: true,
      fields: {
        abstract: true
      }
    }
  };
}
function getSetDetails(val) {
  const list = Array.from(val);
  return {
    _custom: {
      type: "set",
      displayText: `Set[${list.length}]`,
      value: list,
      readOnly: true
    }
  };
}
function getCaughtGetters(store) {
  const getters = {};
  const origGetters = store.getters || {};
  const keys = Object.keys(origGetters);
  for (let i = 0; i < keys.length; i++) {
    const key = keys[i];
    Object.defineProperty(getters, key, {
      enumerable: true,
      get: () => {
        try {
          return origGetters[key];
        } catch (e) {
          return e;
        }
      }
    });
  }
  return getters;
}
function reduceStateList(list) {
  if (!list.length)
    return void 0;
  return list.reduce((map, item) => {
    const key = item.type || "data";
    const obj = map[key] = map[key] || {};
    obj[item.key] = item.value;
    return map;
  }, {});
}
function namedNodeMapToObject(map) {
  const result = {};
  const l = map.length;
  for (let i = 0; i < l; i++) {
    const node = map.item(i);
    result[node.name] = node.value;
  }
  return result;
}
function getStoreDetails(store) {
  return {
    _custom: {
      type: "store",
      displayText: "Store",
      value: {
        state: store.state,
        getters: getCaughtGetters(store)
      },
      fields: {
        abstract: true
      }
    }
  };
}
function getRouterDetails(router) {
  return {
    _custom: {
      type: "router",
      displayText: "VueRouter",
      value: {
        options: router.options,
        currentRoute: router.currentRoute
      },
      fields: {
        abstract: true
      }
    }
  };
}
function getInstanceDetails(instance) {
  if (instance._)
    instance = instance._;
  const state = processInstanceState(instance);
  return {
    _custom: {
      type: "component",
      id: instance.__VUE_DEVTOOLS_NEXT_UID__,
      displayText: getInstanceName(instance),
      tooltipText: "Component instance",
      value: reduceStateList(state),
      fields: {
        abstract: true
      }
    }
  };
}
function getComponentDefinitionDetails(definition) {
  let display = getComponentName(definition);
  if (display) {
    if (definition.name && definition.__file)
      display += ` <span>(${definition.__file})</span>`;
  } else {
    display = "<i>Unknown Component</i>";
  }
  return {
    _custom: {
      type: "component-definition",
      displayText: display,
      tooltipText: "Component definition",
      ...definition.__file ? {
        file: definition.__file
      } : {}
    }
  };
}
function getHTMLElementDetails(value) {
  try {
    return {
      _custom: {
        type: "HTMLElement",
        displayText: `<span class="opacity-30">&lt;</span><span class="text-blue-500">${value.tagName.toLowerCase()}</span><span class="opacity-30">&gt;</span>`,
        value: namedNodeMapToObject(value.attributes)
      }
    };
  } catch (e) {
    return {
      _custom: {
        type: "HTMLElement",
        displayText: `<span class="text-blue-500">${String(value)}</span>`
      }
    };
  }
}
function tryGetRefValue(ref) {
  if (ensurePropertyExists(ref, "_value", true)) {
    return ref._value;
  }
  if (ensurePropertyExists(ref, "value", true)) {
    return ref.value;
  }
}
function getObjectDetails(object) {
  var _a25, _b25, _c, _d;
  const info = getSetupStateType(object);
  const isState = info.ref || info.computed || info.reactive;
  if (isState) {
    const stateTypeName = info.computed ? "Computed" : info.ref ? "Ref" : info.reactive ? "Reactive" : null;
    const value = toRaw2(info.reactive ? object : tryGetRefValue(object));
    const raw = ensurePropertyExists(object, "effect") ? ((_b25 = (_a25 = object.effect) == null ? void 0 : _a25.raw) == null ? void 0 : _b25.toString()) || ((_d = (_c = object.effect) == null ? void 0 : _c.fn) == null ? void 0 : _d.toString()) : null;
    return {
      _custom: {
        type: stateTypeName == null ? void 0 : stateTypeName.toLowerCase(),
        stateTypeName,
        value,
        ...raw ? { tooltipText: `<span class="font-mono">${raw}</span>` } : {}
      }
    };
  }
  if (ensurePropertyExists(object, "__asyncLoader") && typeof object.__asyncLoader === "function") {
    return {
      _custom: {
        type: "component-definition",
        display: "Async component definition"
      }
    };
  }
}

// src/core/component/state/replacer.ts
function stringifyReplacer(key, _value, depth, seenInstance) {
  var _a25;
  if (key === "compilerOptions")
    return;
  const val = this[key];
  const type = typeof val;
  if (Array.isArray(val)) {
    const l = val.length;
    if (l > MAX_ARRAY_SIZE) {
      return {
        _isArray: true,
        length: l,
        items: val.slice(0, MAX_ARRAY_SIZE)
      };
    }
    return val;
  } else if (typeof val === "string") {
    if (val.length > MAX_STRING_SIZE)
      return `${val.substring(0, MAX_STRING_SIZE)}... (${val.length} total length)`;
    else
      return val;
  } else if (type === "undefined") {
    return UNDEFINED;
  } else if (val === Number.POSITIVE_INFINITY) {
    return INFINITY;
  } else if (val === Number.NEGATIVE_INFINITY) {
    return NEGATIVE_INFINITY;
  } else if (typeof val === "function") {
    return getFunctionDetails(val);
  } else if (type === "symbol") {
    return `[native Symbol ${Symbol.prototype.toString.call(val)}]`;
  } else if (typeof val === "bigint") {
    return getBigIntDetails(val);
  } else if (val !== null && typeof val === "object") {
    const proto = Object.prototype.toString.call(val);
    if (proto === "[object Map]") {
      return getMapDetails(val);
    } else if (proto === "[object Set]") {
      return getSetDetails(val);
    } else if (proto === "[object RegExp]") {
      return `[native RegExp ${RegExp.prototype.toString.call(val)}]`;
    } else if (proto === "[object Date]") {
      return getDateDetails(val);
    } else if (proto === "[object Error]") {
      return `[native Error ${val.message}<>${val.stack}]`;
    } else if (ensurePropertyExists(val, "state", true) && ensurePropertyExists(val, "_vm", true)) {
      return getStoreDetails(val);
    } else if (val.constructor && val.constructor.name === "VueRouter") {
      return getRouterDetails(val);
    } else if (isVueInstance(val)) {
      const componentVal = getInstanceDetails(val);
      const parentInstanceDepth = seenInstance == null ? void 0 : seenInstance.get(val);
      if (parentInstanceDepth && parentInstanceDepth < depth) {
        return `[[CircularRef]] <${componentVal._custom.displayText}>`;
      }
      seenInstance == null ? void 0 : seenInstance.set(val, depth);
      return componentVal;
    } else if (ensurePropertyExists(val, "render", true) && typeof val.render === "function") {
      return getComponentDefinitionDetails(val);
    } else if (val.constructor && val.constructor.name === "VNode") {
      return `[native VNode <${val.tag}>]`;
    } else if (typeof HTMLElement !== "undefined" && val instanceof HTMLElement) {
      return getHTMLElementDetails(val);
    } else if (((_a25 = val.constructor) == null ? void 0 : _a25.name) === "Store" && "_wrappedGetters" in val) {
      return "[object Store]";
    } else if (ensurePropertyExists(val, "currentRoute", true)) {
      return "[object Router]";
    }
    const customDetails = getObjectDetails(val);
    if (customDetails != null)
      return customDetails;
  } else if (Number.isNaN(val)) {
    return NAN;
  }
  return sanitize(val);
}

// src/shared/transfer.ts
init_esm_shims();
var MAX_SERIALIZED_SIZE = 2 * 1024 * 1024;
function isObject(_data, proto) {
  return proto === "[object Object]";
}
function isArray3(_data, proto) {
  return proto === "[object Array]";
}
function isVueReactiveLinkNode(node) {
  var _a25;
  const constructorName = (_a25 = node == null ? void 0 : node.constructor) == null ? void 0 : _a25.name;
  return constructorName === "Dep" && "activeLink" in node || constructorName === "Link" && "dep" in node;
}
function encode(data, replacer, list, seen, depth = 0, seenVueInstance = /* @__PURE__ */ new Map()) {
  let stored;
  let key;
  let value;
  let i;
  let l;
  const seenIndex = seen.get(data);
  if (seenIndex != null)
    return seenIndex;
  const index = list.length;
  const proto = Object.prototype.toString.call(data);
  if (isObject(data, proto)) {
    if (isVueReactiveLinkNode(data)) {
      return index;
    }
    stored = {};
    seen.set(data, index);
    list.push(stored);
    const keys = Object.keys(data);
    for (i = 0, l = keys.length; i < l; i++) {
      key = keys[i];
      if (key === "compilerOptions")
        return index;
      value = data[key];
      const isVm = value != null && isObject(value, Object.prototype.toString.call(data)) && isVueInstance(value);
      try {
        if (replacer) {
          value = replacer.call(data, key, value, depth, seenVueInstance);
        }
      } catch (e) {
        value = e;
      }
      stored[key] = encode(value, replacer, list, seen, depth + 1, seenVueInstance);
      if (isVm) {
        seenVueInstance.delete(value);
      }
    }
  } else if (isArray3(data, proto)) {
    stored = [];
    seen.set(data, index);
    list.push(stored);
    for (i = 0, l = data.length; i < l; i++) {
      try {
        value = data[i];
        if (replacer)
          value = replacer.call(data, i, value, depth, seenVueInstance);
      } catch (e) {
        value = e;
      }
      stored[i] = encode(value, replacer, list, seen, depth + 1, seenVueInstance);
    }
  } else {
    list.push(data);
  }
  return index;
}
function decode(list, reviver2 = null) {
  let i = list.length;
  let j, k, data, key, value, proto;
  while (i--) {
    data = list[i];
    proto = Object.prototype.toString.call(data);
    if (proto === "[object Object]") {
      const keys = Object.keys(data);
      for (j = 0, k = keys.length; j < k; j++) {
        key = keys[j];
        value = list[data[key]];
        if (reviver2)
          value = reviver2.call(data, key, value);
        data[key] = value;
      }
    } else if (proto === "[object Array]") {
      for (j = 0, k = data.length; j < k; j++) {
        value = list[data[j]];
        if (reviver2)
          value = reviver2.call(data, j, value);
        data[j] = value;
      }
    }
  }
}
function stringifyCircularAutoChunks(data, replacer = null, space = null) {
  let result;
  try {
    result = arguments.length === 1 ? JSON.stringify(data) : JSON.stringify(data, (k, v) => {
      var _a25;
      return (_a25 = replacer == null ? void 0 : replacer(k, v)) == null ? void 0 : _a25.call(this);
    }, space);
  } catch (e) {
    result = stringifyStrictCircularAutoChunks(data, replacer, space);
  }
  if (result.length > MAX_SERIALIZED_SIZE) {
    const chunkCount = Math.ceil(result.length / MAX_SERIALIZED_SIZE);
    const chunks = [];
    for (let i = 0; i < chunkCount; i++)
      chunks.push(result.slice(i * MAX_SERIALIZED_SIZE, (i + 1) * MAX_SERIALIZED_SIZE));
    return chunks;
  }
  return result;
}
function stringifyStrictCircularAutoChunks(data, replacer = null, space = null) {
  const list = [];
  encode(data, replacer, list, /* @__PURE__ */ new Map());
  return space ? ` ${JSON.stringify(list, null, space)}` : ` ${JSON.stringify(list)}`;
}
function parseCircularAutoChunks(data, reviver2 = null) {
  if (Array.isArray(data))
    data = data.join("");
  const hasCircular = /^\s/.test(data);
  if (!hasCircular) {
    return arguments.length === 1 ? JSON.parse(data) : JSON.parse(data, reviver2);
  } else {
    const list = JSON.parse(data);
    decode(list, reviver2);
    return list[0];
  }
}

// src/shared/util.ts
function stringify2(data) {
  return stringifyCircularAutoChunks(data, stringifyReplacer);
}
function parse2(data, revive2 = false) {
  if (data == void 0)
    return {};
  return revive2 ? parseCircularAutoChunks(data, reviver) : parseCircularAutoChunks(data);
}

// src/index.ts
var devtools = {
  hook,
  init: () => {
    initDevTools();
  },
  get ctx() {
    return devtoolsContext;
  },
  get api() {
    return devtoolsContext.api;
  }
};



/***/ }),

/***/ "./node_modules/@vue/devtools-shared/dist/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@vue/devtools-shared/dist/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   BROADCAST_CHANNEL_NAME: () => (/* binding */ BROADCAST_CHANNEL_NAME),
/* harmony export */   NOOP: () => (/* binding */ NOOP),
/* harmony export */   VIEW_MODE_STORAGE_KEY: () => (/* binding */ VIEW_MODE_STORAGE_KEY),
/* harmony export */   VITE_PLUGIN_CLIENT_URL_STORAGE_KEY: () => (/* binding */ VITE_PLUGIN_CLIENT_URL_STORAGE_KEY),
/* harmony export */   VITE_PLUGIN_DETECTED_STORAGE_KEY: () => (/* binding */ VITE_PLUGIN_DETECTED_STORAGE_KEY),
/* harmony export */   basename: () => (/* binding */ basename),
/* harmony export */   camelize: () => (/* binding */ camelize),
/* harmony export */   classify: () => (/* binding */ classify),
/* harmony export */   deepClone: () => (/* binding */ deepClone),
/* harmony export */   isArray: () => (/* binding */ isArray),
/* harmony export */   isBrowser: () => (/* binding */ isBrowser),
/* harmony export */   isInChromePanel: () => (/* binding */ isInChromePanel),
/* harmony export */   isInElectron: () => (/* binding */ isInElectron),
/* harmony export */   isInIframe: () => (/* binding */ isInIframe),
/* harmony export */   isInSeparateWindow: () => (/* binding */ isInSeparateWindow),
/* harmony export */   isMacOS: () => (/* binding */ isMacOS),
/* harmony export */   isMap: () => (/* binding */ isMap),
/* harmony export */   isNumeric: () => (/* binding */ isNumeric),
/* harmony export */   isNuxtApp: () => (/* binding */ isNuxtApp),
/* harmony export */   isObject: () => (/* binding */ isObject),
/* harmony export */   isSet: () => (/* binding */ isSet),
/* harmony export */   isUrlString: () => (/* binding */ isUrlString),
/* harmony export */   kebabize: () => (/* binding */ kebabize),
/* harmony export */   randomStr: () => (/* binding */ randomStr),
/* harmony export */   sortByKey: () => (/* binding */ sortByKey),
/* harmony export */   target: () => (/* binding */ target)
/* harmony export */ });
var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target2) => (target2 = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target2, "default", { value: mod, enumerable: true }) : target2,
  mod
));

// ../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js
var init_esm_shims = __esm({
  "../../node_modules/.pnpm/tsup@8.4.0_@microsoft+api-extractor@7.51.1_@types+node@22.13.14__jiti@2.4.2_postcss@8.5_96eb05a9d65343021e53791dd83f3773/node_modules/tsup/assets/esm_shims.js"() {
    "use strict";
  }
});

// ../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js
var require_rfdc = __commonJS({
  "../../node_modules/.pnpm/rfdc@1.4.1/node_modules/rfdc/index.js"(exports, module) {
    "use strict";
    init_esm_shims();
    module.exports = rfdc2;
    function copyBuffer(cur) {
      if (cur instanceof Buffer) {
        return Buffer.from(cur);
      }
      return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length);
    }
    function rfdc2(opts) {
      opts = opts || {};
      if (opts.circles) return rfdcCircles(opts);
      const constructorHandlers = /* @__PURE__ */ new Map();
      constructorHandlers.set(Date, (o) => new Date(o));
      constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)));
      constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)));
      if (opts.constructorHandlers) {
        for (const handler2 of opts.constructorHandlers) {
          constructorHandlers.set(handler2[0], handler2[1]);
        }
      }
      let handler = null;
      return opts.proto ? cloneProto : clone;
      function cloneArray(a, fn) {
        const keys = Object.keys(a);
        const a2 = new Array(keys.length);
        for (let i = 0; i < keys.length; i++) {
          const k = keys[i];
          const cur = a[k];
          if (typeof cur !== "object" || cur === null) {
            a2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            a2[k] = handler(cur, fn);
          } else if (ArrayBuffer.isView(cur)) {
            a2[k] = copyBuffer(cur);
          } else {
            a2[k] = fn(cur);
          }
        }
        return a2;
      }
      function clone(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, clone);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, clone);
        }
        const o2 = {};
        for (const k in o) {
          if (Object.hasOwnProperty.call(o, k) === false) continue;
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, clone);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            o2[k] = clone(cur);
          }
        }
        return o2;
      }
      function cloneProto(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, cloneProto);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, cloneProto);
        }
        const o2 = {};
        for (const k in o) {
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, cloneProto);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            o2[k] = cloneProto(cur);
          }
        }
        return o2;
      }
    }
    function rfdcCircles(opts) {
      const refs = [];
      const refsNew = [];
      const constructorHandlers = /* @__PURE__ */ new Map();
      constructorHandlers.set(Date, (o) => new Date(o));
      constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)));
      constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)));
      if (opts.constructorHandlers) {
        for (const handler2 of opts.constructorHandlers) {
          constructorHandlers.set(handler2[0], handler2[1]);
        }
      }
      let handler = null;
      return opts.proto ? cloneProto : clone;
      function cloneArray(a, fn) {
        const keys = Object.keys(a);
        const a2 = new Array(keys.length);
        for (let i = 0; i < keys.length; i++) {
          const k = keys[i];
          const cur = a[k];
          if (typeof cur !== "object" || cur === null) {
            a2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            a2[k] = handler(cur, fn);
          } else if (ArrayBuffer.isView(cur)) {
            a2[k] = copyBuffer(cur);
          } else {
            const index = refs.indexOf(cur);
            if (index !== -1) {
              a2[k] = refsNew[index];
            } else {
              a2[k] = fn(cur);
            }
          }
        }
        return a2;
      }
      function clone(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, clone);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, clone);
        }
        const o2 = {};
        refs.push(o);
        refsNew.push(o2);
        for (const k in o) {
          if (Object.hasOwnProperty.call(o, k) === false) continue;
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, clone);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            const i = refs.indexOf(cur);
            if (i !== -1) {
              o2[k] = refsNew[i];
            } else {
              o2[k] = clone(cur);
            }
          }
        }
        refs.pop();
        refsNew.pop();
        return o2;
      }
      function cloneProto(o) {
        if (typeof o !== "object" || o === null) return o;
        if (Array.isArray(o)) return cloneArray(o, cloneProto);
        if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {
          return handler(o, cloneProto);
        }
        const o2 = {};
        refs.push(o);
        refsNew.push(o2);
        for (const k in o) {
          const cur = o[k];
          if (typeof cur !== "object" || cur === null) {
            o2[k] = cur;
          } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {
            o2[k] = handler(cur, cloneProto);
          } else if (ArrayBuffer.isView(cur)) {
            o2[k] = copyBuffer(cur);
          } else {
            const i = refs.indexOf(cur);
            if (i !== -1) {
              o2[k] = refsNew[i];
            } else {
              o2[k] = cloneProto(cur);
            }
          }
        }
        refs.pop();
        refsNew.pop();
        return o2;
      }
    }
  }
});

// src/index.ts
init_esm_shims();

// src/constants.ts
init_esm_shims();
var VIEW_MODE_STORAGE_KEY = "__vue-devtools-view-mode__";
var VITE_PLUGIN_DETECTED_STORAGE_KEY = "__vue-devtools-vite-plugin-detected__";
var VITE_PLUGIN_CLIENT_URL_STORAGE_KEY = "__vue-devtools-vite-plugin-client-url__";
var BROADCAST_CHANNEL_NAME = "__vue-devtools-broadcast-channel__";

// src/env.ts
init_esm_shims();
var isBrowser = typeof navigator !== "undefined";
var target = typeof window !== "undefined" ? window : typeof globalThis !== "undefined" ? globalThis : typeof global !== "undefined" ? global : {};
var isInChromePanel = typeof target.chrome !== "undefined" && !!target.chrome.devtools;
var isInIframe = isBrowser && target.self !== target.top;
var _a;
var isInElectron = typeof navigator !== "undefined" && ((_a = navigator.userAgent) == null ? void 0 : _a.toLowerCase().includes("electron"));
var isNuxtApp = typeof window !== "undefined" && !!window.__NUXT__;
var isInSeparateWindow = !isInIframe && !isInChromePanel && !isInElectron;

// src/general.ts
init_esm_shims();
var import_rfdc = __toESM(require_rfdc(), 1);
function NOOP() {
}
var isNumeric = (str) => `${+str}` === str;
var isMacOS = () => (navigator == null ? void 0 : navigator.platform) ? navigator == null ? void 0 : navigator.platform.toLowerCase().includes("mac") : /Macintosh/.test(navigator.userAgent);
var classifyRE = /(?:^|[-_/])(\w)/g;
var camelizeRE = /-(\w)/g;
var kebabizeRE = /([a-z0-9])([A-Z])/g;
function toUpper(_, c) {
  return c ? c.toUpperCase() : "";
}
function classify(str) {
  return str && `${str}`.replace(classifyRE, toUpper);
}
function camelize(str) {
  return str && str.replace(camelizeRE, toUpper);
}
function kebabize(str) {
  return str && str.replace(kebabizeRE, (_, lowerCaseCharacter, upperCaseLetter) => {
    return `${lowerCaseCharacter}-${upperCaseLetter}`;
  }).toLowerCase();
}
function basename(filename, ext) {
  let normalizedFilename = filename.replace(/^[a-z]:/i, "").replace(/\\/g, "/");
  if (normalizedFilename.endsWith(`index${ext}`)) {
    normalizedFilename = normalizedFilename.replace(`/index${ext}`, ext);
  }
  const lastSlashIndex = normalizedFilename.lastIndexOf("/");
  const baseNameWithExt = normalizedFilename.substring(lastSlashIndex + 1);
  if (ext) {
    const extIndex = baseNameWithExt.lastIndexOf(ext);
    return baseNameWithExt.substring(0, extIndex);
  }
  return "";
}
function sortByKey(state) {
  return state && state.slice().sort((a, b) => {
    if (a.key < b.key)
      return -1;
    if (a.key > b.key)
      return 1;
    return 0;
  });
}
var HTTP_URL_RE = /^https?:\/\//;
function isUrlString(str) {
  return str.startsWith("/") || HTTP_URL_RE.test(str);
}
var deepClone = (0, import_rfdc.default)({ circles: true });
function randomStr() {
  return Math.random().toString(36).slice(2);
}
function isObject(value) {
  return typeof value === "object" && !Array.isArray(value) && value !== null;
}
function isArray(value) {
  return Array.isArray(value);
}
function isSet(value) {
  return value instanceof Set;
}
function isMap(value) {
  return value instanceof Map;
}



/***/ }),

/***/ "./node_modules/birpc/dist/index.mjs":
/*!*******************************************!*\
  !*** ./node_modules/birpc/dist/index.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   DEFAULT_TIMEOUT: () => (/* binding */ DEFAULT_TIMEOUT),
/* harmony export */   cachedMap: () => (/* binding */ cachedMap),
/* harmony export */   createBirpc: () => (/* binding */ createBirpc),
/* harmony export */   createBirpcGroup: () => (/* binding */ createBirpcGroup)
/* harmony export */ });
const TYPE_REQUEST = "q";
const TYPE_RESPONSE = "s";
const DEFAULT_TIMEOUT = 6e4;
function defaultSerialize(i) {
  return i;
}
const defaultDeserialize = defaultSerialize;
const { clearTimeout, setTimeout } = globalThis;
const random = Math.random.bind(Math);
function createBirpc(functions, options) {
  const {
    post,
    on,
    off = () => {
    },
    eventNames = [],
    serialize = defaultSerialize,
    deserialize = defaultDeserialize,
    resolver,
    bind = "rpc",
    timeout = DEFAULT_TIMEOUT
  } = options;
  const rpcPromiseMap = /* @__PURE__ */ new Map();
  let _promise;
  let closed = false;
  const rpc = new Proxy({}, {
    get(_, method) {
      if (method === "$functions")
        return functions;
      if (method === "$close")
        return close;
      if (method === "$rejectPendingCalls") {
        return rejectPendingCalls;
      }
      if (method === "$closed")
        return closed;
      if (method === "then" && !eventNames.includes("then") && !("then" in functions))
        return void 0;
      const sendEvent = (...args) => {
        post(serialize({ m: method, a: args, t: TYPE_REQUEST }));
      };
      if (eventNames.includes(method)) {
        sendEvent.asEvent = sendEvent;
        return sendEvent;
      }
      const sendCall = async (...args) => {
        if (closed)
          throw new Error(`[birpc] rpc is closed, cannot call "${method}"`);
        if (_promise) {
          try {
            await _promise;
          } finally {
            _promise = void 0;
          }
        }
        return new Promise((resolve, reject) => {
          const id = nanoid();
          let timeoutId;
          if (timeout >= 0) {
            timeoutId = setTimeout(() => {
              try {
                const handleResult = options.onTimeoutError?.(method, args);
                if (handleResult !== true)
                  throw new Error(`[birpc] timeout on calling "${method}"`);
              } catch (e) {
                reject(e);
              }
              rpcPromiseMap.delete(id);
            }, timeout);
            if (typeof timeoutId === "object")
              timeoutId = timeoutId.unref?.();
          }
          rpcPromiseMap.set(id, { resolve, reject, timeoutId, method });
          post(serialize({ m: method, a: args, i: id, t: "q" }));
        });
      };
      sendCall.asEvent = sendEvent;
      return sendCall;
    }
  });
  function close(customError) {
    closed = true;
    rpcPromiseMap.forEach(({ reject, method }) => {
      const error = new Error(`[birpc] rpc is closed, cannot call "${method}"`);
      if (customError) {
        customError.cause ??= error;
        return reject(customError);
      }
      reject(error);
    });
    rpcPromiseMap.clear();
    off(onMessage);
  }
  function rejectPendingCalls(handler) {
    const entries = Array.from(rpcPromiseMap.values());
    const handlerResults = entries.map(({ method, reject }) => {
      if (!handler) {
        return reject(new Error(`[birpc]: rejected pending call "${method}".`));
      }
      return handler({ method, reject });
    });
    rpcPromiseMap.clear();
    return handlerResults;
  }
  async function onMessage(data, ...extra) {
    let msg;
    try {
      msg = deserialize(data);
    } catch (e) {
      if (options.onGeneralError?.(e) !== true)
        throw e;
      return;
    }
    if (msg.t === TYPE_REQUEST) {
      const { m: method, a: args } = msg;
      let result, error;
      const fn = resolver ? resolver(method, functions[method]) : functions[method];
      if (!fn) {
        error = new Error(`[birpc] function "${method}" not found`);
      } else {
        try {
          result = await fn.apply(bind === "rpc" ? rpc : functions, args);
        } catch (e) {
          error = e;
        }
      }
      if (msg.i) {
        if (error && options.onError)
          options.onError(error, method, args);
        if (error && options.onFunctionError) {
          if (options.onFunctionError(error, method, args) === true)
            return;
        }
        if (!error) {
          try {
            post(serialize({ t: TYPE_RESPONSE, i: msg.i, r: result }), ...extra);
            return;
          } catch (e) {
            error = e;
            if (options.onGeneralError?.(e, method, args) !== true)
              throw e;
          }
        }
        try {
          post(serialize({ t: TYPE_RESPONSE, i: msg.i, e: error }), ...extra);
        } catch (e) {
          if (options.onGeneralError?.(e, method, args) !== true)
            throw e;
        }
      }
    } else {
      const { i: ack, r: result, e: error } = msg;
      const promise = rpcPromiseMap.get(ack);
      if (promise) {
        clearTimeout(promise.timeoutId);
        if (error)
          promise.reject(error);
        else
          promise.resolve(result);
      }
      rpcPromiseMap.delete(ack);
    }
  }
  _promise = on(onMessage);
  return rpc;
}
const cacheMap = /* @__PURE__ */ new WeakMap();
function cachedMap(items, fn) {
  return items.map((i) => {
    let r = cacheMap.get(i);
    if (!r) {
      r = fn(i);
      cacheMap.set(i, r);
    }
    return r;
  });
}
function createBirpcGroup(functions, channels, options = {}) {
  const getChannels = () => typeof channels === "function" ? channels() : channels;
  const getClients = (channels2 = getChannels()) => cachedMap(channels2, (s) => createBirpc(functions, { ...options, ...s }));
  const broadcastProxy = new Proxy({}, {
    get(_, method) {
      const client = getClients();
      const callbacks = client.map((c) => c[method]);
      const sendCall = (...args) => {
        return Promise.all(callbacks.map((i) => i(...args)));
      };
      sendCall.asEvent = (...args) => {
        callbacks.map((i) => i.asEvent(...args));
      };
      return sendCall;
    }
  });
  function updateChannels(fn) {
    const channels2 = getChannels();
    fn?.(channels2);
    return getClients(channels2);
  }
  getClients();
  return {
    get clients() {
      return getClients();
    },
    functions,
    updateChannels,
    broadcast: broadcastProxy,
    /**
     * @deprecated use `broadcast`
     */
    // @ts-expect-error deprecated
    boardcast: broadcastProxy
  };
}
const urlAlphabet = "useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";
function nanoid(size = 21) {
  let id = "";
  let i = size;
  while (i--)
    id += urlAlphabet[random() * 64 | 0];
  return id;
}




/***/ }),

/***/ "./node_modules/hookable/dist/index.mjs":
/*!**********************************************!*\
  !*** ./node_modules/hookable/dist/index.mjs ***!
  \**********************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   Hookable: () => (/* binding */ Hookable),
/* harmony export */   createDebugger: () => (/* binding */ createDebugger),
/* harmony export */   createHooks: () => (/* binding */ createHooks),
/* harmony export */   flatHooks: () => (/* binding */ flatHooks),
/* harmony export */   mergeHooks: () => (/* binding */ mergeHooks),
/* harmony export */   parallelCaller: () => (/* binding */ parallelCaller),
/* harmony export */   serial: () => (/* binding */ serial),
/* harmony export */   serialCaller: () => (/* binding */ serialCaller)
/* harmony export */ });
function flatHooks(configHooks, hooks = {}, parentName) {
  for (const key in configHooks) {
    const subHook = configHooks[key];
    const name = parentName ? `${parentName}:${key}` : key;
    if (typeof subHook === "object" && subHook !== null) {
      flatHooks(subHook, hooks, name);
    } else if (typeof subHook === "function") {
      hooks[name] = subHook;
    }
  }
  return hooks;
}
function mergeHooks(...hooks) {
  const finalHooks = {};
  for (const hook of hooks) {
    const flatenHook = flatHooks(hook);
    for (const key in flatenHook) {
      if (finalHooks[key]) {
        finalHooks[key].push(flatenHook[key]);
      } else {
        finalHooks[key] = [flatenHook[key]];
      }
    }
  }
  for (const key in finalHooks) {
    if (finalHooks[key].length > 1) {
      const array = finalHooks[key];
      finalHooks[key] = (...arguments_) => serial(array, (function_) => function_(...arguments_));
    } else {
      finalHooks[key] = finalHooks[key][0];
    }
  }
  return finalHooks;
}
function serial(tasks, function_) {
  return tasks.reduce(
    (promise, task) => promise.then(() => function_(task)),
    Promise.resolve()
  );
}
const defaultTask = { run: (function_) => function_() };
const _createTask = () => defaultTask;
const createTask = typeof console.createTask !== "undefined" ? console.createTask : _createTask;
function serialTaskCaller(hooks, args) {
  const name = args.shift();
  const task = createTask(name);
  return hooks.reduce(
    (promise, hookFunction) => promise.then(() => task.run(() => hookFunction(...args))),
    Promise.resolve()
  );
}
function parallelTaskCaller(hooks, args) {
  const name = args.shift();
  const task = createTask(name);
  return Promise.all(hooks.map((hook) => task.run(() => hook(...args))));
}
function serialCaller(hooks, arguments_) {
  return hooks.reduce(
    (promise, hookFunction) => promise.then(() => hookFunction(...arguments_ || [])),
    Promise.resolve()
  );
}
function parallelCaller(hooks, args) {
  return Promise.all(hooks.map((hook) => hook(...args || [])));
}
function callEachWith(callbacks, arg0) {
  for (const callback of [...callbacks]) {
    callback(arg0);
  }
}

class Hookable {
  constructor() {
    this._hooks = {};
    this._before = void 0;
    this._after = void 0;
    this._deprecatedMessages = void 0;
    this._deprecatedHooks = {};
    this.hook = this.hook.bind(this);
    this.callHook = this.callHook.bind(this);
    this.callHookWith = this.callHookWith.bind(this);
  }
  hook(name, function_, options = {}) {
    if (!name || typeof function_ !== "function") {
      return () => {
      };
    }
    const originalName = name;
    let dep;
    while (this._deprecatedHooks[name]) {
      dep = this._deprecatedHooks[name];
      name = dep.to;
    }
    if (dep && !options.allowDeprecated) {
      let message = dep.message;
      if (!message) {
        message = `${originalName} hook has been deprecated` + (dep.to ? `, please use ${dep.to}` : "");
      }
      if (!this._deprecatedMessages) {
        this._deprecatedMessages = /* @__PURE__ */ new Set();
      }
      if (!this._deprecatedMessages.has(message)) {
        console.warn(message);
        this._deprecatedMessages.add(message);
      }
    }
    if (!function_.name) {
      try {
        Object.defineProperty(function_, "name", {
          get: () => "_" + name.replace(/\W+/g, "_") + "_hook_cb",
          configurable: true
        });
      } catch {
      }
    }
    this._hooks[name] = this._hooks[name] || [];
    this._hooks[name].push(function_);
    return () => {
      if (function_) {
        this.removeHook(name, function_);
        function_ = void 0;
      }
    };
  }
  hookOnce(name, function_) {
    let _unreg;
    let _function = (...arguments_) => {
      if (typeof _unreg === "function") {
        _unreg();
      }
      _unreg = void 0;
      _function = void 0;
      return function_(...arguments_);
    };
    _unreg = this.hook(name, _function);
    return _unreg;
  }
  removeHook(name, function_) {
    if (this._hooks[name]) {
      const index = this._hooks[name].indexOf(function_);
      if (index !== -1) {
        this._hooks[name].splice(index, 1);
      }
      if (this._hooks[name].length === 0) {
        delete this._hooks[name];
      }
    }
  }
  deprecateHook(name, deprecated) {
    this._deprecatedHooks[name] = typeof deprecated === "string" ? { to: deprecated } : deprecated;
    const _hooks = this._hooks[name] || [];
    delete this._hooks[name];
    for (const hook of _hooks) {
      this.hook(name, hook);
    }
  }
  deprecateHooks(deprecatedHooks) {
    Object.assign(this._deprecatedHooks, deprecatedHooks);
    for (const name in deprecatedHooks) {
      this.deprecateHook(name, deprecatedHooks[name]);
    }
  }
  addHooks(configHooks) {
    const hooks = flatHooks(configHooks);
    const removeFns = Object.keys(hooks).map(
      (key) => this.hook(key, hooks[key])
    );
    return () => {
      for (const unreg of removeFns.splice(0, removeFns.length)) {
        unreg();
      }
    };
  }
  removeHooks(configHooks) {
    const hooks = flatHooks(configHooks);
    for (const key in hooks) {
      this.removeHook(key, hooks[key]);
    }
  }
  removeAllHooks() {
    for (const key in this._hooks) {
      delete this._hooks[key];
    }
  }
  callHook(name, ...arguments_) {
    arguments_.unshift(name);
    return this.callHookWith(serialTaskCaller, name, ...arguments_);
  }
  callHookParallel(name, ...arguments_) {
    arguments_.unshift(name);
    return this.callHookWith(parallelTaskCaller, name, ...arguments_);
  }
  callHookWith(caller, name, ...arguments_) {
    const event = this._before || this._after ? { name, args: arguments_, context: {} } : void 0;
    if (this._before) {
      callEachWith(this._before, event);
    }
    const result = caller(
      name in this._hooks ? [...this._hooks[name]] : [],
      arguments_
    );
    if (result instanceof Promise) {
      return result.finally(() => {
        if (this._after && event) {
          callEachWith(this._after, event);
        }
      });
    }
    if (this._after && event) {
      callEachWith(this._after, event);
    }
    return result;
  }
  beforeEach(function_) {
    this._before = this._before || [];
    this._before.push(function_);
    return () => {
      if (this._before !== void 0) {
        const index = this._before.indexOf(function_);
        if (index !== -1) {
          this._before.splice(index, 1);
        }
      }
    };
  }
  afterEach(function_) {
    this._after = this._after || [];
    this._after.push(function_);
    return () => {
      if (this._after !== void 0) {
        const index = this._after.indexOf(function_);
        if (index !== -1) {
          this._after.splice(index, 1);
        }
      }
    };
  }
}
function createHooks() {
  return new Hookable();
}

const isBrowser = typeof window !== "undefined";
function createDebugger(hooks, _options = {}) {
  const options = {
    inspect: isBrowser,
    group: isBrowser,
    filter: () => true,
    ..._options
  };
  const _filter = options.filter;
  const filter = typeof _filter === "string" ? (name) => name.startsWith(_filter) : _filter;
  const _tag = options.tag ? `[${options.tag}] ` : "";
  const logPrefix = (event) => _tag + event.name + "".padEnd(event._id, "\0");
  const _idCtr = {};
  const unsubscribeBefore = hooks.beforeEach((event) => {
    if (filter !== void 0 && !filter(event.name)) {
      return;
    }
    _idCtr[event.name] = _idCtr[event.name] || 0;
    event._id = _idCtr[event.name]++;
    console.time(logPrefix(event));
  });
  const unsubscribeAfter = hooks.afterEach((event) => {
    if (filter !== void 0 && !filter(event.name)) {
      return;
    }
    if (options.group) {
      console.groupCollapsed(event.name);
    }
    if (options.inspect) {
      console.timeLog(logPrefix(event), event.args);
    } else {
      console.timeEnd(logPrefix(event));
    }
    if (options.group) {
      console.groupEnd();
    }
    _idCtr[event.name]--;
  });
  return {
    /** Stop debugging and remove listeners */
    close: () => {
      unsubscribeBefore();
      unsubscribeAfter();
    }
  };
}




/***/ }),

/***/ "./node_modules/perfect-debounce/dist/index.mjs":
/*!******************************************************!*\
  !*** ./node_modules/perfect-debounce/dist/index.mjs ***!
  \******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   debounce: () => (/* binding */ debounce)
/* harmony export */ });
const DEBOUNCE_DEFAULTS = {
  trailing: true
};
function debounce(fn, wait = 25, options = {}) {
  options = { ...DEBOUNCE_DEFAULTS, ...options };
  if (!Number.isFinite(wait)) {
    throw new TypeError("Expected `wait` to be a finite number");
  }
  let leadingValue;
  let timeout;
  let resolveList = [];
  let currentPromise;
  let trailingArgs;
  const applyFn = (_this, args) => {
    currentPromise = _applyPromised(fn, _this, args);
    currentPromise.finally(() => {
      currentPromise = null;
      if (options.trailing && trailingArgs && !timeout) {
        const promise = applyFn(_this, trailingArgs);
        trailingArgs = null;
        return promise;
      }
    });
    return currentPromise;
  };
  return function(...args) {
    if (currentPromise) {
      if (options.trailing) {
        trailingArgs = args;
      }
      return currentPromise;
    }
    return new Promise((resolve) => {
      const shouldCallNow = !timeout && options.leading;
      clearTimeout(timeout);
      timeout = setTimeout(() => {
        timeout = null;
        const promise = options.leading ? leadingValue : applyFn(this, args);
        for (const _resolve of resolveList) {
          _resolve(promise);
        }
        resolveList = [];
      }, wait);
      if (shouldCallNow) {
        leadingValue = applyFn(this, args);
        resolve(leadingValue);
      } else {
        resolveList.push(resolve);
      }
    });
  };
}
async function _applyPromised(fn, _this, args) {
  return await fn.apply(_this, args);
}




/***/ }),

/***/ "./node_modules/pinia/dist/pinia.mjs":
/*!*******************************************!*\
  !*** ./node_modules/pinia/dist/pinia.mjs ***!
  \*******************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   MutationType: () => (/* binding */ MutationType),
/* harmony export */   acceptHMRUpdate: () => (/* binding */ acceptHMRUpdate),
/* harmony export */   createPinia: () => (/* binding */ createPinia),
/* harmony export */   defineStore: () => (/* binding */ defineStore),
/* harmony export */   disposePinia: () => (/* binding */ disposePinia),
/* harmony export */   getActivePinia: () => (/* binding */ getActivePinia),
/* harmony export */   mapActions: () => (/* binding */ mapActions),
/* harmony export */   mapGetters: () => (/* binding */ mapGetters),
/* harmony export */   mapState: () => (/* binding */ mapState),
/* harmony export */   mapStores: () => (/* binding */ mapStores),
/* harmony export */   mapWritableState: () => (/* binding */ mapWritableState),
/* harmony export */   setActivePinia: () => (/* binding */ setActivePinia),
/* harmony export */   setMapStoreSuffix: () => (/* binding */ setMapStoreSuffix),
/* harmony export */   shouldHydrate: () => (/* binding */ shouldHydrate),
/* harmony export */   skipHydrate: () => (/* binding */ skipHydrate),
/* harmony export */   storeToRefs: () => (/* binding */ storeToRefs)
/* harmony export */ });
/* harmony import */ var vue__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! vue */ "./node_modules/vue/dist/vue.esm-bundler.js");
/* harmony import */ var _vue_devtools_api__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @vue/devtools-api */ "./node_modules/@vue/devtools-kit/dist/index.js");
/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */



/**
 * setActivePinia must be called to handle SSR at the top of functions like
 * `fetch`, `setup`, `serverPrefetch` and others
 */
let activePinia;
/**
 * Sets or unsets the active pinia. Used in SSR and internally when calling
 * actions and getters
 *
 * @param pinia - Pinia instance
 */
// @ts-expect-error: cannot constrain the type of the return
const setActivePinia = (pinia) => (activePinia = pinia);
/**
 * Get the currently active pinia if there is any.
 */
const getActivePinia = () => ((0,vue__WEBPACK_IMPORTED_MODULE_0__.hasInjectionContext)() && (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)(piniaSymbol)) || activePinia;
const piniaSymbol = (( true) ? Symbol('pinia') : /* istanbul ignore next */ 0);

function isPlainObject(
// eslint-disable-next-line @typescript-eslint/no-explicit-any
o) {
    return (o &&
        typeof o === 'object' &&
        Object.prototype.toString.call(o) === '[object Object]' &&
        typeof o.toJSON !== 'function');
}
// type DeepReadonly<T> = { readonly [P in keyof T]: DeepReadonly<T[P]> }
// TODO: can we change these to numbers?
/**
 * Possible types for SubscriptionCallback
 */
var MutationType;
(function (MutationType) {
    /**
     * Direct mutation of the state:
     *
     * - `store.name = 'new name'`
     * - `store.$state.name = 'new name'`
     * - `store.list.push('new item')`
     */
    MutationType["direct"] = "direct";
    /**
     * Mutated the state with `$patch` and an object
     *
     * - `store.$patch({ name: 'newName' })`
     */
    MutationType["patchObject"] = "patch object";
    /**
     * Mutated the state with `$patch` and a function
     *
     * - `store.$patch(state => state.name = 'newName')`
     */
    MutationType["patchFunction"] = "patch function";
    // maybe reset? for $state = {} and $reset
})(MutationType || (MutationType = {}));

const IS_CLIENT = typeof window !== 'undefined';

/*
 * FileSaver.js A saveAs() FileSaver implementation.
 *
 * Originally by Eli Grey, adapted as an ESM module by Eduardo San Martin
 * Morote.
 *
 * License : MIT
 */
// The one and only way of getting global scope in all environments
// https://stackoverflow.com/q/3277182/1008999
const _global = /*#__PURE__*/ (() => typeof window === 'object' && window.window === window
    ? window
    : typeof self === 'object' && self.self === self
        ? self
        : typeof global === 'object' && global.global === global
            ? global
            : typeof globalThis === 'object'
                ? globalThis
                : { HTMLElement: null })();
function bom(blob, { autoBom = false } = {}) {
    // prepend BOM for UTF-8 XML and text/* types (including HTML)
    // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF
    if (autoBom &&
        /^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)) {
        return new Blob([String.fromCharCode(0xfeff), blob], { type: blob.type });
    }
    return blob;
}
function download(url, name, opts) {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', url);
    xhr.responseType = 'blob';
    xhr.onload = function () {
        saveAs(xhr.response, name, opts);
    };
    xhr.onerror = function () {
        console.error('could not download file');
    };
    xhr.send();
}
function corsEnabled(url) {
    const xhr = new XMLHttpRequest();
    // use sync to avoid popup blocker
    xhr.open('HEAD', url, false);
    try {
        xhr.send();
    }
    catch (e) { }
    return xhr.status >= 200 && xhr.status <= 299;
}
// `a.click()` doesn't work for all browsers (#465)
function click(node) {
    try {
        node.dispatchEvent(new MouseEvent('click'));
    }
    catch (e) {
        const evt = new MouseEvent('click', {
            bubbles: true,
            cancelable: true,
            view: window,
            detail: 0,
            screenX: 80,
            screenY: 20,
            clientX: 80,
            clientY: 20,
            ctrlKey: false,
            altKey: false,
            shiftKey: false,
            metaKey: false,
            button: 0,
            relatedTarget: null,
        });
        node.dispatchEvent(evt);
    }
}
const _navigator = typeof navigator === 'object' ? navigator : { userAgent: '' };
// Detect WebView inside a native macOS app by ruling out all browsers
// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too
// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos
const isMacOSWebView = /*#__PURE__*/ (() => /Macintosh/.test(_navigator.userAgent) &&
    /AppleWebKit/.test(_navigator.userAgent) &&
    !/Safari/.test(_navigator.userAgent))();
const saveAs = !IS_CLIENT
    ? () => { } // noop
    : // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView or mini program
        typeof HTMLAnchorElement !== 'undefined' &&
            'download' in HTMLAnchorElement.prototype &&
            !isMacOSWebView
            ? downloadSaveAs
            : // Use msSaveOrOpenBlob as a second approach
                'msSaveOrOpenBlob' in _navigator
                    ? msSaveAs
                    : // Fallback to using FileReader and a popup
                        fileSaverSaveAs;
function downloadSaveAs(blob, name = 'download', opts) {
    const a = document.createElement('a');
    a.download = name;
    a.rel = 'noopener'; // tabnabbing
    // TODO: detect chrome extensions & packaged apps
    // a.target = '_blank'
    if (typeof blob === 'string') {
        // Support regular links
        a.href = blob;
        if (a.origin !== location.origin) {
            if (corsEnabled(a.href)) {
                download(blob, name, opts);
            }
            else {
                a.target = '_blank';
                click(a);
            }
        }
        else {
            click(a);
        }
    }
    else {
        // Support blobs
        a.href = URL.createObjectURL(blob);
        setTimeout(function () {
            URL.revokeObjectURL(a.href);
        }, 4e4); // 40s
        setTimeout(function () {
            click(a);
        }, 0);
    }
}
function msSaveAs(blob, name = 'download', opts) {
    if (typeof blob === 'string') {
        if (corsEnabled(blob)) {
            download(blob, name, opts);
        }
        else {
            const a = document.createElement('a');
            a.href = blob;
            a.target = '_blank';
            setTimeout(function () {
                click(a);
            });
        }
    }
    else {
        // @ts-ignore: works on windows
        navigator.msSaveOrOpenBlob(bom(blob, opts), name);
    }
}
function fileSaverSaveAs(blob, name, opts, popup) {
    // Open a popup immediately do go around popup blocker
    // Mostly only available on user interaction and the fileReader is async so...
    popup = popup || open('', '_blank');
    if (popup) {
        popup.document.title = popup.document.body.innerText = 'downloading...';
    }
    if (typeof blob === 'string')
        return download(blob, name, opts);
    const force = blob.type === 'application/octet-stream';
    const isSafari = /constructor/i.test(String(_global.HTMLElement)) || 'safari' in _global;
    const isChromeIOS = /CriOS\/[\d]+/.test(navigator.userAgent);
    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) &&
        typeof FileReader !== 'undefined') {
        // Safari doesn't allow downloading of blob URLs
        const reader = new FileReader();
        reader.onloadend = function () {
            let url = reader.result;
            if (typeof url !== 'string') {
                popup = null;
                throw new Error('Wrong reader.result type');
            }
            url = isChromeIOS
                ? url
                : url.replace(/^data:[^;]*;/, 'data:attachment/file;');
            if (popup) {
                popup.location.href = url;
            }
            else {
                location.assign(url);
            }
            popup = null; // reverse-tabnabbing #460
        };
        reader.readAsDataURL(blob);
    }
    else {
        const url = URL.createObjectURL(blob);
        if (popup)
            popup.location.assign(url);
        else
            location.href = url;
        popup = null; // reverse-tabnabbing #460
        setTimeout(function () {
            URL.revokeObjectURL(url);
        }, 4e4); // 40s
    }
}

/**
 * Shows a toast or console.log
 *
 * @param message - message to log
 * @param type - different color of the tooltip
 */
function toastMessage(message, type) {
    const piniaMessage = '🍍 ' + message;
    if (typeof __VUE_DEVTOOLS_TOAST__ === 'function') {
        // No longer available :(
        __VUE_DEVTOOLS_TOAST__(piniaMessage, type);
    }
    else if (type === 'error') {
        console.error(piniaMessage);
    }
    else if (type === 'warn') {
        console.warn(piniaMessage);
    }
    else {
        console.log(piniaMessage);
    }
}
function isPinia(o) {
    return '_a' in o && 'install' in o;
}

/**
 * This file contain devtools actions, they are not Pinia actions.
 */
// ---
function checkClipboardAccess() {
    if (!('clipboard' in navigator)) {
        toastMessage(`Your browser doesn't support the Clipboard API`, 'error');
        return true;
    }
}
function checkNotFocusedError(error) {
    if (error instanceof Error &&
        error.message.toLowerCase().includes('document is not focused')) {
        toastMessage('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.', 'warn');
        return true;
    }
    return false;
}
async function actionGlobalCopyState(pinia) {
    if (checkClipboardAccess())
        return;
    try {
        await navigator.clipboard.writeText(JSON.stringify(pinia.state.value));
        toastMessage('Global state copied to clipboard.');
    }
    catch (error) {
        if (checkNotFocusedError(error))
            return;
        toastMessage(`Failed to serialize the state. Check the console for more details.`, 'error');
        console.error(error);
    }
}
async function actionGlobalPasteState(pinia) {
    if (checkClipboardAccess())
        return;
    try {
        loadStoresState(pinia, JSON.parse(await navigator.clipboard.readText()));
        toastMessage('Global state pasted from clipboard.');
    }
    catch (error) {
        if (checkNotFocusedError(error))
            return;
        toastMessage(`Failed to deserialize the state from clipboard. Check the console for more details.`, 'error');
        console.error(error);
    }
}
async function actionGlobalSaveState(pinia) {
    try {
        saveAs(new Blob([JSON.stringify(pinia.state.value)], {
            type: 'text/plain;charset=utf-8',
        }), 'pinia-state.json');
    }
    catch (error) {
        toastMessage(`Failed to export the state as JSON. Check the console for more details.`, 'error');
        console.error(error);
    }
}
let fileInput;
function getFileOpener() {
    if (!fileInput) {
        fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = '.json';
    }
    function openFile() {
        return new Promise((resolve, reject) => {
            fileInput.onchange = async () => {
                const files = fileInput.files;
                if (!files)
                    return resolve(null);
                const file = files.item(0);
                if (!file)
                    return resolve(null);
                return resolve({ text: await file.text(), file });
            };
            // @ts-ignore: TODO: changed from 4.3 to 4.4
            fileInput.oncancel = () => resolve(null);
            fileInput.onerror = reject;
            fileInput.click();
        });
    }
    return openFile;
}
async function actionGlobalOpenStateFile(pinia) {
    try {
        const open = getFileOpener();
        const result = await open();
        if (!result)
            return;
        const { text, file } = result;
        loadStoresState(pinia, JSON.parse(text));
        toastMessage(`Global state imported from "${file.name}".`);
    }
    catch (error) {
        toastMessage(`Failed to import the state from JSON. Check the console for more details.`, 'error');
        console.error(error);
    }
}
function loadStoresState(pinia, state) {
    for (const key in state) {
        const storeState = pinia.state.value[key];
        // store is already instantiated, patch it
        if (storeState) {
            Object.assign(storeState, state[key]);
        }
        else {
            // store is not instantiated, set the initial state
            pinia.state.value[key] = state[key];
        }
    }
}

function formatDisplay(display) {
    return {
        _custom: {
            display,
        },
    };
}
const PINIA_ROOT_LABEL = '🍍 Pinia (root)';
const PINIA_ROOT_ID = '_root';
function formatStoreForInspectorTree(store) {
    return isPinia(store)
        ? {
            id: PINIA_ROOT_ID,
            label: PINIA_ROOT_LABEL,
        }
        : {
            id: store.$id,
            label: store.$id,
        };
}
function formatStoreForInspectorState(store) {
    if (isPinia(store)) {
        const storeNames = Array.from(store._s.keys());
        const storeMap = store._s;
        const state = {
            state: storeNames.map((storeId) => ({
                editable: true,
                key: storeId,
                value: store.state.value[storeId],
            })),
            getters: storeNames
                .filter((id) => storeMap.get(id)._getters)
                .map((id) => {
                const store = storeMap.get(id);
                return {
                    editable: false,
                    key: id,
                    value: store._getters.reduce((getters, key) => {
                        getters[key] = store[key];
                        return getters;
                    }, {}),
                };
            }),
        };
        return state;
    }
    const state = {
        state: Object.keys(store.$state).map((key) => ({
            editable: true,
            key,
            value: store.$state[key],
        })),
    };
    // avoid adding empty getters
    if (store._getters && store._getters.length) {
        state.getters = store._getters.map((getterName) => ({
            editable: false,
            key: getterName,
            value: store[getterName],
        }));
    }
    if (store._customProperties.size) {
        state.customProperties = Array.from(store._customProperties).map((key) => ({
            editable: true,
            key,
            value: store[key],
        }));
    }
    return state;
}
function formatEventData(events) {
    if (!events)
        return {};
    if (Array.isArray(events)) {
        // TODO: handle add and delete for arrays and objects
        return events.reduce((data, event) => {
            data.keys.push(event.key);
            data.operations.push(event.type);
            data.oldValue[event.key] = event.oldValue;
            data.newValue[event.key] = event.newValue;
            return data;
        }, {
            oldValue: {},
            keys: [],
            operations: [],
            newValue: {},
        });
    }
    else {
        return {
            operation: formatDisplay(events.type),
            key: formatDisplay(events.key),
            oldValue: events.oldValue,
            newValue: events.newValue,
        };
    }
}
function formatMutationType(type) {
    switch (type) {
        case MutationType.direct:
            return 'mutation';
        case MutationType.patchFunction:
            return '$patch';
        case MutationType.patchObject:
            return '$patch';
        default:
            return 'unknown';
    }
}

// timeline can be paused when directly changing the state
let isTimelineActive = true;
const componentStateTypes = [];
const MUTATIONS_LAYER_ID = 'pinia:mutations';
const INSPECTOR_ID = 'pinia';
const { assign: assign$1 } = Object;
/**
 * Gets the displayed name of a store in devtools
 *
 * @param id - id of the store
 * @returns a formatted string
 */
const getStoreType = (id) => '🍍 ' + id;
/**
 * Add the pinia plugin without any store. Allows displaying a Pinia plugin tab
 * as soon as it is added to the application.
 *
 * @param app - Vue application
 * @param pinia - pinia instance
 */
function registerPiniaDevtools(app, pinia) {
    (0,_vue_devtools_api__WEBPACK_IMPORTED_MODULE_1__.setupDevToolsPlugin)({
        id: 'dev.esm.pinia',
        label: 'Pinia 🍍',
        logo: 'https://pinia.vuejs.org/logo.svg',
        packageName: 'pinia',
        homepage: 'https://pinia.vuejs.org',
        componentStateTypes,
        app,
    }, (api) => {
        if (typeof api.now !== 'function') {
            toastMessage('You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html.');
        }
        api.addTimelineLayer({
            id: MUTATIONS_LAYER_ID,
            label: `Pinia 🍍`,
            color: 0xe5df88,
        });
        api.addInspector({
            id: INSPECTOR_ID,
            label: 'Pinia 🍍',
            icon: 'storage',
            treeFilterPlaceholder: 'Search stores',
            actions: [
                {
                    icon: 'content_copy',
                    action: () => {
                        actionGlobalCopyState(pinia);
                    },
                    tooltip: 'Serialize and copy the state',
                },
                {
                    icon: 'content_paste',
                    action: async () => {
                        await actionGlobalPasteState(pinia);
                        api.sendInspectorTree(INSPECTOR_ID);
                        api.sendInspectorState(INSPECTOR_ID);
                    },
                    tooltip: 'Replace the state with the content of your clipboard',
                },
                {
                    icon: 'save',
                    action: () => {
                        actionGlobalSaveState(pinia);
                    },
                    tooltip: 'Save the state as a JSON file',
                },
                {
                    icon: 'folder_open',
                    action: async () => {
                        await actionGlobalOpenStateFile(pinia);
                        api.sendInspectorTree(INSPECTOR_ID);
                        api.sendInspectorState(INSPECTOR_ID);
                    },
                    tooltip: 'Import the state from a JSON file',
                },
            ],
            nodeActions: [
                {
                    icon: 'restore',
                    tooltip: 'Reset the state (with "$reset")',
                    action: (nodeId) => {
                        const store = pinia._s.get(nodeId);
                        if (!store) {
                            toastMessage(`Cannot reset "${nodeId}" store because it wasn't found.`, 'warn');
                        }
                        else if (typeof store.$reset !== 'function') {
                            toastMessage(`Cannot reset "${nodeId}" store because it doesn't have a "$reset" method implemented.`, 'warn');
                        }
                        else {
                            store.$reset();
                            toastMessage(`Store "${nodeId}" reset.`);
                        }
                    },
                },
            ],
        });
        api.on.inspectComponent((payload) => {
            const proxy = (payload.componentInstance &&
                payload.componentInstance.proxy);
            if (proxy && proxy._pStores) {
                const piniaStores = payload.componentInstance.proxy._pStores;
                Object.values(piniaStores).forEach((store) => {
                    payload.instanceData.state.push({
                        type: getStoreType(store.$id),
                        key: 'state',
                        editable: true,
                        value: store._isOptionsAPI
                            ? {
                                _custom: {
                                    value: (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(store.$state),
                                    actions: [
                                        {
                                            icon: 'restore',
                                            tooltip: 'Reset the state of this store',
                                            action: () => store.$reset(),
                                        },
                                    ],
                                },
                            }
                            : // NOTE: workaround to unwrap transferred refs
                                Object.keys(store.$state).reduce((state, key) => {
                                    state[key] = store.$state[key];
                                    return state;
                                }, {}),
                    });
                    if (store._getters && store._getters.length) {
                        payload.instanceData.state.push({
                            type: getStoreType(store.$id),
                            key: 'getters',
                            editable: false,
                            value: store._getters.reduce((getters, key) => {
                                try {
                                    getters[key] = store[key];
                                }
                                catch (error) {
                                    // @ts-expect-error: we just want to show it in devtools
                                    getters[key] = error;
                                }
                                return getters;
                            }, {}),
                        });
                    }
                });
            }
        });
        api.on.getInspectorTree((payload) => {
            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
                let stores = [pinia];
                stores = stores.concat(Array.from(pinia._s.values()));
                payload.rootNodes = (payload.filter
                    ? stores.filter((store) => '$id' in store
                        ? store.$id
                            .toLowerCase()
                            .includes(payload.filter.toLowerCase())
                        : PINIA_ROOT_LABEL.toLowerCase().includes(payload.filter.toLowerCase()))
                    : stores).map(formatStoreForInspectorTree);
            }
        });
        // Expose pinia instance as $pinia to window
        globalThis.$pinia = pinia;
        api.on.getInspectorState((payload) => {
            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
                const inspectedStore = payload.nodeId === PINIA_ROOT_ID
                    ? pinia
                    : pinia._s.get(payload.nodeId);
                if (!inspectedStore) {
                    // this could be the selected store restored for a different project
                    // so it's better not to say anything here
                    return;
                }
                if (inspectedStore) {
                    // Expose selected store as $store to window
                    if (payload.nodeId !== PINIA_ROOT_ID)
                        globalThis.$store = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(inspectedStore);
                    payload.state = formatStoreForInspectorState(inspectedStore);
                }
            }
        });
        api.on.editInspectorState((payload) => {
            if (payload.app === app && payload.inspectorId === INSPECTOR_ID) {
                const inspectedStore = payload.nodeId === PINIA_ROOT_ID
                    ? pinia
                    : pinia._s.get(payload.nodeId);
                if (!inspectedStore) {
                    return toastMessage(`store "${payload.nodeId}" not found`, 'error');
                }
                const { path } = payload;
                if (!isPinia(inspectedStore)) {
                    // access only the state
                    if (path.length !== 1 ||
                        !inspectedStore._customProperties.has(path[0]) ||
                        path[0] in inspectedStore.$state) {
                        path.unshift('$state');
                    }
                }
                else {
                    // Root access, we can omit the `.value` because the devtools API does it for us
                    path.unshift('state');
                }
                isTimelineActive = false;
                payload.set(inspectedStore, path, payload.state.value);
                isTimelineActive = true;
            }
        });
        api.on.editComponentState((payload) => {
            if (payload.type.startsWith('🍍')) {
                const storeId = payload.type.replace(/^🍍\s*/, '');
                const store = pinia._s.get(storeId);
                if (!store) {
                    return toastMessage(`store "${storeId}" not found`, 'error');
                }
                const { path } = payload;
                if (path[0] !== 'state') {
                    return toastMessage(`Invalid path for store "${storeId}":\n${path}\nOnly state can be modified.`);
                }
                // rewrite the first entry to be able to directly set the state as
                // well as any other path
                path[0] = '$state';
                isTimelineActive = false;
                payload.set(store, path, payload.state.value);
                isTimelineActive = true;
            }
        });
    });
}
function addStoreToDevtools(app, store) {
    if (!componentStateTypes.includes(getStoreType(store.$id))) {
        componentStateTypes.push(getStoreType(store.$id));
    }
    (0,_vue_devtools_api__WEBPACK_IMPORTED_MODULE_1__.setupDevToolsPlugin)({
        id: 'dev.esm.pinia',
        label: 'Pinia 🍍',
        logo: 'https://pinia.vuejs.org/logo.svg',
        packageName: 'pinia',
        homepage: 'https://pinia.vuejs.org',
        componentStateTypes,
        app,
        settings: {
            logStoreChanges: {
                label: 'Notify about new/deleted stores',
                type: 'boolean',
                defaultValue: true,
            },
            // useEmojis: {
            //   label: 'Use emojis in messages ⚡️',
            //   type: 'boolean',
            //   defaultValue: true,
            // },
        },
    }, (api) => {
        // gracefully handle errors
        const now = typeof api.now === 'function' ? api.now.bind(api) : Date.now;
        store.$onAction(({ after, onError, name, args }) => {
            const groupId = runningActionId++;
            api.addTimelineEvent({
                layerId: MUTATIONS_LAYER_ID,
                event: {
                    time: now(),
                    title: '🛫 ' + name,
                    subtitle: 'start',
                    data: {
                        store: formatDisplay(store.$id),
                        action: formatDisplay(name),
                        args,
                    },
                    groupId,
                },
            });
            after((result) => {
                activeAction = undefined;
                api.addTimelineEvent({
                    layerId: MUTATIONS_LAYER_ID,
                    event: {
                        time: now(),
                        title: '🛬 ' + name,
                        subtitle: 'end',
                        data: {
                            store: formatDisplay(store.$id),
                            action: formatDisplay(name),
                            args,
                            result,
                        },
                        groupId,
                    },
                });
            });
            onError((error) => {
                activeAction = undefined;
                api.addTimelineEvent({
                    layerId: MUTATIONS_LAYER_ID,
                    event: {
                        time: now(),
                        logType: 'error',
                        title: '💥 ' + name,
                        subtitle: 'end',
                        data: {
                            store: formatDisplay(store.$id),
                            action: formatDisplay(name),
                            args,
                            error,
                        },
                        groupId,
                    },
                });
            });
        }, true);
        store._customProperties.forEach((name) => {
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(() => (0,vue__WEBPACK_IMPORTED_MODULE_0__.unref)(store[name]), (newValue, oldValue) => {
                api.notifyComponentUpdate();
                api.sendInspectorState(INSPECTOR_ID);
                if (isTimelineActive) {
                    api.addTimelineEvent({
                        layerId: MUTATIONS_LAYER_ID,
                        event: {
                            time: now(),
                            title: 'Change',
                            subtitle: name,
                            data: {
                                newValue,
                                oldValue,
                            },
                            groupId: activeAction,
                        },
                    });
                }
            }, { deep: true });
        });
        store.$subscribe(({ events, type }, state) => {
            api.notifyComponentUpdate();
            api.sendInspectorState(INSPECTOR_ID);
            if (!isTimelineActive)
                return;
            // rootStore.state[store.id] = state
            const eventData = {
                time: now(),
                title: formatMutationType(type),
                data: assign$1({ store: formatDisplay(store.$id) }, formatEventData(events)),
                groupId: activeAction,
            };
            if (type === MutationType.patchFunction) {
                eventData.subtitle = '⤵️';
            }
            else if (type === MutationType.patchObject) {
                eventData.subtitle = '🧩';
            }
            else if (events && !Array.isArray(events)) {
                eventData.subtitle = events.type;
            }
            if (events) {
                eventData.data['rawEvent(s)'] = {
                    _custom: {
                        display: 'DebuggerEvent',
                        type: 'object',
                        tooltip: 'raw DebuggerEvent[]',
                        value: events,
                    },
                };
            }
            api.addTimelineEvent({
                layerId: MUTATIONS_LAYER_ID,
                event: eventData,
            });
        }, { detached: true, flush: 'sync' });
        const hotUpdate = store._hotUpdate;
        store._hotUpdate = (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)((newStore) => {
            hotUpdate(newStore);
            api.addTimelineEvent({
                layerId: MUTATIONS_LAYER_ID,
                event: {
                    time: now(),
                    title: '🔥 ' + store.$id,
                    subtitle: 'HMR update',
                    data: {
                        store: formatDisplay(store.$id),
                        info: formatDisplay(`HMR update`),
                    },
                },
            });
            // update the devtools too
            api.notifyComponentUpdate();
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
        });
        const { $dispose } = store;
        store.$dispose = () => {
            $dispose();
            api.notifyComponentUpdate();
            api.sendInspectorTree(INSPECTOR_ID);
            api.sendInspectorState(INSPECTOR_ID);
            api.getSettings().logStoreChanges &&
                toastMessage(`Disposed "${store.$id}" store 🗑`);
        };
        // trigger an update so it can display new registered stores
        api.notifyComponentUpdate();
        api.sendInspectorTree(INSPECTOR_ID);
        api.sendInspectorState(INSPECTOR_ID);
        api.getSettings().logStoreChanges &&
            toastMessage(`"${store.$id}" store installed 🆕`);
    });
}
let runningActionId = 0;
let activeAction;
/**
 * Patches a store to enable action grouping in devtools by wrapping the store with a Proxy that is passed as the
 * context of all actions, allowing us to set `runningAction` on each access and effectively associating any state
 * mutation to the action.
 *
 * @param store - store to patch
 * @param actionNames - list of actionst to patch
 */
function patchActionForGrouping(store, actionNames, wrapWithProxy) {
    // original actions of the store as they are given by pinia. We are going to override them
    const actions = actionNames.reduce((storeActions, actionName) => {
        // use toRaw to avoid tracking #541
        storeActions[actionName] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(store)[actionName];
        return storeActions;
    }, {});
    for (const actionName in actions) {
        store[actionName] = function () {
            // the running action id is incremented in a before action hook
            const _actionId = runningActionId;
            const trackedStore = wrapWithProxy
                ? new Proxy(store, {
                    get(...args) {
                        activeAction = _actionId;
                        return Reflect.get(...args);
                    },
                    set(...args) {
                        activeAction = _actionId;
                        return Reflect.set(...args);
                    },
                })
                : store;
            // For Setup Stores we need https://github.com/tc39/proposal-async-context
            activeAction = _actionId;
            const retValue = actions[actionName].apply(trackedStore, arguments);
            // this is safer as async actions in Setup Stores would associate mutations done outside of the action
            activeAction = undefined;
            return retValue;
        };
    }
}
/**
 * pinia.use(devtoolsPlugin)
 */
function devtoolsPlugin({ app, store, options }) {
    // HMR module
    if (store.$id.startsWith('__hot:')) {
        return;
    }
    // detect option api vs setup api
    store._isOptionsAPI = !!options.state;
    // Do not overwrite actions mocked by @pinia/testing (#2298)
    if (!store._p._testing) {
        patchActionForGrouping(store, Object.keys(options.actions), store._isOptionsAPI);
        // Upgrade the HMR to also update the new actions
        const originalHotUpdate = store._hotUpdate;
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(store)._hotUpdate = function (newStore) {
            originalHotUpdate.apply(this, arguments);
            patchActionForGrouping(store, Object.keys(newStore._hmrPayload.actions), !!store._isOptionsAPI);
        };
    }
    addStoreToDevtools(app, 
    // FIXME: is there a way to allow the assignment from Store<Id, S, G, A> to StoreGeneric?
    store);
}

/**
 * Creates a Pinia instance to be used by the application
 */
function createPinia() {
    const scope = (0,vue__WEBPACK_IMPORTED_MODULE_0__.effectScope)(true);
    // NOTE: here we could check the window object for a state and directly set it
    // if there is anything like it with Vue 3 SSR
    const state = scope.run(() => (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)({}));
    let _p = [];
    // plugins added before calling app.use(pinia)
    let toBeInstalled = [];
    const pinia = (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)({
        install(app) {
            // this allows calling useStore() outside of a component setup after
            // installing pinia's plugin
            setActivePinia(pinia);
            pinia._a = app;
            app.provide(piniaSymbol, pinia);
            app.config.globalProperties.$pinia = pinia;
            /* istanbul ignore else */
            if (( true) && IS_CLIENT) {
                registerPiniaDevtools(app, pinia);
            }
            toBeInstalled.forEach((plugin) => _p.push(plugin));
            toBeInstalled = [];
        },
        use(plugin) {
            if (!this._a) {
                toBeInstalled.push(plugin);
            }
            else {
                _p.push(plugin);
            }
            return this;
        },
        _p,
        // it's actually undefined here
        // @ts-expect-error
        _a: null,
        _e: scope,
        _s: new Map(),
        state,
    });
    // pinia devtools rely on dev only features so they cannot be forced unless
    // the dev build of Vue is used. Avoid old browsers like IE11.
    if (( true) && IS_CLIENT && typeof Proxy !== 'undefined') {
        pinia.use(devtoolsPlugin);
    }
    return pinia;
}
/**
 * Dispose a Pinia instance by stopping its effectScope and removing the state, plugins and stores. This is mostly
 * useful in tests, with both a testing pinia or a regular pinia and in applications that use multiple pinia instances.
 * Once disposed, the pinia instance cannot be used anymore.
 *
 * @param pinia - pinia instance
 */
function disposePinia(pinia) {
    pinia._e.stop();
    pinia._s.clear();
    pinia._p.splice(0);
    pinia.state.value = {};
    // @ts-expect-error: non valid
    pinia._a = null;
}

/**
 * Checks if a function is a `StoreDefinition`.
 *
 * @param fn - object to test
 * @returns true if `fn` is a StoreDefinition
 */
const isUseStore = (fn) => {
    return typeof fn === 'function' && typeof fn.$id === 'string';
};
/**
 * Mutates in place `newState` with `oldState` to _hot update_ it. It will
 * remove any key not existing in `newState` and recursively merge plain
 * objects.
 *
 * @param newState - new state object to be patched
 * @param oldState - old state that should be used to patch newState
 * @returns - newState
 */
function patchObject(newState, oldState) {
    // no need to go through symbols because they cannot be serialized anyway
    for (const key in oldState) {
        const subPatch = oldState[key];
        // skip the whole sub tree
        if (!(key in newState)) {
            continue;
        }
        const targetValue = newState[key];
        if (isPlainObject(targetValue) &&
            isPlainObject(subPatch) &&
            !(0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(subPatch) &&
            !(0,vue__WEBPACK_IMPORTED_MODULE_0__.isReactive)(subPatch)) {
            newState[key] = patchObject(targetValue, subPatch);
        }
        else {
            // objects are either a bit more complex (e.g. refs) or primitives, so we
            // just set the whole thing
            newState[key] = subPatch;
        }
    }
    return newState;
}
/**
 * Creates an _accept_ function to pass to `import.meta.hot` in Vite applications.
 *
 * @example
 * ```js
 * const useUser = defineStore(...)
 * if (import.meta.hot) {
 *   import.meta.hot.accept(acceptHMRUpdate(useUser, import.meta.hot))
 * }
 * ```
 *
 * @param initialUseStore - return of the defineStore to hot update
 * @param hot - `import.meta.hot`
 */
function acceptHMRUpdate(initialUseStore, hot) {
    // strip as much as possible from iife.prod
    if (false) // removed by dead control flow
{}
    return (newModule) => {
        const pinia = hot.data.pinia || initialUseStore._pinia;
        if (!pinia) {
            // this store is still not used
            return;
        }
        // preserve the pinia instance across loads
        hot.data.pinia = pinia;
        // console.log('got data', newStore)
        for (const exportName in newModule) {
            const useStore = newModule[exportName];
            // console.log('checking for', exportName)
            if (isUseStore(useStore) && pinia._s.has(useStore.$id)) {
                // console.log('Accepting update for', useStore.$id)
                const id = useStore.$id;
                if (id !== initialUseStore.$id) {
                    console.warn(`The id of the store changed from "${initialUseStore.$id}" to "${id}". Reloading.`);
                    // return import.meta.hot.invalidate()
                    return hot.invalidate();
                }
                const existingStore = pinia._s.get(id);
                if (!existingStore) {
                    console.log(`[Pinia]: skipping hmr because store doesn't exist yet`);
                    return;
                }
                useStore(pinia, existingStore);
            }
        }
    };
}

const noop = () => { };
function addSubscription(subscriptions, callback, detached, onCleanup = noop) {
    subscriptions.push(callback);
    const removeSubscription = () => {
        const idx = subscriptions.indexOf(callback);
        if (idx > -1) {
            subscriptions.splice(idx, 1);
            onCleanup();
        }
    };
    if (!detached && (0,vue__WEBPACK_IMPORTED_MODULE_0__.getCurrentScope)()) {
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.onScopeDispose)(removeSubscription);
    }
    return removeSubscription;
}
function triggerSubscriptions(subscriptions, ...args) {
    subscriptions.slice().forEach((callback) => {
        callback(...args);
    });
}

const fallbackRunWithContext = (fn) => fn();
/**
 * Marks a function as an action for `$onAction`
 * @internal
 */
const ACTION_MARKER = Symbol();
/**
 * Action name symbol. Allows to add a name to an action after defining it
 * @internal
 */
const ACTION_NAME = Symbol();
function mergeReactiveObjects(target, patchToApply) {
    // Handle Map instances
    if (target instanceof Map && patchToApply instanceof Map) {
        patchToApply.forEach((value, key) => target.set(key, value));
    }
    else if (target instanceof Set && patchToApply instanceof Set) {
        // Handle Set instances
        patchToApply.forEach(target.add, target);
    }
    // no need to go through symbols because they cannot be serialized anyway
    for (const key in patchToApply) {
        if (!patchToApply.hasOwnProperty(key))
            continue;
        const subPatch = patchToApply[key];
        const targetValue = target[key];
        if (isPlainObject(targetValue) &&
            isPlainObject(subPatch) &&
            target.hasOwnProperty(key) &&
            !(0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(subPatch) &&
            !(0,vue__WEBPACK_IMPORTED_MODULE_0__.isReactive)(subPatch)) {
            // NOTE: here I wanted to warn about inconsistent types but it's not possible because in setup stores one might
            // start the value of a property as a certain type e.g. a Map, and then for some reason, during SSR, change that
            // to `undefined`. When trying to hydrate, we want to override the Map with `undefined`.
            target[key] = mergeReactiveObjects(targetValue, subPatch);
        }
        else {
            // @ts-expect-error: subPatch is a valid value
            target[key] = subPatch;
        }
    }
    return target;
}
const skipHydrateSymbol = ( true)
    ? Symbol('pinia:skipHydration')
    : /* istanbul ignore next */ 0;
/**
 * Tells Pinia to skip the hydration process of a given object. This is useful in setup stores (only) when you return a
 * stateful object in the store but it isn't really state. e.g. returning a router instance in a setup store.
 *
 * @param obj - target object
 * @returns obj
 */
function skipHydrate(obj) {
    return Object.defineProperty(obj, skipHydrateSymbol, {});
}
/**
 * Returns whether a value should be hydrated
 *
 * @param obj - target variable
 * @returns true if `obj` should be hydrated
 */
function shouldHydrate(obj) {
    return (!isPlainObject(obj) ||
        !Object.prototype.hasOwnProperty.call(obj, skipHydrateSymbol));
}
const { assign } = Object;
function isComputed(o) {
    return !!((0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(o) && o.effect);
}
function createOptionsStore(id, options, pinia, hot) {
    const { state, actions, getters } = options;
    const initialState = pinia.state.value[id];
    let store;
    function setup() {
        if (!initialState && ( false || !hot)) {
            /* istanbul ignore if */
            pinia.state.value[id] = state ? state() : {};
        }
        // avoid creating a state in pinia.state.value
        const localState = ( true) && hot
            ? // use ref() to unwrap refs inside state TODO: check if this is still necessary
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRefs)((0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)(state ? state() : {}).value)
            : (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRefs)(pinia.state.value[id]);
        return assign(localState, actions, Object.keys(getters || {}).reduce((computedGetters, name) => {
            if (( true) && name in localState) {
                console.warn(`[🍍]: A getter cannot have the same name as another state property. Rename one of them. Found with "${name}" in store "${id}".`);
            }
            computedGetters[name] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)((0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                setActivePinia(pinia);
                // it was created just before
                const store = pinia._s.get(id);
                // allow cross using stores
                // @ts-expect-error
                // return getters![name].call(context, context)
                // TODO: avoid reading the getter while assigning with a global variable
                return getters[name].call(store, store);
            }));
            return computedGetters;
        }, {}));
    }
    store = createSetupStore(id, setup, options, pinia, hot, true);
    return store;
}
function createSetupStore($id, setup, options = {}, pinia, hot, isOptionsStore) {
    let scope;
    const optionsForPlugin = assign({ actions: {} }, options);
    /* istanbul ignore if */
    if (( true) && !pinia._e.active) {
        throw new Error('Pinia destroyed');
    }
    // watcher options for $subscribe
    const $subscribeOptions = { deep: true };
    /* istanbul ignore else */
    if ((true)) {
        $subscribeOptions.onTrigger = (event) => {
            /* istanbul ignore else */
            if (isListening) {
                debuggerEvents = event;
                // avoid triggering this while the store is being built and the state is being set in pinia
            }
            else if (isListening == false && !store._hotUpdating) {
                // let patch send all the events together later
                /* istanbul ignore else */
                if (Array.isArray(debuggerEvents)) {
                    debuggerEvents.push(event);
                }
                else {
                    console.error('🍍 debuggerEvents should be an array. This is most likely an internal Pinia bug.');
                }
            }
        };
    }
    // internal state
    let isListening; // set to true at the end
    let isSyncListening; // set to true at the end
    let subscriptions = [];
    let actionSubscriptions = [];
    let debuggerEvents;
    const initialState = pinia.state.value[$id];
    // avoid setting the state for option stores if it is set
    // by the setup
    if (!isOptionsStore && !initialState && ( false || !hot)) {
        /* istanbul ignore if */
        pinia.state.value[$id] = {};
    }
    const hotState = (0,vue__WEBPACK_IMPORTED_MODULE_0__.ref)({});
    // avoid triggering too many listeners
    // https://github.com/vuejs/pinia/issues/1129
    let activeListener;
    function $patch(partialStateOrMutator) {
        let subscriptionMutation;
        isListening = isSyncListening = false;
        // reset the debugger events since patches are sync
        /* istanbul ignore else */
        if ((true)) {
            debuggerEvents = [];
        }
        if (typeof partialStateOrMutator === 'function') {
            partialStateOrMutator(pinia.state.value[$id]);
            subscriptionMutation = {
                type: MutationType.patchFunction,
                storeId: $id,
                events: debuggerEvents,
            };
        }
        else {
            mergeReactiveObjects(pinia.state.value[$id], partialStateOrMutator);
            subscriptionMutation = {
                type: MutationType.patchObject,
                payload: partialStateOrMutator,
                storeId: $id,
                events: debuggerEvents,
            };
        }
        const myListenerId = (activeListener = Symbol());
        (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)().then(() => {
            if (activeListener === myListenerId) {
                isListening = true;
            }
        });
        isSyncListening = true;
        // because we paused the watcher, we need to manually call the subscriptions
        triggerSubscriptions(subscriptions, subscriptionMutation, pinia.state.value[$id]);
    }
    const $reset = isOptionsStore
        ? function $reset() {
            const { state } = options;
            const newState = state ? state() : {};
            // we use a patch to group all changes into one single subscription
            this.$patch(($state) => {
                // @ts-expect-error: FIXME: shouldn't error?
                assign($state, newState);
            });
        }
        : /* istanbul ignore next */
            ( true)
                ? () => {
                    throw new Error(`🍍: Store "${$id}" is built using the setup syntax and does not implement $reset().`);
                }
                : 0;
    function $dispose() {
        scope.stop();
        subscriptions = [];
        actionSubscriptions = [];
        pinia._s.delete($id);
    }
    /**
     * Helper that wraps function so it can be tracked with $onAction
     * @param fn - action to wrap
     * @param name - name of the action
     */
    const action = (fn, name = '') => {
        if (ACTION_MARKER in fn) {
            fn[ACTION_NAME] = name;
            return fn;
        }
        const wrappedAction = function () {
            setActivePinia(pinia);
            const args = Array.from(arguments);
            const afterCallbackList = [];
            const onErrorCallbackList = [];
            function after(callback) {
                afterCallbackList.push(callback);
            }
            function onError(callback) {
                onErrorCallbackList.push(callback);
            }
            // @ts-expect-error
            triggerSubscriptions(actionSubscriptions, {
                args,
                name: wrappedAction[ACTION_NAME],
                store,
                after,
                onError,
            });
            let ret;
            try {
                ret = fn.apply(this && this.$id === $id ? this : store, args);
                // handle sync errors
            }
            catch (error) {
                triggerSubscriptions(onErrorCallbackList, error);
                throw error;
            }
            if (ret instanceof Promise) {
                return ret
                    .then((value) => {
                    triggerSubscriptions(afterCallbackList, value);
                    return value;
                })
                    .catch((error) => {
                    triggerSubscriptions(onErrorCallbackList, error);
                    return Promise.reject(error);
                });
            }
            // trigger after callbacks
            triggerSubscriptions(afterCallbackList, ret);
            return ret;
        };
        wrappedAction[ACTION_MARKER] = true;
        wrappedAction[ACTION_NAME] = name; // will be set later
        // @ts-expect-error: we are intentionally limiting the returned type to just Fn
        // because all the added properties are internals that are exposed through `$onAction()` only
        return wrappedAction;
    };
    const _hmrPayload = /*#__PURE__*/ (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)({
        actions: {},
        getters: {},
        state: [],
        hotState,
    });
    const partialStore = {
        _p: pinia,
        // _s: scope,
        $id,
        $onAction: addSubscription.bind(null, actionSubscriptions),
        $patch,
        $reset,
        $subscribe(callback, options = {}) {
            const removeSubscription = addSubscription(subscriptions, callback, options.detached, () => stopWatcher());
            const stopWatcher = scope.run(() => (0,vue__WEBPACK_IMPORTED_MODULE_0__.watch)(() => pinia.state.value[$id], (state) => {
                if (options.flush === 'sync' ? isSyncListening : isListening) {
                    callback({
                        storeId: $id,
                        type: MutationType.direct,
                        events: debuggerEvents,
                    }, state);
                }
            }, assign({}, $subscribeOptions, options)));
            return removeSubscription;
        },
        $dispose,
    };
    const store = (0,vue__WEBPACK_IMPORTED_MODULE_0__.reactive)( true
        ? assign({
            _hmrPayload,
            _customProperties: (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)(new Set()), // devtools custom properties
        }, partialStore
        // must be added later
        // setupStore
        )
        : 0);
    // store the partial store now so the setup of stores can instantiate each other before they are finished without
    // creating infinite loops.
    pinia._s.set($id, store);
    const runWithContext = (pinia._a && pinia._a.runWithContext) || fallbackRunWithContext;
    // TODO: idea create skipSerialize that marks properties as non serializable and they are skipped
    const setupStore = runWithContext(() => pinia._e.run(() => (scope = (0,vue__WEBPACK_IMPORTED_MODULE_0__.effectScope)()).run(() => setup({ action }))));
    // overwrite existing actions to support $onAction
    for (const key in setupStore) {
        const prop = setupStore[key];
        if (((0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(prop) && !isComputed(prop)) || (0,vue__WEBPACK_IMPORTED_MODULE_0__.isReactive)(prop)) {
            // mark it as a piece of state to be serialized
            if (( true) && hot) {
                hotState.value[key] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(setupStore, key);
                // createOptionStore directly sets the state in pinia.state.value so we
                // can just skip that
            }
            else if (!isOptionsStore) {
                // in setup stores we must hydrate the state and sync pinia state tree with the refs the user just created
                if (initialState && shouldHydrate(prop)) {
                    if ((0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(prop)) {
                        prop.value = initialState[key];
                    }
                    else {
                        // probably a reactive object, lets recursively assign
                        // @ts-expect-error: prop is unknown
                        mergeReactiveObjects(prop, initialState[key]);
                    }
                }
                // transfer the ref to the pinia state to keep everything in sync
                pinia.state.value[$id][key] = prop;
            }
            /* istanbul ignore else */
            if ((true)) {
                _hmrPayload.state.push(key);
            }
            // action
        }
        else if (typeof prop === 'function') {
            const actionValue = ( true) && hot ? prop : action(prop, key);
            // this a hot module replacement store because the hotUpdate method needs
            // to do it with the right context
            // @ts-expect-error
            setupStore[key] = actionValue;
            /* istanbul ignore else */
            if ((true)) {
                _hmrPayload.actions[key] = prop;
            }
            // list actions so they can be used in plugins
            // @ts-expect-error
            optionsForPlugin.actions[key] = prop;
        }
        else if ((true)) {
            // add getters for devtools
            if (isComputed(prop)) {
                _hmrPayload.getters[key] = isOptionsStore
                    ? // @ts-expect-error
                        options.getters[key]
                    : prop;
                if (IS_CLIENT) {
                    const getters = setupStore._getters ||
                        // @ts-expect-error: same
                        (setupStore._getters = (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)([]));
                    getters.push(key);
                }
            }
        }
    }
    // add the state, getters, and action properties
    /* istanbul ignore if */
    assign(store, setupStore);
    // allows retrieving reactive objects with `storeToRefs()`. Must be called after assigning to the reactive object.
    // Make `storeToRefs()` work with `reactive()` #799
    assign((0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(store), setupStore);
    // use this instead of a computed with setter to be able to create it anywhere
    // without linking the computed lifespan to wherever the store is first
    // created.
    Object.defineProperty(store, '$state', {
        get: () => (( true) && hot ? hotState.value : pinia.state.value[$id]),
        set: (state) => {
            /* istanbul ignore if */
            if (( true) && hot) {
                throw new Error('cannot set hotState');
            }
            $patch(($state) => {
                // @ts-expect-error: FIXME: shouldn't error?
                assign($state, state);
            });
        },
    });
    // add the hotUpdate before plugins to allow them to override it
    /* istanbul ignore else */
    if ((true)) {
        store._hotUpdate = (0,vue__WEBPACK_IMPORTED_MODULE_0__.markRaw)((newStore) => {
            store._hotUpdating = true;
            newStore._hmrPayload.state.forEach((stateKey) => {
                if (stateKey in store.$state) {
                    const newStateTarget = newStore.$state[stateKey];
                    const oldStateSource = store.$state[stateKey];
                    if (typeof newStateTarget === 'object' &&
                        isPlainObject(newStateTarget) &&
                        isPlainObject(oldStateSource)) {
                        patchObject(newStateTarget, oldStateSource);
                    }
                    else {
                        // transfer the ref
                        newStore.$state[stateKey] = oldStateSource;
                    }
                }
                // patch direct access properties to allow store.stateProperty to work as
                // store.$state.stateProperty
                // @ts-expect-error: any type
                store[stateKey] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(newStore.$state, stateKey);
            });
            // remove deleted state properties
            Object.keys(store.$state).forEach((stateKey) => {
                if (!(stateKey in newStore.$state)) {
                    // @ts-expect-error: noop if doesn't exist
                    delete store[stateKey];
                }
            });
            // avoid devtools logging this as a mutation
            isListening = false;
            isSyncListening = false;
            pinia.state.value[$id] = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(newStore._hmrPayload, 'hotState');
            isSyncListening = true;
            (0,vue__WEBPACK_IMPORTED_MODULE_0__.nextTick)().then(() => {
                isListening = true;
            });
            for (const actionName in newStore._hmrPayload.actions) {
                const actionFn = newStore[actionName];
                // @ts-expect-error: actionName is a string
                store[actionName] =
                    //
                    action(actionFn, actionName);
            }
            // TODO: does this work in both setup and option store?
            for (const getterName in newStore._hmrPayload.getters) {
                const getter = newStore._hmrPayload.getters[getterName];
                const getterValue = isOptionsStore
                    ? // special handling of options api
                        (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)(() => {
                            setActivePinia(pinia);
                            return getter.call(store, store);
                        })
                    : getter;
                // @ts-expect-error: getterName is a string
                store[getterName] =
                    //
                    getterValue;
            }
            // remove deleted getters
            Object.keys(store._hmrPayload.getters).forEach((key) => {
                if (!(key in newStore._hmrPayload.getters)) {
                    // @ts-expect-error: noop if doesn't exist
                    delete store[key];
                }
            });
            // remove old actions
            Object.keys(store._hmrPayload.actions).forEach((key) => {
                if (!(key in newStore._hmrPayload.actions)) {
                    // @ts-expect-error: noop if doesn't exist
                    delete store[key];
                }
            });
            // update the values used in devtools and to allow deleting new properties later on
            store._hmrPayload = newStore._hmrPayload;
            store._getters = newStore._getters;
            store._hotUpdating = false;
        });
    }
    if (( true) && IS_CLIENT) {
        const nonEnumerable = {
            writable: true,
            configurable: true,
            // avoid warning on devtools trying to display this property
            enumerable: false,
        };
        ['_p', '_hmrPayload', '_getters', '_customProperties'].forEach((p) => {
            Object.defineProperty(store, p, assign({ value: store[p] }, nonEnumerable));
        });
    }
    // apply all plugins
    pinia._p.forEach((extender) => {
        /* istanbul ignore else */
        if (( true) && IS_CLIENT) {
            const extensions = scope.run(() => extender({
                store: store,
                app: pinia._a,
                pinia,
                options: optionsForPlugin,
            }));
            Object.keys(extensions || {}).forEach((key) => store._customProperties.add(key));
            assign(store, extensions);
        }
        else {
            assign(store, scope.run(() => extender({
                store: store,
                app: pinia._a,
                pinia,
                options: optionsForPlugin,
            })));
        }
    });
    if (( true) &&
        store.$state &&
        typeof store.$state === 'object' &&
        typeof store.$state.constructor === 'function' &&
        !store.$state.constructor.toString().includes('[native code]')) {
        console.warn(`[🍍]: The "state" must be a plain object. It cannot be\n` +
            `\tstate: () => new MyClass()\n` +
            `Found in store "${store.$id}".`);
    }
    // only apply hydrate to option stores with an initial state in pinia
    if (initialState &&
        isOptionsStore &&
        options.hydrate) {
        options.hydrate(store.$state, initialState);
    }
    isListening = true;
    isSyncListening = true;
    return store;
}
// allows unused stores to be tree shaken
/*! #__NO_SIDE_EFFECTS__ */
function defineStore(
// TODO: add proper types from above
id, setup, setupOptions) {
    let options;
    const isSetupStore = typeof setup === 'function';
    // the option store setup will contain the actual options in this case
    options = isSetupStore ? setupOptions : setup;
    function useStore(pinia, hot) {
        const hasContext = (0,vue__WEBPACK_IMPORTED_MODULE_0__.hasInjectionContext)();
        pinia =
            // in test mode, ignore the argument provided as we can always retrieve a
            // pinia instance with getActivePinia()
            ( false ? 0 : pinia) ||
                (hasContext ? (0,vue__WEBPACK_IMPORTED_MODULE_0__.inject)(piniaSymbol, null) : null);
        if (pinia)
            setActivePinia(pinia);
        if (( true) && !activePinia) {
            throw new Error(`[🍍]: "getActivePinia()" was called but there was no active Pinia. Are you trying to use a store before calling "app.use(pinia)"?\n` +
                `See https://pinia.vuejs.org/core-concepts/outside-component-usage.html for help.\n` +
                `This will fail in production.`);
        }
        pinia = activePinia;
        if (!pinia._s.has(id)) {
            // creating the store registers it in `pinia._s`
            if (isSetupStore) {
                createSetupStore(id, setup, options, pinia);
            }
            else {
                createOptionsStore(id, options, pinia);
            }
            /* istanbul ignore else */
            if ((true)) {
                // @ts-expect-error: not the right inferred type
                useStore._pinia = pinia;
            }
        }
        const store = pinia._s.get(id);
        if (( true) && hot) {
            const hotId = '__hot:' + id;
            const newStore = isSetupStore
                ? createSetupStore(hotId, setup, options, pinia, true)
                : createOptionsStore(hotId, assign({}, options), pinia, true);
            hot._hotUpdate(newStore);
            // cleanup the state properties and the store from the cache
            delete pinia.state.value[hotId];
            pinia._s.delete(hotId);
        }
        if (( true) && IS_CLIENT) {
            const currentInstance = (0,vue__WEBPACK_IMPORTED_MODULE_0__.getCurrentInstance)();
            // save stores in instances to access them devtools
            if (currentInstance &&
                currentInstance.proxy &&
                // avoid adding stores that are just built for hot module replacement
                !hot) {
                const vm = currentInstance.proxy;
                const cache = '_pStores' in vm ? vm._pStores : (vm._pStores = {});
                cache[id] = store;
            }
        }
        // StoreGeneric cannot be casted towards Store
        return store;
    }
    useStore.$id = id;
    return useStore;
}

let mapStoreSuffix = 'Store';
/**
 * Changes the suffix added by `mapStores()`. Can be set to an empty string.
 * Defaults to `"Store"`. Make sure to extend the MapStoresCustomization
 * interface if you are using TypeScript.
 *
 * @param suffix - new suffix
 */
function setMapStoreSuffix(suffix // could be 'Store' but that would be annoying for JS
) {
    mapStoreSuffix = suffix;
}
/**
 * Allows using stores without the composition API (`setup()`) by generating an
 * object to be spread in the `computed` field of a component. It accepts a list
 * of store definitions.
 *
 * @example
 * ```js
 * export default {
 *   computed: {
 *     // other computed properties
 *     ...mapStores(useUserStore, useCartStore)
 *   },
 *
 *   created() {
 *     this.userStore // store with id "user"
 *     this.cartStore // store with id "cart"
 *   }
 * }
 * ```
 *
 * @param stores - list of stores to map to an object
 */
function mapStores(...stores) {
    if (( true) && Array.isArray(stores[0])) {
        console.warn(`[🍍]: Directly pass all stores to "mapStores()" without putting them in an array:\n` +
            `Replace\n` +
            `\tmapStores([useAuthStore, useCartStore])\n` +
            `with\n` +
            `\tmapStores(useAuthStore, useCartStore)\n` +
            `This will fail in production if not fixed.`);
        stores = stores[0];
    }
    return stores.reduce((reduced, useStore) => {
        // @ts-expect-error: $id is added by defineStore
        reduced[useStore.$id + mapStoreSuffix] = function () {
            return useStore(this.$pinia);
        };
        return reduced;
    }, {});
}
/**
 * Allows using state and getters from one store without using the composition
 * API (`setup()`) by generating an object to be spread in the `computed` field
 * of a component.
 *
 * @param useStore - store to map from
 * @param keysOrMapper - array or object
 */
function mapState(useStore, keysOrMapper) {
    return Array.isArray(keysOrMapper)
        ? keysOrMapper.reduce((reduced, key) => {
            reduced[key] = function () {
                // @ts-expect-error: FIXME: should work?
                return useStore(this.$pinia)[key];
            };
            return reduced;
        }, {})
        : Object.keys(keysOrMapper).reduce((reduced, key) => {
            // @ts-expect-error
            reduced[key] = function () {
                const store = useStore(this.$pinia);
                const storeKey = keysOrMapper[key];
                // for some reason TS is unable to infer the type of storeKey to be a
                // function
                return typeof storeKey === 'function'
                    ? storeKey.call(this, store)
                    : // @ts-expect-error: FIXME: should work?
                        store[storeKey];
            };
            return reduced;
        }, {});
}
/**
 * Alias for `mapState()`. You should use `mapState()` instead.
 * @deprecated use `mapState()` instead.
 */
const mapGetters = mapState;
/**
 * Allows directly using actions from your store without using the composition
 * API (`setup()`) by generating an object to be spread in the `methods` field
 * of a component.
 *
 * @param useStore - store to map from
 * @param keysOrMapper - array or object
 */
function mapActions(useStore, keysOrMapper) {
    return Array.isArray(keysOrMapper)
        ? keysOrMapper.reduce((reduced, key) => {
            // @ts-expect-error
            reduced[key] = function (...args) {
                // @ts-expect-error: FIXME: should work?
                return useStore(this.$pinia)[key](...args);
            };
            return reduced;
        }, {})
        : Object.keys(keysOrMapper).reduce((reduced, key) => {
            // @ts-expect-error
            reduced[key] = function (...args) {
                // @ts-expect-error: FIXME: should work?
                return useStore(this.$pinia)[keysOrMapper[key]](...args);
            };
            return reduced;
        }, {});
}
/**
 * Allows using state and getters from one store without using the composition
 * API (`setup()`) by generating an object to be spread in the `computed` field
 * of a component.
 *
 * @param useStore - store to map from
 * @param keysOrMapper - array or object
 */
function mapWritableState(useStore, keysOrMapper) {
    return Array.isArray(keysOrMapper)
        ? keysOrMapper.reduce((reduced, key) => {
            reduced[key] = {
                get() {
                    return useStore(this.$pinia)[key];
                },
                set(value) {
                    return (useStore(this.$pinia)[key] = value);
                },
            };
            return reduced;
        }, {})
        : Object.keys(keysOrMapper).reduce((reduced, key) => {
            reduced[key] = {
                get() {
                    return useStore(this.$pinia)[keysOrMapper[key]];
                },
                set(value) {
                    return (useStore(this.$pinia)[keysOrMapper[key]] = value);
                },
            };
            return reduced;
        }, {});
}

/**
 * Creates an object of references with all the state, getters, and plugin-added
 * state properties of the store. Similar to `toRefs()` but specifically
 * designed for Pinia stores so methods and non reactive properties are
 * completely ignored.
 *
 * @param store - store to extract the refs from
 */
function storeToRefs(store) {
    const rawStore = (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRaw)(store);
    const refs = {};
    for (const key in rawStore) {
        const value = rawStore[key];
        // There is no native method to check for a computed
        // https://github.com/vuejs/core/pull/4165
        if (value.effect) {
            // @ts-expect-error: too hard to type correctly
            refs[key] =
                // ...
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.computed)({
                    get: () => store[key],
                    set(value) {
                        store[key] = value;
                    },
                });
        }
        else if ((0,vue__WEBPACK_IMPORTED_MODULE_0__.isRef)(value) || (0,vue__WEBPACK_IMPORTED_MODULE_0__.isReactive)(value)) {
            // @ts-expect-error: the key is state or getter
            refs[key] =
                // ---
                (0,vue__WEBPACK_IMPORTED_MODULE_0__.toRef)(store, key);
        }
    }
    return refs;
}




/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfcGluaWFfZGlzdF9waW5pYV9tanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJEQUEyRCxhQUFhO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsNEZBQTRGO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBLHVHQUF1RztBQUN2RztBQUNBO0FBQ0E7QUFDQTtBQUNBLDJFQUEyRSw4QkFBOEI7QUFDekc7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULGdCQUFnQjtBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUN1RTtBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsV0FBVztBQUN4QixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsV0FBVyw4REFBUyw4Q0FBOEMsOERBQVE7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSw4Q0FBOEM7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsS0FBSztBQUNsQixjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLHFDQUFxQztBQUNqRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQiwyQkFBMkI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixtQkFBbUI7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsbUJBQW1CO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLElBQUk7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsNERBQTRELEtBQUs7QUFDakU7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGlCQUFpQjtBQUNuQztBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsTUFBTTtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQkFBaUI7QUFDekM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQSxZQUFZO0FBQ1o7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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Q0E7QUFDQSxnQkFBZ0IsMENBQUs7QUFDckI7QUFDQTtBQUNBO0FBQ0E7O0FBRTRPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMta2l0L2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0B2dWUvZGV2dG9vbHMtc2hhcmVkL2Rpc3QvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2JpcnBjL2Rpc3QvaW5kZXgubWpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ob29rYWJsZS9kaXN0L2luZGV4Lm1qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcGVyZmVjdC1kZWJvdW5jZS9kaXN0L2luZGV4Lm1qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcGluaWEvZGlzdC9waW5pYS5tanMiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2VzbSA9IChmbiwgcmVzKSA9PiBmdW5jdGlvbiBfX2luaXQoKSB7XG4gIHJldHVybiBmbiAmJiAocmVzID0gKDAsIGZuW19fZ2V0T3duUHJvcE5hbWVzKGZuKVswXV0pKGZuID0gMCkpLCByZXM7XG59O1xudmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkge1xuICByZXR1cm4gbW9kIHx8ICgwLCBjYltfX2dldE93blByb3BOYW1lcyhjYilbMF1dKSgobW9kID0geyBleHBvcnRzOiB7fSB9KS5leHBvcnRzLCBtb2QpLCBtb2QuZXhwb3J0cztcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldDIyKSA9PiAodGFyZ2V0MjIgPSBtb2QgIT0gbnVsbCA/IF9fY3JlYXRlKF9fZ2V0UHJvdG9PZihtb2QpKSA6IHt9LCBfX2NvcHlQcm9wcyhcbiAgLy8gSWYgdGhlIGltcG9ydGVyIGlzIGluIG5vZGUgY29tcGF0aWJpbGl0eSBtb2RlIG9yIHRoaXMgaXMgbm90IGFuIEVTTVxuICAvLyBmaWxlIHRoYXQgaGFzIGJlZW4gY29udmVydGVkIHRvIGEgQ29tbW9uSlMgZmlsZSB1c2luZyBhIEJhYmVsLVxuICAvLyBjb21wYXRpYmxlIHRyYW5zZm9ybSAoaS5lLiBcIl9fZXNNb2R1bGVcIiBoYXMgbm90IGJlZW4gc2V0KSwgdGhlbiBzZXRcbiAgLy8gXCJkZWZhdWx0XCIgdG8gdGhlIENvbW1vbkpTIFwibW9kdWxlLmV4cG9ydHNcIiBmb3Igbm9kZSBjb21wYXRpYmlsaXR5LlxuICBpc05vZGVNb2RlIHx8ICFtb2QgfHwgIW1vZC5fX2VzTW9kdWxlID8gX19kZWZQcm9wKHRhcmdldDIyLCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0MjIsXG4gIG1vZFxuKSk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS90c3VwQDguNC4wX0BtaWNyb3NvZnQrYXBpLWV4dHJhY3RvckA3LjUxLjFfQHR5cGVzK25vZGVAMjIuMTMuMTRfX2ppdGlAMi40LjJfcG9zdGNzc0A4LjVfOTZlYjA1YTlkNjUzNDMwMjFlNTM3OTFkZDgzZjM3NzMvbm9kZV9tb2R1bGVzL3RzdXAvYXNzZXRzL2VzbV9zaGltcy5qc1xudmFyIGluaXRfZXNtX3NoaW1zID0gX19lc20oe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS90c3VwQDguNC4wX0BtaWNyb3NvZnQrYXBpLWV4dHJhY3RvckA3LjUxLjFfQHR5cGVzK25vZGVAMjIuMTMuMTRfX2ppdGlAMi40LjJfcG9zdGNzc0A4LjVfOTZlYjA1YTlkNjUzNDMwMjFlNTM3OTFkZDgzZjM3NzMvbm9kZV9tb2R1bGVzL3RzdXAvYXNzZXRzL2VzbV9zaGltcy5qc1wiKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICB9XG59KTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NwZWFraW5ndXJsQDE0LjAuMS9ub2RlX21vZHVsZXMvc3BlYWtpbmd1cmwvbGliL3NwZWFraW5ndXJsLmpzXG52YXIgcmVxdWlyZV9zcGVha2luZ3VybCA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zcGVha2luZ3VybEAxNC4wLjEvbm9kZV9tb2R1bGVzL3NwZWFraW5ndXJsL2xpYi9zcGVha2luZ3VybC5qc1wiKGV4cG9ydHMsIG1vZHVsZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGluaXRfZXNtX3NoaW1zKCk7XG4gICAgKGZ1bmN0aW9uKHJvb3QpIHtcbiAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgdmFyIGNoYXJNYXAgPSB7XG4gICAgICAgIC8vIGxhdGluXG4gICAgICAgIFwiXFx4QzBcIjogXCJBXCIsXG4gICAgICAgIFwiXFx4QzFcIjogXCJBXCIsXG4gICAgICAgIFwiXFx4QzJcIjogXCJBXCIsXG4gICAgICAgIFwiXFx4QzNcIjogXCJBXCIsXG4gICAgICAgIFwiXFx4QzRcIjogXCJBZVwiLFxuICAgICAgICBcIlxceEM1XCI6IFwiQVwiLFxuICAgICAgICBcIlxceEM2XCI6IFwiQUVcIixcbiAgICAgICAgXCJcXHhDN1wiOiBcIkNcIixcbiAgICAgICAgXCJcXHhDOFwiOiBcIkVcIixcbiAgICAgICAgXCJcXHhDOVwiOiBcIkVcIixcbiAgICAgICAgXCJcXHhDQVwiOiBcIkVcIixcbiAgICAgICAgXCJcXHhDQlwiOiBcIkVcIixcbiAgICAgICAgXCJcXHhDQ1wiOiBcIklcIixcbiAgICAgICAgXCJcXHhDRFwiOiBcIklcIixcbiAgICAgICAgXCJcXHhDRVwiOiBcIklcIixcbiAgICAgICAgXCJcXHhDRlwiOiBcIklcIixcbiAgICAgICAgXCJcXHhEMFwiOiBcIkRcIixcbiAgICAgICAgXCJcXHhEMVwiOiBcIk5cIixcbiAgICAgICAgXCJcXHhEMlwiOiBcIk9cIixcbiAgICAgICAgXCJcXHhEM1wiOiBcIk9cIixcbiAgICAgICAgXCJcXHhENFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHhENVwiOiBcIk9cIixcbiAgICAgICAgXCJcXHhENlwiOiBcIk9lXCIsXG4gICAgICAgIFwiXFx1MDE1MFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHhEOFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHhEOVwiOiBcIlVcIixcbiAgICAgICAgXCJcXHhEQVwiOiBcIlVcIixcbiAgICAgICAgXCJcXHhEQlwiOiBcIlVcIixcbiAgICAgICAgXCJcXHhEQ1wiOiBcIlVlXCIsXG4gICAgICAgIFwiXFx1MDE3MFwiOiBcIlVcIixcbiAgICAgICAgXCJcXHhERFwiOiBcIllcIixcbiAgICAgICAgXCJcXHhERVwiOiBcIlRIXCIsXG4gICAgICAgIFwiXFx4REZcIjogXCJzc1wiLFxuICAgICAgICBcIlxceEUwXCI6IFwiYVwiLFxuICAgICAgICBcIlxceEUxXCI6IFwiYVwiLFxuICAgICAgICBcIlxceEUyXCI6IFwiYVwiLFxuICAgICAgICBcIlxceEUzXCI6IFwiYVwiLFxuICAgICAgICBcIlxceEU0XCI6IFwiYWVcIixcbiAgICAgICAgXCJcXHhFNVwiOiBcImFcIixcbiAgICAgICAgXCJcXHhFNlwiOiBcImFlXCIsXG4gICAgICAgIFwiXFx4RTdcIjogXCJjXCIsXG4gICAgICAgIFwiXFx4RThcIjogXCJlXCIsXG4gICAgICAgIFwiXFx4RTlcIjogXCJlXCIsXG4gICAgICAgIFwiXFx4RUFcIjogXCJlXCIsXG4gICAgICAgIFwiXFx4RUJcIjogXCJlXCIsXG4gICAgICAgIFwiXFx4RUNcIjogXCJpXCIsXG4gICAgICAgIFwiXFx4RURcIjogXCJpXCIsXG4gICAgICAgIFwiXFx4RUVcIjogXCJpXCIsXG4gICAgICAgIFwiXFx4RUZcIjogXCJpXCIsXG4gICAgICAgIFwiXFx4RjBcIjogXCJkXCIsXG4gICAgICAgIFwiXFx4RjFcIjogXCJuXCIsXG4gICAgICAgIFwiXFx4RjJcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjNcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjRcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjVcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjZcIjogXCJvZVwiLFxuICAgICAgICBcIlxcdTAxNTFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjhcIjogXCJvXCIsXG4gICAgICAgIFwiXFx4RjlcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx4RkFcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx4RkJcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx4RkNcIjogXCJ1ZVwiLFxuICAgICAgICBcIlxcdTAxNzFcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx4RkRcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx4RkVcIjogXCJ0aFwiLFxuICAgICAgICBcIlxceEZGXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTFFOUVcIjogXCJTU1wiLFxuICAgICAgICAvLyBsYW5ndWFnZSBzcGVjaWZpY1xuICAgICAgICAvLyBBcmFiaWNcbiAgICAgICAgXCJcXHUwNjI3XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA2MjNcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDYyNVwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwNjIyXCI6IFwiYWFcIixcbiAgICAgICAgXCJcXHUwNjI0XCI6IFwidVwiLFxuICAgICAgICBcIlxcdTA2MjZcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDYyMVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwNjI4XCI6IFwiYlwiLFxuICAgICAgICBcIlxcdTA2MkFcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDYyQlwiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MDYyQ1wiOiBcImpcIixcbiAgICAgICAgXCJcXHUwNjJEXCI6IFwiaFwiLFxuICAgICAgICBcIlxcdTA2MkVcIjogXCJraFwiLFxuICAgICAgICBcIlxcdTA2MkZcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDYzMFwiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MDYzMVwiOiBcInJcIixcbiAgICAgICAgXCJcXHUwNjMyXCI6IFwielwiLFxuICAgICAgICBcIlxcdTA2MzNcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDYzNFwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MDYzNVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwNjM2XCI6IFwiZGhcIixcbiAgICAgICAgXCJcXHUwNjM3XCI6IFwidFwiLFxuICAgICAgICBcIlxcdTA2MzhcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MDYzOVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwNjNBXCI6IFwiZ2hcIixcbiAgICAgICAgXCJcXHUwNjQxXCI6IFwiZlwiLFxuICAgICAgICBcIlxcdTA2NDJcIjogXCJxXCIsXG4gICAgICAgIFwiXFx1MDY0M1wiOiBcImtcIixcbiAgICAgICAgXCJcXHUwNjQ0XCI6IFwibFwiLFxuICAgICAgICBcIlxcdTA2NDVcIjogXCJtXCIsXG4gICAgICAgIFwiXFx1MDY0NlwiOiBcIm5cIixcbiAgICAgICAgXCJcXHUwNjQ3XCI6IFwiaFwiLFxuICAgICAgICBcIlxcdTA2NDhcIjogXCJ3XCIsXG4gICAgICAgIFwiXFx1MDY0QVwiOiBcInlcIixcbiAgICAgICAgXCJcXHUwNjQ5XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTA2MjlcIjogXCJoXCIsXG4gICAgICAgIFwiXFx1RkVGQlwiOiBcImxhXCIsXG4gICAgICAgIFwiXFx1RkVGN1wiOiBcImxhYVwiLFxuICAgICAgICBcIlxcdUZFRjlcIjogXCJsYWlcIixcbiAgICAgICAgXCJcXHVGRUY1XCI6IFwibGFhXCIsXG4gICAgICAgIC8vIFBlcnNpYW4gYWRkaXRpb25hbCBjaGFyYWN0ZXJzIHRoYW4gQXJhYmljXG4gICAgICAgIFwiXFx1MDZBRlwiOiBcImdcIixcbiAgICAgICAgXCJcXHUwNjg2XCI6IFwiY2hcIixcbiAgICAgICAgXCJcXHUwNjdFXCI6IFwicFwiLFxuICAgICAgICBcIlxcdTA2OThcIjogXCJ6aFwiLFxuICAgICAgICBcIlxcdTA2QTlcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MDZDQ1wiOiBcInlcIixcbiAgICAgICAgLy8gQXJhYmljIGRpYWN0cmljc1xuICAgICAgICBcIlxcdTA2NEVcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDY0QlwiOiBcImFuXCIsXG4gICAgICAgIFwiXFx1MDY1MFwiOiBcImVcIixcbiAgICAgICAgXCJcXHUwNjREXCI6IFwiZW5cIixcbiAgICAgICAgXCJcXHUwNjRGXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTA2NENcIjogXCJvblwiLFxuICAgICAgICBcIlxcdTA2NTJcIjogXCJcIixcbiAgICAgICAgLy8gQXJhYmljIG51bWJlcnNcbiAgICAgICAgXCJcXHUwNjYwXCI6IFwiMFwiLFxuICAgICAgICBcIlxcdTA2NjFcIjogXCIxXCIsXG4gICAgICAgIFwiXFx1MDY2MlwiOiBcIjJcIixcbiAgICAgICAgXCJcXHUwNjYzXCI6IFwiM1wiLFxuICAgICAgICBcIlxcdTA2NjRcIjogXCI0XCIsXG4gICAgICAgIFwiXFx1MDY2NVwiOiBcIjVcIixcbiAgICAgICAgXCJcXHUwNjY2XCI6IFwiNlwiLFxuICAgICAgICBcIlxcdTA2NjdcIjogXCI3XCIsXG4gICAgICAgIFwiXFx1MDY2OFwiOiBcIjhcIixcbiAgICAgICAgXCJcXHUwNjY5XCI6IFwiOVwiLFxuICAgICAgICAvLyBQZXJzaWFuIG51bWJlcnNcbiAgICAgICAgXCJcXHUwNkYwXCI6IFwiMFwiLFxuICAgICAgICBcIlxcdTA2RjFcIjogXCIxXCIsXG4gICAgICAgIFwiXFx1MDZGMlwiOiBcIjJcIixcbiAgICAgICAgXCJcXHUwNkYzXCI6IFwiM1wiLFxuICAgICAgICBcIlxcdTA2RjRcIjogXCI0XCIsXG4gICAgICAgIFwiXFx1MDZGNVwiOiBcIjVcIixcbiAgICAgICAgXCJcXHUwNkY2XCI6IFwiNlwiLFxuICAgICAgICBcIlxcdTA2RjdcIjogXCI3XCIsXG4gICAgICAgIFwiXFx1MDZGOFwiOiBcIjhcIixcbiAgICAgICAgXCJcXHUwNkY5XCI6IFwiOVwiLFxuICAgICAgICAvLyBCdXJtZXNlIGNvbnNvbmFudHNcbiAgICAgICAgXCJcXHUxMDAwXCI6IFwia1wiLFxuICAgICAgICBcIlxcdTEwMDFcIjogXCJraFwiLFxuICAgICAgICBcIlxcdTEwMDJcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MTAwM1wiOiBcImdhXCIsXG4gICAgICAgIFwiXFx1MTAwNFwiOiBcIm5nXCIsXG4gICAgICAgIFwiXFx1MTAwNVwiOiBcInNcIixcbiAgICAgICAgXCJcXHUxMDA2XCI6IFwic2FcIixcbiAgICAgICAgXCJcXHUxMDA3XCI6IFwielwiLFxuICAgICAgICBcIlxcdTEwMDVcXHUxMDNCXCI6IFwiemFcIixcbiAgICAgICAgXCJcXHUxMDBBXCI6IFwibnlcIixcbiAgICAgICAgXCJcXHUxMDBCXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTEwMENcIjogXCJ0YVwiLFxuICAgICAgICBcIlxcdTEwMERcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MTAwRVwiOiBcImRhXCIsXG4gICAgICAgIFwiXFx1MTAwRlwiOiBcIm5hXCIsXG4gICAgICAgIFwiXFx1MTAxMFwiOiBcInRcIixcbiAgICAgICAgXCJcXHUxMDExXCI6IFwidGFcIixcbiAgICAgICAgXCJcXHUxMDEyXCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTEwMTNcIjogXCJkYVwiLFxuICAgICAgICBcIlxcdTEwMTRcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MTAxNVwiOiBcInBcIixcbiAgICAgICAgXCJcXHUxMDE2XCI6IFwicGFcIixcbiAgICAgICAgXCJcXHUxMDE3XCI6IFwiYlwiLFxuICAgICAgICBcIlxcdTEwMThcIjogXCJiYVwiLFxuICAgICAgICBcIlxcdTEwMTlcIjogXCJtXCIsXG4gICAgICAgIFwiXFx1MTAxQVwiOiBcInlcIixcbiAgICAgICAgXCJcXHUxMDFCXCI6IFwieWFcIixcbiAgICAgICAgXCJcXHUxMDFDXCI6IFwibFwiLFxuICAgICAgICBcIlxcdTEwMURcIjogXCJ3XCIsXG4gICAgICAgIFwiXFx1MTAxRVwiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MTAxRlwiOiBcImhcIixcbiAgICAgICAgXCJcXHUxMDIwXCI6IFwibGFcIixcbiAgICAgICAgXCJcXHUxMDIxXCI6IFwiYVwiLFxuICAgICAgICAvLyBjb25zb25hbnQgY2hhcmFjdGVyIGNvbWJvc1xuICAgICAgICBcIlxcdTEwM0NcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MTAzQlwiOiBcInlhXCIsXG4gICAgICAgIFwiXFx1MTAzRFwiOiBcIndcIixcbiAgICAgICAgXCJcXHUxMDNDXFx1MTAzRFwiOiBcInl3XCIsXG4gICAgICAgIFwiXFx1MTAzQlxcdTEwM0RcIjogXCJ5d2FcIixcbiAgICAgICAgXCJcXHUxMDNFXCI6IFwiaFwiLFxuICAgICAgICAvLyBpbmRlcGVuZGVudCB2b3dlbHNcbiAgICAgICAgXCJcXHUxMDI3XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTEwNEZcIjogXCItZVwiLFxuICAgICAgICBcIlxcdTEwMjNcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MTAyNFwiOiBcIi1pXCIsXG4gICAgICAgIFwiXFx1MTAwOVwiOiBcInVcIixcbiAgICAgICAgXCJcXHUxMDI2XCI6IFwiLXVcIixcbiAgICAgICAgXCJcXHUxMDI5XCI6IFwiYXdcIixcbiAgICAgICAgXCJcXHUxMDFFXFx1MTAzQ1xcdTEwMzFcXHUxMDJDXCI6IFwiYXdcIixcbiAgICAgICAgXCJcXHUxMDJBXCI6IFwiYXdcIixcbiAgICAgICAgLy8gbnVtYmVyc1xuICAgICAgICBcIlxcdTEwNDBcIjogXCIwXCIsXG4gICAgICAgIFwiXFx1MTA0MVwiOiBcIjFcIixcbiAgICAgICAgXCJcXHUxMDQyXCI6IFwiMlwiLFxuICAgICAgICBcIlxcdTEwNDNcIjogXCIzXCIsXG4gICAgICAgIFwiXFx1MTA0NFwiOiBcIjRcIixcbiAgICAgICAgXCJcXHUxMDQ1XCI6IFwiNVwiLFxuICAgICAgICBcIlxcdTEwNDZcIjogXCI2XCIsXG4gICAgICAgIFwiXFx1MTA0N1wiOiBcIjdcIixcbiAgICAgICAgXCJcXHUxMDQ4XCI6IFwiOFwiLFxuICAgICAgICBcIlxcdTEwNDlcIjogXCI5XCIsXG4gICAgICAgIC8vIHZpcmFtYSBhbmQgdG9uZSBtYXJrcyB3aGljaCBhcmUgc2lsZW50IGluIHRyYW5zbGl0ZXJhdGlvblxuICAgICAgICBcIlxcdTEwMzlcIjogXCJcIixcbiAgICAgICAgXCJcXHUxMDM3XCI6IFwiXCIsXG4gICAgICAgIFwiXFx1MTAzOFwiOiBcIlwiLFxuICAgICAgICAvLyBDemVjaFxuICAgICAgICBcIlxcdTAxMERcIjogXCJjXCIsXG4gICAgICAgIFwiXFx1MDEwRlwiOiBcImRcIixcbiAgICAgICAgXCJcXHUwMTFCXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTAxNDhcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MDE1OVwiOiBcInJcIixcbiAgICAgICAgXCJcXHUwMTYxXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTAxNjVcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDE2RlwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwMTdFXCI6IFwielwiLFxuICAgICAgICBcIlxcdTAxMENcIjogXCJDXCIsXG4gICAgICAgIFwiXFx1MDEwRVwiOiBcIkRcIixcbiAgICAgICAgXCJcXHUwMTFBXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTAxNDdcIjogXCJOXCIsXG4gICAgICAgIFwiXFx1MDE1OFwiOiBcIlJcIixcbiAgICAgICAgXCJcXHUwMTYwXCI6IFwiU1wiLFxuICAgICAgICBcIlxcdTAxNjRcIjogXCJUXCIsXG4gICAgICAgIFwiXFx1MDE2RVwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUwMTdEXCI6IFwiWlwiLFxuICAgICAgICAvLyBEaGl2ZWhpXG4gICAgICAgIFwiXFx1MDc4MFwiOiBcImhcIixcbiAgICAgICAgXCJcXHUwNzgxXCI6IFwic2hcIixcbiAgICAgICAgXCJcXHUwNzgyXCI6IFwiblwiLFxuICAgICAgICBcIlxcdTA3ODNcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MDc4NFwiOiBcImJcIixcbiAgICAgICAgXCJcXHUwNzg1XCI6IFwibGhcIixcbiAgICAgICAgXCJcXHUwNzg2XCI6IFwia1wiLFxuICAgICAgICBcIlxcdTA3ODdcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDc4OFwiOiBcInZcIixcbiAgICAgICAgXCJcXHUwNzg5XCI6IFwibVwiLFxuICAgICAgICBcIlxcdTA3OEFcIjogXCJmXCIsXG4gICAgICAgIFwiXFx1MDc4QlwiOiBcImRoXCIsXG4gICAgICAgIFwiXFx1MDc4Q1wiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MDc4RFwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwNzhFXCI6IFwiZ1wiLFxuICAgICAgICBcIlxcdTA3OEZcIjogXCJnblwiLFxuICAgICAgICBcIlxcdTA3OTBcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDc5MVwiOiBcImRcIixcbiAgICAgICAgXCJcXHUwNzkyXCI6IFwielwiLFxuICAgICAgICBcIlxcdTA3OTNcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDc5NFwiOiBcInlcIixcbiAgICAgICAgXCJcXHUwNzk1XCI6IFwicFwiLFxuICAgICAgICBcIlxcdTA3OTZcIjogXCJqXCIsXG4gICAgICAgIFwiXFx1MDc5N1wiOiBcImNoXCIsXG4gICAgICAgIFwiXFx1MDc5OFwiOiBcInR0XCIsXG4gICAgICAgIFwiXFx1MDc5OVwiOiBcImhoXCIsXG4gICAgICAgIFwiXFx1MDc5QVwiOiBcImtoXCIsXG4gICAgICAgIFwiXFx1MDc5QlwiOiBcInRoXCIsXG4gICAgICAgIFwiXFx1MDc5Q1wiOiBcInpcIixcbiAgICAgICAgXCJcXHUwNzlEXCI6IFwic2hcIixcbiAgICAgICAgXCJcXHUwNzlFXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTA3OUZcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDdBMFwiOiBcInRcIixcbiAgICAgICAgXCJcXHUwN0ExXCI6IFwielwiLFxuICAgICAgICBcIlxcdTA3QTJcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDdBM1wiOiBcImdoXCIsXG4gICAgICAgIFwiXFx1MDdBNFwiOiBcInFcIixcbiAgICAgICAgXCJcXHUwN0E1XCI6IFwid1wiLFxuICAgICAgICBcIlxcdTA3QTZcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDdBN1wiOiBcImFhXCIsXG4gICAgICAgIFwiXFx1MDdBOFwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwN0E5XCI6IFwiZWVcIixcbiAgICAgICAgXCJcXHUwN0FBXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTA3QUJcIjogXCJvb1wiLFxuICAgICAgICBcIlxcdTA3QUNcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDdBRFwiOiBcImV5XCIsXG4gICAgICAgIFwiXFx1MDdBRVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwN0FGXCI6IFwib2FcIixcbiAgICAgICAgXCJcXHUwN0IwXCI6IFwiXCIsXG4gICAgICAgIC8vIEdlb3JnaWFuIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1JvbWFuaXphdGlvbl9vZl9HZW9yZ2lhblxuICAgICAgICAvLyBOYXRpb25hbCBzeXN0ZW0gKDIwMDIpXG4gICAgICAgIFwiXFx1MTBEMFwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxMEQxXCI6IFwiYlwiLFxuICAgICAgICBcIlxcdTEwRDJcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MTBEM1wiOiBcImRcIixcbiAgICAgICAgXCJcXHUxMEQ0XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTEwRDVcIjogXCJ2XCIsXG4gICAgICAgIFwiXFx1MTBENlwiOiBcInpcIixcbiAgICAgICAgXCJcXHUxMEQ3XCI6IFwidFwiLFxuICAgICAgICBcIlxcdTEwRDhcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MTBEOVwiOiBcImtcIixcbiAgICAgICAgXCJcXHUxMERBXCI6IFwibFwiLFxuICAgICAgICBcIlxcdTEwREJcIjogXCJtXCIsXG4gICAgICAgIFwiXFx1MTBEQ1wiOiBcIm5cIixcbiAgICAgICAgXCJcXHUxMEREXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTEwREVcIjogXCJwXCIsXG4gICAgICAgIFwiXFx1MTBERlwiOiBcInpoXCIsXG4gICAgICAgIFwiXFx1MTBFMFwiOiBcInJcIixcbiAgICAgICAgXCJcXHUxMEUxXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTEwRTJcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MTBFM1wiOiBcInVcIixcbiAgICAgICAgXCJcXHUxMEU0XCI6IFwicFwiLFxuICAgICAgICBcIlxcdTEwRTVcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MTBFNlwiOiBcImdoXCIsXG4gICAgICAgIFwiXFx1MTBFN1wiOiBcInFcIixcbiAgICAgICAgXCJcXHUxMEU4XCI6IFwic2hcIixcbiAgICAgICAgXCJcXHUxMEU5XCI6IFwiY2hcIixcbiAgICAgICAgXCJcXHUxMEVBXCI6IFwidHNcIixcbiAgICAgICAgXCJcXHUxMEVCXCI6IFwiZHpcIixcbiAgICAgICAgXCJcXHUxMEVDXCI6IFwidHNcIixcbiAgICAgICAgXCJcXHUxMEVEXCI6IFwiY2hcIixcbiAgICAgICAgXCJcXHUxMEVFXCI6IFwia2hcIixcbiAgICAgICAgXCJcXHUxMEVGXCI6IFwialwiLFxuICAgICAgICBcIlxcdTEwRjBcIjogXCJoXCIsXG4gICAgICAgIC8vIEdyZWVrXG4gICAgICAgIFwiXFx1MDNCMVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwM0IyXCI6IFwidlwiLFxuICAgICAgICBcIlxcdTAzQjNcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MDNCNFwiOiBcImRcIixcbiAgICAgICAgXCJcXHUwM0I1XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTAzQjZcIjogXCJ6XCIsXG4gICAgICAgIFwiXFx1MDNCN1wiOiBcImlcIixcbiAgICAgICAgXCJcXHUwM0I4XCI6IFwidGhcIixcbiAgICAgICAgXCJcXHUwM0I5XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAzQkFcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MDNCQlwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwM0JDXCI6IFwibVwiLFxuICAgICAgICBcIlxcdTAzQkRcIjogXCJuXCIsXG4gICAgICAgIFwiXFx1MDNCRVwiOiBcImtzXCIsXG4gICAgICAgIFwiXFx1MDNCRlwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwM0MwXCI6IFwicFwiLFxuICAgICAgICBcIlxcdTAzQzFcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MDNDM1wiOiBcInNcIixcbiAgICAgICAgXCJcXHUwM0M0XCI6IFwidFwiLFxuICAgICAgICBcIlxcdTAzQzVcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MDNDNlwiOiBcImZcIixcbiAgICAgICAgXCJcXHUwM0M3XCI6IFwieFwiLFxuICAgICAgICBcIlxcdTAzQzhcIjogXCJwc1wiLFxuICAgICAgICBcIlxcdTAzQzlcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MDNBQ1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUwM0FEXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTAzQUZcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDNDQ1wiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwM0NEXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTAzQUVcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDNDRVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwM0MyXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTAzQ0FcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDNCMFwiOiBcInlcIixcbiAgICAgICAgXCJcXHUwM0NCXCI6IFwieVwiLFxuICAgICAgICBcIlxcdTAzOTBcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDM5MVwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUwMzkyXCI6IFwiQlwiLFxuICAgICAgICBcIlxcdTAzOTNcIjogXCJHXCIsXG4gICAgICAgIFwiXFx1MDM5NFwiOiBcIkRcIixcbiAgICAgICAgXCJcXHUwMzk1XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTAzOTZcIjogXCJaXCIsXG4gICAgICAgIFwiXFx1MDM5N1wiOiBcIklcIixcbiAgICAgICAgXCJcXHUwMzk4XCI6IFwiVEhcIixcbiAgICAgICAgXCJcXHUwMzk5XCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTAzOUFcIjogXCJLXCIsXG4gICAgICAgIFwiXFx1MDM5QlwiOiBcIkxcIixcbiAgICAgICAgXCJcXHUwMzlDXCI6IFwiTVwiLFxuICAgICAgICBcIlxcdTAzOURcIjogXCJOXCIsXG4gICAgICAgIFwiXFx1MDM5RVwiOiBcIktTXCIsXG4gICAgICAgIFwiXFx1MDM5RlwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUwM0EwXCI6IFwiUFwiLFxuICAgICAgICBcIlxcdTAzQTFcIjogXCJSXCIsXG4gICAgICAgIFwiXFx1MDNBM1wiOiBcIlNcIixcbiAgICAgICAgXCJcXHUwM0E0XCI6IFwiVFwiLFxuICAgICAgICBcIlxcdTAzQTVcIjogXCJZXCIsXG4gICAgICAgIFwiXFx1MDNBNlwiOiBcIkZcIixcbiAgICAgICAgXCJcXHUwM0E3XCI6IFwiWFwiLFxuICAgICAgICBcIlxcdTAzQThcIjogXCJQU1wiLFxuICAgICAgICBcIlxcdTAzQTlcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MDM4NlwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUwMzg4XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTAzOEFcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MDM4Q1wiOiBcIk9cIixcbiAgICAgICAgXCJcXHUwMzhFXCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTAzODlcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MDM4RlwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUwM0FBXCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTAzQUJcIjogXCJZXCIsXG4gICAgICAgIC8vIExhdHZpYW5cbiAgICAgICAgXCJcXHUwMTAxXCI6IFwiYVwiLFxuICAgICAgICAvLyAnxI0nOiAnYycsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTAxMTNcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDEyM1wiOiBcImdcIixcbiAgICAgICAgXCJcXHUwMTJCXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTAxMzdcIjogXCJrXCIsXG4gICAgICAgIFwiXFx1MDEzQ1wiOiBcImxcIixcbiAgICAgICAgXCJcXHUwMTQ2XCI6IFwiblwiLFxuICAgICAgICAvLyAnxaEnOiAncycsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTAxNkJcIjogXCJ1XCIsXG4gICAgICAgIC8vICfFvic6ICd6JywgLy8gZHVwbGljYXRlXG4gICAgICAgIFwiXFx1MDEwMFwiOiBcIkFcIixcbiAgICAgICAgLy8gJ8SMJzogJ0MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwMTEyXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTAxMjJcIjogXCJHXCIsXG4gICAgICAgIFwiXFx1MDEyQVwiOiBcIklcIixcbiAgICAgICAgXCJcXHUwMTM2XCI6IFwia1wiLFxuICAgICAgICBcIlxcdTAxM0JcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MDE0NVwiOiBcIk5cIixcbiAgICAgICAgLy8gJ8WgJzogJ1MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgXCJcXHUwMTZBXCI6IFwiVVwiLFxuICAgICAgICAvLyAnxb0nOiAnWicsIC8vIGR1cGxpY2F0ZVxuICAgICAgICAvLyBNYWNlZG9uaWFuXG4gICAgICAgIFwiXFx1MDQwQ1wiOiBcIktqXCIsXG4gICAgICAgIFwiXFx1MDQ1Q1wiOiBcImtqXCIsXG4gICAgICAgIFwiXFx1MDQwOVwiOiBcIkxqXCIsXG4gICAgICAgIFwiXFx1MDQ1OVwiOiBcImxqXCIsXG4gICAgICAgIFwiXFx1MDQwQVwiOiBcIk5qXCIsXG4gICAgICAgIFwiXFx1MDQ1QVwiOiBcIm5qXCIsXG4gICAgICAgIFwiXFx1MDQyMlxcdTA0NDFcIjogXCJUc1wiLFxuICAgICAgICBcIlxcdTA0NDJcXHUwNDQxXCI6IFwidHNcIixcbiAgICAgICAgLy8gUG9saXNoXG4gICAgICAgIFwiXFx1MDEwNVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwMTA3XCI6IFwiY1wiLFxuICAgICAgICBcIlxcdTAxMTlcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDE0MlwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwMTQ0XCI6IFwiblwiLFxuICAgICAgICAvLyAnw7MnOiAnbycsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTAxNUJcIjogXCJzXCIsXG4gICAgICAgIFwiXFx1MDE3QVwiOiBcInpcIixcbiAgICAgICAgXCJcXHUwMTdDXCI6IFwielwiLFxuICAgICAgICBcIlxcdTAxMDRcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MDEwNlwiOiBcIkNcIixcbiAgICAgICAgXCJcXHUwMTE4XCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTAxNDFcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MDE0M1wiOiBcIk5cIixcbiAgICAgICAgXCJcXHUwMTVBXCI6IFwiU1wiLFxuICAgICAgICBcIlxcdTAxNzlcIjogXCJaXCIsXG4gICAgICAgIFwiXFx1MDE3QlwiOiBcIlpcIixcbiAgICAgICAgLy8gVWtyYW5pYW5cbiAgICAgICAgXCJcXHUwNDA0XCI6IFwiWWVcIixcbiAgICAgICAgXCJcXHUwNDA2XCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTA0MDdcIjogXCJZaVwiLFxuICAgICAgICBcIlxcdTA0OTBcIjogXCJHXCIsXG4gICAgICAgIFwiXFx1MDQ1NFwiOiBcInllXCIsXG4gICAgICAgIFwiXFx1MDQ1NlwiOiBcImlcIixcbiAgICAgICAgXCJcXHUwNDU3XCI6IFwieWlcIixcbiAgICAgICAgXCJcXHUwNDkxXCI6IFwiZ1wiLFxuICAgICAgICAvLyBSb21hbmlhblxuICAgICAgICBcIlxcdTAxMDNcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MDEwMlwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUwMjE5XCI6IFwic1wiLFxuICAgICAgICBcIlxcdTAyMThcIjogXCJTXCIsXG4gICAgICAgIC8vICfFnyc6ICdzJywgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfFnic6ICdTJywgLy8gZHVwbGljYXRlXG4gICAgICAgIFwiXFx1MDIxQlwiOiBcInRcIixcbiAgICAgICAgXCJcXHUwMjFBXCI6IFwiVFwiLFxuICAgICAgICBcIlxcdTAxNjNcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDE2MlwiOiBcIlRcIixcbiAgICAgICAgLy8gUnVzc2lhbiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Sb21hbml6YXRpb25fb2ZfUnVzc2lhblxuICAgICAgICAvLyBJQ0FPXG4gICAgICAgIFwiXFx1MDQzMFwiOiBcImFcIixcbiAgICAgICAgXCJcXHUwNDMxXCI6IFwiYlwiLFxuICAgICAgICBcIlxcdTA0MzJcIjogXCJ2XCIsXG4gICAgICAgIFwiXFx1MDQzM1wiOiBcImdcIixcbiAgICAgICAgXCJcXHUwNDM0XCI6IFwiZFwiLFxuICAgICAgICBcIlxcdTA0MzVcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDQ1MVwiOiBcInlvXCIsXG4gICAgICAgIFwiXFx1MDQzNlwiOiBcInpoXCIsXG4gICAgICAgIFwiXFx1MDQzN1wiOiBcInpcIixcbiAgICAgICAgXCJcXHUwNDM4XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTA0MzlcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDQzQVwiOiBcImtcIixcbiAgICAgICAgXCJcXHUwNDNCXCI6IFwibFwiLFxuICAgICAgICBcIlxcdTA0M0NcIjogXCJtXCIsXG4gICAgICAgIFwiXFx1MDQzRFwiOiBcIm5cIixcbiAgICAgICAgXCJcXHUwNDNFXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTA0M0ZcIjogXCJwXCIsXG4gICAgICAgIFwiXFx1MDQ0MFwiOiBcInJcIixcbiAgICAgICAgXCJcXHUwNDQxXCI6IFwic1wiLFxuICAgICAgICBcIlxcdTA0NDJcIjogXCJ0XCIsXG4gICAgICAgIFwiXFx1MDQ0M1wiOiBcInVcIixcbiAgICAgICAgXCJcXHUwNDQ0XCI6IFwiZlwiLFxuICAgICAgICBcIlxcdTA0NDVcIjogXCJraFwiLFxuICAgICAgICBcIlxcdTA0NDZcIjogXCJjXCIsXG4gICAgICAgIFwiXFx1MDQ0N1wiOiBcImNoXCIsXG4gICAgICAgIFwiXFx1MDQ0OFwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MDQ0OVwiOiBcInNoXCIsXG4gICAgICAgIFwiXFx1MDQ0QVwiOiBcIlwiLFxuICAgICAgICBcIlxcdTA0NEJcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MDQ0Q1wiOiBcIlwiLFxuICAgICAgICBcIlxcdTA0NERcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MDQ0RVwiOiBcInl1XCIsXG4gICAgICAgIFwiXFx1MDQ0RlwiOiBcInlhXCIsXG4gICAgICAgIFwiXFx1MDQxMFwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUwNDExXCI6IFwiQlwiLFxuICAgICAgICBcIlxcdTA0MTJcIjogXCJWXCIsXG4gICAgICAgIFwiXFx1MDQxM1wiOiBcIkdcIixcbiAgICAgICAgXCJcXHUwNDE0XCI6IFwiRFwiLFxuICAgICAgICBcIlxcdTA0MTVcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MDQwMVwiOiBcIllvXCIsXG4gICAgICAgIFwiXFx1MDQxNlwiOiBcIlpoXCIsXG4gICAgICAgIFwiXFx1MDQxN1wiOiBcIlpcIixcbiAgICAgICAgXCJcXHUwNDE4XCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTA0MTlcIjogXCJJXCIsXG4gICAgICAgIFwiXFx1MDQxQVwiOiBcIktcIixcbiAgICAgICAgXCJcXHUwNDFCXCI6IFwiTFwiLFxuICAgICAgICBcIlxcdTA0MUNcIjogXCJNXCIsXG4gICAgICAgIFwiXFx1MDQxRFwiOiBcIk5cIixcbiAgICAgICAgXCJcXHUwNDFFXCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTA0MUZcIjogXCJQXCIsXG4gICAgICAgIFwiXFx1MDQyMFwiOiBcIlJcIixcbiAgICAgICAgXCJcXHUwNDIxXCI6IFwiU1wiLFxuICAgICAgICBcIlxcdTA0MjJcIjogXCJUXCIsXG4gICAgICAgIFwiXFx1MDQyM1wiOiBcIlVcIixcbiAgICAgICAgXCJcXHUwNDI0XCI6IFwiRlwiLFxuICAgICAgICBcIlxcdTA0MjVcIjogXCJLaFwiLFxuICAgICAgICBcIlxcdTA0MjZcIjogXCJDXCIsXG4gICAgICAgIFwiXFx1MDQyN1wiOiBcIkNoXCIsXG4gICAgICAgIFwiXFx1MDQyOFwiOiBcIlNoXCIsXG4gICAgICAgIFwiXFx1MDQyOVwiOiBcIlNoXCIsXG4gICAgICAgIFwiXFx1MDQyQVwiOiBcIlwiLFxuICAgICAgICBcIlxcdTA0MkJcIjogXCJZXCIsXG4gICAgICAgIFwiXFx1MDQyQ1wiOiBcIlwiLFxuICAgICAgICBcIlxcdTA0MkRcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MDQyRVwiOiBcIll1XCIsXG4gICAgICAgIFwiXFx1MDQyRlwiOiBcIllhXCIsXG4gICAgICAgIC8vIFNlcmJpYW5cbiAgICAgICAgXCJcXHUwNDUyXCI6IFwiZGpcIixcbiAgICAgICAgXCJcXHUwNDU4XCI6IFwialwiLFxuICAgICAgICAvLyAn0ZknOiAnbGonLCAgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfRmic6ICduaicsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTA0NUJcIjogXCJjXCIsXG4gICAgICAgIFwiXFx1MDQ1RlwiOiBcImR6XCIsXG4gICAgICAgIFwiXFx1MDQwMlwiOiBcIkRqXCIsXG4gICAgICAgIFwiXFx1MDQwOFwiOiBcImpcIixcbiAgICAgICAgLy8gJ9CJJzogJ0xqJywgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfQiic6ICdOaicsIC8vIGR1cGxpY2F0ZVxuICAgICAgICBcIlxcdTA0MEJcIjogXCJDXCIsXG4gICAgICAgIFwiXFx1MDQwRlwiOiBcIkR6XCIsXG4gICAgICAgIC8vIFNsb3Zha1xuICAgICAgICBcIlxcdTAxM0VcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MDEzQVwiOiBcImxcIixcbiAgICAgICAgXCJcXHUwMTU1XCI6IFwiclwiLFxuICAgICAgICBcIlxcdTAxM0RcIjogXCJMXCIsXG4gICAgICAgIFwiXFx1MDEzOVwiOiBcIkxcIixcbiAgICAgICAgXCJcXHUwMTU0XCI6IFwiUlwiLFxuICAgICAgICAvLyBUdXJraXNoXG4gICAgICAgIFwiXFx1MDE1RlwiOiBcInNcIixcbiAgICAgICAgXCJcXHUwMTVFXCI6IFwiU1wiLFxuICAgICAgICBcIlxcdTAxMzFcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDEzMFwiOiBcIklcIixcbiAgICAgICAgLy8gJ8OnJzogJ2MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgLy8gJ8OHJzogJ0MnLCAvLyBkdXBsaWNhdGVcbiAgICAgICAgLy8gJ8O8JzogJ3UnLCAvLyBkdXBsaWNhdGUsIHNlZSBsYW5nQ2hhck1hcFxuICAgICAgICAvLyAnw5wnOiAnVScsIC8vIGR1cGxpY2F0ZSwgc2VlIGxhbmdDaGFyTWFwXG4gICAgICAgIC8vICfDtic6ICdvJywgLy8gZHVwbGljYXRlLCBzZWUgbGFuZ0NoYXJNYXBcbiAgICAgICAgLy8gJ8OWJzogJ08nLCAvLyBkdXBsaWNhdGUsIHNlZSBsYW5nQ2hhck1hcFxuICAgICAgICBcIlxcdTAxMUZcIjogXCJnXCIsXG4gICAgICAgIFwiXFx1MDExRVwiOiBcIkdcIixcbiAgICAgICAgLy8gVmlldG5hbWVzZVxuICAgICAgICBcIlxcdTFFQTNcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBMlwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUIzXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQjJcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVBOVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUE4XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTAxMTFcIjogXCJkXCIsXG4gICAgICAgIFwiXFx1MDExMFwiOiBcIkRcIixcbiAgICAgICAgXCJcXHUxRUI5XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTFFQjhcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MUVCRFwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUJDXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQkJcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MUVCQVwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUxRUJGXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTFFQkVcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MUVDMVwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUMwXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQzdcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MUVDNlwiOiBcIkVcIixcbiAgICAgICAgXCJcXHUxRUM1XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTFFQzRcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MUVDM1wiOiBcImVcIixcbiAgICAgICAgXCJcXHUxRUMyXCI6IFwiRVwiLFxuICAgICAgICBcIlxcdTFFQ0ZcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVDRFwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUNDXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRDFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVEMFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRUQzXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRDJcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVENVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUQ0XCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTFFRDlcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVEOFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRUQ3XCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRDZcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MDFBMVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUwMUEwXCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTFFREJcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVEQVwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRUREXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFRENcIjogXCJPXCIsXG4gICAgICAgIFwiXFx1MUVFM1wiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxRUUyXCI6IFwiT1wiLFxuICAgICAgICBcIlxcdTFFRTFcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVFMFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUxRURFXCI6IFwib1wiLFxuICAgICAgICBcIlxcdTFFREZcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MUVDQlwiOiBcImlcIixcbiAgICAgICAgXCJcXHUxRUNBXCI6IFwiSVwiLFxuICAgICAgICBcIlxcdTAxMjlcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MDEyOFwiOiBcIklcIixcbiAgICAgICAgXCJcXHUxRUM5XCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTFFQzhcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MUVFN1wiOiBcInVcIixcbiAgICAgICAgXCJcXHUxRUU2XCI6IFwiVVwiLFxuICAgICAgICBcIlxcdTFFRTVcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MUVFNFwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUwMTY5XCI6IFwidVwiLFxuICAgICAgICBcIlxcdTAxNjhcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MDFCMFwiOiBcInVcIixcbiAgICAgICAgXCJcXHUwMUFGXCI6IFwiVVwiLFxuICAgICAgICBcIlxcdTFFRTlcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MUVFOFwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUxRUVCXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTFFRUFcIjogXCJVXCIsXG4gICAgICAgIFwiXFx1MUVGMVwiOiBcInVcIixcbiAgICAgICAgXCJcXHUxRUYwXCI6IFwiVVwiLFxuICAgICAgICBcIlxcdTFFRUZcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MUVFRVwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUxRUVEXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTFFRUNcIjogXCJcXHUwMUIwXCIsXG4gICAgICAgIFwiXFx1MUVGN1wiOiBcInlcIixcbiAgICAgICAgXCJcXHUxRUY2XCI6IFwieVwiLFxuICAgICAgICBcIlxcdTFFRjNcIjogXCJ5XCIsXG4gICAgICAgIFwiXFx1MUVGMlwiOiBcIllcIixcbiAgICAgICAgXCJcXHUxRUY1XCI6IFwieVwiLFxuICAgICAgICBcIlxcdTFFRjRcIjogXCJZXCIsXG4gICAgICAgIFwiXFx1MUVGOVwiOiBcInlcIixcbiAgICAgICAgXCJcXHUxRUY4XCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTFFQTFcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBMFwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUE1XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQTRcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVBN1wiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUE2XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTFFQURcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVBQ1wiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUFCXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQUFcIjogXCJBXCIsXG4gICAgICAgIC8vICfEgyc6ICdhJywgLy8gZHVwbGljYXRlXG4gICAgICAgIC8vICfEgic6ICdBJywgLy8gZHVwbGljYXRlXG4gICAgICAgIFwiXFx1MUVBRlwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUFFXCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTFFQjFcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MUVCMFwiOiBcIkFcIixcbiAgICAgICAgXCJcXHUxRUI3XCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTFFQjZcIjogXCJBXCIsXG4gICAgICAgIFwiXFx1MUVCNVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUxRUI0XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTI0RUFcIjogXCIwXCIsXG4gICAgICAgIFwiXFx1MjQ2MFwiOiBcIjFcIixcbiAgICAgICAgXCJcXHUyNDYxXCI6IFwiMlwiLFxuICAgICAgICBcIlxcdTI0NjJcIjogXCIzXCIsXG4gICAgICAgIFwiXFx1MjQ2M1wiOiBcIjRcIixcbiAgICAgICAgXCJcXHUyNDY0XCI6IFwiNVwiLFxuICAgICAgICBcIlxcdTI0NjVcIjogXCI2XCIsXG4gICAgICAgIFwiXFx1MjQ2NlwiOiBcIjdcIixcbiAgICAgICAgXCJcXHUyNDY3XCI6IFwiOFwiLFxuICAgICAgICBcIlxcdTI0NjhcIjogXCI5XCIsXG4gICAgICAgIFwiXFx1MjQ2OVwiOiBcIjEwXCIsXG4gICAgICAgIFwiXFx1MjQ2QVwiOiBcIjExXCIsXG4gICAgICAgIFwiXFx1MjQ2QlwiOiBcIjEyXCIsXG4gICAgICAgIFwiXFx1MjQ2Q1wiOiBcIjEzXCIsXG4gICAgICAgIFwiXFx1MjQ2RFwiOiBcIjE0XCIsXG4gICAgICAgIFwiXFx1MjQ2RVwiOiBcIjE1XCIsXG4gICAgICAgIFwiXFx1MjQ2RlwiOiBcIjE2XCIsXG4gICAgICAgIFwiXFx1MjQ3MFwiOiBcIjE3XCIsXG4gICAgICAgIFwiXFx1MjQ3MVwiOiBcIjE4XCIsXG4gICAgICAgIFwiXFx1MjQ3MlwiOiBcIjE4XCIsXG4gICAgICAgIFwiXFx1MjQ3M1wiOiBcIjE4XCIsXG4gICAgICAgIFwiXFx1MjRGNVwiOiBcIjFcIixcbiAgICAgICAgXCJcXHUyNEY2XCI6IFwiMlwiLFxuICAgICAgICBcIlxcdTI0RjdcIjogXCIzXCIsXG4gICAgICAgIFwiXFx1MjRGOFwiOiBcIjRcIixcbiAgICAgICAgXCJcXHUyNEY5XCI6IFwiNVwiLFxuICAgICAgICBcIlxcdTI0RkFcIjogXCI2XCIsXG4gICAgICAgIFwiXFx1MjRGQlwiOiBcIjdcIixcbiAgICAgICAgXCJcXHUyNEZDXCI6IFwiOFwiLFxuICAgICAgICBcIlxcdTI0RkRcIjogXCI5XCIsXG4gICAgICAgIFwiXFx1MjRGRVwiOiBcIjEwXCIsXG4gICAgICAgIFwiXFx1MjRGRlwiOiBcIjBcIixcbiAgICAgICAgXCJcXHUyNEVCXCI6IFwiMTFcIixcbiAgICAgICAgXCJcXHUyNEVDXCI6IFwiMTJcIixcbiAgICAgICAgXCJcXHUyNEVEXCI6IFwiMTNcIixcbiAgICAgICAgXCJcXHUyNEVFXCI6IFwiMTRcIixcbiAgICAgICAgXCJcXHUyNEVGXCI6IFwiMTVcIixcbiAgICAgICAgXCJcXHUyNEYwXCI6IFwiMTZcIixcbiAgICAgICAgXCJcXHUyNEYxXCI6IFwiMTdcIixcbiAgICAgICAgXCJcXHUyNEYyXCI6IFwiMThcIixcbiAgICAgICAgXCJcXHUyNEYzXCI6IFwiMTlcIixcbiAgICAgICAgXCJcXHUyNEY0XCI6IFwiMjBcIixcbiAgICAgICAgXCJcXHUyNEI2XCI6IFwiQVwiLFxuICAgICAgICBcIlxcdTI0QjdcIjogXCJCXCIsXG4gICAgICAgIFwiXFx1MjRCOFwiOiBcIkNcIixcbiAgICAgICAgXCJcXHUyNEI5XCI6IFwiRFwiLFxuICAgICAgICBcIlxcdTI0QkFcIjogXCJFXCIsXG4gICAgICAgIFwiXFx1MjRCQlwiOiBcIkZcIixcbiAgICAgICAgXCJcXHUyNEJDXCI6IFwiR1wiLFxuICAgICAgICBcIlxcdTI0QkRcIjogXCJIXCIsXG4gICAgICAgIFwiXFx1MjRCRVwiOiBcIklcIixcbiAgICAgICAgXCJcXHUyNEJGXCI6IFwiSlwiLFxuICAgICAgICBcIlxcdTI0QzBcIjogXCJLXCIsXG4gICAgICAgIFwiXFx1MjRDMVwiOiBcIkxcIixcbiAgICAgICAgXCJcXHUyNEMyXCI6IFwiTVwiLFxuICAgICAgICBcIlxcdTI0QzNcIjogXCJOXCIsXG4gICAgICAgIFwiXFx1MjRDNFwiOiBcIk9cIixcbiAgICAgICAgXCJcXHUyNEM1XCI6IFwiUFwiLFxuICAgICAgICBcIlxcdTI0QzZcIjogXCJRXCIsXG4gICAgICAgIFwiXFx1MjRDN1wiOiBcIlJcIixcbiAgICAgICAgXCJcXHUyNEM4XCI6IFwiU1wiLFxuICAgICAgICBcIlxcdTI0QzlcIjogXCJUXCIsXG4gICAgICAgIFwiXFx1MjRDQVwiOiBcIlVcIixcbiAgICAgICAgXCJcXHUyNENCXCI6IFwiVlwiLFxuICAgICAgICBcIlxcdTI0Q0NcIjogXCJXXCIsXG4gICAgICAgIFwiXFx1MjRDRFwiOiBcIlhcIixcbiAgICAgICAgXCJcXHUyNENFXCI6IFwiWVwiLFxuICAgICAgICBcIlxcdTI0Q0ZcIjogXCJaXCIsXG4gICAgICAgIFwiXFx1MjREMFwiOiBcImFcIixcbiAgICAgICAgXCJcXHUyNEQxXCI6IFwiYlwiLFxuICAgICAgICBcIlxcdTI0RDJcIjogXCJjXCIsXG4gICAgICAgIFwiXFx1MjREM1wiOiBcImRcIixcbiAgICAgICAgXCJcXHUyNEQ0XCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTI0RDVcIjogXCJmXCIsXG4gICAgICAgIFwiXFx1MjRENlwiOiBcImdcIixcbiAgICAgICAgXCJcXHUyNEQ3XCI6IFwiaFwiLFxuICAgICAgICBcIlxcdTI0RDhcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MjREOVwiOiBcImpcIixcbiAgICAgICAgXCJcXHUyNERBXCI6IFwia1wiLFxuICAgICAgICBcIlxcdTI0REJcIjogXCJsXCIsXG4gICAgICAgIFwiXFx1MjREQ1wiOiBcIm1cIixcbiAgICAgICAgXCJcXHUyNEREXCI6IFwiblwiLFxuICAgICAgICBcIlxcdTI0REVcIjogXCJvXCIsXG4gICAgICAgIFwiXFx1MjRERlwiOiBcInBcIixcbiAgICAgICAgXCJcXHUyNEUwXCI6IFwicVwiLFxuICAgICAgICBcIlxcdTI0RTFcIjogXCJyXCIsXG4gICAgICAgIFwiXFx1MjRFMlwiOiBcInNcIixcbiAgICAgICAgXCJcXHUyNEUzXCI6IFwidFwiLFxuICAgICAgICBcIlxcdTI0RTRcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MjRFNlwiOiBcInZcIixcbiAgICAgICAgXCJcXHUyNEU1XCI6IFwid1wiLFxuICAgICAgICBcIlxcdTI0RTdcIjogXCJ4XCIsXG4gICAgICAgIFwiXFx1MjRFOFwiOiBcInlcIixcbiAgICAgICAgXCJcXHUyNEU5XCI6IFwielwiLFxuICAgICAgICAvLyBzeW1ib2xzXG4gICAgICAgIFwiXFx1MjAxQ1wiOiAnXCInLFxuICAgICAgICBcIlxcdTIwMURcIjogJ1wiJyxcbiAgICAgICAgXCJcXHUyMDE4XCI6IFwiJ1wiLFxuICAgICAgICBcIlxcdTIwMTlcIjogXCInXCIsXG4gICAgICAgIFwiXFx1MjIwMlwiOiBcImRcIixcbiAgICAgICAgXCJcXHUwMTkyXCI6IFwiZlwiLFxuICAgICAgICBcIlxcdTIxMjJcIjogXCIoVE0pXCIsXG4gICAgICAgIFwiXFx4QTlcIjogXCIoQylcIixcbiAgICAgICAgXCJcXHUwMTUzXCI6IFwib2VcIixcbiAgICAgICAgXCJcXHUwMTUyXCI6IFwiT0VcIixcbiAgICAgICAgXCJcXHhBRVwiOiBcIihSKVwiLFxuICAgICAgICBcIlxcdTIwMjBcIjogXCIrXCIsXG4gICAgICAgIFwiXFx1MjEyMFwiOiBcIihTTSlcIixcbiAgICAgICAgXCJcXHUyMDI2XCI6IFwiLi4uXCIsXG4gICAgICAgIFwiXFx1MDJEQVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHhCQVwiOiBcIm9cIixcbiAgICAgICAgXCJcXHhBQVwiOiBcImFcIixcbiAgICAgICAgXCJcXHUyMDIyXCI6IFwiKlwiLFxuICAgICAgICBcIlxcdTEwNEFcIjogXCIsXCIsXG4gICAgICAgIFwiXFx1MTA0QlwiOiBcIi5cIixcbiAgICAgICAgLy8gY3VycmVuY3lcbiAgICAgICAgXCIkXCI6IFwiVVNEXCIsXG4gICAgICAgIFwiXFx1MjBBQ1wiOiBcIkVVUlwiLFxuICAgICAgICBcIlxcdTIwQTJcIjogXCJCUk5cIixcbiAgICAgICAgXCJcXHUyMEEzXCI6IFwiRlJGXCIsXG4gICAgICAgIFwiXFx4QTNcIjogXCJHQlBcIixcbiAgICAgICAgXCJcXHUyMEE0XCI6IFwiSVRMXCIsXG4gICAgICAgIFwiXFx1MjBBNlwiOiBcIk5HTlwiLFxuICAgICAgICBcIlxcdTIwQTdcIjogXCJFU1BcIixcbiAgICAgICAgXCJcXHUyMEE5XCI6IFwiS1JXXCIsXG4gICAgICAgIFwiXFx1MjBBQVwiOiBcIklMU1wiLFxuICAgICAgICBcIlxcdTIwQUJcIjogXCJWTkRcIixcbiAgICAgICAgXCJcXHUyMEFEXCI6IFwiTEFLXCIsXG4gICAgICAgIFwiXFx1MjBBRVwiOiBcIk1OVFwiLFxuICAgICAgICBcIlxcdTIwQUZcIjogXCJHUkRcIixcbiAgICAgICAgXCJcXHUyMEIxXCI6IFwiQVJTXCIsXG4gICAgICAgIFwiXFx1MjBCMlwiOiBcIlBZR1wiLFxuICAgICAgICBcIlxcdTIwQjNcIjogXCJBUkFcIixcbiAgICAgICAgXCJcXHUyMEI0XCI6IFwiVUFIXCIsXG4gICAgICAgIFwiXFx1MjBCNVwiOiBcIkdIU1wiLFxuICAgICAgICBcIlxceEEyXCI6IFwiY2VudFwiLFxuICAgICAgICBcIlxceEE1XCI6IFwiQ05ZXCIsXG4gICAgICAgIFwiXFx1NTE0M1wiOiBcIkNOWVwiLFxuICAgICAgICBcIlxcdTUxODZcIjogXCJZRU5cIixcbiAgICAgICAgXCJcXHVGREZDXCI6IFwiSVJSXCIsXG4gICAgICAgIFwiXFx1MjBBMFwiOiBcIkVXRVwiLFxuICAgICAgICBcIlxcdTBFM0ZcIjogXCJUSEJcIixcbiAgICAgICAgXCJcXHUyMEE4XCI6IFwiSU5SXCIsXG4gICAgICAgIFwiXFx1MjBCOVwiOiBcIklOUlwiLFxuICAgICAgICBcIlxcdTIwQjBcIjogXCJQRlwiLFxuICAgICAgICBcIlxcdTIwQkFcIjogXCJUUllcIixcbiAgICAgICAgXCJcXHUwNjBCXCI6IFwiQUZOXCIsXG4gICAgICAgIFwiXFx1MjBCQ1wiOiBcIkFaTlwiLFxuICAgICAgICBcIlxcdTA0M0JcXHUwNDMyXCI6IFwiQkdOXCIsXG4gICAgICAgIFwiXFx1MTdEQlwiOiBcIktIUlwiLFxuICAgICAgICBcIlxcdTIwQTFcIjogXCJDUkNcIixcbiAgICAgICAgXCJcXHUyMEI4XCI6IFwiS1pUXCIsXG4gICAgICAgIFwiXFx1MDQzNFxcdTA0MzVcXHUwNDNEXCI6IFwiTUtEXCIsXG4gICAgICAgIFwielxcdTAxNDJcIjogXCJQTE5cIixcbiAgICAgICAgXCJcXHUyMEJEXCI6IFwiUlVCXCIsXG4gICAgICAgIFwiXFx1MjBCRVwiOiBcIkdFTFwiXG4gICAgICB9O1xuICAgICAgdmFyIGxvb2tBaGVhZENoYXJBcnJheSA9IFtcbiAgICAgICAgLy8gYnVybWVzZVxuICAgICAgICBcIlxcdTEwM0FcIixcbiAgICAgICAgLy8gRGhpdmVoaVxuICAgICAgICBcIlxcdTA3QjBcIlxuICAgICAgXTtcbiAgICAgIHZhciBkaWF0cmljTWFwID0ge1xuICAgICAgICAvLyBCdXJtZXNlXG4gICAgICAgIC8vIGRlcGVuZGVudCB2b3dlbHNcbiAgICAgICAgXCJcXHUxMDJDXCI6IFwiYVwiLFxuICAgICAgICBcIlxcdTEwMkJcIjogXCJhXCIsXG4gICAgICAgIFwiXFx1MTAzMVwiOiBcImVcIixcbiAgICAgICAgXCJcXHUxMDMyXCI6IFwiZVwiLFxuICAgICAgICBcIlxcdTEwMkRcIjogXCJpXCIsXG4gICAgICAgIFwiXFx1MTAyRVwiOiBcImlcIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAyRlwiOiBcIm9cIixcbiAgICAgICAgXCJcXHUxMDJGXCI6IFwidVwiLFxuICAgICAgICBcIlxcdTEwMzBcIjogXCJ1XCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkJcXHUxMDA0XFx1MTAzQVwiOiBcImF1bmdcIixcbiAgICAgICAgXCJcXHUxMDMxXFx1MTAyQ1wiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkNcXHUxMDNBXCI6IFwiYXdcIixcbiAgICAgICAgXCJcXHUxMDMxXFx1MTAyQlwiOiBcImF3XCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkJcXHUxMDNBXCI6IFwiYXdcIixcbiAgICAgICAgXCJcXHUxMDNBXCI6IFwiXFx1MTAzQVwiLFxuICAgICAgICAvLyB0aGlzIGlzIHNwZWNpYWwgY2FzZSBidXQgdGhlIGNoYXJhY3RlciB3aWxsIGJlIGNvbnZlcnRlZCB0byBsYXRpbiBpbiB0aGUgY29kZVxuICAgICAgICBcIlxcdTEwMDBcXHUxMDNBXCI6IFwiZXRcIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAyRlxcdTEwMDBcXHUxMDNBXCI6IFwiYWlrXCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMkNcXHUxMDAwXFx1MTAzQVwiOiBcImF1a1wiLFxuICAgICAgICBcIlxcdTEwMDRcXHUxMDNBXCI6IFwiaW5cIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAyRlxcdTEwMDRcXHUxMDNBXCI6IFwiYWluZ1wiLFxuICAgICAgICBcIlxcdTEwMzFcXHUxMDJDXFx1MTAwNFxcdTEwM0FcIjogXCJhdW5nXCIsXG4gICAgICAgIFwiXFx1MTAwNVxcdTEwM0FcIjogXCJpdFwiLFxuICAgICAgICBcIlxcdTEwMEFcXHUxMDNBXCI6IFwiaVwiLFxuICAgICAgICBcIlxcdTEwMTBcXHUxMDNBXCI6IFwiYXRcIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAxMFxcdTEwM0FcIjogXCJlaWtcIixcbiAgICAgICAgXCJcXHUxMDJGXFx1MTAxMFxcdTEwM0FcIjogXCJva1wiLFxuICAgICAgICBcIlxcdTEwM0RcXHUxMDEwXFx1MTAzQVwiOiBcInV0XCIsXG4gICAgICAgIFwiXFx1MTAzMVxcdTEwMTBcXHUxMDNBXCI6IFwiaXRcIixcbiAgICAgICAgXCJcXHUxMDEyXFx1MTAzQVwiOiBcImRcIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAyRlxcdTEwMTJcXHUxMDNBXCI6IFwib2tcIixcbiAgICAgICAgXCJcXHUxMDJGXFx1MTAxMlxcdTEwM0FcIjogXCJhaXRcIixcbiAgICAgICAgXCJcXHUxMDE0XFx1MTAzQVwiOiBcImFuXCIsXG4gICAgICAgIFwiXFx1MTAyQ1xcdTEwMTRcXHUxMDNBXCI6IFwiYW5cIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAxNFxcdTEwM0FcIjogXCJlaW5cIixcbiAgICAgICAgXCJcXHUxMDJGXFx1MTAxNFxcdTEwM0FcIjogXCJvblwiLFxuICAgICAgICBcIlxcdTEwM0RcXHUxMDE0XFx1MTAzQVwiOiBcInVuXCIsXG4gICAgICAgIFwiXFx1MTAxNVxcdTEwM0FcIjogXCJhdFwiLFxuICAgICAgICBcIlxcdTEwMkRcXHUxMDE1XFx1MTAzQVwiOiBcImVpa1wiLFxuICAgICAgICBcIlxcdTEwMkZcXHUxMDE1XFx1MTAzQVwiOiBcIm9rXCIsXG4gICAgICAgIFwiXFx1MTAzRFxcdTEwMTVcXHUxMDNBXCI6IFwidXRcIixcbiAgICAgICAgXCJcXHUxMDE0XFx1MTAzQVxcdTEwMkZcXHUxMDE1XFx1MTAzQVwiOiBcIm51YlwiLFxuICAgICAgICBcIlxcdTEwMTlcXHUxMDNBXCI6IFwiYW5cIixcbiAgICAgICAgXCJcXHUxMDJEXFx1MTAxOVxcdTEwM0FcIjogXCJlaW5cIixcbiAgICAgICAgXCJcXHUxMDJGXFx1MTAxOVxcdTEwM0FcIjogXCJvblwiLFxuICAgICAgICBcIlxcdTEwM0RcXHUxMDE5XFx1MTAzQVwiOiBcInVuXCIsXG4gICAgICAgIFwiXFx1MTAxQVxcdTEwM0FcIjogXCJlXCIsXG4gICAgICAgIFwiXFx1MTAyRFxcdTEwMkZcXHUxMDFDXFx1MTAzQVwiOiBcIm9sXCIsXG4gICAgICAgIFwiXFx1MTAwOVxcdTEwM0FcIjogXCJpblwiLFxuICAgICAgICBcIlxcdTEwMzZcIjogXCJhblwiLFxuICAgICAgICBcIlxcdTEwMkRcXHUxMDM2XCI6IFwiZWluXCIsXG4gICAgICAgIFwiXFx1MTAyRlxcdTEwMzZcIjogXCJvblwiLFxuICAgICAgICAvLyBEaGl2ZWhpXG4gICAgICAgIFwiXFx1MDdBNlxcdTA3ODdcXHUwN0IwXCI6IFwiYWhcIixcbiAgICAgICAgXCJcXHUwN0E2XFx1MDc4MVxcdTA3QjBcIjogXCJhaFwiXG4gICAgICB9O1xuICAgICAgdmFyIGxhbmdDaGFyTWFwID0ge1xuICAgICAgICBcImVuXCI6IHt9LFxuICAgICAgICAvLyBkZWZhdWx0IGxhbmd1YWdlXG4gICAgICAgIFwiYXpcIjoge1xuICAgICAgICAgIC8vIEF6ZXJiYWlqYW5pXG4gICAgICAgICAgXCJcXHhFN1wiOiBcImNcIixcbiAgICAgICAgICBcIlxcdTAyNTlcIjogXCJlXCIsXG4gICAgICAgICAgXCJcXHUwMTFGXCI6IFwiZ1wiLFxuICAgICAgICAgIFwiXFx1MDEzMVwiOiBcImlcIixcbiAgICAgICAgICBcIlxceEY2XCI6IFwib1wiLFxuICAgICAgICAgIFwiXFx1MDE1RlwiOiBcInNcIixcbiAgICAgICAgICBcIlxceEZDXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx4QzdcIjogXCJDXCIsXG4gICAgICAgICAgXCJcXHUwMThGXCI6IFwiRVwiLFxuICAgICAgICAgIFwiXFx1MDExRVwiOiBcIkdcIixcbiAgICAgICAgICBcIlxcdTAxMzBcIjogXCJJXCIsXG4gICAgICAgICAgXCJcXHhENlwiOiBcIk9cIixcbiAgICAgICAgICBcIlxcdTAxNUVcIjogXCJTXCIsXG4gICAgICAgICAgXCJcXHhEQ1wiOiBcIlVcIlxuICAgICAgICB9LFxuICAgICAgICBcImNzXCI6IHtcbiAgICAgICAgICAvLyBDemVjaFxuICAgICAgICAgIFwiXFx1MDEwRFwiOiBcImNcIixcbiAgICAgICAgICBcIlxcdTAxMEZcIjogXCJkXCIsXG4gICAgICAgICAgXCJcXHUwMTFCXCI6IFwiZVwiLFxuICAgICAgICAgIFwiXFx1MDE0OFwiOiBcIm5cIixcbiAgICAgICAgICBcIlxcdTAxNTlcIjogXCJyXCIsXG4gICAgICAgICAgXCJcXHUwMTYxXCI6IFwic1wiLFxuICAgICAgICAgIFwiXFx1MDE2NVwiOiBcInRcIixcbiAgICAgICAgICBcIlxcdTAxNkZcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHUwMTdFXCI6IFwielwiLFxuICAgICAgICAgIFwiXFx1MDEwQ1wiOiBcIkNcIixcbiAgICAgICAgICBcIlxcdTAxMEVcIjogXCJEXCIsXG4gICAgICAgICAgXCJcXHUwMTFBXCI6IFwiRVwiLFxuICAgICAgICAgIFwiXFx1MDE0N1wiOiBcIk5cIixcbiAgICAgICAgICBcIlxcdTAxNThcIjogXCJSXCIsXG4gICAgICAgICAgXCJcXHUwMTYwXCI6IFwiU1wiLFxuICAgICAgICAgIFwiXFx1MDE2NFwiOiBcIlRcIixcbiAgICAgICAgICBcIlxcdTAxNkVcIjogXCJVXCIsXG4gICAgICAgICAgXCJcXHUwMTdEXCI6IFwiWlwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZmlcIjoge1xuICAgICAgICAgIC8vIEZpbm5pc2hcbiAgICAgICAgICAvLyAnw6UnOiAnYScsIGR1cGxpY2F0ZSBzZWUgY2hhck1hcC9sYXRpblxuICAgICAgICAgIC8vICfDhSc6ICdBJywgZHVwbGljYXRlIHNlZSBjaGFyTWFwL2xhdGluXG4gICAgICAgICAgXCJcXHhFNFwiOiBcImFcIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIFwiXFx4QzRcIjogXCJBXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEY2XCI6IFwib1wiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhENlwiOiBcIk9cIlxuICAgICAgICAgIC8vIG9rXG4gICAgICAgIH0sXG4gICAgICAgIFwiaHVcIjoge1xuICAgICAgICAgIC8vIEh1bmdhcmlhblxuICAgICAgICAgIFwiXFx4RTRcIjogXCJhXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEM0XCI6IFwiQVwiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgLy8gJ8OhJzogJ2EnLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICAvLyAnw4EnOiAnQScsIGR1cGxpY2F0ZSBzZWUgY2hhck1hcC9sYXRpblxuICAgICAgICAgIFwiXFx4RjZcIjogXCJvXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEQ2XCI6IFwiT1wiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgLy8gJ8WRJzogJ28nLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICAvLyAnxZAnOiAnTycsIGR1cGxpY2F0ZSBzZWUgY2hhck1hcC9sYXRpblxuICAgICAgICAgIFwiXFx4RkNcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHhEQ1wiOiBcIlVcIixcbiAgICAgICAgICBcIlxcdTAxNzFcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHUwMTcwXCI6IFwiVVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwibHRcIjoge1xuICAgICAgICAgIC8vIExpdGh1YW5pYW5cbiAgICAgICAgICBcIlxcdTAxMDVcIjogXCJhXCIsXG4gICAgICAgICAgXCJcXHUwMTBEXCI6IFwiY1wiLFxuICAgICAgICAgIFwiXFx1MDExOVwiOiBcImVcIixcbiAgICAgICAgICBcIlxcdTAxMTdcIjogXCJlXCIsXG4gICAgICAgICAgXCJcXHUwMTJGXCI6IFwiaVwiLFxuICAgICAgICAgIFwiXFx1MDE2MVwiOiBcInNcIixcbiAgICAgICAgICBcIlxcdTAxNzNcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHUwMTZCXCI6IFwidVwiLFxuICAgICAgICAgIFwiXFx1MDE3RVwiOiBcInpcIixcbiAgICAgICAgICBcIlxcdTAxMDRcIjogXCJBXCIsXG4gICAgICAgICAgXCJcXHUwMTBDXCI6IFwiQ1wiLFxuICAgICAgICAgIFwiXFx1MDExOFwiOiBcIkVcIixcbiAgICAgICAgICBcIlxcdTAxMTZcIjogXCJFXCIsXG4gICAgICAgICAgXCJcXHUwMTJFXCI6IFwiSVwiLFxuICAgICAgICAgIFwiXFx1MDE2MFwiOiBcIlNcIixcbiAgICAgICAgICBcIlxcdTAxNzJcIjogXCJVXCIsXG4gICAgICAgICAgXCJcXHUwMTZBXCI6IFwiVVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwibHZcIjoge1xuICAgICAgICAgIC8vIExhdHZpYW5cbiAgICAgICAgICBcIlxcdTAxMDFcIjogXCJhXCIsXG4gICAgICAgICAgXCJcXHUwMTBEXCI6IFwiY1wiLFxuICAgICAgICAgIFwiXFx1MDExM1wiOiBcImVcIixcbiAgICAgICAgICBcIlxcdTAxMjNcIjogXCJnXCIsXG4gICAgICAgICAgXCJcXHUwMTJCXCI6IFwiaVwiLFxuICAgICAgICAgIFwiXFx1MDEzN1wiOiBcImtcIixcbiAgICAgICAgICBcIlxcdTAxM0NcIjogXCJsXCIsXG4gICAgICAgICAgXCJcXHUwMTQ2XCI6IFwiblwiLFxuICAgICAgICAgIFwiXFx1MDE2MVwiOiBcInNcIixcbiAgICAgICAgICBcIlxcdTAxNkJcIjogXCJ1XCIsXG4gICAgICAgICAgXCJcXHUwMTdFXCI6IFwielwiLFxuICAgICAgICAgIFwiXFx1MDEwMFwiOiBcIkFcIixcbiAgICAgICAgICBcIlxcdTAxMENcIjogXCJDXCIsXG4gICAgICAgICAgXCJcXHUwMTEyXCI6IFwiRVwiLFxuICAgICAgICAgIFwiXFx1MDEyMlwiOiBcIkdcIixcbiAgICAgICAgICBcIlxcdTAxMkFcIjogXCJpXCIsXG4gICAgICAgICAgXCJcXHUwMTM2XCI6IFwia1wiLFxuICAgICAgICAgIFwiXFx1MDEzQlwiOiBcIkxcIixcbiAgICAgICAgICBcIlxcdTAxNDVcIjogXCJOXCIsXG4gICAgICAgICAgXCJcXHUwMTYwXCI6IFwiU1wiLFxuICAgICAgICAgIFwiXFx1MDE2QVwiOiBcInVcIixcbiAgICAgICAgICBcIlxcdTAxN0RcIjogXCJaXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJwbFwiOiB7XG4gICAgICAgICAgLy8gUG9saXNoXG4gICAgICAgICAgXCJcXHUwMTA1XCI6IFwiYVwiLFxuICAgICAgICAgIFwiXFx1MDEwN1wiOiBcImNcIixcbiAgICAgICAgICBcIlxcdTAxMTlcIjogXCJlXCIsXG4gICAgICAgICAgXCJcXHUwMTQyXCI6IFwibFwiLFxuICAgICAgICAgIFwiXFx1MDE0NFwiOiBcIm5cIixcbiAgICAgICAgICBcIlxceEYzXCI6IFwib1wiLFxuICAgICAgICAgIFwiXFx1MDE1QlwiOiBcInNcIixcbiAgICAgICAgICBcIlxcdTAxN0FcIjogXCJ6XCIsXG4gICAgICAgICAgXCJcXHUwMTdDXCI6IFwielwiLFxuICAgICAgICAgIFwiXFx1MDEwNFwiOiBcIkFcIixcbiAgICAgICAgICBcIlxcdTAxMDZcIjogXCJDXCIsXG4gICAgICAgICAgXCJcXHUwMTE4XCI6IFwiZVwiLFxuICAgICAgICAgIFwiXFx1MDE0MVwiOiBcIkxcIixcbiAgICAgICAgICBcIlxcdTAxNDNcIjogXCJOXCIsXG4gICAgICAgICAgXCJcXHhEM1wiOiBcIk9cIixcbiAgICAgICAgICBcIlxcdTAxNUFcIjogXCJTXCIsXG4gICAgICAgICAgXCJcXHUwMTc5XCI6IFwiWlwiLFxuICAgICAgICAgIFwiXFx1MDE3QlwiOiBcIlpcIlxuICAgICAgICB9LFxuICAgICAgICBcInN2XCI6IHtcbiAgICAgICAgICAvLyBTd2VkaXNoXG4gICAgICAgICAgLy8gJ8OlJzogJ2EnLCBkdXBsaWNhdGUgc2VlIGNoYXJNYXAvbGF0aW5cbiAgICAgICAgICAvLyAnw4UnOiAnQScsIGR1cGxpY2F0ZSBzZWUgY2hhck1hcC9sYXRpblxuICAgICAgICAgIFwiXFx4RTRcIjogXCJhXCIsXG4gICAgICAgICAgLy8gb2tcbiAgICAgICAgICBcIlxceEM0XCI6IFwiQVwiLFxuICAgICAgICAgIC8vIG9rXG4gICAgICAgICAgXCJcXHhGNlwiOiBcIm9cIixcbiAgICAgICAgICAvLyBva1xuICAgICAgICAgIFwiXFx4RDZcIjogXCJPXCJcbiAgICAgICAgICAvLyBva1xuICAgICAgICB9LFxuICAgICAgICBcInNrXCI6IHtcbiAgICAgICAgICAvLyBTbG92YWtcbiAgICAgICAgICBcIlxceEU0XCI6IFwiYVwiLFxuICAgICAgICAgIFwiXFx4QzRcIjogXCJBXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJzclwiOiB7XG4gICAgICAgICAgLy8gU2VyYmlhblxuICAgICAgICAgIFwiXFx1MDQ1OVwiOiBcImxqXCIsXG4gICAgICAgICAgXCJcXHUwNDVBXCI6IFwibmpcIixcbiAgICAgICAgICBcIlxcdTA0MDlcIjogXCJMalwiLFxuICAgICAgICAgIFwiXFx1MDQwQVwiOiBcIk5qXCIsXG4gICAgICAgICAgXCJcXHUwMTExXCI6IFwiZGpcIixcbiAgICAgICAgICBcIlxcdTAxMTBcIjogXCJEalwiXG4gICAgICAgIH0sXG4gICAgICAgIFwidHJcIjoge1xuICAgICAgICAgIC8vIFR1cmtpc2hcbiAgICAgICAgICBcIlxceERDXCI6IFwiVVwiLFxuICAgICAgICAgIFwiXFx4RDZcIjogXCJPXCIsXG4gICAgICAgICAgXCJcXHhGQ1wiOiBcInVcIixcbiAgICAgICAgICBcIlxceEY2XCI6IFwib1wiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB2YXIgc3ltYm9sTWFwID0ge1xuICAgICAgICBcImFyXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImxhLW5paGF5YVwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImhvYlwiLFxuICAgICAgICAgIFwiJlwiOiBcIndhXCIsXG4gICAgICAgICAgXCJ8XCI6IFwiYXdcIixcbiAgICAgICAgICBcIjxcIjogXCJhcWFsLW1lblwiLFxuICAgICAgICAgIFwiPlwiOiBcImFrYmFyLW1lblwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcIm1ham1vdVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJvbWxhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJhelwiOiB7fSxcbiAgICAgICAgXCJjYVwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJpbmZpbml0XCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYW1vclwiLFxuICAgICAgICAgIFwiJlwiOiBcImlcIixcbiAgICAgICAgICBcInxcIjogXCJvXCIsXG4gICAgICAgICAgXCI8XCI6IFwibWVueXMgcXVlXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWVzIHF1ZVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1bWEgZGVsc1wiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJtb25lZGFcIlxuICAgICAgICB9LFxuICAgICAgICBcImNzXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcIm5la29uZWNub1wiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImxhc2thXCIsXG4gICAgICAgICAgXCImXCI6IFwiYVwiLFxuICAgICAgICAgIFwifFwiOiBcIm5lYm9cIixcbiAgICAgICAgICBcIjxcIjogXCJtZW5zaSBuZXpcIixcbiAgICAgICAgICBcIj5cIjogXCJ2ZXRzaSBuZXpcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzb3VjZXRcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibWVuYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZGVcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwidW5lbmRsaWNoXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiTGllYmVcIixcbiAgICAgICAgICBcIiZcIjogXCJ1bmRcIixcbiAgICAgICAgICBcInxcIjogXCJvZGVyXCIsXG4gICAgICAgICAgXCI8XCI6IFwia2xlaW5lciBhbHNcIixcbiAgICAgICAgICBcIj5cIjogXCJncm9lc3NlciBhbHNcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJTdW1tZSB2b25cIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwiV2FlaHJ1bmdcIlxuICAgICAgICB9LFxuICAgICAgICBcImR2XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImtvbHVudWxhYVwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImxvYWJpXCIsXG4gICAgICAgICAgXCImXCI6IFwiYWFpXCIsXG4gICAgICAgICAgXCJ8XCI6IFwibm9vbmVlXCIsXG4gICAgICAgICAgXCI8XCI6IFwiYWggdnVyZSBrdWRhXCIsXG4gICAgICAgICAgXCI+XCI6IFwiYWggdnVyZSBib2R1XCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwianVtdWxhXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcImZhaXNhYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZW5cIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiaW5maW5pdHlcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsb3ZlXCIsXG4gICAgICAgICAgXCImXCI6IFwiYW5kXCIsXG4gICAgICAgICAgXCJ8XCI6IFwib3JcIixcbiAgICAgICAgICBcIjxcIjogXCJsZXNzIHRoYW5cIixcbiAgICAgICAgICBcIj5cIjogXCJncmVhdGVyIHRoYW5cIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1cIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwiY3VycmVuY3lcIlxuICAgICAgICB9LFxuICAgICAgICBcImVzXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaXRvXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYW1vclwiLFxuICAgICAgICAgIFwiJlwiOiBcInlcIixcbiAgICAgICAgICBcInxcIjogXCJ1XCIsXG4gICAgICAgICAgXCI8XCI6IFwibWVub3MgcXVlXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWFzIHF1ZVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1bWEgZGUgbG9zXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIm1vbmVkYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZmFcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYmktbmFoYXlhdFwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImVzaGdoXCIsXG4gICAgICAgICAgXCImXCI6IFwidmFcIixcbiAgICAgICAgICBcInxcIjogXCJ5YVwiLFxuICAgICAgICAgIFwiPFwiOiBcImthbXRhci1helwiLFxuICAgICAgICAgIFwiPlwiOiBcImJpc2h0YXItYXpcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJtYWptb29lXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhaGVkXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJmaVwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJhYXJldHRvbXl5c1wiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcInJha2thdXNcIixcbiAgICAgICAgICBcIiZcIjogXCJqYVwiLFxuICAgICAgICAgIFwifFwiOiBcInRhaVwiLFxuICAgICAgICAgIFwiPFwiOiBcInBpZW5lbXBpIGt1aW5cIixcbiAgICAgICAgICBcIj5cIjogXCJzdXVyZW1waSBrdWluXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsdXV0dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcImZyXCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImluZmluaW1lbnRcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJBbW91clwiLFxuICAgICAgICAgIFwiJlwiOiBcImV0XCIsXG4gICAgICAgICAgXCJ8XCI6IFwib3VcIixcbiAgICAgICAgICBcIjxcIjogXCJtb2lucyBxdWVcIixcbiAgICAgICAgICBcIj5cIjogXCJzdXBlcmlldXJlIGFcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzb21tZSBkZXNcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibW9ubmFpZVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2VcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwidXNhc3J1bG9iYVwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcInNpcXZhcnVsaVwiLFxuICAgICAgICAgIFwiJlwiOiBcImRhXCIsXG4gICAgICAgICAgXCJ8XCI6IFwiYW5cIixcbiAgICAgICAgICBcIjxcIjogXCJuYWtsZWJpXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWV0aVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcImphbWlcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsdXRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJnclwiOiB7fSxcbiAgICAgICAgXCJodVwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJ2ZWd0ZWxlblwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcInN6ZXJlbGVtXCIsXG4gICAgICAgICAgXCImXCI6IFwiZXNcIixcbiAgICAgICAgICBcInxcIjogXCJ2YWd5XCIsXG4gICAgICAgICAgXCI8XCI6IFwia2lzZWJiIG1pbnRcIixcbiAgICAgICAgICBcIj5cIjogXCJuYWd5b2JiIG1pbnRcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzenVtbWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwicGVuem5lbVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwiaXRcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiaW5maW5pdG9cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJhbW9yZVwiLFxuICAgICAgICAgIFwiJlwiOiBcImVcIixcbiAgICAgICAgICBcInxcIjogXCJvXCIsXG4gICAgICAgICAgXCI8XCI6IFwibWlub3JlIGRpXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWFnZ2lvcmUgZGlcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzb21tYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJtb25ldGFcIlxuICAgICAgICB9LFxuICAgICAgICBcImx0XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJkZWx0YVwiLFxuICAgICAgICAgIFwiXFx1MjIxRVwiOiBcImJlZ2FseWJlXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwibWVpbGVcIixcbiAgICAgICAgICBcIiZcIjogXCJpclwiLFxuICAgICAgICAgIFwifFwiOiBcImFyXCIsXG4gICAgICAgICAgXCI8XCI6IFwibWF6aWF1IG5laVwiLFxuICAgICAgICAgIFwiPlwiOiBcImRhdWdpYXUgbmVpXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VtYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWxpdXRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJsdlwiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJiZXpnYWxpYmFcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJtaWxlc3RpYmFcIixcbiAgICAgICAgICBcIiZcIjogXCJ1blwiLFxuICAgICAgICAgIFwifFwiOiBcInZhaVwiLFxuICAgICAgICAgIFwiPFwiOiBcIm1hemFrIG5la2FcIixcbiAgICAgICAgICBcIj5cIjogXCJsaWVsYWtzIG5la2FcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1tYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWx1dGFcIlxuICAgICAgICB9LFxuICAgICAgICBcIm15XCI6IHtcbiAgICAgICAgICBcIlxcdTIyMDZcIjogXCJrd2Foa2h5YWV0XCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYXNhb25hc21lXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYWtoeWFpdFwiLFxuICAgICAgICAgIFwiJlwiOiBcIm5oaW5cIixcbiAgICAgICAgICBcInxcIjogXCJ0aG9cIixcbiAgICAgICAgICBcIjxcIjogXCJuZ2V0aGF3XCIsXG4gICAgICAgICAgXCI+XCI6IFwia3lpdGhhd1wiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInBhdW5nbGRcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibmd3ZWt5ZVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwibWtcIjoge30sXG4gICAgICAgIFwibmxcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwib25laW5kaWdcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsaWVmZGVcIixcbiAgICAgICAgICBcIiZcIjogXCJlblwiLFxuICAgICAgICAgIFwifFwiOiBcIm9mXCIsXG4gICAgICAgICAgXCI8XCI6IFwia2xlaW5lciBkYW5cIixcbiAgICAgICAgICBcIj5cIjogXCJncm90ZXIgZGFuXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic29tXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhbHV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwicGxcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwibmllc2tvbmN6b25vc2NcIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJtaWxvc2NcIixcbiAgICAgICAgICBcIiZcIjogXCJpXCIsXG4gICAgICAgICAgXCJ8XCI6IFwibHViXCIsXG4gICAgICAgICAgXCI8XCI6IFwibW5pZWpzemUgbml6XCIsXG4gICAgICAgICAgXCI+XCI6IFwid2lla3N6ZSBuaXpcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1hXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcIndhbHV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwicHRcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiaW5maW5pdG9cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJhbW9yXCIsXG4gICAgICAgICAgXCImXCI6IFwiZVwiLFxuICAgICAgICAgIFwifFwiOiBcIm91XCIsXG4gICAgICAgICAgXCI8XCI6IFwibWVub3IgcXVlXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWFpb3IgcXVlXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic29tYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJtb2VkYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwicm9cIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiaW5maW5pdFwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImRyYWdvc3RlXCIsXG4gICAgICAgICAgXCImXCI6IFwic2lcIixcbiAgICAgICAgICBcInxcIjogXCJzYXVcIixcbiAgICAgICAgICBcIjxcIjogXCJtYWkgbWljIGNhXCIsXG4gICAgICAgICAgXCI+XCI6IFwibWFpIG1hcmUgY2FcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1hXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInZhbHV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwicnVcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYmVza29uZWNobm9cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsdWJvdlwiLFxuICAgICAgICAgIFwiJlwiOiBcImlcIixcbiAgICAgICAgICBcInxcIjogXCJpbGlcIixcbiAgICAgICAgICBcIjxcIjogXCJtZW5zaGVcIixcbiAgICAgICAgICBcIj5cIjogXCJib2xzaGVcIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJzdW1tYVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJ2YWxqdXRhXCJcbiAgICAgICAgfSxcbiAgICAgICAgXCJza1wiOiB7XG4gICAgICAgICAgXCJcXHUyMjA2XCI6IFwiZGVsdGFcIixcbiAgICAgICAgICBcIlxcdTIyMUVcIjogXCJuZWtvbmVjbm9cIixcbiAgICAgICAgICBcIlxcdTI2NjVcIjogXCJsYXNrYVwiLFxuICAgICAgICAgIFwiJlwiOiBcImFcIixcbiAgICAgICAgICBcInxcIjogXCJhbGVib1wiLFxuICAgICAgICAgIFwiPFwiOiBcIm1lbmVqIGFrb1wiLFxuICAgICAgICAgIFwiPlwiOiBcInZpYWMgYWtvXCIsXG4gICAgICAgICAgXCJcXHUyMjExXCI6IFwic3VjZXRcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwibWVuYVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwic3JcIjoge30sXG4gICAgICAgIFwidHJcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwic29uc3V6bHVrXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwiYXNrXCIsXG4gICAgICAgICAgXCImXCI6IFwidmVcIixcbiAgICAgICAgICBcInxcIjogXCJ2ZXlhXCIsXG4gICAgICAgICAgXCI8XCI6IFwia3VjdWt0dXJcIixcbiAgICAgICAgICBcIj5cIjogXCJidXl1a3R1clwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInRvcGxhbVwiLFxuICAgICAgICAgIFwiXFx4QTRcIjogXCJwYXJhIGJpcmltaVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwidWtcIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwiYmV6a2luZWNobmlzdFwiLFxuICAgICAgICAgIFwiXFx1MjY2NVwiOiBcImx1Ym92XCIsXG4gICAgICAgICAgXCImXCI6IFwiaVwiLFxuICAgICAgICAgIFwifFwiOiBcImFib1wiLFxuICAgICAgICAgIFwiPFwiOiBcIm1lbnNoZVwiLFxuICAgICAgICAgIFwiPlwiOiBcImJpbHNoZVwiLFxuICAgICAgICAgIFwiXFx1MjIxMVwiOiBcInN1bWFcIixcbiAgICAgICAgICBcIlxceEE0XCI6IFwidmFsanV0YVwiXG4gICAgICAgIH0sXG4gICAgICAgIFwidm5cIjoge1xuICAgICAgICAgIFwiXFx1MjIwNlwiOiBcImRlbHRhXCIsXG4gICAgICAgICAgXCJcXHUyMjFFXCI6IFwidm8gY3VjXCIsXG4gICAgICAgICAgXCJcXHUyNjY1XCI6IFwieWV1XCIsXG4gICAgICAgICAgXCImXCI6IFwidmFcIixcbiAgICAgICAgICBcInxcIjogXCJob2FjXCIsXG4gICAgICAgICAgXCI8XCI6IFwibmhvIGhvblwiLFxuICAgICAgICAgIFwiPlwiOiBcImxvbiBob25cIixcbiAgICAgICAgICBcIlxcdTIyMTFcIjogXCJ0b25nXCIsXG4gICAgICAgICAgXCJcXHhBNFwiOiBcInRpZW4gdGVcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgdmFyIHVyaWNDaGFycyA9IFtcIjtcIiwgXCI/XCIsIFwiOlwiLCBcIkBcIiwgXCImXCIsIFwiPVwiLCBcIitcIiwgXCIkXCIsIFwiLFwiLCBcIi9cIl0uam9pbihcIlwiKTtcbiAgICAgIHZhciB1cmljTm9TbGFzaENoYXJzID0gW1wiO1wiLCBcIj9cIiwgXCI6XCIsIFwiQFwiLCBcIiZcIiwgXCI9XCIsIFwiK1wiLCBcIiRcIiwgXCIsXCJdLmpvaW4oXCJcIik7XG4gICAgICB2YXIgbWFya0NoYXJzID0gW1wiLlwiLCBcIiFcIiwgXCJ+XCIsIFwiKlwiLCBcIidcIiwgXCIoXCIsIFwiKVwiXS5qb2luKFwiXCIpO1xuICAgICAgdmFyIGdldFNsdWcgPSBmdW5jdGlvbiBnZXRTbHVnMihpbnB1dCwgb3B0cykge1xuICAgICAgICB2YXIgc2VwYXJhdG9yID0gXCItXCI7XG4gICAgICAgIHZhciByZXN1bHQgPSBcIlwiO1xuICAgICAgICB2YXIgZGlhdHJpY1N0cmluZyA9IFwiXCI7XG4gICAgICAgIHZhciBjb252ZXJ0U3ltYm9scyA9IHRydWU7XG4gICAgICAgIHZhciBjdXN0b21SZXBsYWNlbWVudHMgPSB7fTtcbiAgICAgICAgdmFyIG1haW50YWluQ2FzZTtcbiAgICAgICAgdmFyIHRpdGxlQ2FzZTtcbiAgICAgICAgdmFyIHRydW5jYXRlO1xuICAgICAgICB2YXIgdXJpY0ZsYWc7XG4gICAgICAgIHZhciB1cmljTm9TbGFzaEZsYWc7XG4gICAgICAgIHZhciBtYXJrRmxhZztcbiAgICAgICAgdmFyIHN5bWJvbDtcbiAgICAgICAgdmFyIGxhbmdDaGFyO1xuICAgICAgICB2YXIgbHVja3k7XG4gICAgICAgIHZhciBpO1xuICAgICAgICB2YXIgY2g7XG4gICAgICAgIHZhciBsO1xuICAgICAgICB2YXIgbGFzdENoYXJXYXNTeW1ib2w7XG4gICAgICAgIHZhciBsYXN0Q2hhcldhc0RpYXRyaWM7XG4gICAgICAgIHZhciBhbGxvd2VkQ2hhcnMgPSBcIlwiO1xuICAgICAgICBpZiAodHlwZW9mIGlucHV0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBvcHRzID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgc2VwYXJhdG9yID0gb3B0cztcbiAgICAgICAgfVxuICAgICAgICBzeW1ib2wgPSBzeW1ib2xNYXAuZW47XG4gICAgICAgIGxhbmdDaGFyID0gbGFuZ0NoYXJNYXAuZW47XG4gICAgICAgIGlmICh0eXBlb2Ygb3B0cyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgIG1haW50YWluQ2FzZSA9IG9wdHMubWFpbnRhaW5DYXNlIHx8IGZhbHNlO1xuICAgICAgICAgIGN1c3RvbVJlcGxhY2VtZW50cyA9IG9wdHMuY3VzdG9tICYmIHR5cGVvZiBvcHRzLmN1c3RvbSA9PT0gXCJvYmplY3RcIiA/IG9wdHMuY3VzdG9tIDogY3VzdG9tUmVwbGFjZW1lbnRzO1xuICAgICAgICAgIHRydW5jYXRlID0gK29wdHMudHJ1bmNhdGUgPiAxICYmIG9wdHMudHJ1bmNhdGUgfHwgZmFsc2U7XG4gICAgICAgICAgdXJpY0ZsYWcgPSBvcHRzLnVyaWMgfHwgZmFsc2U7XG4gICAgICAgICAgdXJpY05vU2xhc2hGbGFnID0gb3B0cy51cmljTm9TbGFzaCB8fCBmYWxzZTtcbiAgICAgICAgICBtYXJrRmxhZyA9IG9wdHMubWFyayB8fCBmYWxzZTtcbiAgICAgICAgICBjb252ZXJ0U3ltYm9scyA9IG9wdHMuc3ltYm9scyA9PT0gZmFsc2UgfHwgb3B0cy5sYW5nID09PSBmYWxzZSA/IGZhbHNlIDogdHJ1ZTtcbiAgICAgICAgICBzZXBhcmF0b3IgPSBvcHRzLnNlcGFyYXRvciB8fCBzZXBhcmF0b3I7XG4gICAgICAgICAgaWYgKHVyaWNGbGFnKSB7XG4gICAgICAgICAgICBhbGxvd2VkQ2hhcnMgKz0gdXJpY0NoYXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAodXJpY05vU2xhc2hGbGFnKSB7XG4gICAgICAgICAgICBhbGxvd2VkQ2hhcnMgKz0gdXJpY05vU2xhc2hDaGFycztcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG1hcmtGbGFnKSB7XG4gICAgICAgICAgICBhbGxvd2VkQ2hhcnMgKz0gbWFya0NoYXJzO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzeW1ib2wgPSBvcHRzLmxhbmcgJiYgc3ltYm9sTWFwW29wdHMubGFuZ10gJiYgY29udmVydFN5bWJvbHMgPyBzeW1ib2xNYXBbb3B0cy5sYW5nXSA6IGNvbnZlcnRTeW1ib2xzID8gc3ltYm9sTWFwLmVuIDoge307XG4gICAgICAgICAgbGFuZ0NoYXIgPSBvcHRzLmxhbmcgJiYgbGFuZ0NoYXJNYXBbb3B0cy5sYW5nXSA/IGxhbmdDaGFyTWFwW29wdHMubGFuZ10gOiBvcHRzLmxhbmcgPT09IGZhbHNlIHx8IG9wdHMubGFuZyA9PT0gdHJ1ZSA/IHt9IDogbGFuZ0NoYXJNYXAuZW47XG4gICAgICAgICAgaWYgKG9wdHMudGl0bGVDYXNlICYmIHR5cGVvZiBvcHRzLnRpdGxlQ2FzZS5sZW5ndGggPT09IFwibnVtYmVyXCIgJiYgQXJyYXkucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob3B0cy50aXRsZUNhc2UpKSB7XG4gICAgICAgICAgICBvcHRzLnRpdGxlQ2FzZS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgICAgY3VzdG9tUmVwbGFjZW1lbnRzW3YgKyBcIlwiXSA9IHYgKyBcIlwiO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aXRsZUNhc2UgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aXRsZUNhc2UgPSAhIW9wdHMudGl0bGVDYXNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAob3B0cy5jdXN0b20gJiYgdHlwZW9mIG9wdHMuY3VzdG9tLmxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBBcnJheS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvcHRzLmN1c3RvbSkpIHtcbiAgICAgICAgICAgIG9wdHMuY3VzdG9tLmZvckVhY2goZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICBjdXN0b21SZXBsYWNlbWVudHNbdiArIFwiXCJdID0gdiArIFwiXCI7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgT2JqZWN0LmtleXMoY3VzdG9tUmVwbGFjZW1lbnRzKS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcbiAgICAgICAgICAgIHZhciByO1xuICAgICAgICAgICAgaWYgKHYubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgICByID0gbmV3IFJlZ0V4cChcIlxcXFxiXCIgKyBlc2NhcGVDaGFycyh2KSArIFwiXFxcXGJcIiwgXCJnaVwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHIgPSBuZXcgUmVnRXhwKGVzY2FwZUNoYXJzKHYpLCBcImdpXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKHIsIGN1c3RvbVJlcGxhY2VtZW50c1t2XSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgZm9yIChjaCBpbiBjdXN0b21SZXBsYWNlbWVudHMpIHtcbiAgICAgICAgICAgIGFsbG93ZWRDaGFycyArPSBjaDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgYWxsb3dlZENoYXJzICs9IHNlcGFyYXRvcjtcbiAgICAgICAgYWxsb3dlZENoYXJzID0gZXNjYXBlQ2hhcnMoYWxsb3dlZENoYXJzKTtcbiAgICAgICAgaW5wdXQgPSBpbnB1dC5yZXBsYWNlKC8oXlxccyt8XFxzKyQpL2csIFwiXCIpO1xuICAgICAgICBsYXN0Q2hhcldhc1N5bWJvbCA9IGZhbHNlO1xuICAgICAgICBsYXN0Q2hhcldhc0RpYXRyaWMgPSBmYWxzZTtcbiAgICAgICAgZm9yIChpID0gMCwgbCA9IGlucHV0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgIGNoID0gaW5wdXRbaV07XG4gICAgICAgICAgaWYgKGlzUmVwbGFjZWRDdXN0b21DaGFyKGNoLCBjdXN0b21SZXBsYWNlbWVudHMpKSB7XG4gICAgICAgICAgICBsYXN0Q2hhcldhc1N5bWJvbCA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSBpZiAobGFuZ0NoYXJbY2hdKSB7XG4gICAgICAgICAgICBjaCA9IGxhc3RDaGFyV2FzU3ltYm9sICYmIGxhbmdDaGFyW2NoXS5tYXRjaCgvW0EtWmEtejAtOV0vKSA/IFwiIFwiICsgbGFuZ0NoYXJbY2hdIDogbGFuZ0NoYXJbY2hdO1xuICAgICAgICAgICAgbGFzdENoYXJXYXNTeW1ib2wgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2UgaWYgKGNoIGluIGNoYXJNYXApIHtcbiAgICAgICAgICAgIGlmIChpICsgMSA8IGwgJiYgbG9va0FoZWFkQ2hhckFycmF5LmluZGV4T2YoaW5wdXRbaSArIDFdKSA+PSAwKSB7XG4gICAgICAgICAgICAgIGRpYXRyaWNTdHJpbmcgKz0gY2g7XG4gICAgICAgICAgICAgIGNoID0gXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobGFzdENoYXJXYXNEaWF0cmljID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGNoID0gZGlhdHJpY01hcFtkaWF0cmljU3RyaW5nXSArIGNoYXJNYXBbY2hdO1xuICAgICAgICAgICAgICBkaWF0cmljU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNoID0gbGFzdENoYXJXYXNTeW1ib2wgJiYgY2hhck1hcFtjaF0ubWF0Y2goL1tBLVphLXowLTldLykgPyBcIiBcIiArIGNoYXJNYXBbY2hdIDogY2hhck1hcFtjaF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsYXN0Q2hhcldhc1N5bWJvbCA9IGZhbHNlO1xuICAgICAgICAgICAgbGFzdENoYXJXYXNEaWF0cmljID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIGlmIChjaCBpbiBkaWF0cmljTWFwKSB7XG4gICAgICAgICAgICBkaWF0cmljU3RyaW5nICs9IGNoO1xuICAgICAgICAgICAgY2ggPSBcIlwiO1xuICAgICAgICAgICAgaWYgKGkgPT09IGwgLSAxKSB7XG4gICAgICAgICAgICAgIGNoID0gZGlhdHJpY01hcFtkaWF0cmljU3RyaW5nXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RDaGFyV2FzRGlhdHJpYyA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIGlmIChcbiAgICAgICAgICAgIC8vIHByb2Nlc3Mgc3ltYm9sIGNoYXJzXG4gICAgICAgICAgICBzeW1ib2xbY2hdICYmICEodXJpY0ZsYWcgJiYgdXJpY0NoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkgJiYgISh1cmljTm9TbGFzaEZsYWcgJiYgdXJpY05vU2xhc2hDaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjaCA9IGxhc3RDaGFyV2FzU3ltYm9sIHx8IHJlc3VsdC5zdWJzdHIoLTEpLm1hdGNoKC9bQS1aYS16MC05XS8pID8gc2VwYXJhdG9yICsgc3ltYm9sW2NoXSA6IHN5bWJvbFtjaF07XG4gICAgICAgICAgICBjaCArPSBpbnB1dFtpICsgMV0gIT09IHZvaWQgMCAmJiBpbnB1dFtpICsgMV0ubWF0Y2goL1tBLVphLXowLTldLykgPyBzZXBhcmF0b3IgOiBcIlwiO1xuICAgICAgICAgICAgbGFzdENoYXJXYXNTeW1ib2wgPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobGFzdENoYXJXYXNEaWF0cmljID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgIGNoID0gZGlhdHJpY01hcFtkaWF0cmljU3RyaW5nXSArIGNoO1xuICAgICAgICAgICAgICBkaWF0cmljU3RyaW5nID0gXCJcIjtcbiAgICAgICAgICAgICAgbGFzdENoYXJXYXNEaWF0cmljID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxhc3RDaGFyV2FzU3ltYm9sICYmICgvW0EtWmEtejAtOV0vLnRlc3QoY2gpIHx8IHJlc3VsdC5zdWJzdHIoLTEpLm1hdGNoKC9BLVphLXowLTldLykpKSB7XG4gICAgICAgICAgICAgIGNoID0gXCIgXCIgKyBjaDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxhc3RDaGFyV2FzU3ltYm9sID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCArPSBjaC5yZXBsYWNlKG5ldyBSZWdFeHAoXCJbXlxcXFx3XFxcXHNcIiArIGFsbG93ZWRDaGFycyArIFwiXy1dXCIsIFwiZ1wiKSwgc2VwYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGl0bGVDYXNlKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnJlcGxhY2UoLyhcXHcpKFxcUyopL2csIGZ1bmN0aW9uKF8sIGkyLCByKSB7XG4gICAgICAgICAgICB2YXIgaiA9IGkyLnRvVXBwZXJDYXNlKCkgKyAociAhPT0gbnVsbCA/IHIgOiBcIlwiKTtcbiAgICAgICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjdXN0b21SZXBsYWNlbWVudHMpLmluZGV4T2Yoai50b0xvd2VyQ2FzZSgpKSA8IDAgPyBqIDogai50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKC9cXHMrL2csIHNlcGFyYXRvcikucmVwbGFjZShuZXcgUmVnRXhwKFwiXFxcXFwiICsgc2VwYXJhdG9yICsgXCIrXCIsIFwiZ1wiKSwgc2VwYXJhdG9yKS5yZXBsYWNlKG5ldyBSZWdFeHAoXCIoXlxcXFxcIiArIHNlcGFyYXRvciArIFwiK3xcXFxcXCIgKyBzZXBhcmF0b3IgKyBcIiskKVwiLCBcImdcIiksIFwiXCIpO1xuICAgICAgICBpZiAodHJ1bmNhdGUgJiYgcmVzdWx0Lmxlbmd0aCA+IHRydW5jYXRlKSB7XG4gICAgICAgICAgbHVja3kgPSByZXN1bHQuY2hhckF0KHRydW5jYXRlKSA9PT0gc2VwYXJhdG9yO1xuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5zbGljZSgwLCB0cnVuY2F0ZSk7XG4gICAgICAgICAgaWYgKCFsdWNreSkge1xuICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0LnNsaWNlKDAsIHJlc3VsdC5sYXN0SW5kZXhPZihzZXBhcmF0b3IpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFtYWludGFpbkNhc2UgJiYgIXRpdGxlQ2FzZSkge1xuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9O1xuICAgICAgdmFyIGNyZWF0ZVNsdWcgPSBmdW5jdGlvbiBjcmVhdGVTbHVnMihvcHRzKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBnZXRTbHVnV2l0aENvbmZpZyhpbnB1dCkge1xuICAgICAgICAgIHJldHVybiBnZXRTbHVnKGlucHV0LCBvcHRzKTtcbiAgICAgICAgfTtcbiAgICAgIH07XG4gICAgICB2YXIgZXNjYXBlQ2hhcnMgPSBmdW5jdGlvbiBlc2NhcGVDaGFyczIoaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoL1stXFxcXF4kKis/LigpfFtcXF17fVxcL10vZywgXCJcXFxcJCZcIik7XG4gICAgICB9O1xuICAgICAgdmFyIGlzUmVwbGFjZWRDdXN0b21DaGFyID0gZnVuY3Rpb24oY2gsIGN1c3RvbVJlcGxhY2VtZW50cykge1xuICAgICAgICBmb3IgKHZhciBjIGluIGN1c3RvbVJlcGxhY2VtZW50cykge1xuICAgICAgICAgIGlmIChjdXN0b21SZXBsYWNlbWVudHNbY10gPT09IGNoKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAodHlwZW9mIG1vZHVsZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBtb2R1bGUuZXhwb3J0cykge1xuICAgICAgICBtb2R1bGUuZXhwb3J0cyA9IGdldFNsdWc7XG4gICAgICAgIG1vZHVsZS5leHBvcnRzLmNyZWF0ZVNsdWcgPSBjcmVhdGVTbHVnO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lICE9PSBcInVuZGVmaW5lZFwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFtdLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICByZXR1cm4gZ2V0U2x1ZztcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmIChyb290LmdldFNsdWcgfHwgcm9vdC5jcmVhdGVTbHVnKSB7XG4gICAgICAgICAgICB0aHJvdyBcInNwZWFraW5ndXJsOiBnbG9iYWxzIGV4aXN0cyAvKGdldFNsdWd8Y3JlYXRlU2x1ZykvXCI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJvb3QuZ2V0U2x1ZyA9IGdldFNsdWc7XG4gICAgICAgICAgICByb290LmNyZWF0ZVNsdWcgPSBjcmVhdGVTbHVnO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSkoZXhwb3J0cyk7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3BlYWtpbmd1cmxAMTQuMC4xL25vZGVfbW9kdWxlcy9zcGVha2luZ3VybC9pbmRleC5qc1xudmFyIHJlcXVpcmVfc3BlYWtpbmd1cmwyID0gX19jb21tb25KUyh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3NwZWFraW5ndXJsQDE0LjAuMS9ub2RlX21vZHVsZXMvc3BlYWtpbmd1cmwvaW5kZXguanNcIihleHBvcnRzLCBtb2R1bGUpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpbml0X2VzbV9zaGltcygpO1xuICAgIG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZV9zcGVha2luZ3VybCgpO1xuICB9XG59KTtcblxuLy8gc3JjL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29yZS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGlzTnV4dEFwcCwgdGFyZ2V0IGFzIHRhcmdldDEzIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9jb21wYXQvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmZ1bmN0aW9uIG9uTGVnYWN5RGV2VG9vbHNQbHVnaW5BcGlBdmFpbGFibGUoY2IpIHtcbiAgaWYgKHRhcmdldC5fX1ZVRV9ERVZUT09MU19QTFVHSU5fQVBJX0FWQUlMQUJMRV9fKSB7XG4gICAgY2IoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgXCJfX1ZVRV9ERVZUT09MU19QTFVHSU5fQVBJX0FWQUlMQUJMRV9fXCIsIHtcbiAgICBzZXQodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSlcbiAgICAgICAgY2IoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLy8gc3JjL2N0eC9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxMSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY3R4L2FwaS50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQ5IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC1oaWdobGlnaHRlci9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2JvdW5kaW5nLXJlY3QudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC91dGlscy9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGJhc2VuYW1lLCBjbGFzc2lmeSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuZnVuY3Rpb24gZ2V0Q29tcG9uZW50VHlwZU5hbWUob3B0aW9ucykge1xuICB2YXIgX2EyNTtcbiAgY29uc3QgbmFtZSA9IG9wdGlvbnMubmFtZSB8fCBvcHRpb25zLl9jb21wb25lbnRUYWcgfHwgb3B0aW9ucy5fX1ZVRV9ERVZUT09MU19DT01QT05FTlRfR1VTU0VEX05BTUVfXyB8fCBvcHRpb25zLl9fbmFtZTtcbiAgaWYgKG5hbWUgPT09IFwiaW5kZXhcIiAmJiAoKF9hMjUgPSBvcHRpb25zLl9fZmlsZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuZW5kc1dpdGgoXCJpbmRleC52dWVcIikpKSB7XG4gICAgcmV0dXJuIFwiXCI7XG4gIH1cbiAgcmV0dXJuIG5hbWU7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRGaWxlTmFtZShvcHRpb25zKSB7XG4gIGNvbnN0IGZpbGUgPSBvcHRpb25zLl9fZmlsZTtcbiAgaWYgKGZpbGUpXG4gICAgcmV0dXJuIGNsYXNzaWZ5KGJhc2VuYW1lKGZpbGUsIFwiLnZ1ZVwiKSk7XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnROYW1lKG9wdGlvbnMpIHtcbiAgY29uc3QgbmFtZSA9IG9wdGlvbnMuZGlzcGxheU5hbWUgfHwgb3B0aW9ucy5uYW1lIHx8IG9wdGlvbnMuX2NvbXBvbmVudFRhZztcbiAgaWYgKG5hbWUpXG4gICAgcmV0dXJuIG5hbWU7XG4gIHJldHVybiBnZXRDb21wb25lbnRGaWxlTmFtZShvcHRpb25zKTtcbn1cbmZ1bmN0aW9uIHNhdmVDb21wb25lbnRHdXNzZWROYW1lKGluc3RhbmNlLCBuYW1lKSB7XG4gIGluc3RhbmNlLnR5cGUuX19WVUVfREVWVE9PTFNfQ09NUE9ORU5UX0dVU1NFRF9OQU1FX18gPSBuYW1lO1xuICByZXR1cm4gbmFtZTtcbn1cbmZ1bmN0aW9uIGdldEFwcFJlY29yZChpbnN0YW5jZSkge1xuICBpZiAoaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX18pXG4gICAgcmV0dXJuIGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9fO1xuICBlbHNlIGlmIChpbnN0YW5jZS5yb290KVxuICAgIHJldHVybiBpbnN0YW5jZS5hcHBDb250ZXh0LmFwcC5fX1ZVRV9ERVZUT09MU19ORVhUX0FQUF9SRUNPUkRfXztcbn1cbmFzeW5jIGZ1bmN0aW9uIGdldENvbXBvbmVudElkKG9wdGlvbnMpIHtcbiAgY29uc3QgeyBhcHAsIHVpZCwgaW5zdGFuY2UgfSA9IG9wdGlvbnM7XG4gIHRyeSB7XG4gICAgaWYgKGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18pXG4gICAgICByZXR1cm4gaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXztcbiAgICBjb25zdCBhcHBSZWNvcmQgPSBhd2FpdCBnZXRBcHBSZWNvcmQoYXBwKTtcbiAgICBpZiAoIWFwcFJlY29yZClcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGlzUm9vdCA9IGFwcFJlY29yZC5yb290SW5zdGFuY2UgPT09IGluc3RhbmNlO1xuICAgIHJldHVybiBgJHthcHBSZWNvcmQuaWR9OiR7aXNSb290ID8gXCJyb290XCIgOiB1aWR9YDtcbiAgfSBjYXRjaCAoZSkge1xuICB9XG59XG5mdW5jdGlvbiBpc0ZyYWdtZW50KGluc3RhbmNlKSB7XG4gIHZhciBfYTI1LCBfYjI1O1xuICBjb25zdCBzdWJUcmVlVHlwZSA9IChfYTI1ID0gaW5zdGFuY2Uuc3ViVHJlZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudHlwZTtcbiAgY29uc3QgYXBwUmVjb3JkID0gZ2V0QXBwUmVjb3JkKGluc3RhbmNlKTtcbiAgaWYgKGFwcFJlY29yZCkge1xuICAgIHJldHVybiAoKF9iMjUgPSBhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC50eXBlcykgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuRnJhZ21lbnQpID09PSBzdWJUcmVlVHlwZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBpc0JlaW5nRGVzdHJveWVkKGluc3RhbmNlKSB7XG4gIHJldHVybiBpbnN0YW5jZS5faXNCZWluZ0Rlc3Ryb3llZCB8fCBpbnN0YW5jZS5pc1VubW91bnRlZDtcbn1cbmZ1bmN0aW9uIGdldEluc3RhbmNlTmFtZShpbnN0YW5jZSkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGNvbnN0IG5hbWUgPSBnZXRDb21wb25lbnRUeXBlTmFtZSgoaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnR5cGUpIHx8IHt9KTtcbiAgaWYgKG5hbWUpXG4gICAgcmV0dXJuIG5hbWU7XG4gIGlmICgoaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnJvb3QpID09PSBpbnN0YW5jZSlcbiAgICByZXR1cm4gXCJSb290XCI7XG4gIGZvciAoY29uc3Qga2V5IGluIChfYjI1ID0gKF9hMjUgPSBpbnN0YW5jZS5wYXJlbnQpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmNvbXBvbmVudHMpIHtcbiAgICBpZiAoaW5zdGFuY2UucGFyZW50LnR5cGUuY29tcG9uZW50c1trZXldID09PSAoaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnR5cGUpKVxuICAgICAgcmV0dXJuIHNhdmVDb21wb25lbnRHdXNzZWROYW1lKGluc3RhbmNlLCBrZXkpO1xuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIChfYyA9IGluc3RhbmNlLmFwcENvbnRleHQpID09IG51bGwgPyB2b2lkIDAgOiBfYy5jb21wb25lbnRzKSB7XG4gICAgaWYgKGluc3RhbmNlLmFwcENvbnRleHQuY29tcG9uZW50c1trZXldID09PSAoaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnR5cGUpKVxuICAgICAgcmV0dXJuIHNhdmVDb21wb25lbnRHdXNzZWROYW1lKGluc3RhbmNlLCBrZXkpO1xuICB9XG4gIGNvbnN0IGZpbGVOYW1lID0gZ2V0Q29tcG9uZW50RmlsZU5hbWUoKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSB8fCB7fSk7XG4gIGlmIChmaWxlTmFtZSlcbiAgICByZXR1cm4gZmlsZU5hbWU7XG4gIHJldHVybiBcIkFub255bW91cyBDb21wb25lbnRcIjtcbn1cbmZ1bmN0aW9uIGdldFVuaXF1ZUNvbXBvbmVudElkKGluc3RhbmNlKSB7XG4gIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgY29uc3QgYXBwSWQgPSAoX2MgPSAoX2IyNSA9IChfYTI1ID0gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLmFwcENvbnRleHQpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmFwcCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lEX18pICE9IG51bGwgPyBfYyA6IDA7XG4gIGNvbnN0IGluc3RhbmNlSWQgPSBpbnN0YW5jZSA9PT0gKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5yb290KSA/IFwicm9vdFwiIDogaW5zdGFuY2UudWlkO1xuICByZXR1cm4gYCR7YXBwSWR9OiR7aW5zdGFuY2VJZH1gO1xufVxuZnVuY3Rpb24gZ2V0UmVuZGVyS2V5KHZhbHVlKSB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKVxuICAgIHJldHVybiBcIlwiO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiKVxuICAgIHJldHVybiBgJyR7dmFsdWV9J2A7XG4gIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKVxuICAgIHJldHVybiBcIkFycmF5XCI7XG4gIGVsc2VcbiAgICByZXR1cm4gXCJPYmplY3RcIjtcbn1cbmZ1bmN0aW9uIHJldHVybkVycm9yKGNiKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGNiKCk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4gZTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0Q29tcG9uZW50SW5zdGFuY2UoYXBwUmVjb3JkLCBpbnN0YW5jZUlkKSB7XG4gIGluc3RhbmNlSWQgPSBpbnN0YW5jZUlkIHx8IGAke2FwcFJlY29yZC5pZH06cm9vdGA7XG4gIGNvbnN0IGluc3RhbmNlID0gYXBwUmVjb3JkLmluc3RhbmNlTWFwLmdldChpbnN0YW5jZUlkKTtcbiAgcmV0dXJuIGluc3RhbmNlIHx8IGFwcFJlY29yZC5pbnN0YW5jZU1hcC5nZXQoXCI6cm9vdFwiKTtcbn1cbmZ1bmN0aW9uIGVuc3VyZVByb3BlcnR5RXhpc3RzKG9iaiwga2V5LCBza2lwT2JqQ2hlY2sgPSBmYWxzZSkge1xuICByZXR1cm4gc2tpcE9iakNoZWNrID8ga2V5IGluIG9iaiA6IHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgJiYgb2JqICE9PSBudWxsID8ga2V5IGluIG9iaiA6IGZhbHNlO1xufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvYm91bmRpbmctcmVjdC50c1xuZnVuY3Rpb24gY3JlYXRlUmVjdCgpIHtcbiAgY29uc3QgcmVjdCA9IHtcbiAgICB0b3A6IDAsXG4gICAgYm90dG9tOiAwLFxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgZ2V0IHdpZHRoKCkge1xuICAgICAgcmV0dXJuIHJlY3QucmlnaHQgLSByZWN0LmxlZnQ7XG4gICAgfSxcbiAgICBnZXQgaGVpZ2h0KCkge1xuICAgICAgcmV0dXJuIHJlY3QuYm90dG9tIC0gcmVjdC50b3A7XG4gICAgfVxuICB9O1xuICByZXR1cm4gcmVjdDtcbn1cbnZhciByYW5nZTtcbmZ1bmN0aW9uIGdldFRleHRSZWN0KG5vZGUpIHtcbiAgaWYgKCFyYW5nZSlcbiAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gIHJhbmdlLnNlbGVjdE5vZGUobm9kZSk7XG4gIHJldHVybiByYW5nZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbn1cbmZ1bmN0aW9uIGdldEZyYWdtZW50UmVjdCh2bm9kZSkge1xuICBjb25zdCByZWN0ID0gY3JlYXRlUmVjdCgpO1xuICBpZiAoIXZub2RlLmNoaWxkcmVuKVxuICAgIHJldHVybiByZWN0O1xuICBmb3IgKGxldCBpID0gMCwgbCA9IHZub2RlLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNvbnN0IGNoaWxkVm5vZGUgPSB2bm9kZS5jaGlsZHJlbltpXTtcbiAgICBsZXQgY2hpbGRSZWN0O1xuICAgIGlmIChjaGlsZFZub2RlLmNvbXBvbmVudCkge1xuICAgICAgY2hpbGRSZWN0ID0gZ2V0Q29tcG9uZW50Qm91bmRpbmdSZWN0KGNoaWxkVm5vZGUuY29tcG9uZW50KTtcbiAgICB9IGVsc2UgaWYgKGNoaWxkVm5vZGUuZWwpIHtcbiAgICAgIGNvbnN0IGVsID0gY2hpbGRWbm9kZS5lbDtcbiAgICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSB8fCBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QpXG4gICAgICAgIGNoaWxkUmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgZWxzZSBpZiAoZWwubm9kZVR5cGUgPT09IDMgJiYgZWwuZGF0YS50cmltKCkpXG4gICAgICAgIGNoaWxkUmVjdCA9IGdldFRleHRSZWN0KGVsKTtcbiAgICB9XG4gICAgaWYgKGNoaWxkUmVjdClcbiAgICAgIG1lcmdlUmVjdHMocmVjdCwgY2hpbGRSZWN0KTtcbiAgfVxuICByZXR1cm4gcmVjdDtcbn1cbmZ1bmN0aW9uIG1lcmdlUmVjdHMoYSwgYikge1xuICBpZiAoIWEudG9wIHx8IGIudG9wIDwgYS50b3ApXG4gICAgYS50b3AgPSBiLnRvcDtcbiAgaWYgKCFhLmJvdHRvbSB8fCBiLmJvdHRvbSA+IGEuYm90dG9tKVxuICAgIGEuYm90dG9tID0gYi5ib3R0b207XG4gIGlmICghYS5sZWZ0IHx8IGIubGVmdCA8IGEubGVmdClcbiAgICBhLmxlZnQgPSBiLmxlZnQ7XG4gIGlmICghYS5yaWdodCB8fCBiLnJpZ2h0ID4gYS5yaWdodClcbiAgICBhLnJpZ2h0ID0gYi5yaWdodDtcbiAgcmV0dXJuIGE7XG59XG52YXIgREVGQVVMVF9SRUNUID0ge1xuICB0b3A6IDAsXG4gIGxlZnQ6IDAsXG4gIHJpZ2h0OiAwLFxuICBib3R0b206IDAsXG4gIHdpZHRoOiAwLFxuICBoZWlnaHQ6IDBcbn07XG5mdW5jdGlvbiBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2UpIHtcbiAgY29uc3QgZWwgPSBpbnN0YW5jZS5zdWJUcmVlLmVsO1xuICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBERUZBVUxUX1JFQ1Q7XG4gIH1cbiAgaWYgKGlzRnJhZ21lbnQoaW5zdGFuY2UpKVxuICAgIHJldHVybiBnZXRGcmFnbWVudFJlY3QoaW5zdGFuY2Uuc3ViVHJlZSk7XG4gIGVsc2UgaWYgKChlbCA9PSBudWxsID8gdm9pZCAwIDogZWwubm9kZVR5cGUpID09PSAxKVxuICAgIHJldHVybiBlbCA9PSBudWxsID8gdm9pZCAwIDogZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIGVsc2UgaWYgKGluc3RhbmNlLnN1YlRyZWUuY29tcG9uZW50KVxuICAgIHJldHVybiBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2Uuc3ViVHJlZS5jb21wb25lbnQpO1xuICBlbHNlXG4gICAgcmV0dXJuIERFRkFVTFRfUkVDVDtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3RyZWUvZWwudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBnZXRSb290RWxlbWVudHNGcm9tQ29tcG9uZW50SW5zdGFuY2UoaW5zdGFuY2UpIHtcbiAgaWYgKGlzRnJhZ21lbnQoaW5zdGFuY2UpKVxuICAgIHJldHVybiBnZXRGcmFnbWVudFJvb3RFbGVtZW50cyhpbnN0YW5jZS5zdWJUcmVlKTtcbiAgaWYgKCFpbnN0YW5jZS5zdWJUcmVlKVxuICAgIHJldHVybiBbXTtcbiAgcmV0dXJuIFtpbnN0YW5jZS5zdWJUcmVlLmVsXTtcbn1cbmZ1bmN0aW9uIGdldEZyYWdtZW50Um9vdEVsZW1lbnRzKHZub2RlKSB7XG4gIGlmICghdm5vZGUuY2hpbGRyZW4pXG4gICAgcmV0dXJuIFtdO1xuICBjb25zdCBsaXN0ID0gW107XG4gIHZub2RlLmNoaWxkcmVuLmZvckVhY2goKGNoaWxkVm5vZGUpID0+IHtcbiAgICBpZiAoY2hpbGRWbm9kZS5jb21wb25lbnQpXG4gICAgICBsaXN0LnB1c2goLi4uZ2V0Um9vdEVsZW1lbnRzRnJvbUNvbXBvbmVudEluc3RhbmNlKGNoaWxkVm5vZGUuY29tcG9uZW50KSk7XG4gICAgZWxzZSBpZiAoY2hpbGRWbm9kZSA9PSBudWxsID8gdm9pZCAwIDogY2hpbGRWbm9kZS5lbClcbiAgICAgIGxpc3QucHVzaChjaGlsZFZub2RlLmVsKTtcbiAgfSk7XG4gIHJldHVybiBsaXN0O1xufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQtaGlnaGxpZ2h0ZXIvaW5kZXgudHNcbnZhciBDT05UQUlORVJfRUxFTUVOVF9JRCA9IFwiX192dWUtZGV2dG9vbHMtY29tcG9uZW50LWluc3BlY3Rvcl9fXCI7XG52YXIgQ0FSRF9FTEVNRU5UX0lEID0gXCJfX3Z1ZS1kZXZ0b29scy1jb21wb25lbnQtaW5zcGVjdG9yX19jYXJkX19cIjtcbnZhciBDT01QT05FTlRfTkFNRV9FTEVNRU5UX0lEID0gXCJfX3Z1ZS1kZXZ0b29scy1jb21wb25lbnQtaW5zcGVjdG9yX19uYW1lX19cIjtcbnZhciBJTkRJQ0FUT1JfRUxFTUVOVF9JRCA9IFwiX192dWUtZGV2dG9vbHMtY29tcG9uZW50LWluc3BlY3Rvcl9faW5kaWNhdG9yX19cIjtcbnZhciBjb250YWluZXJTdHlsZXMgPSB7XG4gIGRpc3BsYXk6IFwiYmxvY2tcIixcbiAgekluZGV4OiAyMTQ3NDgzNjQwLFxuICBwb3NpdGlvbjogXCJmaXhlZFwiLFxuICBiYWNrZ3JvdW5kQ29sb3I6IFwiIzQyYjg4MzI1XCIsXG4gIGJvcmRlcjogXCIxcHggc29saWQgIzQyYjg4MzUwXCIsXG4gIGJvcmRlclJhZGl1czogXCI1cHhcIixcbiAgdHJhbnNpdGlvbjogXCJhbGwgMC4xcyBlYXNlLWluXCIsXG4gIHBvaW50ZXJFdmVudHM6IFwibm9uZVwiXG59O1xudmFyIGNhcmRTdHlsZXMgPSB7XG4gIGZvbnRGYW1pbHk6IFwiQXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZlwiLFxuICBwYWRkaW5nOiBcIjVweCA4cHhcIixcbiAgYm9yZGVyUmFkaXVzOiBcIjRweFwiLFxuICB0ZXh0QWxpZ246IFwibGVmdFwiLFxuICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLFxuICBsZWZ0OiAwLFxuICBjb2xvcjogXCIjZTllOWU5XCIsXG4gIGZvbnRTaXplOiBcIjE0cHhcIixcbiAgZm9udFdlaWdodDogNjAwLFxuICBsaW5lSGVpZ2h0OiBcIjI0cHhcIixcbiAgYmFja2dyb3VuZENvbG9yOiBcIiM0MmI4ODNcIixcbiAgYm94U2hhZG93OiBcIjAgMXB4IDNweCAwIHJnYmEoMCwgMCwgMCwgMC4xKSwgMCAxcHggMnB4IC0xcHggcmdiYSgwLCAwLCAwLCAwLjEpXCJcbn07XG52YXIgaW5kaWNhdG9yU3R5bGVzID0ge1xuICBkaXNwbGF5OiBcImlubGluZS1ibG9ja1wiLFxuICBmb250V2VpZ2h0OiA0MDAsXG4gIGZvbnRTdHlsZTogXCJub3JtYWxcIixcbiAgZm9udFNpemU6IFwiMTJweFwiLFxuICBvcGFjaXR5OiAwLjdcbn07XG5mdW5jdGlvbiBnZXRDb250YWluZXJFbGVtZW50KCkge1xuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ09OVEFJTkVSX0VMRU1FTlRfSUQpO1xufVxuZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoKSB7XG4gIHJldHVybiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChDQVJEX0VMRU1FTlRfSUQpO1xufVxuZnVuY3Rpb24gZ2V0SW5kaWNhdG9yRWxlbWVudCgpIHtcbiAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKElORElDQVRPUl9FTEVNRU5UX0lEKTtcbn1cbmZ1bmN0aW9uIGdldE5hbWVFbGVtZW50KCkge1xuICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoQ09NUE9ORU5UX05BTUVfRUxFTUVOVF9JRCk7XG59XG5mdW5jdGlvbiBnZXRTdHlsZXMoYm91bmRzKSB7XG4gIHJldHVybiB7XG4gICAgbGVmdDogYCR7TWF0aC5yb3VuZChib3VuZHMubGVmdCAqIDEwMCkgLyAxMDB9cHhgLFxuICAgIHRvcDogYCR7TWF0aC5yb3VuZChib3VuZHMudG9wICogMTAwKSAvIDEwMH1weGAsXG4gICAgd2lkdGg6IGAke01hdGgucm91bmQoYm91bmRzLndpZHRoICogMTAwKSAvIDEwMH1weGAsXG4gICAgaGVpZ2h0OiBgJHtNYXRoLnJvdW5kKGJvdW5kcy5oZWlnaHQgKiAxMDApIC8gMTAwfXB4YFxuICB9O1xufVxuZnVuY3Rpb24gY3JlYXRlKG9wdGlvbnMpIHtcbiAgdmFyIF9hMjU7XG4gIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyRWwuaWQgPSAoX2EyNSA9IG9wdGlvbnMuZWxlbWVudElkKSAhPSBudWxsID8gX2EyNSA6IENPTlRBSU5FUl9FTEVNRU5UX0lEO1xuICBPYmplY3QuYXNzaWduKGNvbnRhaW5lckVsLnN0eWxlLCB7XG4gICAgLi4uY29udGFpbmVyU3R5bGVzLFxuICAgIC4uLmdldFN0eWxlcyhvcHRpb25zLmJvdW5kcyksXG4gICAgLi4ub3B0aW9ucy5zdHlsZVxuICB9KTtcbiAgY29uc3QgY2FyZEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIGNhcmRFbC5pZCA9IENBUkRfRUxFTUVOVF9JRDtcbiAgT2JqZWN0LmFzc2lnbihjYXJkRWwuc3R5bGUsIHtcbiAgICAuLi5jYXJkU3R5bGVzLFxuICAgIHRvcDogb3B0aW9ucy5ib3VuZHMudG9wIDwgMzUgPyAwIDogXCItMzVweFwiXG4gIH0pO1xuICBjb25zdCBuYW1lRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgbmFtZUVsLmlkID0gQ09NUE9ORU5UX05BTUVfRUxFTUVOVF9JRDtcbiAgbmFtZUVsLmlubmVySFRNTCA9IGAmbHQ7JHtvcHRpb25zLm5hbWV9Jmd0OyZuYnNwOyZuYnNwO2A7XG4gIGNvbnN0IGluZGljYXRvckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImlcIik7XG4gIGluZGljYXRvckVsLmlkID0gSU5ESUNBVE9SX0VMRU1FTlRfSUQ7XG4gIGluZGljYXRvckVsLmlubmVySFRNTCA9IGAke01hdGgucm91bmQob3B0aW9ucy5ib3VuZHMud2lkdGggKiAxMDApIC8gMTAwfSB4ICR7TWF0aC5yb3VuZChvcHRpb25zLmJvdW5kcy5oZWlnaHQgKiAxMDApIC8gMTAwfWA7XG4gIE9iamVjdC5hc3NpZ24oaW5kaWNhdG9yRWwuc3R5bGUsIGluZGljYXRvclN0eWxlcyk7XG4gIGNhcmRFbC5hcHBlbmRDaGlsZChuYW1lRWwpO1xuICBjYXJkRWwuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yRWwpO1xuICBjb250YWluZXJFbC5hcHBlbmRDaGlsZChjYXJkRWwpO1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lckVsKTtcbiAgcmV0dXJuIGNvbnRhaW5lckVsO1xufVxuZnVuY3Rpb24gdXBkYXRlKG9wdGlvbnMpIHtcbiAgY29uc3QgY29udGFpbmVyRWwgPSBnZXRDb250YWluZXJFbGVtZW50KCk7XG4gIGNvbnN0IGNhcmRFbCA9IGdldENhcmRFbGVtZW50KCk7XG4gIGNvbnN0IG5hbWVFbCA9IGdldE5hbWVFbGVtZW50KCk7XG4gIGNvbnN0IGluZGljYXRvckVsID0gZ2V0SW5kaWNhdG9yRWxlbWVudCgpO1xuICBpZiAoY29udGFpbmVyRWwpIHtcbiAgICBPYmplY3QuYXNzaWduKGNvbnRhaW5lckVsLnN0eWxlLCB7XG4gICAgICAuLi5jb250YWluZXJTdHlsZXMsXG4gICAgICAuLi5nZXRTdHlsZXMob3B0aW9ucy5ib3VuZHMpXG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihjYXJkRWwuc3R5bGUsIHtcbiAgICAgIHRvcDogb3B0aW9ucy5ib3VuZHMudG9wIDwgMzUgPyAwIDogXCItMzVweFwiXG4gICAgfSk7XG4gICAgbmFtZUVsLmlubmVySFRNTCA9IGAmbHQ7JHtvcHRpb25zLm5hbWV9Jmd0OyZuYnNwOyZuYnNwO2A7XG4gICAgaW5kaWNhdG9yRWwuaW5uZXJIVE1MID0gYCR7TWF0aC5yb3VuZChvcHRpb25zLmJvdW5kcy53aWR0aCAqIDEwMCkgLyAxMDB9IHggJHtNYXRoLnJvdW5kKG9wdGlvbnMuYm91bmRzLmhlaWdodCAqIDEwMCkgLyAxMDB9YDtcbiAgfVxufVxuZnVuY3Rpb24gaGlnaGxpZ2h0KGluc3RhbmNlKSB7XG4gIGNvbnN0IGJvdW5kcyA9IGdldENvbXBvbmVudEJvdW5kaW5nUmVjdChpbnN0YW5jZSk7XG4gIGlmICghYm91bmRzLndpZHRoICYmICFib3VuZHMuaGVpZ2h0KVxuICAgIHJldHVybjtcbiAgY29uc3QgbmFtZSA9IGdldEluc3RhbmNlTmFtZShpbnN0YW5jZSk7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGdldENvbnRhaW5lckVsZW1lbnQoKTtcbiAgY29udGFpbmVyID8gdXBkYXRlKHsgYm91bmRzLCBuYW1lIH0pIDogY3JlYXRlKHsgYm91bmRzLCBuYW1lIH0pO1xufVxuZnVuY3Rpb24gdW5oaWdobGlnaHQoKSB7XG4gIGNvbnN0IGVsID0gZ2V0Q29udGFpbmVyRWxlbWVudCgpO1xuICBpZiAoZWwpXG4gICAgZWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xufVxudmFyIGluc3BlY3RJbnN0YW5jZSA9IG51bGw7XG5mdW5jdGlvbiBpbnNwZWN0Rm4oZSkge1xuICBjb25zdCB0YXJnZXQyMiA9IGUudGFyZ2V0O1xuICBpZiAodGFyZ2V0MjIpIHtcbiAgICBjb25zdCBpbnN0YW5jZSA9IHRhcmdldDIyLl9fdnVlUGFyZW50Q29tcG9uZW50O1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgaW5zcGVjdEluc3RhbmNlID0gaW5zdGFuY2U7XG4gICAgICBjb25zdCBlbCA9IGluc3RhbmNlLnZub2RlLmVsO1xuICAgICAgaWYgKGVsKSB7XG4gICAgICAgIGNvbnN0IGJvdW5kcyA9IGdldENvbXBvbmVudEJvdW5kaW5nUmVjdChpbnN0YW5jZSk7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpO1xuICAgICAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXJFbGVtZW50KCk7XG4gICAgICAgIGNvbnRhaW5lciA/IHVwZGF0ZSh7IGJvdW5kcywgbmFtZSB9KSA6IGNyZWF0ZSh7IGJvdW5kcywgbmFtZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIHNlbGVjdENvbXBvbmVudEZuKGUsIGNiKSB7XG4gIGUucHJldmVudERlZmF1bHQoKTtcbiAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgaWYgKGluc3BlY3RJbnN0YW5jZSkge1xuICAgIGNvbnN0IHVuaXF1ZUNvbXBvbmVudElkID0gZ2V0VW5pcXVlQ29tcG9uZW50SWQoaW5zcGVjdEluc3RhbmNlKTtcbiAgICBjYih1bmlxdWVDb21wb25lbnRJZCk7XG4gIH1cbn1cbnZhciBpbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXJTZWxlY3RGbiA9IG51bGw7XG5mdW5jdGlvbiBjYW5jZWxJbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXIoKSB7XG4gIHVuaGlnaGxpZ2h0KCk7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGluc3BlY3RGbik7XG4gIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyU2VsZWN0Rm4sIHRydWUpO1xuICBpbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXJTZWxlY3RGbiA9IG51bGw7XG59XG5mdW5jdGlvbiBpbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXIoKSB7XG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGluc3BlY3RGbik7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGZ1bmN0aW9uIG9uU2VsZWN0KGUpIHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICBzZWxlY3RDb21wb25lbnRGbihlLCAoaWQpID0+IHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvblNlbGVjdCwgdHJ1ZSk7XG4gICAgICAgIGluc3BlY3RDb21wb25lbnRIaWdoTGlnaHRlclNlbGVjdEZuID0gbnVsbDtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZW92ZXJcIiwgaW5zcGVjdEZuKTtcbiAgICAgICAgY29uc3QgZWwgPSBnZXRDb250YWluZXJFbGVtZW50KCk7XG4gICAgICAgIGlmIChlbClcbiAgICAgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIHJlc29sdmUoSlNPTi5zdHJpbmdpZnkoeyBpZCB9KSk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyU2VsZWN0Rm4gPSBvblNlbGVjdDtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9uU2VsZWN0LCB0cnVlKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBzY3JvbGxUb0NvbXBvbmVudChvcHRpb25zKSB7XG4gIGNvbnN0IGluc3RhbmNlID0gZ2V0Q29tcG9uZW50SW5zdGFuY2UoYWN0aXZlQXBwUmVjb3JkLnZhbHVlLCBvcHRpb25zLmlkKTtcbiAgaWYgKGluc3RhbmNlKSB7XG4gICAgY29uc3QgW2VsXSA9IGdldFJvb3RFbGVtZW50c0Zyb21Db21wb25lbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgaWYgKHR5cGVvZiBlbC5zY3JvbGxJbnRvVmlldyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICBlbC5zY3JvbGxJbnRvVmlldyh7XG4gICAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYm91bmRzID0gZ2V0Q29tcG9uZW50Qm91bmRpbmdSZWN0KGluc3RhbmNlKTtcbiAgICAgIGNvbnN0IHNjcm9sbFRhcmdldCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICAgIC4uLmdldFN0eWxlcyhib3VuZHMpLFxuICAgICAgICBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiXG4gICAgICB9O1xuICAgICAgT2JqZWN0LmFzc2lnbihzY3JvbGxUYXJnZXQuc3R5bGUsIHN0eWxlcyk7XG4gICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcm9sbFRhcmdldCk7XG4gICAgICBzY3JvbGxUYXJnZXQuc2Nyb2xsSW50b1ZpZXcoe1xuICAgICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxUYXJnZXQpO1xuICAgICAgfSwgMmUzKTtcbiAgICB9XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBjb25zdCBib3VuZHMgPSBnZXRDb21wb25lbnRCb3VuZGluZ1JlY3QoaW5zdGFuY2UpO1xuICAgICAgaWYgKGJvdW5kcy53aWR0aCB8fCBib3VuZHMuaGVpZ2h0KSB7XG4gICAgICAgIGNvbnN0IG5hbWUgPSBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpO1xuICAgICAgICBjb25zdCBlbDIgPSBnZXRDb250YWluZXJFbGVtZW50KCk7XG4gICAgICAgIGVsMiA/IHVwZGF0ZSh7IC4uLm9wdGlvbnMsIG5hbWUsIGJvdW5kcyB9KSA6IGNyZWF0ZSh7IC4uLm9wdGlvbnMsIG5hbWUsIGJvdW5kcyB9KTtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgaWYgKGVsMilcbiAgICAgICAgICAgIGVsMi5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICAgIH0sIDE1MDApO1xuICAgICAgfVxuICAgIH0sIDEyMDApO1xuICB9XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC1pbnNwZWN0b3IvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hLCBfYjtcbihfYiA9IChfYSA9IHRhcmdldDIpLl9fVlVFX0RFVlRPT0xTX0NPTVBPTkVOVF9JTlNQRUNUT1JfRU5BQkxFRF9fKSAhPSBudWxsID8gX2IgOiBfYS5fX1ZVRV9ERVZUT09MU19DT01QT05FTlRfSU5TUEVDVE9SX0VOQUJMRURfXyA9IHRydWU7XG5mdW5jdGlvbiB0b2dnbGVDb21wb25lbnRJbnNwZWN0b3JFbmFibGVkKGVuYWJsZWQpIHtcbiAgdGFyZ2V0Mi5fX1ZVRV9ERVZUT09MU19DT01QT05FTlRfSU5TUEVDVE9SX0VOQUJMRURfXyA9IGVuYWJsZWQ7XG59XG5mdW5jdGlvbiB3YWl0Rm9ySW5zcGVjdG9ySW5pdChjYikge1xuICBsZXQgdG90YWwgPSAwO1xuICBjb25zdCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICBpZiAodGFyZ2V0Mi5fX1ZVRV9JTlNQRUNUT1JfXykge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lcik7XG4gICAgICB0b3RhbCArPSAzMDtcbiAgICAgIGNiKCk7XG4gICAgfVxuICAgIGlmICh0b3RhbCA+PSAvKiA1cyAqL1xuICAgIDVlMylcbiAgICAgIGNsZWFySW50ZXJ2YWwodGltZXIpO1xuICB9LCAzMCk7XG59XG5mdW5jdGlvbiBzZXR1cEluc3BlY3RvcigpIHtcbiAgY29uc3QgaW5zcGVjdG9yID0gdGFyZ2V0Mi5fX1ZVRV9JTlNQRUNUT1JfXztcbiAgY29uc3QgX29wZW5JbkVkaXRvciA9IGluc3BlY3Rvci5vcGVuSW5FZGl0b3I7XG4gIGluc3BlY3Rvci5vcGVuSW5FZGl0b3IgPSBhc3luYyAoLi4ucGFyYW1zKSA9PiB7XG4gICAgaW5zcGVjdG9yLmRpc2FibGUoKTtcbiAgICBfb3BlbkluRWRpdG9yKC4uLnBhcmFtcyk7XG4gIH07XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnRJbnNwZWN0b3IoKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgIGZ1bmN0aW9uIHNldHVwKCkge1xuICAgICAgc2V0dXBJbnNwZWN0b3IoKTtcbiAgICAgIHJlc29sdmUodGFyZ2V0Mi5fX1ZVRV9JTlNQRUNUT1JfXyk7XG4gICAgfVxuICAgIGlmICghdGFyZ2V0Mi5fX1ZVRV9JTlNQRUNUT1JfXykge1xuICAgICAgd2FpdEZvckluc3BlY3RvckluaXQoKCkgPT4ge1xuICAgICAgICBzZXR1cCgpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNldHVwKCk7XG4gICAgfVxuICB9KTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2VkaXRvci50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3NoYXJlZC9zdHViLXZ1ZS50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGlzUmVhZG9ubHkodmFsdWUpIHtcbiAgcmV0dXJuICEhKHZhbHVlICYmIHZhbHVlW1wiX192X2lzUmVhZG9ubHlcIiAvKiBJU19SRUFET05MWSAqL10pO1xufVxuZnVuY3Rpb24gaXNSZWFjdGl2ZSh2YWx1ZSkge1xuICBpZiAoaXNSZWFkb25seSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gaXNSZWFjdGl2ZSh2YWx1ZVtcIl9fdl9yYXdcIiAvKiBSQVcgKi9dKTtcbiAgfVxuICByZXR1cm4gISEodmFsdWUgJiYgdmFsdWVbXCJfX3ZfaXNSZWFjdGl2ZVwiIC8qIElTX1JFQUNUSVZFICovXSk7XG59XG5mdW5jdGlvbiBpc1JlZihyKSB7XG4gIHJldHVybiAhIShyICYmIHIuX192X2lzUmVmID09PSB0cnVlKTtcbn1cbmZ1bmN0aW9uIHRvUmF3KG9ic2VydmVkKSB7XG4gIGNvbnN0IHJhdyA9IG9ic2VydmVkICYmIG9ic2VydmVkW1wiX192X3Jhd1wiIC8qIFJBVyAqL107XG4gIHJldHVybiByYXcgPyB0b1JhdyhyYXcpIDogb2JzZXJ2ZWQ7XG59XG52YXIgRnJhZ21lbnQgPSBTeW1ib2wuZm9yKFwidi1mZ3RcIik7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9lZGl0b3IudHNcbnZhciBTdGF0ZUVkaXRvciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5yZWZFZGl0b3IgPSBuZXcgUmVmU3RhdGVFZGl0b3IoKTtcbiAgfVxuICBzZXQob2JqZWN0LCBwYXRoLCB2YWx1ZSwgY2IpIHtcbiAgICBjb25zdCBzZWN0aW9ucyA9IEFycmF5LmlzQXJyYXkocGF0aCkgPyBwYXRoIDogcGF0aC5zcGxpdChcIi5cIik7XG4gICAgY29uc3QgbWFya1JlZiA9IGZhbHNlO1xuICAgIHdoaWxlIChzZWN0aW9ucy5sZW5ndGggPiAxKSB7XG4gICAgICBjb25zdCBzZWN0aW9uID0gc2VjdGlvbnMuc2hpZnQoKTtcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgIG9iamVjdCA9IG9iamVjdC5nZXQoc2VjdGlvbik7XG4gICAgICBlbHNlIGlmIChvYmplY3QgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgIG9iamVjdCA9IEFycmF5LmZyb20ob2JqZWN0LnZhbHVlcygpKVtzZWN0aW9uXTtcbiAgICAgIGVsc2Ugb2JqZWN0ID0gb2JqZWN0W3NlY3Rpb25dO1xuICAgICAgaWYgKHRoaXMucmVmRWRpdG9yLmlzUmVmKG9iamVjdCkpXG4gICAgICAgIG9iamVjdCA9IHRoaXMucmVmRWRpdG9yLmdldChvYmplY3QpO1xuICAgIH1cbiAgICBjb25zdCBmaWVsZCA9IHNlY3Rpb25zWzBdO1xuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLnJlZkVkaXRvci5nZXQob2JqZWN0KVtmaWVsZF07XG4gICAgaWYgKGNiKSB7XG4gICAgICBjYihvYmplY3QsIGZpZWxkLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLnJlZkVkaXRvci5pc1JlZihpdGVtKSlcbiAgICAgICAgdGhpcy5yZWZFZGl0b3Iuc2V0KGl0ZW0sIHZhbHVlKTtcbiAgICAgIGVsc2UgaWYgKG1hcmtSZWYpXG4gICAgICAgIG9iamVjdFtmaWVsZF0gPSB2YWx1ZTtcbiAgICAgIGVsc2VcbiAgICAgICAgb2JqZWN0W2ZpZWxkXSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICBnZXQob2JqZWN0LCBwYXRoKSB7XG4gICAgY29uc3Qgc2VjdGlvbnMgPSBBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aCA6IHBhdGguc3BsaXQoXCIuXCIpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VjdGlvbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBNYXApXG4gICAgICAgIG9iamVjdCA9IG9iamVjdC5nZXQoc2VjdGlvbnNbaV0pO1xuICAgICAgZWxzZVxuICAgICAgICBvYmplY3QgPSBvYmplY3Rbc2VjdGlvbnNbaV1dO1xuICAgICAgaWYgKHRoaXMucmVmRWRpdG9yLmlzUmVmKG9iamVjdCkpXG4gICAgICAgIG9iamVjdCA9IHRoaXMucmVmRWRpdG9yLmdldChvYmplY3QpO1xuICAgICAgaWYgKCFvYmplY3QpXG4gICAgICAgIHJldHVybiB2b2lkIDA7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Q7XG4gIH1cbiAgaGFzKG9iamVjdCwgcGF0aCwgcGFyZW50ID0gZmFsc2UpIHtcbiAgICBpZiAodHlwZW9mIG9iamVjdCA9PT0gXCJ1bmRlZmluZWRcIilcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBzZWN0aW9ucyA9IEFycmF5LmlzQXJyYXkocGF0aCkgPyBwYXRoLnNsaWNlKCkgOiBwYXRoLnNwbGl0KFwiLlwiKTtcbiAgICBjb25zdCBzaXplID0gIXBhcmVudCA/IDEgOiAyO1xuICAgIHdoaWxlIChvYmplY3QgJiYgc2VjdGlvbnMubGVuZ3RoID4gc2l6ZSkge1xuICAgICAgY29uc3Qgc2VjdGlvbiA9IHNlY3Rpb25zLnNoaWZ0KCk7XG4gICAgICBvYmplY3QgPSBvYmplY3Rbc2VjdGlvbl07XG4gICAgICBpZiAodGhpcy5yZWZFZGl0b3IuaXNSZWYob2JqZWN0KSlcbiAgICAgICAgb2JqZWN0ID0gdGhpcy5yZWZFZGl0b3IuZ2V0KG9iamVjdCk7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBzZWN0aW9uc1swXSk7XG4gIH1cbiAgY3JlYXRlRGVmYXVsdFNldENhbGxiYWNrKHN0YXRlKSB7XG4gICAgcmV0dXJuIChvYmplY3QsIGZpZWxkLCB2YWx1ZSkgPT4ge1xuICAgICAgaWYgKHN0YXRlLnJlbW92ZSB8fCBzdGF0ZS5uZXdLZXkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSlcbiAgICAgICAgICBvYmplY3Quc3BsaWNlKGZpZWxkLCAxKTtcbiAgICAgICAgZWxzZSBpZiAodG9SYXcob2JqZWN0KSBpbnN0YW5jZW9mIE1hcClcbiAgICAgICAgICBvYmplY3QuZGVsZXRlKGZpZWxkKTtcbiAgICAgICAgZWxzZSBpZiAodG9SYXcob2JqZWN0KSBpbnN0YW5jZW9mIFNldClcbiAgICAgICAgICBvYmplY3QuZGVsZXRlKEFycmF5LmZyb20ob2JqZWN0LnZhbHVlcygpKVtmaWVsZF0pO1xuICAgICAgICBlbHNlIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkob2JqZWN0LCBmaWVsZCk7XG4gICAgICB9XG4gICAgICBpZiAoIXN0YXRlLnJlbW92ZSkge1xuICAgICAgICBjb25zdCB0YXJnZXQyMiA9IG9iamVjdFtzdGF0ZS5uZXdLZXkgfHwgZmllbGRdO1xuICAgICAgICBpZiAodGhpcy5yZWZFZGl0b3IuaXNSZWYodGFyZ2V0MjIpKVxuICAgICAgICAgIHRoaXMucmVmRWRpdG9yLnNldCh0YXJnZXQyMiwgdmFsdWUpO1xuICAgICAgICBlbHNlIGlmICh0b1JhdyhvYmplY3QpIGluc3RhbmNlb2YgTWFwKVxuICAgICAgICAgIG9iamVjdC5zZXQoc3RhdGUubmV3S2V5IHx8IGZpZWxkLCB2YWx1ZSk7XG4gICAgICAgIGVsc2UgaWYgKHRvUmF3KG9iamVjdCkgaW5zdGFuY2VvZiBTZXQpXG4gICAgICAgICAgb2JqZWN0LmFkZCh2YWx1ZSk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBvYmplY3Rbc3RhdGUubmV3S2V5IHx8IGZpZWxkXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG52YXIgUmVmU3RhdGVFZGl0b3IgPSBjbGFzcyB7XG4gIHNldChyZWYsIHZhbHVlKSB7XG4gICAgaWYgKGlzUmVmKHJlZikpIHtcbiAgICAgIHJlZi52YWx1ZSA9IHZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocmVmIGluc3RhbmNlb2YgU2V0ICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIHJlZi5jbGVhcigpO1xuICAgICAgICB2YWx1ZS5mb3JFYWNoKCh2KSA9PiByZWYuYWRkKHYpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgY3VycmVudEtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG4gICAgICBpZiAocmVmIGluc3RhbmNlb2YgTWFwKSB7XG4gICAgICAgIGNvbnN0IHByZXZpb3VzS2V5c1NldDIgPSBuZXcgU2V0KHJlZi5rZXlzKCkpO1xuICAgICAgICBjdXJyZW50S2V5cy5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICByZWYuc2V0KGtleSwgUmVmbGVjdC5nZXQodmFsdWUsIGtleSkpO1xuICAgICAgICAgIHByZXZpb3VzS2V5c1NldDIuZGVsZXRlKGtleSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwcmV2aW91c0tleXNTZXQyLmZvckVhY2goKGtleSkgPT4gcmVmLmRlbGV0ZShrZXkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJldmlvdXNLZXlzU2V0ID0gbmV3IFNldChPYmplY3Qua2V5cyhyZWYpKTtcbiAgICAgIGN1cnJlbnRLZXlzLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICBSZWZsZWN0LnNldChyZWYsIGtleSwgUmVmbGVjdC5nZXQodmFsdWUsIGtleSkpO1xuICAgICAgICBwcmV2aW91c0tleXNTZXQuZGVsZXRlKGtleSk7XG4gICAgICB9KTtcbiAgICAgIHByZXZpb3VzS2V5c1NldC5mb3JFYWNoKChrZXkpID0+IFJlZmxlY3QuZGVsZXRlUHJvcGVydHkocmVmLCBrZXkpKTtcbiAgICB9XG4gIH1cbiAgZ2V0KHJlZikge1xuICAgIHJldHVybiBpc1JlZihyZWYpID8gcmVmLnZhbHVlIDogcmVmO1xuICB9XG4gIGlzUmVmKHJlZikge1xuICAgIHJldHVybiBpc1JlZihyZWYpIHx8IGlzUmVhY3RpdmUocmVmKTtcbiAgfVxufTtcbmFzeW5jIGZ1bmN0aW9uIGVkaXRDb21wb25lbnRTdGF0ZShwYXlsb2FkLCBzdGF0ZUVkaXRvcjIpIHtcbiAgY29uc3QgeyBwYXRoLCBub2RlSWQsIHN0YXRlLCB0eXBlIH0gPSBwYXlsb2FkO1xuICBjb25zdCBpbnN0YW5jZSA9IGdldENvbXBvbmVudEluc3RhbmNlKGFjdGl2ZUFwcFJlY29yZC52YWx1ZSwgbm9kZUlkKTtcbiAgaWYgKCFpbnN0YW5jZSlcbiAgICByZXR1cm47XG4gIGNvbnN0IHRhcmdldFBhdGggPSBwYXRoLnNsaWNlKCk7XG4gIGxldCB0YXJnZXQyMjtcbiAgaWYgKE9iamVjdC5rZXlzKGluc3RhbmNlLnByb3BzKS5pbmNsdWRlcyhwYXRoWzBdKSkge1xuICAgIHRhcmdldDIyID0gaW5zdGFuY2UucHJvcHM7XG4gIH0gZWxzZSBpZiAoaW5zdGFuY2UuZGV2dG9vbHNSYXdTZXR1cFN0YXRlICYmIE9iamVjdC5rZXlzKGluc3RhbmNlLmRldnRvb2xzUmF3U2V0dXBTdGF0ZSkuaW5jbHVkZXMocGF0aFswXSkpIHtcbiAgICB0YXJnZXQyMiA9IGluc3RhbmNlLmRldnRvb2xzUmF3U2V0dXBTdGF0ZTtcbiAgfSBlbHNlIGlmIChpbnN0YW5jZS5kYXRhICYmIE9iamVjdC5rZXlzKGluc3RhbmNlLmRhdGEpLmluY2x1ZGVzKHBhdGhbMF0pKSB7XG4gICAgdGFyZ2V0MjIgPSBpbnN0YW5jZS5kYXRhO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldDIyID0gaW5zdGFuY2UucHJveHk7XG4gIH1cbiAgaWYgKHRhcmdldDIyICYmIHRhcmdldFBhdGgpIHtcbiAgICBpZiAoc3RhdGUudHlwZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlID09PSBcInJlYWN0aXZlXCIpIHtcbiAgICB9XG4gICAgc3RhdGVFZGl0b3IyLnNldCh0YXJnZXQyMiwgdGFyZ2V0UGF0aCwgc3RhdGUudmFsdWUsIHN0YXRlRWRpdG9yMi5jcmVhdGVEZWZhdWx0U2V0Q2FsbGJhY2soc3RhdGUpKTtcbiAgfVxufVxudmFyIHN0YXRlRWRpdG9yID0gbmV3IFN0YXRlRWRpdG9yKCk7XG5hc3luYyBmdW5jdGlvbiBlZGl0U3RhdGUocGF5bG9hZCkge1xuICBlZGl0Q29tcG9uZW50U3RhdGUocGF5bG9hZCwgc3RhdGVFZGl0b3IpO1xufVxuXG4vLyBzcmMvY29yZS9vcGVuLWluLWVkaXRvci9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQ1IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9jdHgvc3RhdGUudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgZ2xvYmFsLCBpc1VybFN0cmluZyB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuaW1wb3J0IHsgZGVib3VuY2UgYXMgZGVib3VuY2UzIH0gZnJvbSBcInBlcmZlY3QtZGVib3VuY2VcIjtcblxuLy8gc3JjL2NvcmUvdGltZWxpbmUvc3RvcmFnZS50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGlzQnJvd3NlciB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIFRJTUVMSU5FX0xBWUVSU19TVEFURV9TVE9SQUdFX0lEID0gXCJfX1ZVRV9ERVZUT09MU19LSVRfVElNRUxJTkVfTEFZRVJTX1NUQVRFX19cIjtcbmZ1bmN0aW9uIGFkZFRpbWVsaW5lTGF5ZXJzU3RhdGVUb1N0b3JhZ2Uoc3RhdGUpIHtcbiAgaWYgKCFpc0Jyb3dzZXIgfHwgdHlwZW9mIGxvY2FsU3RvcmFnZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBsb2NhbFN0b3JhZ2UgPT09IG51bGwpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oVElNRUxJTkVfTEFZRVJTX1NUQVRFX1NUT1JBR0VfSUQsIEpTT04uc3RyaW5naWZ5KHN0YXRlKSk7XG59XG5mdW5jdGlvbiBnZXRUaW1lbGluZUxheWVyc1N0YXRlRnJvbVN0b3JhZ2UoKSB7XG4gIGlmICghaXNCcm93c2VyIHx8IHR5cGVvZiBsb2NhbFN0b3JhZ2UgPT09IFwidW5kZWZpbmVkXCIgfHwgbG9jYWxTdG9yYWdlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlY29yZGluZ1N0YXRlOiBmYWxzZSxcbiAgICAgIG1vdXNlRXZlbnRFbmFibGVkOiBmYWxzZSxcbiAgICAgIGtleWJvYXJkRXZlbnRFbmFibGVkOiBmYWxzZSxcbiAgICAgIGNvbXBvbmVudEV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAgICBwZXJmb3JtYW5jZUV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAgICBzZWxlY3RlZDogXCJcIlxuICAgIH07XG4gIH1cbiAgY29uc3Qgc3RhdGUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShUSU1FTElORV9MQVlFUlNfU1RBVEVfU1RPUkFHRV9JRCk7XG4gIHJldHVybiBzdGF0ZSA/IEpTT04ucGFyc2Uoc3RhdGUpIDoge1xuICAgIHJlY29yZGluZ1N0YXRlOiBmYWxzZSxcbiAgICBtb3VzZUV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAga2V5Ym9hcmRFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgIGNvbXBvbmVudEV2ZW50RW5hYmxlZDogZmFsc2UsXG4gICAgcGVyZm9ybWFuY2VFdmVudEVuYWJsZWQ6IGZhbHNlLFxuICAgIHNlbGVjdGVkOiBcIlwiXG4gIH07XG59XG5cbi8vIHNyYy9jdHgvaG9vay50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGNyZWF0ZUhvb2tzIH0gZnJvbSBcImhvb2thYmxlXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSBhcyBkZWJvdW5jZTIgfSBmcm9tIFwicGVyZmVjdC1kZWJvdW5jZVwiO1xuXG4vLyBzcmMvY3R4L2luc3BlY3Rvci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQ0IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gXCJwZXJmZWN0LWRlYm91bmNlXCI7XG5cbi8vIHNyYy9jdHgvdGltZWxpbmUudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MyB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hMiwgX2IyO1xuKF9iMiA9IChfYTIgPSB0YXJnZXQzKS5fX1ZVRV9ERVZUT09MU19LSVRfVElNRUxJTkVfTEFZRVJTKSAhPSBudWxsID8gX2IyIDogX2EyLl9fVlVFX0RFVlRPT0xTX0tJVF9USU1FTElORV9MQVlFUlMgPSBbXTtcbnZhciBkZXZ0b29sc1RpbWVsaW5lTGF5ZXJzID0gbmV3IFByb3h5KHRhcmdldDMuX19WVUVfREVWVE9PTFNfS0lUX1RJTUVMSU5FX0xBWUVSUywge1xuICBnZXQodGFyZ2V0MjIsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgcmV0dXJuIFJlZmxlY3QuZ2V0KHRhcmdldDIyLCBwcm9wLCByZWNlaXZlcik7XG4gIH1cbn0pO1xuZnVuY3Rpb24gYWRkVGltZWxpbmVMYXllcihvcHRpb25zLCBkZXNjcmlwdG9yKSB7XG4gIGRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZVtkZXNjcmlwdG9yLmlkXSA9IGZhbHNlO1xuICBkZXZ0b29sc1RpbWVsaW5lTGF5ZXJzLnB1c2goe1xuICAgIC4uLm9wdGlvbnMsXG4gICAgZGVzY3JpcHRvcklkOiBkZXNjcmlwdG9yLmlkLFxuICAgIGFwcFJlY29yZDogZ2V0QXBwUmVjb3JkKGRlc2NyaXB0b3IuYXBwKVxuICB9KTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZVRpbWVsaW5lTGF5ZXJzU3RhdGUoc3RhdGUpIHtcbiAgY29uc3QgdXBkYXRlZFN0YXRlID0ge1xuICAgIC4uLmRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZSxcbiAgICAuLi5zdGF0ZVxuICB9O1xuICBhZGRUaW1lbGluZUxheWVyc1N0YXRlVG9TdG9yYWdlKHVwZGF0ZWRTdGF0ZSk7XG4gIHVwZGF0ZURldlRvb2xzU3RhdGUoe1xuICAgIHRpbWVsaW5lTGF5ZXJzU3RhdGU6IHVwZGF0ZWRTdGF0ZVxuICB9KTtcbn1cblxuLy8gc3JjL2N0eC9pbnNwZWN0b3IudHNcbnZhciBfYTMsIF9iMztcbihfYjMgPSAoX2EzID0gdGFyZ2V0NCkuX19WVUVfREVWVE9PTFNfS0lUX0lOU1BFQ1RPUl9fKSAhPSBudWxsID8gX2IzIDogX2EzLl9fVlVFX0RFVlRPT0xTX0tJVF9JTlNQRUNUT1JfXyA9IFtdO1xudmFyIGRldnRvb2xzSW5zcGVjdG9yID0gbmV3IFByb3h5KHRhcmdldDQuX19WVUVfREVWVE9PTFNfS0lUX0lOU1BFQ1RPUl9fLCB7XG4gIGdldCh0YXJnZXQyMiwgcHJvcCwgcmVjZWl2ZXIpIHtcbiAgICByZXR1cm4gUmVmbGVjdC5nZXQodGFyZ2V0MjIsIHByb3AsIHJlY2VpdmVyKTtcbiAgfVxufSk7XG52YXIgY2FsbEluc3BlY3RvclVwZGF0ZWRIb29rID0gZGVib3VuY2UoKCkgPT4ge1xuICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2soXCJzZW5kSW5zcGVjdG9yVG9DbGllbnRcIiAvKiBTRU5EX0lOU1BFQ1RPUl9UT19DTElFTlQgKi8sIGdldEFjdGl2ZUluc3BlY3RvcnMoKSk7XG59KTtcbmZ1bmN0aW9uIGFkZEluc3BlY3RvcihpbnNwZWN0b3IsIGRlc2NyaXB0b3IpIHtcbiAgdmFyIF9hMjUsIF9iMjU7XG4gIGRldnRvb2xzSW5zcGVjdG9yLnB1c2goe1xuICAgIG9wdGlvbnM6IGluc3BlY3RvcixcbiAgICBkZXNjcmlwdG9yLFxuICAgIHRyZWVGaWx0ZXJQbGFjZWhvbGRlcjogKF9hMjUgPSBpbnNwZWN0b3IudHJlZUZpbHRlclBsYWNlaG9sZGVyKSAhPSBudWxsID8gX2EyNSA6IFwiU2VhcmNoIHRyZWUuLi5cIixcbiAgICBzdGF0ZUZpbHRlclBsYWNlaG9sZGVyOiAoX2IyNSA9IGluc3BlY3Rvci5zdGF0ZUZpbHRlclBsYWNlaG9sZGVyKSAhPSBudWxsID8gX2IyNSA6IFwiU2VhcmNoIHN0YXRlLi4uXCIsXG4gICAgdHJlZUZpbHRlcjogXCJcIixcbiAgICBzZWxlY3RlZE5vZGVJZDogXCJcIixcbiAgICBhcHBSZWNvcmQ6IGdldEFwcFJlY29yZChkZXNjcmlwdG9yLmFwcClcbiAgfSk7XG4gIGNhbGxJbnNwZWN0b3JVcGRhdGVkSG9vaygpO1xufVxuZnVuY3Rpb24gZ2V0QWN0aXZlSW5zcGVjdG9ycygpIHtcbiAgcmV0dXJuIGRldnRvb2xzSW5zcGVjdG9yLmZpbHRlcigoaW5zcGVjdG9yKSA9PiBpbnNwZWN0b3IuZGVzY3JpcHRvci5hcHAgPT09IGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5hcHApLmZpbHRlcigoaW5zcGVjdG9yKSA9PiBpbnNwZWN0b3IuZGVzY3JpcHRvci5pZCAhPT0gXCJjb21wb25lbnRzXCIpLm1hcCgoaW5zcGVjdG9yKSA9PiB7XG4gICAgdmFyIF9hMjU7XG4gICAgY29uc3QgZGVzY3JpcHRvciA9IGluc3BlY3Rvci5kZXNjcmlwdG9yO1xuICAgIGNvbnN0IG9wdGlvbnMgPSBpbnNwZWN0b3Iub3B0aW9ucztcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IG9wdGlvbnMuaWQsXG4gICAgICBsYWJlbDogb3B0aW9ucy5sYWJlbCxcbiAgICAgIGxvZ286IGRlc2NyaXB0b3IubG9nbyxcbiAgICAgIGljb246IGBjdXN0b20taWMtYmFzZWxpbmUtJHsoX2EyNSA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWNvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucmVwbGFjZSgvXy9nLCBcIi1cIil9YCxcbiAgICAgIHBhY2thZ2VOYW1lOiBkZXNjcmlwdG9yLnBhY2thZ2VOYW1lLFxuICAgICAgaG9tZXBhZ2U6IGRlc2NyaXB0b3IuaG9tZXBhZ2UsXG4gICAgICBwbHVnaW5JZDogZGVzY3JpcHRvci5pZFxuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gZ2V0SW5zcGVjdG9ySW5mbyhpZCkge1xuICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaWQsIGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5hcHApO1xuICBpZiAoIWluc3BlY3RvcilcbiAgICByZXR1cm47XG4gIGNvbnN0IGRlc2NyaXB0b3IgPSBpbnNwZWN0b3IuZGVzY3JpcHRvcjtcbiAgY29uc3Qgb3B0aW9ucyA9IGluc3BlY3Rvci5vcHRpb25zO1xuICBjb25zdCB0aW1lbGluZUxheWVycyA9IGRldnRvb2xzVGltZWxpbmVMYXllcnMuZmlsdGVyKChsYXllcikgPT4gbGF5ZXIuZGVzY3JpcHRvcklkID09PSBkZXNjcmlwdG9yLmlkKS5tYXAoKGl0ZW0pID0+ICh7XG4gICAgaWQ6IGl0ZW0uaWQsXG4gICAgbGFiZWw6IGl0ZW0ubGFiZWwsXG4gICAgY29sb3I6IGl0ZW0uY29sb3JcbiAgfSkpO1xuICByZXR1cm4ge1xuICAgIGlkOiBvcHRpb25zLmlkLFxuICAgIGxhYmVsOiBvcHRpb25zLmxhYmVsLFxuICAgIGxvZ286IGRlc2NyaXB0b3IubG9nbyxcbiAgICBwYWNrYWdlTmFtZTogZGVzY3JpcHRvci5wYWNrYWdlTmFtZSxcbiAgICBob21lcGFnZTogZGVzY3JpcHRvci5ob21lcGFnZSxcbiAgICB0aW1lbGluZUxheWVycyxcbiAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6IGluc3BlY3Rvci50cmVlRmlsdGVyUGxhY2Vob2xkZXIsXG4gICAgc3RhdGVGaWx0ZXJQbGFjZWhvbGRlcjogaW5zcGVjdG9yLnN0YXRlRmlsdGVyUGxhY2Vob2xkZXJcbiAgfTtcbn1cbmZ1bmN0aW9uIGdldEluc3BlY3RvcihpZCwgYXBwKSB7XG4gIHJldHVybiBkZXZ0b29sc0luc3BlY3Rvci5maW5kKChpbnNwZWN0b3IpID0+IGluc3BlY3Rvci5vcHRpb25zLmlkID09PSBpZCAmJiAoYXBwID8gaW5zcGVjdG9yLmRlc2NyaXB0b3IuYXBwID09PSBhcHAgOiB0cnVlKSk7XG59XG5mdW5jdGlvbiBnZXRJbnNwZWN0b3JBY3Rpb25zKGlkKSB7XG4gIGNvbnN0IGluc3BlY3RvciA9IGdldEluc3BlY3RvcihpZCk7XG4gIHJldHVybiBpbnNwZWN0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3BlY3Rvci5vcHRpb25zLmFjdGlvbnM7XG59XG5mdW5jdGlvbiBnZXRJbnNwZWN0b3JOb2RlQWN0aW9ucyhpZCkge1xuICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaWQpO1xuICByZXR1cm4gaW5zcGVjdG9yID09IG51bGwgPyB2b2lkIDAgOiBpbnNwZWN0b3Iub3B0aW9ucy5ub2RlQWN0aW9ucztcbn1cblxuLy8gc3JjL2N0eC9ob29rLnRzXG52YXIgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzID0gLyogQF9fUFVSRV9fICovICgoRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMikgPT4ge1xuICBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMyW1wiVklTSVRfQ09NUE9ORU5UX1RSRUVcIl0gPSBcInZpc2l0Q29tcG9uZW50VHJlZVwiO1xuICBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMyW1wiSU5TUEVDVF9DT01QT05FTlRcIl0gPSBcImluc3BlY3RDb21wb25lbnRcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIkVESVRfQ09NUE9ORU5UX1NUQVRFXCJdID0gXCJlZGl0Q29tcG9uZW50U3RhdGVcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIkdFVF9JTlNQRUNUT1JfVFJFRVwiXSA9IFwiZ2V0SW5zcGVjdG9yVHJlZVwiO1xuICBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMyW1wiR0VUX0lOU1BFQ1RPUl9TVEFURVwiXSA9IFwiZ2V0SW5zcGVjdG9yU3RhdGVcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIkVESVRfSU5TUEVDVE9SX1NUQVRFXCJdID0gXCJlZGl0SW5zcGVjdG9yU3RhdGVcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIklOU1BFQ1RfVElNRUxJTkVfRVZFTlRcIl0gPSBcImluc3BlY3RUaW1lbGluZUV2ZW50XCI7XG4gIERldlRvb2xzVjZQbHVnaW5BUElIb29rS2V5czJbXCJUSU1FTElORV9DTEVBUkVEXCJdID0gXCJ0aW1lbGluZUNsZWFyZWRcIjtcbiAgRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzMltcIlNFVF9QTFVHSU5fU0VUVElOR1NcIl0gPSBcInNldFBsdWdpblNldHRpbmdzXCI7XG4gIHJldHVybiBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMyO1xufSkoRGV2VG9vbHNWNlBsdWdpbkFQSUhvb2tLZXlzIHx8IHt9KTtcbnZhciBEZXZUb29sc0NvbnRleHRIb29rS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyAoKERldlRvb2xzQ29udGV4dEhvb2tLZXlzMikgPT4ge1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJBRERfSU5TUEVDVE9SXCJdID0gXCJhZGRJbnNwZWN0b3JcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiU0VORF9JTlNQRUNUT1JfVFJFRVwiXSA9IFwic2VuZEluc3BlY3RvclRyZWVcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiU0VORF9JTlNQRUNUT1JfU1RBVEVcIl0gPSBcInNlbmRJbnNwZWN0b3JTdGF0ZVwiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJDVVNUT01fSU5TUEVDVE9SX1NFTEVDVF9OT0RFXCJdID0gXCJjdXN0b21JbnNwZWN0b3JTZWxlY3ROb2RlXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIlRJTUVMSU5FX0xBWUVSX0FEREVEXCJdID0gXCJ0aW1lbGluZUxheWVyQWRkZWRcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiVElNRUxJTkVfRVZFTlRfQURERURcIl0gPSBcInRpbWVsaW5lRXZlbnRBZGRlZFwiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJHRVRfQ09NUE9ORU5UX0lOU1RBTkNFU1wiXSA9IFwiZ2V0Q29tcG9uZW50SW5zdGFuY2VzXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIkdFVF9DT01QT05FTlRfQk9VTkRTXCJdID0gXCJnZXRDb21wb25lbnRCb3VuZHNcIjtcbiAgRGV2VG9vbHNDb250ZXh0SG9va0tleXMyW1wiR0VUX0NPTVBPTkVOVF9OQU1FXCJdID0gXCJnZXRDb21wb25lbnROYW1lXCI7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzMltcIkNPTVBPTkVOVF9ISUdITElHSFRcIl0gPSBcImNvbXBvbmVudEhpZ2hsaWdodFwiO1xuICBEZXZUb29sc0NvbnRleHRIb29rS2V5czJbXCJDT01QT05FTlRfVU5ISUdITElHSFRcIl0gPSBcImNvbXBvbmVudFVuaGlnaGxpZ2h0XCI7XG4gIHJldHVybiBEZXZUb29sc0NvbnRleHRIb29rS2V5czI7XG59KShEZXZUb29sc0NvbnRleHRIb29rS2V5cyB8fCB7fSk7XG52YXIgRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5cyA9IC8qIEBfX1BVUkVfXyAqLyAoKERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyKSA9PiB7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiU0VORF9JTlNQRUNUT1JfVFJFRV9UT19DTElFTlRcIl0gPSBcInNlbmRJbnNwZWN0b3JUcmVlVG9DbGllbnRcIjtcbiAgRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5czJbXCJTRU5EX0lOU1BFQ1RPUl9TVEFURV9UT19DTElFTlRcIl0gPSBcInNlbmRJbnNwZWN0b3JTdGF0ZVRvQ2xpZW50XCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiU0VORF9USU1FTElORV9FVkVOVF9UT19DTElFTlRcIl0gPSBcInNlbmRUaW1lbGluZUV2ZW50VG9DbGllbnRcIjtcbiAgRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5czJbXCJTRU5EX0lOU1BFQ1RPUl9UT19DTElFTlRcIl0gPSBcInNlbmRJbnNwZWN0b3JUb0NsaWVudFwiO1xuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzMltcIlNFTkRfQUNUSVZFX0FQUF9VTk1PVU5URURfVE9fQ0xJRU5UXCJdID0gXCJzZW5kQWN0aXZlQXBwVXBkYXRlZFRvQ2xpZW50XCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiREVWVE9PTFNfU1RBVEVfVVBEQVRFRFwiXSA9IFwiZGV2dG9vbHNTdGF0ZVVwZGF0ZWRcIjtcbiAgRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5czJbXCJERVZUT09MU19DT05ORUNURURfVVBEQVRFRFwiXSA9IFwiZGV2dG9vbHNDb25uZWN0ZWRVcGRhdGVkXCI7XG4gIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyW1wiUk9VVEVSX0lORk9fVVBEQVRFRFwiXSA9IFwicm91dGVySW5mb1VwZGF0ZWRcIjtcbiAgcmV0dXJuIERldlRvb2xzTWVzc2FnaW5nSG9va0tleXMyO1xufSkoRGV2VG9vbHNNZXNzYWdpbmdIb29rS2V5cyB8fCB7fSk7XG5mdW5jdGlvbiBjcmVhdGVEZXZUb29sc0N0eEhvb2tzKCkge1xuICBjb25zdCBob29rczIgPSBjcmVhdGVIb29rcygpO1xuICBob29rczIuaG9vayhcImFkZEluc3BlY3RvclwiIC8qIEFERF9JTlNQRUNUT1IgKi8sICh7IGluc3BlY3RvciwgcGx1Z2luIH0pID0+IHtcbiAgICBhZGRJbnNwZWN0b3IoaW5zcGVjdG9yLCBwbHVnaW4uZGVzY3JpcHRvcik7XG4gIH0pO1xuICBjb25zdCBkZWJvdW5jZVNlbmRJbnNwZWN0b3JUcmVlID0gZGVib3VuY2UyKGFzeW5jICh7IGluc3BlY3RvcklkLCBwbHVnaW4gfSkgPT4ge1xuICAgIHZhciBfYTI1O1xuICAgIGlmICghaW5zcGVjdG9ySWQgfHwgISgoX2EyNSA9IHBsdWdpbiA9PSBudWxsID8gdm9pZCAwIDogcGx1Z2luLmRlc2NyaXB0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmFwcCkgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGluc3BlY3RvciA9IGdldEluc3BlY3RvcihpbnNwZWN0b3JJZCwgcGx1Z2luLmRlc2NyaXB0b3IuYXBwKTtcbiAgICBjb25zdCBfcGF5bG9hZCA9IHtcbiAgICAgIGFwcDogcGx1Z2luLmRlc2NyaXB0b3IuYXBwLFxuICAgICAgaW5zcGVjdG9ySWQsXG4gICAgICBmaWx0ZXI6IChpbnNwZWN0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3BlY3Rvci50cmVlRmlsdGVyKSB8fCBcIlwiLFxuICAgICAgcm9vdE5vZGVzOiBbXVxuICAgIH07XG4gICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChjYikgPT4gY2IoX3BheWxvYWQpKSk7XG4gICAgICAgIHJlc29sdmUoKTtcbiAgICAgIH0sIFwiZ2V0SW5zcGVjdG9yVHJlZVwiIC8qIEdFVF9JTlNQRUNUT1JfVFJFRSAqLyk7XG4gICAgfSk7XG4gICAgaG9va3MyLmNhbGxIb29rV2l0aChhc3luYyAoY2FsbGJhY2tzKSA9PiB7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChjYikgPT4gY2Ioe1xuICAgICAgICBpbnNwZWN0b3JJZCxcbiAgICAgICAgcm9vdE5vZGVzOiBfcGF5bG9hZC5yb290Tm9kZXNcbiAgICAgIH0pKSk7XG4gICAgfSwgXCJzZW5kSW5zcGVjdG9yVHJlZVRvQ2xpZW50XCIgLyogU0VORF9JTlNQRUNUT1JfVFJFRV9UT19DTElFTlQgKi8pO1xuICB9LCAxMjApO1xuICBob29rczIuaG9vayhcInNlbmRJbnNwZWN0b3JUcmVlXCIgLyogU0VORF9JTlNQRUNUT1JfVFJFRSAqLywgZGVib3VuY2VTZW5kSW5zcGVjdG9yVHJlZSk7XG4gIGNvbnN0IGRlYm91bmNlU2VuZEluc3BlY3RvclN0YXRlID0gZGVib3VuY2UyKGFzeW5jICh7IGluc3BlY3RvcklkLCBwbHVnaW4gfSkgPT4ge1xuICAgIHZhciBfYTI1O1xuICAgIGlmICghaW5zcGVjdG9ySWQgfHwgISgoX2EyNSA9IHBsdWdpbiA9PSBudWxsID8gdm9pZCAwIDogcGx1Z2luLmRlc2NyaXB0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmFwcCkgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGluc3BlY3RvciA9IGdldEluc3BlY3RvcihpbnNwZWN0b3JJZCwgcGx1Z2luLmRlc2NyaXB0b3IuYXBwKTtcbiAgICBjb25zdCBfcGF5bG9hZCA9IHtcbiAgICAgIGFwcDogcGx1Z2luLmRlc2NyaXB0b3IuYXBwLFxuICAgICAgaW5zcGVjdG9ySWQsXG4gICAgICBub2RlSWQ6IChpbnNwZWN0b3IgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3BlY3Rvci5zZWxlY3RlZE5vZGVJZCkgfHwgXCJcIixcbiAgICAgIHN0YXRlOiBudWxsXG4gICAgfTtcbiAgICBjb25zdCBjdHggPSB7XG4gICAgICBjdXJyZW50VGFiOiBgY3VzdG9tLWluc3BlY3Rvcjoke2luc3BlY3RvcklkfWBcbiAgICB9O1xuICAgIGlmIChfcGF5bG9hZC5ub2RlSWQpIHtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrcy5tYXAoKGNiKSA9PiBjYihfcGF5bG9hZCwgY3R4KSkpO1xuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSwgXCJnZXRJbnNwZWN0b3JTdGF0ZVwiIC8qIEdFVF9JTlNQRUNUT1JfU1RBVEUgKi8pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcCgoY2IpID0+IGNiKHtcbiAgICAgICAgaW5zcGVjdG9ySWQsXG4gICAgICAgIG5vZGVJZDogX3BheWxvYWQubm9kZUlkLFxuICAgICAgICBzdGF0ZTogX3BheWxvYWQuc3RhdGVcbiAgICAgIH0pKSk7XG4gICAgfSwgXCJzZW5kSW5zcGVjdG9yU3RhdGVUb0NsaWVudFwiIC8qIFNFTkRfSU5TUEVDVE9SX1NUQVRFX1RPX0NMSUVOVCAqLyk7XG4gIH0sIDEyMCk7XG4gIGhvb2tzMi5ob29rKFwic2VuZEluc3BlY3RvclN0YXRlXCIgLyogU0VORF9JTlNQRUNUT1JfU1RBVEUgKi8sIGRlYm91bmNlU2VuZEluc3BlY3RvclN0YXRlKTtcbiAgaG9va3MyLmhvb2soXCJjdXN0b21JbnNwZWN0b3JTZWxlY3ROb2RlXCIgLyogQ1VTVE9NX0lOU1BFQ1RPUl9TRUxFQ1RfTk9ERSAqLywgKHsgaW5zcGVjdG9ySWQsIG5vZGVJZCwgcGx1Z2luIH0pID0+IHtcbiAgICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaW5zcGVjdG9ySWQsIHBsdWdpbi5kZXNjcmlwdG9yLmFwcCk7XG4gICAgaWYgKCFpbnNwZWN0b3IpXG4gICAgICByZXR1cm47XG4gICAgaW5zcGVjdG9yLnNlbGVjdGVkTm9kZUlkID0gbm9kZUlkO1xuICB9KTtcbiAgaG9va3MyLmhvb2soXCJ0aW1lbGluZUxheWVyQWRkZWRcIiAvKiBUSU1FTElORV9MQVlFUl9BRERFRCAqLywgKHsgb3B0aW9ucywgcGx1Z2luIH0pID0+IHtcbiAgICBhZGRUaW1lbGluZUxheWVyKG9wdGlvbnMsIHBsdWdpbi5kZXNjcmlwdG9yKTtcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwidGltZWxpbmVFdmVudEFkZGVkXCIgLyogVElNRUxJTkVfRVZFTlRfQURERUQgKi8sICh7IG9wdGlvbnMsIHBsdWdpbiB9KSA9PiB7XG4gICAgdmFyIF9hMjU7XG4gICAgY29uc3QgaW50ZXJuYWxMYXllcklkcyA9IFtcInBlcmZvcm1hbmNlXCIsIFwiY29tcG9uZW50LWV2ZW50XCIsIFwia2V5Ym9hcmRcIiwgXCJtb3VzZVwiXTtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkIHx8ICEoKF9hMjUgPSBkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1W3BsdWdpbi5kZXNjcmlwdG9yLmlkXSkgJiYgIWludGVybmFsTGF5ZXJJZHMuaW5jbHVkZXMob3B0aW9ucy5sYXllcklkKSlcbiAgICAgIHJldHVybjtcbiAgICBob29rczIuY2FsbEhvb2tXaXRoKGFzeW5jIChjYWxsYmFja3MpID0+IHtcbiAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrcy5tYXAoKGNiKSA9PiBjYihvcHRpb25zKSkpO1xuICAgIH0sIFwic2VuZFRpbWVsaW5lRXZlbnRUb0NsaWVudFwiIC8qIFNFTkRfVElNRUxJTkVfRVZFTlRfVE9fQ0xJRU5UICovKTtcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwiZ2V0Q29tcG9uZW50SW5zdGFuY2VzXCIgLyogR0VUX0NPTVBPTkVOVF9JTlNUQU5DRVMgKi8sIGFzeW5jICh7IGFwcCB9KSA9PiB7XG4gICAgY29uc3QgYXBwUmVjb3JkID0gYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9fO1xuICAgIGlmICghYXBwUmVjb3JkKVxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgYXBwSWQgPSBhcHBSZWNvcmQuaWQudG9TdHJpbmcoKTtcbiAgICBjb25zdCBpbnN0YW5jZXMgPSBbLi4uYXBwUmVjb3JkLmluc3RhbmNlTWFwXS5maWx0ZXIoKFtrZXldKSA9PiBrZXkuc3BsaXQoXCI6XCIpWzBdID09PSBhcHBJZCkubWFwKChbLCBpbnN0YW5jZV0pID0+IGluc3RhbmNlKTtcbiAgICByZXR1cm4gaW5zdGFuY2VzO1xuICB9KTtcbiAgaG9va3MyLmhvb2soXCJnZXRDb21wb25lbnRCb3VuZHNcIiAvKiBHRVRfQ09NUE9ORU5UX0JPVU5EUyAqLywgYXN5bmMgKHsgaW5zdGFuY2UgfSkgPT4ge1xuICAgIGNvbnN0IGJvdW5kcyA9IGdldENvbXBvbmVudEJvdW5kaW5nUmVjdChpbnN0YW5jZSk7XG4gICAgcmV0dXJuIGJvdW5kcztcbiAgfSk7XG4gIGhvb2tzMi5ob29rKFwiZ2V0Q29tcG9uZW50TmFtZVwiIC8qIEdFVF9DT01QT05FTlRfTkFNRSAqLywgKHsgaW5zdGFuY2UgfSkgPT4ge1xuICAgIGNvbnN0IG5hbWUgPSBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpO1xuICAgIHJldHVybiBuYW1lO1xuICB9KTtcbiAgaG9va3MyLmhvb2soXCJjb21wb25lbnRIaWdobGlnaHRcIiAvKiBDT01QT05FTlRfSElHSExJR0hUICovLCAoeyB1aWQgfSkgPT4ge1xuICAgIGNvbnN0IGluc3RhbmNlID0gYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmluc3RhbmNlTWFwLmdldCh1aWQpO1xuICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgaGlnaGxpZ2h0KGluc3RhbmNlKTtcbiAgICB9XG4gIH0pO1xuICBob29rczIuaG9vayhcImNvbXBvbmVudFVuaGlnaGxpZ2h0XCIgLyogQ09NUE9ORU5UX1VOSElHSExJR0hUICovLCAoKSA9PiB7XG4gICAgdW5oaWdobGlnaHQoKTtcbiAgfSk7XG4gIHJldHVybiBob29rczI7XG59XG5cbi8vIHNyYy9jdHgvc3RhdGUudHNcbnZhciBfYTQsIF9iNDtcbihfYjQgPSAoX2E0ID0gZ2xvYmFsKS5fX1ZVRV9ERVZUT09MU19LSVRfQVBQX1JFQ09SRFNfXykgIT0gbnVsbCA/IF9iNCA6IF9hNC5fX1ZVRV9ERVZUT09MU19LSVRfQVBQX1JFQ09SRFNfXyA9IFtdO1xudmFyIF9hNSwgX2I1O1xuKF9iNSA9IChfYTUgPSBnbG9iYWwpLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fKSAhPSBudWxsID8gX2I1IDogX2E1Ll9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fID0ge307XG52YXIgX2E2LCBfYjY7XG4oX2I2ID0gKF9hNiA9IGdsb2JhbCkuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX0lEX18pICE9IG51bGwgPyBfYjYgOiBfYTYuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX0lEX18gPSBcIlwiO1xudmFyIF9hNywgX2I3O1xuKF9iNyA9IChfYTcgPSBnbG9iYWwpLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fVEFCU19fKSAhPSBudWxsID8gX2I3IDogX2E3Ll9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fVEFCU19fID0gW107XG52YXIgX2E4LCBfYjg7XG4oX2I4ID0gKF9hOCA9IGdsb2JhbCkuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9DT01NQU5EU19fKSAhPSBudWxsID8gX2I4IDogX2E4Ll9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfXyA9IFtdO1xudmFyIFNUQVRFX0tFWSA9IFwiX19WVUVfREVWVE9PTFNfS0lUX0dMT0JBTF9TVEFURV9fXCI7XG5mdW5jdGlvbiBpbml0U3RhdGVGYWN0b3J5KCkge1xuICByZXR1cm4ge1xuICAgIGNvbm5lY3RlZDogZmFsc2UsXG4gICAgY2xpZW50Q29ubmVjdGVkOiBmYWxzZSxcbiAgICB2aXRlUGx1Z2luRGV0ZWN0ZWQ6IHRydWUsXG4gICAgYXBwUmVjb3JkczogW10sXG4gICAgYWN0aXZlQXBwUmVjb3JkSWQ6IFwiXCIsXG4gICAgdGFiczogW10sXG4gICAgY29tbWFuZHM6IFtdLFxuICAgIGhpZ2hQZXJmTW9kZUVuYWJsZWQ6IHRydWUsXG4gICAgZGV2dG9vbHNDbGllbnREZXRlY3RlZDoge30sXG4gICAgcGVyZlVuaXF1ZUdyb3VwSWQ6IDAsXG4gICAgdGltZWxpbmVMYXllcnNTdGF0ZTogZ2V0VGltZWxpbmVMYXllcnNTdGF0ZUZyb21TdG9yYWdlKClcbiAgfTtcbn1cbnZhciBfYTksIF9iOTtcbihfYjkgPSAoX2E5ID0gZ2xvYmFsKVtTVEFURV9LRVldKSAhPSBudWxsID8gX2I5IDogX2E5W1NUQVRFX0tFWV0gPSBpbml0U3RhdGVGYWN0b3J5KCk7XG52YXIgY2FsbFN0YXRlVXBkYXRlZEhvb2sgPSBkZWJvdW5jZTMoKHN0YXRlKSA9PiB7XG4gIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9vayhcImRldnRvb2xzU3RhdGVVcGRhdGVkXCIgLyogREVWVE9PTFNfU1RBVEVfVVBEQVRFRCAqLywgeyBzdGF0ZSB9KTtcbn0pO1xudmFyIGNhbGxDb25uZWN0ZWRVcGRhdGVkSG9vayA9IGRlYm91bmNlMygoc3RhdGUsIG9sZFN0YXRlKSA9PiB7XG4gIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9vayhcImRldnRvb2xzQ29ubmVjdGVkVXBkYXRlZFwiIC8qIERFVlRPT0xTX0NPTk5FQ1RFRF9VUERBVEVEICovLCB7IHN0YXRlLCBvbGRTdGF0ZSB9KTtcbn0pO1xudmFyIGRldnRvb2xzQXBwUmVjb3JkcyA9IG5ldyBQcm94eShnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18sIHtcbiAgZ2V0KF90YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgaWYgKHByb3AgPT09IFwidmFsdWVcIilcbiAgICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX187XG4gICAgcmV0dXJuIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQVBQX1JFQ09SRFNfX1twcm9wXTtcbiAgfVxufSk7XG52YXIgYWRkRGV2VG9vbHNBcHBSZWNvcmQgPSAoYXBwKSA9PiB7XG4gIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQVBQX1JFQ09SRFNfXyA9IFtcbiAgICAuLi5nbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18sXG4gICAgYXBwXG4gIF07XG59O1xudmFyIHJlbW92ZURldlRvb2xzQXBwUmVjb3JkID0gKGFwcCkgPT4ge1xuICBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FQUF9SRUNPUkRTX18gPSBkZXZ0b29sc0FwcFJlY29yZHMudmFsdWUuZmlsdGVyKChyZWNvcmQpID0+IHJlY29yZC5hcHAgIT09IGFwcCk7XG59O1xudmFyIGFjdGl2ZUFwcFJlY29yZCA9IG5ldyBQcm94eShnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX18sIHtcbiAgZ2V0KF90YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgaWYgKHByb3AgPT09IFwidmFsdWVcIilcbiAgICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0FDVElWRV9BUFBfUkVDT1JEX187XG4gICAgZWxzZSBpZiAocHJvcCA9PT0gXCJpZFwiKVxuICAgICAgcmV0dXJuIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfSURfXztcbiAgICByZXR1cm4gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fW3Byb3BdO1xuICB9XG59KTtcbmZ1bmN0aW9uIHVwZGF0ZUFsbFN0YXRlcygpIHtcbiAgY2FsbFN0YXRlVXBkYXRlZEhvb2soe1xuICAgIC4uLmdsb2JhbFtTVEFURV9LRVldLFxuICAgIGFwcFJlY29yZHM6IGRldnRvb2xzQXBwUmVjb3Jkcy52YWx1ZSxcbiAgICBhY3RpdmVBcHBSZWNvcmRJZDogYWN0aXZlQXBwUmVjb3JkLmlkLFxuICAgIHRhYnM6IGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX1RBQlNfXyxcbiAgICBjb21tYW5kczogZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfX1xuICB9KTtcbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUFwcFJlY29yZChhcHApIHtcbiAgZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9BQ1RJVkVfQVBQX1JFQ09SRF9fID0gYXBwO1xuICB1cGRhdGVBbGxTdGF0ZXMoKTtcbn1cbmZ1bmN0aW9uIHNldEFjdGl2ZUFwcFJlY29yZElkKGlkKSB7XG4gIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQUNUSVZFX0FQUF9SRUNPUkRfSURfXyA9IGlkO1xuICB1cGRhdGVBbGxTdGF0ZXMoKTtcbn1cbnZhciBkZXZ0b29sc1N0YXRlID0gbmV3IFByb3h5KGdsb2JhbFtTVEFURV9LRVldLCB7XG4gIGdldCh0YXJnZXQyMiwgcHJvcGVydHkpIHtcbiAgICBpZiAocHJvcGVydHkgPT09IFwiYXBwUmVjb3Jkc1wiKSB7XG4gICAgICByZXR1cm4gZGV2dG9vbHNBcHBSZWNvcmRzO1xuICAgIH0gZWxzZSBpZiAocHJvcGVydHkgPT09IFwiYWN0aXZlQXBwUmVjb3JkSWRcIikge1xuICAgICAgcmV0dXJuIGFjdGl2ZUFwcFJlY29yZC5pZDtcbiAgICB9IGVsc2UgaWYgKHByb3BlcnR5ID09PSBcInRhYnNcIikge1xuICAgICAgcmV0dXJuIGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX1RBQlNfXztcbiAgICB9IGVsc2UgaWYgKHByb3BlcnR5ID09PSBcImNvbW1hbmRzXCIpIHtcbiAgICAgIHJldHVybiBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9DT01NQU5EU19fO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsW1NUQVRFX0tFWV1bcHJvcGVydHldO1xuICB9LFxuICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQyMiwgcHJvcGVydHkpIHtcbiAgICBkZWxldGUgdGFyZ2V0MjJbcHJvcGVydHldO1xuICAgIHJldHVybiB0cnVlO1xuICB9LFxuICBzZXQodGFyZ2V0MjIsIHByb3BlcnR5LCB2YWx1ZSkge1xuICAgIGNvbnN0IG9sZFN0YXRlID0geyAuLi5nbG9iYWxbU1RBVEVfS0VZXSB9O1xuICAgIHRhcmdldDIyW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIGdsb2JhbFtTVEFURV9LRVldW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59KTtcbmZ1bmN0aW9uIHJlc2V0RGV2VG9vbHNTdGF0ZSgpIHtcbiAgT2JqZWN0LmFzc2lnbihnbG9iYWxbU1RBVEVfS0VZXSwgaW5pdFN0YXRlRmFjdG9yeSgpKTtcbn1cbmZ1bmN0aW9uIHVwZGF0ZURldlRvb2xzU3RhdGUoc3RhdGUpIHtcbiAgY29uc3Qgb2xkU3RhdGUgPSB7XG4gICAgLi4uZ2xvYmFsW1NUQVRFX0tFWV0sXG4gICAgYXBwUmVjb3JkczogZGV2dG9vbHNBcHBSZWNvcmRzLnZhbHVlLFxuICAgIGFjdGl2ZUFwcFJlY29yZElkOiBhY3RpdmVBcHBSZWNvcmQuaWRcbiAgfTtcbiAgaWYgKG9sZFN0YXRlLmNvbm5lY3RlZCAhPT0gc3RhdGUuY29ubmVjdGVkICYmIHN0YXRlLmNvbm5lY3RlZCB8fCBvbGRTdGF0ZS5jbGllbnRDb25uZWN0ZWQgIT09IHN0YXRlLmNsaWVudENvbm5lY3RlZCAmJiBzdGF0ZS5jbGllbnRDb25uZWN0ZWQpIHtcbiAgICBjYWxsQ29ubmVjdGVkVXBkYXRlZEhvb2soZ2xvYmFsW1NUQVRFX0tFWV0sIG9sZFN0YXRlKTtcbiAgfVxuICBPYmplY3QuYXNzaWduKGdsb2JhbFtTVEFURV9LRVldLCBzdGF0ZSk7XG4gIHVwZGF0ZUFsbFN0YXRlcygpO1xufVxuZnVuY3Rpb24gb25EZXZUb29sc0Nvbm5lY3RlZChmbikge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5jb25uZWN0ZWQpIHtcbiAgICAgIGZuKCk7XG4gICAgICByZXNvbHZlKCk7XG4gICAgfVxuICAgIGRldnRvb2xzQ29udGV4dC5ob29rcy5ob29rKFwiZGV2dG9vbHNDb25uZWN0ZWRVcGRhdGVkXCIgLyogREVWVE9PTFNfQ09OTkVDVEVEX1VQREFURUQgKi8sICh7IHN0YXRlIH0pID0+IHtcbiAgICAgIGlmIChzdGF0ZS5jb25uZWN0ZWQpIHtcbiAgICAgICAgZm4oKTtcbiAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbn1cbnZhciByZXNvbHZlSWNvbiA9IChpY29uKSA9PiB7XG4gIGlmICghaWNvbilcbiAgICByZXR1cm47XG4gIGlmIChpY29uLnN0YXJ0c1dpdGgoXCJiYXNlbGluZS1cIikpIHtcbiAgICByZXR1cm4gYGN1c3RvbS1pYy0ke2ljb259YDtcbiAgfVxuICBpZiAoaWNvbi5zdGFydHNXaXRoKFwiaS1cIikgfHwgaXNVcmxTdHJpbmcoaWNvbikpXG4gICAgcmV0dXJuIGljb247XG4gIHJldHVybiBgY3VzdG9tLWljLWJhc2VsaW5lLSR7aWNvbn1gO1xufTtcbmZ1bmN0aW9uIGFkZEN1c3RvbVRhYih0YWIpIHtcbiAgY29uc3QgdGFicyA9IGdsb2JhbC5fX1ZVRV9ERVZUT09MU19LSVRfQ1VTVE9NX1RBQlNfXztcbiAgaWYgKHRhYnMuc29tZSgodCkgPT4gdC5uYW1lID09PSB0YWIubmFtZSkpXG4gICAgcmV0dXJuO1xuICB0YWJzLnB1c2goe1xuICAgIC4uLnRhYixcbiAgICBpY29uOiByZXNvbHZlSWNvbih0YWIuaWNvbilcbiAgfSk7XG4gIHVwZGF0ZUFsbFN0YXRlcygpO1xufVxuZnVuY3Rpb24gYWRkQ3VzdG9tQ29tbWFuZChhY3Rpb24pIHtcbiAgY29uc3QgY29tbWFuZHMgPSBnbG9iYWwuX19WVUVfREVWVE9PTFNfS0lUX0NVU1RPTV9DT01NQU5EU19fO1xuICBpZiAoY29tbWFuZHMuc29tZSgodCkgPT4gdC5pZCA9PT0gYWN0aW9uLmlkKSlcbiAgICByZXR1cm47XG4gIGNvbW1hbmRzLnB1c2goe1xuICAgIC4uLmFjdGlvbixcbiAgICBpY29uOiByZXNvbHZlSWNvbihhY3Rpb24uaWNvbiksXG4gICAgY2hpbGRyZW46IGFjdGlvbi5jaGlsZHJlbiA/IGFjdGlvbi5jaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiAoe1xuICAgICAgLi4uY2hpbGQsXG4gICAgICBpY29uOiByZXNvbHZlSWNvbihjaGlsZC5pY29uKVxuICAgIH0pKSA6IHZvaWQgMFxuICB9KTtcbiAgdXBkYXRlQWxsU3RhdGVzKCk7XG59XG5mdW5jdGlvbiByZW1vdmVDdXN0b21Db21tYW5kKGFjdGlvbklkKSB7XG4gIGNvbnN0IGNvbW1hbmRzID0gZ2xvYmFsLl9fVlVFX0RFVlRPT0xTX0tJVF9DVVNUT01fQ09NTUFORFNfXztcbiAgY29uc3QgaW5kZXggPSBjb21tYW5kcy5maW5kSW5kZXgoKHQpID0+IHQuaWQgPT09IGFjdGlvbklkKTtcbiAgaWYgKGluZGV4ID09PSAtMSlcbiAgICByZXR1cm47XG4gIGNvbW1hbmRzLnNwbGljZShpbmRleCwgMSk7XG4gIHVwZGF0ZUFsbFN0YXRlcygpO1xufVxuZnVuY3Rpb24gdG9nZ2xlQ2xpZW50Q29ubmVjdGVkKHN0YXRlKSB7XG4gIHVwZGF0ZURldlRvb2xzU3RhdGUoeyBjbGllbnRDb25uZWN0ZWQ6IHN0YXRlIH0pO1xufVxuXG4vLyBzcmMvY29yZS9vcGVuLWluLWVkaXRvci9pbmRleC50c1xuZnVuY3Rpb24gc2V0T3BlbkluRWRpdG9yQmFzZVVybCh1cmwpIHtcbiAgdGFyZ2V0NS5fX1ZVRV9ERVZUT09MU19PUEVOX0lOX0VESVRPUl9CQVNFX1VSTF9fID0gdXJsO1xufVxuZnVuY3Rpb24gb3BlbkluRWRpdG9yKG9wdGlvbnMgPSB7fSkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGNvbnN0IHsgZmlsZSwgaG9zdCwgYmFzZVVybCA9IHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4sIGxpbmUgPSAwLCBjb2x1bW4gPSAwIH0gPSBvcHRpb25zO1xuICBpZiAoZmlsZSkge1xuICAgIGlmIChob3N0ID09PSBcImNocm9tZS1leHRlbnNpb25cIikge1xuICAgICAgY29uc3QgZmlsZU5hbWUgPSBmaWxlLnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKTtcbiAgICAgIGNvbnN0IF9iYXNlVXJsID0gKF9iMjUgPSAoX2EyNSA9IHdpbmRvdy5WVUVfREVWVE9PTFNfQ09ORklHKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5vcGVuSW5FZGl0b3JIb3N0KSAhPSBudWxsID8gX2IyNSA6IFwiL1wiO1xuICAgICAgZmV0Y2goYCR7X2Jhc2VVcmx9X19vcGVuLWluLWVkaXRvcj9maWxlPSR7ZW5jb2RlVVJJKGZpbGUpfWApLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgICBjb25zdCBtc2cgPSBgT3BlbmluZyBjb21wb25lbnQgJHtmaWxlTmFtZX0gZmFpbGVkYDtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgJWMke21zZ31gLCBcImNvbG9yOnJlZFwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChkZXZ0b29sc1N0YXRlLnZpdGVQbHVnaW5EZXRlY3RlZCkge1xuICAgICAgY29uc3QgX2Jhc2VVcmwgPSAoX2MgPSB0YXJnZXQ1Ll9fVlVFX0RFVlRPT0xTX09QRU5fSU5fRURJVE9SX0JBU0VfVVJMX18pICE9IG51bGwgPyBfYyA6IGJhc2VVcmw7XG4gICAgICB0YXJnZXQ1Ll9fVlVFX0lOU1BFQ1RPUl9fLm9wZW5JbkVkaXRvcihfYmFzZVVybCwgZmlsZSwgbGluZSwgY29sdW1uKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvcGx1Z2luL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDggfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcblxuLy8gc3JjL2FwaS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2FwaS92Ni9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvcGx1Z2luL3BsdWdpbi1zZXR0aW5ncy50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2N0eC9wbHVnaW4udHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0NiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hMTAsIF9iMTA7XG4oX2IxMCA9IChfYTEwID0gdGFyZ2V0NikuX19WVUVfREVWVE9PTFNfS0lUX1BMVUdJTl9CVUZGRVJfXykgIT0gbnVsbCA/IF9iMTAgOiBfYTEwLl9fVlVFX0RFVlRPT0xTX0tJVF9QTFVHSU5fQlVGRkVSX18gPSBbXTtcbnZhciBkZXZ0b29sc1BsdWdpbkJ1ZmZlciA9IG5ldyBQcm94eSh0YXJnZXQ2Ll9fVlVFX0RFVlRPT0xTX0tJVF9QTFVHSU5fQlVGRkVSX18sIHtcbiAgZ2V0KHRhcmdldDIyLCBwcm9wLCByZWNlaXZlcikge1xuICAgIHJldHVybiBSZWZsZWN0LmdldCh0YXJnZXQyMiwgcHJvcCwgcmVjZWl2ZXIpO1xuICB9XG59KTtcbmZ1bmN0aW9uIGFkZERldlRvb2xzUGx1Z2luVG9CdWZmZXIocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbikge1xuICBkZXZ0b29sc1BsdWdpbkJ1ZmZlci5wdXNoKFtwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuXSk7XG59XG5cbi8vIHNyYy9jb3JlL3BsdWdpbi9wbHVnaW4tc2V0dGluZ3MudHNcbmZ1bmN0aW9uIF9nZXRTZXR0aW5ncyhzZXR0aW5ncykge1xuICBjb25zdCBfc2V0dGluZ3MgPSB7fTtcbiAgT2JqZWN0LmtleXMoc2V0dGluZ3MpLmZvckVhY2goKGtleSkgPT4ge1xuICAgIF9zZXR0aW5nc1trZXldID0gc2V0dGluZ3Nba2V5XS5kZWZhdWx0VmFsdWU7XG4gIH0pO1xuICByZXR1cm4gX3NldHRpbmdzO1xufVxuZnVuY3Rpb24gZ2V0UGx1Z2luTG9jYWxLZXkocGx1Z2luSWQpIHtcbiAgcmV0dXJuIGBfX1ZVRV9ERVZUT09MU19ORVhUX1BMVUdJTl9TRVRUSU5HU19fJHtwbHVnaW5JZH1fX2A7XG59XG5mdW5jdGlvbiBnZXRQbHVnaW5TZXR0aW5nc09wdGlvbnMocGx1Z2luSWQpIHtcbiAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICBjb25zdCBpdGVtID0gKF9iMjUgPSAoX2EyNSA9IGRldnRvb2xzUGx1Z2luQnVmZmVyLmZpbmQoKGl0ZW0yKSA9PiB7XG4gICAgdmFyIF9hMjY7XG4gICAgcmV0dXJuIGl0ZW0yWzBdLmlkID09PSBwbHVnaW5JZCAmJiAhISgoX2EyNiA9IGl0ZW0yWzBdKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNi5zZXR0aW5ncyk7XG4gIH0pKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNVswXSkgIT0gbnVsbCA/IF9iMjUgOiBudWxsO1xuICByZXR1cm4gKF9jID0gaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS5zZXR0aW5ncykgIT0gbnVsbCA/IF9jIDogbnVsbDtcbn1cbmZ1bmN0aW9uIGdldFBsdWdpblNldHRpbmdzKHBsdWdpbklkLCBmYWxsYmFja1ZhbHVlKSB7XG4gIHZhciBfYTI1LCBfYjI1LCBfYztcbiAgY29uc3QgbG9jYWxLZXkgPSBnZXRQbHVnaW5Mb2NhbEtleShwbHVnaW5JZCk7XG4gIGlmIChsb2NhbEtleSkge1xuICAgIGNvbnN0IGxvY2FsU2V0dGluZ3MgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShsb2NhbEtleSk7XG4gICAgaWYgKGxvY2FsU2V0dGluZ3MpIHtcbiAgICAgIHJldHVybiBKU09OLnBhcnNlKGxvY2FsU2V0dGluZ3MpO1xuICAgIH1cbiAgfVxuICBpZiAocGx1Z2luSWQpIHtcbiAgICBjb25zdCBpdGVtID0gKF9iMjUgPSAoX2EyNSA9IGRldnRvb2xzUGx1Z2luQnVmZmVyLmZpbmQoKGl0ZW0yKSA9PiBpdGVtMlswXS5pZCA9PT0gcGx1Z2luSWQpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNVswXSkgIT0gbnVsbCA/IF9iMjUgOiBudWxsO1xuICAgIHJldHVybiBfZ2V0U2V0dGluZ3MoKF9jID0gaXRlbSA9PSBudWxsID8gdm9pZCAwIDogaXRlbS5zZXR0aW5ncykgIT0gbnVsbCA/IF9jIDoge30pO1xuICB9XG4gIHJldHVybiBfZ2V0U2V0dGluZ3MoZmFsbGJhY2tWYWx1ZSk7XG59XG5mdW5jdGlvbiBpbml0UGx1Z2luU2V0dGluZ3MocGx1Z2luSWQsIHNldHRpbmdzKSB7XG4gIGNvbnN0IGxvY2FsS2V5ID0gZ2V0UGx1Z2luTG9jYWxLZXkocGx1Z2luSWQpO1xuICBjb25zdCBsb2NhbFNldHRpbmdzID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0obG9jYWxLZXkpO1xuICBpZiAoIWxvY2FsU2V0dGluZ3MpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbEtleSwgSlNPTi5zdHJpbmdpZnkoX2dldFNldHRpbmdzKHNldHRpbmdzKSkpO1xuICB9XG59XG5mdW5jdGlvbiBzZXRQbHVnaW5TZXR0aW5ncyhwbHVnaW5JZCwga2V5LCB2YWx1ZSkge1xuICBjb25zdCBsb2NhbEtleSA9IGdldFBsdWdpbkxvY2FsS2V5KHBsdWdpbklkKTtcbiAgY29uc3QgbG9jYWxTZXR0aW5ncyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsS2V5KTtcbiAgY29uc3QgcGFyc2VkTG9jYWxTZXR0aW5ncyA9IEpTT04ucGFyc2UobG9jYWxTZXR0aW5ncyB8fCBcInt9XCIpO1xuICBjb25zdCB1cGRhdGVkID0ge1xuICAgIC4uLnBhcnNlZExvY2FsU2V0dGluZ3MsXG4gICAgW2tleV06IHZhbHVlXG4gIH07XG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGxvY2FsS2V5LCBKU09OLnN0cmluZ2lmeSh1cGRhdGVkKSk7XG4gIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9va1dpdGgoKGNhbGxiYWNrcykgPT4ge1xuICAgIGNhbGxiYWNrcy5mb3JFYWNoKChjYikgPT4gY2Ioe1xuICAgICAgcGx1Z2luSWQsXG4gICAgICBrZXksXG4gICAgICBvbGRWYWx1ZTogcGFyc2VkTG9jYWxTZXR0aW5nc1trZXldLFxuICAgICAgbmV3VmFsdWU6IHZhbHVlLFxuICAgICAgc2V0dGluZ3M6IHVwZGF0ZWRcbiAgICB9KSk7XG4gIH0sIFwic2V0UGx1Z2luU2V0dGluZ3NcIiAvKiBTRVRfUExVR0lOX1NFVFRJTkdTICovKTtcbn1cblxuLy8gc3JjL2hvb2svaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0NyB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuaW1wb3J0IHsgY3JlYXRlSG9va3MgYXMgY3JlYXRlSG9va3MyIH0gZnJvbSBcImhvb2thYmxlXCI7XG5cbi8vIHNyYy90eXBlcy9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL2FwcC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3R5cGVzL2NvbW1hbmQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy90eXBlcy9jb21wb25lbnQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy90eXBlcy9ob29rLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvaW5zcGVjdG9yLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvcGx1Z2luLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvcm91dGVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvdGFiLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvdHlwZXMvdGltZWxpbmUudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9ob29rL2luZGV4LnRzXG52YXIgX2ExMSwgX2IxMTtcbnZhciBkZXZ0b29sc0hvb2tzID0gKF9iMTEgPSAoX2ExMSA9IHRhcmdldDcpLl9fVlVFX0RFVlRPT0xTX0hPT0spICE9IG51bGwgPyBfYjExIDogX2ExMS5fX1ZVRV9ERVZUT09MU19IT09LID0gY3JlYXRlSG9va3MyKCk7XG52YXIgb24gPSB7XG4gIHZ1ZUFwcEluaXQoZm4pIHtcbiAgICBkZXZ0b29sc0hvb2tzLmhvb2soXCJhcHA6aW5pdFwiIC8qIEFQUF9JTklUICovLCBmbik7XG4gIH0sXG4gIHZ1ZUFwcFVubW91bnQoZm4pIHtcbiAgICBkZXZ0b29sc0hvb2tzLmhvb2soXCJhcHA6dW5tb3VudFwiIC8qIEFQUF9VTk1PVU5UICovLCBmbik7XG4gIH0sXG4gIHZ1ZUFwcENvbm5lY3RlZChmbikge1xuICAgIGRldnRvb2xzSG9va3MuaG9vayhcImFwcDpjb25uZWN0ZWRcIiAvKiBBUFBfQ09OTkVDVEVEICovLCBmbik7XG4gIH0sXG4gIGNvbXBvbmVudEFkZGVkKGZuKSB7XG4gICAgcmV0dXJuIGRldnRvb2xzSG9va3MuaG9vayhcImNvbXBvbmVudDphZGRlZFwiIC8qIENPTVBPTkVOVF9BRERFRCAqLywgZm4pO1xuICB9LFxuICBjb21wb25lbnRFbWl0KGZuKSB7XG4gICAgcmV0dXJuIGRldnRvb2xzSG9va3MuaG9vayhcImNvbXBvbmVudDplbWl0XCIgLyogQ09NUE9ORU5UX0VNSVQgKi8sIGZuKTtcbiAgfSxcbiAgY29tcG9uZW50VXBkYXRlZChmbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovLCBmbik7XG4gIH0sXG4gIGNvbXBvbmVudFJlbW92ZWQoZm4pIHtcbiAgICByZXR1cm4gZGV2dG9vbHNIb29rcy5ob29rKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBDT01QT05FTlRfUkVNT1ZFRCAqLywgZm4pO1xuICB9LFxuICBzZXR1cERldnRvb2xzUGx1Z2luKGZuKSB7XG4gICAgZGV2dG9vbHNIb29rcy5ob29rKFwiZGV2dG9vbHMtcGx1Z2luOnNldHVwXCIgLyogU0VUVVBfREVWVE9PTFNfUExVR0lOICovLCBmbik7XG4gIH0sXG4gIHBlcmZTdGFydChmbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmhvb2soXCJwZXJmOnN0YXJ0XCIgLyogUEVSRk9STUFOQ0VfU1RBUlQgKi8sIGZuKTtcbiAgfSxcbiAgcGVyZkVuZChmbikge1xuICAgIHJldHVybiBkZXZ0b29sc0hvb2tzLmhvb2soXCJwZXJmOmVuZFwiIC8qIFBFUkZPUk1BTkNFX0VORCAqLywgZm4pO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlRGV2VG9vbHNIb29rKCkge1xuICByZXR1cm4ge1xuICAgIGlkOiBcInZ1ZS1kZXZ0b29scy1uZXh0XCIsXG4gICAgZGV2dG9vbHNWZXJzaW9uOiBcIjcuMFwiLFxuICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgIGFwcFJlY29yZHM6IFtdLFxuICAgIGFwcHM6IFtdLFxuICAgIGV2ZW50czogLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSxcbiAgICBvbihldmVudCwgZm4pIHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgaWYgKCF0aGlzLmV2ZW50cy5oYXMoZXZlbnQpKVxuICAgICAgICB0aGlzLmV2ZW50cy5zZXQoZXZlbnQsIFtdKTtcbiAgICAgIChfYTI1ID0gdGhpcy5ldmVudHMuZ2V0KGV2ZW50KSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucHVzaChmbik7XG4gICAgICByZXR1cm4gKCkgPT4gdGhpcy5vZmYoZXZlbnQsIGZuKTtcbiAgICB9LFxuICAgIG9uY2UoZXZlbnQsIGZuKSB7XG4gICAgICBjb25zdCBvbmNlRm4gPSAoLi4uYXJncykgPT4ge1xuICAgICAgICB0aGlzLm9mZihldmVudCwgb25jZUZuKTtcbiAgICAgICAgZm4oLi4uYXJncyk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbihldmVudCwgb25jZUZuKTtcbiAgICAgIHJldHVybiBbZXZlbnQsIG9uY2VGbl07XG4gICAgfSxcbiAgICBvZmYoZXZlbnQsIGZuKSB7XG4gICAgICBpZiAodGhpcy5ldmVudHMuaGFzKGV2ZW50KSkge1xuICAgICAgICBjb25zdCBldmVudENhbGxiYWNrcyA9IHRoaXMuZXZlbnRzLmdldChldmVudCk7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gZXZlbnRDYWxsYmFja3MuaW5kZXhPZihmbik7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpXG4gICAgICAgICAgZXZlbnRDYWxsYmFja3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIGVtaXQoZXZlbnQsIC4uLnBheWxvYWQpIHtcbiAgICAgIGlmICh0aGlzLmV2ZW50cy5oYXMoZXZlbnQpKVxuICAgICAgICB0aGlzLmV2ZW50cy5nZXQoZXZlbnQpLmZvckVhY2goKGZuKSA9PiBmbiguLi5wYXlsb2FkKSk7XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gc3Vic2NyaWJlRGV2VG9vbHNIb29rKGhvb2syKSB7XG4gIGhvb2syLm9uKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgKGFwcCwgdmVyc2lvbiwgdHlwZXMpID0+IHtcbiAgICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gICAgaWYgKChfYyA9IChfYjI1ID0gKF9hMjUgPSBhcHAgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcC5faW5zdGFuY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnR5cGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmRldnRvb2xzKSA9PSBudWxsID8gdm9pZCAwIDogX2MuaGlkZSlcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiYXBwOmluaXRcIiAvKiBBUFBfSU5JVCAqLywgYXBwLCB2ZXJzaW9uLCB0eXBlcyk7XG4gIH0pO1xuICBob29rMi5vbihcImFwcDp1bm1vdW50XCIgLyogQVBQX1VOTU9VTlQgKi8sIChhcHApID0+IHtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiYXBwOnVubW91bnRcIiAvKiBBUFBfVU5NT1VOVCAqLywgYXBwKTtcbiAgfSk7XG4gIGhvb2syLm9uKFwiY29tcG9uZW50OmFkZGVkXCIgLyogQ09NUE9ORU5UX0FEREVEICovLCBhc3luYyAoYXBwLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KSA9PiB7XG4gICAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICAgIGlmICgoKF9jID0gKF9iMjUgPSAoX2EyNSA9IGFwcCA9PSBudWxsID8gdm9pZCAwIDogYXBwLl9pbnN0YW5jZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5oaWRlKSB8fCBkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgaWYgKCFhcHAgfHwgdHlwZW9mIHVpZCAhPT0gXCJudW1iZXJcIiAmJiAhdWlkIHx8ICFjb21wb25lbnQpXG4gICAgICByZXR1cm47XG4gICAgZGV2dG9vbHNIb29rcy5jYWxsSG9vayhcImNvbXBvbmVudDphZGRlZFwiIC8qIENPTVBPTkVOVF9BRERFRCAqLywgYXBwLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KTtcbiAgfSk7XG4gIGhvb2syLm9uKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBDT01QT05FTlRfVVBEQVRFRCAqLywgKGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgIGlmICghYXBwIHx8IHR5cGVvZiB1aWQgIT09IFwibnVtYmVyXCIgJiYgIXVpZCB8fCAhY29tcG9uZW50IHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50OnVwZGF0ZWRcIiAvKiBDT01QT05FTlRfVVBEQVRFRCAqLywgYXBwLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KTtcbiAgfSk7XG4gIGhvb2syLm9uKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBDT01QT05FTlRfUkVNT1ZFRCAqLywgYXN5bmMgKGFwcCwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgIGlmICghYXBwIHx8IHR5cGVvZiB1aWQgIT09IFwibnVtYmVyXCIgJiYgIXVpZCB8fCAhY29tcG9uZW50IHx8IGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBkZXZ0b29sc0hvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50OnJlbW92ZWRcIiAvKiBDT01QT05FTlRfUkVNT1ZFRCAqLywgYXBwLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KTtcbiAgfSk7XG4gIGhvb2syLm9uKFwiY29tcG9uZW50OmVtaXRcIiAvKiBDT01QT05FTlRfRU1JVCAqLywgYXN5bmMgKGFwcCwgaW5zdGFuY2UsIGV2ZW50LCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIWFwcCB8fCAhaW5zdGFuY2UgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJjb21wb25lbnQ6ZW1pdFwiIC8qIENPTVBPTkVOVF9FTUlUICovLCBhcHAsIGluc3RhbmNlLCBldmVudCwgcGFyYW1zKTtcbiAgfSk7XG4gIGhvb2syLm9uKFwicGVyZjpzdGFydFwiIC8qIFBFUkZPUk1BTkNFX1NUQVJUICovLCAoYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgaWYgKCFhcHAgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJwZXJmOnN0YXJ0XCIgLyogUEVSRk9STUFOQ0VfU1RBUlQgKi8sIGFwcCwgdWlkLCB2bSwgdHlwZSwgdGltZSk7XG4gIH0pO1xuICBob29rMi5vbihcInBlcmY6ZW5kXCIgLyogUEVSRk9STUFOQ0VfRU5EICovLCAoYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgaWYgKCFhcHAgfHwgZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJwZXJmOmVuZFwiIC8qIFBFUkZPUk1BTkNFX0VORCAqLywgYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKTtcbiAgfSk7XG4gIGhvb2syLm9uKFwiZGV2dG9vbHMtcGx1Z2luOnNldHVwXCIgLyogU0VUVVBfREVWVE9PTFNfUExVR0lOICovLCAocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbiwgb3B0aW9ucykgPT4ge1xuICAgIGlmICgob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy50YXJnZXQpID09PSBcImxlZ2FjeVwiKVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJkZXZ0b29scy1wbHVnaW46c2V0dXBcIiAvKiBTRVRVUF9ERVZUT09MU19QTFVHSU4gKi8sIHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pO1xuICB9KTtcbn1cbnZhciBob29rID0ge1xuICBvbixcbiAgc2V0dXBEZXZUb29sc1BsdWdpbihwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKSB7XG4gICAgcmV0dXJuIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJkZXZ0b29scy1wbHVnaW46c2V0dXBcIiAvKiBTRVRVUF9ERVZUT09MU19QTFVHSU4gKi8sIHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pO1xuICB9XG59O1xuXG4vLyBzcmMvYXBpL3Y2L2luZGV4LnRzXG52YXIgRGV2VG9vbHNWNlBsdWdpbkFQSSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoeyBwbHVnaW4sIGN0eCB9KSB7XG4gICAgdGhpcy5ob29rcyA9IGN0eC5ob29rcztcbiAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgfVxuICBnZXQgb24oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGNvbXBvbmVudCBpbnNwZWN0b3JcbiAgICAgIHZpc2l0Q29tcG9uZW50VHJlZTogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwidmlzaXRDb21wb25lbnRUcmVlXCIgLyogVklTSVRfQ09NUE9ORU5UX1RSRUUgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIGluc3BlY3RDb21wb25lbnQ6IChoYW5kbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuaG9va3MuaG9vayhcImluc3BlY3RDb21wb25lbnRcIiAvKiBJTlNQRUNUX0NPTVBPTkVOVCAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgZWRpdENvbXBvbmVudFN0YXRlOiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJlZGl0Q29tcG9uZW50U3RhdGVcIiAvKiBFRElUX0NPTVBPTkVOVF9TVEFURSAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgLy8gY3VzdG9tIGluc3BlY3RvclxuICAgICAgZ2V0SW5zcGVjdG9yVHJlZTogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwiZ2V0SW5zcGVjdG9yVHJlZVwiIC8qIEdFVF9JTlNQRUNUT1JfVFJFRSAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgZ2V0SW5zcGVjdG9yU3RhdGU6IChoYW5kbGVyKSA9PiB7XG4gICAgICAgIHRoaXMuaG9va3MuaG9vayhcImdldEluc3BlY3RvclN0YXRlXCIgLyogR0VUX0lOU1BFQ1RPUl9TVEFURSAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgZWRpdEluc3BlY3RvclN0YXRlOiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJlZGl0SW5zcGVjdG9yU3RhdGVcIiAvKiBFRElUX0lOU1BFQ1RPUl9TVEFURSAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgLy8gdGltZWxpbmVcbiAgICAgIGluc3BlY3RUaW1lbGluZUV2ZW50OiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJpbnNwZWN0VGltZWxpbmVFdmVudFwiIC8qIElOU1BFQ1RfVElNRUxJTkVfRVZFTlQgKi8sIGhhbmRsZXIpO1xuICAgICAgfSxcbiAgICAgIHRpbWVsaW5lQ2xlYXJlZDogKGhhbmRsZXIpID0+IHtcbiAgICAgICAgdGhpcy5ob29rcy5ob29rKFwidGltZWxpbmVDbGVhcmVkXCIgLyogVElNRUxJTkVfQ0xFQVJFRCAqLywgaGFuZGxlcik7XG4gICAgICB9LFxuICAgICAgLy8gc2V0dGluZ3NcbiAgICAgIHNldFBsdWdpblNldHRpbmdzOiAoaGFuZGxlcikgPT4ge1xuICAgICAgICB0aGlzLmhvb2tzLmhvb2soXCJzZXRQbHVnaW5TZXR0aW5nc1wiIC8qIFNFVF9QTFVHSU5fU0VUVElOR1MgKi8sIGhhbmRsZXIpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbiAgLy8gY29tcG9uZW50IGluc3BlY3RvclxuICBub3RpZnlDb21wb25lbnRVcGRhdGUoaW5zdGFuY2UpIHtcbiAgICB2YXIgX2EyNTtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGluc3BlY3RvciA9IGdldEFjdGl2ZUluc3BlY3RvcnMoKS5maW5kKChpKSA9PiBpLnBhY2thZ2VOYW1lID09PSB0aGlzLnBsdWdpbi5kZXNjcmlwdG9yLnBhY2thZ2VOYW1lKTtcbiAgICBpZiAoaW5zcGVjdG9yID09IG51bGwgPyB2b2lkIDAgOiBpbnNwZWN0b3IuaWQpIHtcbiAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICBjb25zdCBhcmdzID0gW1xuICAgICAgICAgIGluc3RhbmNlLmFwcENvbnRleHQuYXBwLFxuICAgICAgICAgIGluc3RhbmNlLnVpZCxcbiAgICAgICAgICAoX2EyNSA9IGluc3RhbmNlLnBhcmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudWlkLFxuICAgICAgICAgIGluc3RhbmNlXG4gICAgICAgIF07XG4gICAgICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovLCAuLi5hcmdzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGRldnRvb2xzSG9va3MuY2FsbEhvb2soXCJjb21wb25lbnQ6dXBkYXRlZFwiIC8qIENPTVBPTkVOVF9VUERBVEVEICovKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaG9va3MuY2FsbEhvb2soXCJzZW5kSW5zcGVjdG9yU3RhdGVcIiAvKiBTRU5EX0lOU1BFQ1RPUl9TVEFURSAqLywgeyBpbnNwZWN0b3JJZDogaW5zcGVjdG9yLmlkLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICAgIH1cbiAgfVxuICAvLyBjdXN0b20gaW5zcGVjdG9yXG4gIGFkZEluc3BlY3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5ob29rcy5jYWxsSG9vayhcImFkZEluc3BlY3RvclwiIC8qIEFERF9JTlNQRUNUT1IgKi8sIHsgaW5zcGVjdG9yOiBvcHRpb25zLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICAgIGlmICh0aGlzLnBsdWdpbi5kZXNjcmlwdG9yLnNldHRpbmdzKSB7XG4gICAgICBpbml0UGx1Z2luU2V0dGluZ3Mob3B0aW9ucy5pZCwgdGhpcy5wbHVnaW4uZGVzY3JpcHRvci5zZXR0aW5ncyk7XG4gICAgfVxuICB9XG4gIHNlbmRJbnNwZWN0b3JUcmVlKGluc3BlY3RvcklkKSB7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmhvb2tzLmNhbGxIb29rKFwic2VuZEluc3BlY3RvclRyZWVcIiAvKiBTRU5EX0lOU1BFQ1RPUl9UUkVFICovLCB7IGluc3BlY3RvcklkLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICB9XG4gIHNlbmRJbnNwZWN0b3JTdGF0ZShpbnNwZWN0b3JJZCkge1xuICAgIGlmIChkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ob29rcy5jYWxsSG9vayhcInNlbmRJbnNwZWN0b3JTdGF0ZVwiIC8qIFNFTkRfSU5TUEVDVE9SX1NUQVRFICovLCB7IGluc3BlY3RvcklkLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICB9XG4gIHNlbGVjdEluc3BlY3Rvck5vZGUoaW5zcGVjdG9ySWQsIG5vZGVJZCkge1xuICAgIHRoaXMuaG9va3MuY2FsbEhvb2soXCJjdXN0b21JbnNwZWN0b3JTZWxlY3ROb2RlXCIgLyogQ1VTVE9NX0lOU1BFQ1RPUl9TRUxFQ1RfTk9ERSAqLywgeyBpbnNwZWN0b3JJZCwgbm9kZUlkLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICB9XG4gIHZpc2l0Q29tcG9uZW50VHJlZShwYXlsb2FkKSB7XG4gICAgcmV0dXJuIHRoaXMuaG9va3MuY2FsbEhvb2soXCJ2aXNpdENvbXBvbmVudFRyZWVcIiAvKiBWSVNJVF9DT01QT05FTlRfVFJFRSAqLywgcGF5bG9hZCk7XG4gIH1cbiAgLy8gdGltZWxpbmVcbiAgbm93KCkge1xuICAgIGlmIChkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICByZXR1cm4gRGF0ZS5ub3coKTtcbiAgfVxuICBhZGRUaW1lbGluZUxheWVyKG9wdGlvbnMpIHtcbiAgICB0aGlzLmhvb2tzLmNhbGxIb29rKFwidGltZWxpbmVMYXllckFkZGVkXCIgLyogVElNRUxJTkVfTEFZRVJfQURERUQgKi8sIHsgb3B0aW9ucywgcGx1Z2luOiB0aGlzLnBsdWdpbiB9KTtcbiAgfVxuICBhZGRUaW1lbGluZUV2ZW50KG9wdGlvbnMpIHtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaG9va3MuY2FsbEhvb2soXCJ0aW1lbGluZUV2ZW50QWRkZWRcIiAvKiBUSU1FTElORV9FVkVOVF9BRERFRCAqLywgeyBvcHRpb25zLCBwbHVnaW46IHRoaXMucGx1Z2luIH0pO1xuICB9XG4gIC8vIHNldHRpbmdzXG4gIGdldFNldHRpbmdzKHBsdWdpbklkKSB7XG4gICAgcmV0dXJuIGdldFBsdWdpblNldHRpbmdzKHBsdWdpbklkICE9IG51bGwgPyBwbHVnaW5JZCA6IHRoaXMucGx1Z2luLmRlc2NyaXB0b3IuaWQsIHRoaXMucGx1Z2luLmRlc2NyaXB0b3Iuc2V0dGluZ3MpO1xuICB9XG4gIC8vIHV0aWxpdGllc1xuICBnZXRDb21wb25lbnRJbnN0YW5jZXMoYXBwKSB7XG4gICAgcmV0dXJuIHRoaXMuaG9va3MuY2FsbEhvb2soXCJnZXRDb21wb25lbnRJbnN0YW5jZXNcIiAvKiBHRVRfQ09NUE9ORU5UX0lOU1RBTkNFUyAqLywgeyBhcHAgfSk7XG4gIH1cbiAgZ2V0Q29tcG9uZW50Qm91bmRzKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuaG9va3MuY2FsbEhvb2soXCJnZXRDb21wb25lbnRCb3VuZHNcIiAvKiBHRVRfQ09NUE9ORU5UX0JPVU5EUyAqLywgeyBpbnN0YW5jZSB9KTtcbiAgfVxuICBnZXRDb21wb25lbnROYW1lKGluc3RhbmNlKSB7XG4gICAgcmV0dXJuIHRoaXMuaG9va3MuY2FsbEhvb2soXCJnZXRDb21wb25lbnROYW1lXCIgLyogR0VUX0NPTVBPTkVOVF9OQU1FICovLCB7IGluc3RhbmNlIH0pO1xuICB9XG4gIGhpZ2hsaWdodEVsZW1lbnQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCB1aWQgPSBpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fO1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50SGlnaGxpZ2h0XCIgLyogQ09NUE9ORU5UX0hJR0hMSUdIVCAqLywgeyB1aWQgfSk7XG4gIH1cbiAgdW5oaWdobGlnaHRFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmhvb2tzLmNhbGxIb29rKFwiY29tcG9uZW50VW5oaWdobGlnaHRcIiAvKiBDT01QT05FTlRfVU5ISUdITElHSFQgKi8pO1xuICB9XG59O1xuXG4vLyBzcmMvYXBpL2luZGV4LnRzXG52YXIgRGV2VG9vbHNQbHVnaW5BUEkgPSBEZXZUb29sc1Y2UGx1Z2luQVBJO1xuXG4vLyBzcmMvY29yZS9wbHVnaW4vY29tcG9uZW50cy50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGRlYm91bmNlIGFzIGRlYm91bmNlNCB9IGZyb20gXCJwZXJmZWN0LWRlYm91bmNlXCI7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3Byb2Nlc3MudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBjYW1lbGl6ZSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvY29uc3RhbnRzLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIHZ1ZUJ1aWx0aW5zID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoW1xuICBcIm5leHRUaWNrXCIsXG4gIFwiZGVmaW5lQ29tcG9uZW50XCIsXG4gIFwiZGVmaW5lQXN5bmNDb21wb25lbnRcIixcbiAgXCJkZWZpbmVDdXN0b21FbGVtZW50XCIsXG4gIFwicmVmXCIsXG4gIFwiY29tcHV0ZWRcIixcbiAgXCJyZWFjdGl2ZVwiLFxuICBcInJlYWRvbmx5XCIsXG4gIFwid2F0Y2hFZmZlY3RcIixcbiAgXCJ3YXRjaFBvc3RFZmZlY3RcIixcbiAgXCJ3YXRjaFN5bmNFZmZlY3RcIixcbiAgXCJ3YXRjaFwiLFxuICBcImlzUmVmXCIsXG4gIFwidW5yZWZcIixcbiAgXCJ0b1JlZlwiLFxuICBcInRvUmVmc1wiLFxuICBcImlzUHJveHlcIixcbiAgXCJpc1JlYWN0aXZlXCIsXG4gIFwiaXNSZWFkb25seVwiLFxuICBcInNoYWxsb3dSZWZcIixcbiAgXCJ0cmlnZ2VyUmVmXCIsXG4gIFwiY3VzdG9tUmVmXCIsXG4gIFwic2hhbGxvd1JlYWN0aXZlXCIsXG4gIFwic2hhbGxvd1JlYWRvbmx5XCIsXG4gIFwidG9SYXdcIixcbiAgXCJtYXJrUmF3XCIsXG4gIFwiZWZmZWN0U2NvcGVcIixcbiAgXCJnZXRDdXJyZW50U2NvcGVcIixcbiAgXCJvblNjb3BlRGlzcG9zZVwiLFxuICBcIm9uTW91bnRlZFwiLFxuICBcIm9uVXBkYXRlZFwiLFxuICBcIm9uVW5tb3VudGVkXCIsXG4gIFwib25CZWZvcmVNb3VudFwiLFxuICBcIm9uQmVmb3JlVXBkYXRlXCIsXG4gIFwib25CZWZvcmVVbm1vdW50XCIsXG4gIFwib25FcnJvckNhcHR1cmVkXCIsXG4gIFwib25SZW5kZXJUcmFja2VkXCIsXG4gIFwib25SZW5kZXJUcmlnZ2VyZWRcIixcbiAgXCJvbkFjdGl2YXRlZFwiLFxuICBcIm9uRGVhY3RpdmF0ZWRcIixcbiAgXCJvblNlcnZlclByZWZldGNoXCIsXG4gIFwicHJvdmlkZVwiLFxuICBcImluamVjdFwiLFxuICBcImhcIixcbiAgXCJtZXJnZVByb3BzXCIsXG4gIFwiY2xvbmVWTm9kZVwiLFxuICBcImlzVk5vZGVcIixcbiAgXCJyZXNvbHZlQ29tcG9uZW50XCIsXG4gIFwicmVzb2x2ZURpcmVjdGl2ZVwiLFxuICBcIndpdGhEaXJlY3RpdmVzXCIsXG4gIFwid2l0aE1vZGlmaWVyc1wiXG5dKTtcbnZhciBzeW1ib2xSRSA9IC9eXFxbbmF0aXZlIFN5bWJvbCBTeW1ib2xcXCgoLiopXFwpXFxdJC87XG52YXIgcmF3VHlwZVJFID0gL15cXFtvYmplY3QgKFxcdyspXFxdJC87XG52YXIgc3BlY2lhbFR5cGVSRSA9IC9eXFxbbmF0aXZlIChcXHcrKSAoLio/KSg8PigoW1xcc1xcU10pKikpP1xcXSQvO1xudmFyIGZuVHlwZVJFID0gL14oPzpmdW5jdGlvbnxjbGFzcykgKFxcdyspLztcbnZhciBNQVhfU1RSSU5HX1NJWkUgPSAxZTQ7XG52YXIgTUFYX0FSUkFZX1NJWkUgPSA1ZTM7XG52YXIgVU5ERUZJTkVEID0gXCJfX3Z1ZV9kZXZ0b29sX3VuZGVmaW5lZF9fXCI7XG52YXIgSU5GSU5JVFkgPSBcIl9fdnVlX2RldnRvb2xfaW5maW5pdHlfX1wiO1xudmFyIE5FR0FUSVZFX0lORklOSVRZID0gXCJfX3Z1ZV9kZXZ0b29sX25lZ2F0aXZlX2luZmluaXR5X19cIjtcbnZhciBOQU4gPSBcIl9fdnVlX2RldnRvb2xfbmFuX19cIjtcbnZhciBFU0MgPSB7XG4gIFwiPFwiOiBcIiZsdDtcIixcbiAgXCI+XCI6IFwiJmd0O1wiLFxuICAnXCInOiBcIiZxdW90O1wiLFxuICBcIiZcIjogXCImYW1wO1wiXG59O1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvdXRpbC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2lzLnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gaXNWdWVJbnN0YW5jZSh2YWx1ZSkge1xuICBpZiAoIWVuc3VyZVByb3BlcnR5RXhpc3RzKHZhbHVlLCBcIl9cIikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKCFpc1BsYWluT2JqZWN0KHZhbHVlLl8pKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBPYmplY3Qua2V5cyh2YWx1ZS5fKS5pbmNsdWRlcyhcInZub2RlXCIpO1xufVxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSBcIltvYmplY3QgT2JqZWN0XVwiO1xufVxuZnVuY3Rpb24gaXNQcmltaXRpdmUoZGF0YSkge1xuICBpZiAoZGF0YSA9PSBudWxsKVxuICAgIHJldHVybiB0cnVlO1xuICBjb25zdCB0eXBlID0gdHlwZW9mIGRhdGE7XG4gIHJldHVybiB0eXBlID09PSBcInN0cmluZ1wiIHx8IHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJib29sZWFuXCI7XG59XG5mdW5jdGlvbiBpc1JlZjIocmF3KSB7XG4gIHJldHVybiAhIXJhdy5fX3ZfaXNSZWY7XG59XG5mdW5jdGlvbiBpc0NvbXB1dGVkKHJhdykge1xuICByZXR1cm4gaXNSZWYyKHJhdykgJiYgISFyYXcuZWZmZWN0O1xufVxuZnVuY3Rpb24gaXNSZWFjdGl2ZTIocmF3KSB7XG4gIHJldHVybiAhIXJhdy5fX3ZfaXNSZWFjdGl2ZTtcbn1cbmZ1bmN0aW9uIGlzUmVhZE9ubHkocmF3KSB7XG4gIHJldHVybiAhIXJhdy5fX3ZfaXNSZWFkb25seTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3V0aWwudHNcbnZhciB0b2tlbk1hcCA9IHtcbiAgW1VOREVGSU5FRF06IFwidW5kZWZpbmVkXCIsXG4gIFtOQU5dOiBcIk5hTlwiLFxuICBbSU5GSU5JVFldOiBcIkluZmluaXR5XCIsXG4gIFtORUdBVElWRV9JTkZJTklUWV06IFwiLUluZmluaXR5XCJcbn07XG52YXIgcmV2ZXJzZWRUb2tlbk1hcCA9IE9iamVjdC5lbnRyaWVzKHRva2VuTWFwKS5yZWR1Y2UoKGFjYywgW2tleSwgdmFsdWVdKSA9PiB7XG4gIGFjY1t2YWx1ZV0gPSBrZXk7XG4gIHJldHVybiBhY2M7XG59LCB7fSk7XG5mdW5jdGlvbiBpbnRlcm5hbFN0YXRlVG9rZW5Ub1N0cmluZyh2YWx1ZSkge1xuICBpZiAodmFsdWUgPT09IG51bGwpXG4gICAgcmV0dXJuIFwibnVsbFwiO1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHRva2VuTWFwW3ZhbHVlXSB8fCBmYWxzZTtcbn1cbmZ1bmN0aW9uIHJlcGxhY2VUb2tlblRvU3RyaW5nKHZhbHVlKSB7XG4gIGNvbnN0IHJlcGxhY2VSZWdleCA9IG5ldyBSZWdFeHAoYFwiKCR7T2JqZWN0LmtleXModG9rZW5NYXApLmpvaW4oXCJ8XCIpfSlcImAsIFwiZ1wiKTtcbiAgcmV0dXJuIHZhbHVlLnJlcGxhY2UocmVwbGFjZVJlZ2V4LCAoXywgZzEpID0+IHRva2VuTWFwW2cxXSk7XG59XG5mdW5jdGlvbiByZXBsYWNlU3RyaW5nVG9Ub2tlbih2YWx1ZSkge1xuICBjb25zdCBsaXRlcmFsVmFsdWUgPSByZXZlcnNlZFRva2VuTWFwW3ZhbHVlLnRyaW0oKV07XG4gIGlmIChsaXRlcmFsVmFsdWUpXG4gICAgcmV0dXJuIGBcIiR7bGl0ZXJhbFZhbHVlfVwiYDtcbiAgY29uc3QgcmVwbGFjZVJlZ2V4ID0gbmV3IFJlZ0V4cChgOlxcXFxzKigke09iamVjdC5rZXlzKHJldmVyc2VkVG9rZW5NYXApLmpvaW4oXCJ8XCIpfSlgLCBcImdcIik7XG4gIHJldHVybiB2YWx1ZS5yZXBsYWNlKHJlcGxhY2VSZWdleCwgKF8sIGcxKSA9PiBgOlwiJHtyZXZlcnNlZFRva2VuTWFwW2cxXX1cImApO1xufVxuZnVuY3Rpb24gZ2V0UHJvcFR5cGUodHlwZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheSh0eXBlKSlcbiAgICByZXR1cm4gdHlwZS5tYXAoKHQpID0+IGdldFByb3BUeXBlKHQpKS5qb2luKFwiIG9yIFwiKTtcbiAgaWYgKHR5cGUgPT0gbnVsbClcbiAgICByZXR1cm4gXCJudWxsXCI7XG4gIGNvbnN0IG1hdGNoID0gdHlwZS50b1N0cmluZygpLm1hdGNoKGZuVHlwZVJFKTtcbiAgcmV0dXJuIHR5cGVvZiB0eXBlID09PSBcImZ1bmN0aW9uXCIgPyBtYXRjaCAmJiBtYXRjaFsxXSB8fCBcImFueVwiIDogXCJhbnlcIjtcbn1cbmZ1bmN0aW9uIHNhbml0aXplKGRhdGEpIHtcbiAgaWYgKCFpc1ByaW1pdGl2ZShkYXRhKSAmJiAhQXJyYXkuaXNBcnJheShkYXRhKSAmJiAhaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZGF0YSk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn1cbmZ1bmN0aW9uIGdldFNldHVwU3RhdGVUeXBlKHJhdykge1xuICB0cnkge1xuICAgIHJldHVybiB7XG4gICAgICByZWY6IGlzUmVmMihyYXcpLFxuICAgICAgY29tcHV0ZWQ6IGlzQ29tcHV0ZWQocmF3KSxcbiAgICAgIHJlYWN0aXZlOiBpc1JlYWN0aXZlMihyYXcpLFxuICAgICAgcmVhZG9ubHk6IGlzUmVhZE9ubHkocmF3KVxuICAgIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcmVmOiBmYWxzZSxcbiAgICAgIGNvbXB1dGVkOiBmYWxzZSxcbiAgICAgIHJlYWN0aXZlOiBmYWxzZSxcbiAgICAgIHJlYWRvbmx5OiBmYWxzZVxuICAgIH07XG4gIH1cbn1cbmZ1bmN0aW9uIHRvUmF3Mih2YWx1ZSkge1xuICBpZiAodmFsdWUgPT0gbnVsbCA/IHZvaWQgMCA6IHZhbHVlLl9fdl9yYXcpXG4gICAgcmV0dXJuIHZhbHVlLl9fdl9yYXc7XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZShzKSB7XG4gIHJldHVybiBzLnJlcGxhY2UoL1s8PlwiJl0vZywgKHMyKSA9PiB7XG4gICAgcmV0dXJuIEVTQ1tzMl0gfHwgczI7XG4gIH0pO1xufVxuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvcHJvY2Vzcy50c1xuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHRvLCBmcm9tLCBpbnN0YW5jZSkge1xuICBpZiAodHlwZW9mIGZyb20gPT09IFwiZnVuY3Rpb25cIilcbiAgICBmcm9tID0gZnJvbS5vcHRpb25zO1xuICBpZiAoIWZyb20pXG4gICAgcmV0dXJuIHRvO1xuICBjb25zdCB7IG1peGlucywgZXh0ZW5kczogZXh0ZW5kc09wdGlvbnMgfSA9IGZyb207XG4gIGV4dGVuZHNPcHRpb25zICYmIG1lcmdlT3B0aW9ucyh0bywgZXh0ZW5kc09wdGlvbnMsIGluc3RhbmNlKTtcbiAgbWl4aW5zICYmIG1peGlucy5mb3JFYWNoKFxuICAgIChtKSA9PiBtZXJnZU9wdGlvbnModG8sIG0sIGluc3RhbmNlKVxuICApO1xuICBmb3IgKGNvbnN0IGtleSBvZiBbXCJjb21wdXRlZFwiLCBcImluamVjdFwiXSkge1xuICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZnJvbSwga2V5KSkge1xuICAgICAgaWYgKCF0b1trZXldKVxuICAgICAgICB0b1trZXldID0gZnJvbVtrZXldO1xuICAgICAgZWxzZVxuICAgICAgICBPYmplY3QuYXNzaWduKHRvW2tleV0sIGZyb21ba2V5XSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cbmZ1bmN0aW9uIHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKSB7XG4gIGNvbnN0IHJhdyA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlO1xuICBpZiAoIXJhdylcbiAgICByZXR1cm4ge307XG4gIGNvbnN0IHsgbWl4aW5zLCBleHRlbmRzOiBleHRlbmRzT3B0aW9ucyB9ID0gcmF3O1xuICBjb25zdCBnbG9iYWxNaXhpbnMgPSBpbnN0YW5jZS5hcHBDb250ZXh0Lm1peGlucztcbiAgaWYgKCFnbG9iYWxNaXhpbnMubGVuZ3RoICYmICFtaXhpbnMgJiYgIWV4dGVuZHNPcHRpb25zKVxuICAgIHJldHVybiByYXc7XG4gIGNvbnN0IG9wdGlvbnMgPSB7fTtcbiAgZ2xvYmFsTWl4aW5zLmZvckVhY2goKG0pID0+IG1lcmdlT3B0aW9ucyhvcHRpb25zLCBtLCBpbnN0YW5jZSkpO1xuICBtZXJnZU9wdGlvbnMob3B0aW9ucywgcmF3LCBpbnN0YW5jZSk7XG4gIHJldHVybiBvcHRpb25zO1xufVxuZnVuY3Rpb24gcHJvY2Vzc1Byb3BzKGluc3RhbmNlKSB7XG4gIHZhciBfYTI1O1xuICBjb25zdCBwcm9wcyA9IFtdO1xuICBjb25zdCBwcm9wRGVmaW5pdGlvbnMgPSAoX2EyNSA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5wcm9wcztcbiAgZm9yIChjb25zdCBrZXkgaW4gaW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IGluc3RhbmNlLnByb3BzKSB7XG4gICAgY29uc3QgcHJvcERlZmluaXRpb24gPSBwcm9wRGVmaW5pdGlvbnMgPyBwcm9wRGVmaW5pdGlvbnNba2V5XSA6IG51bGw7XG4gICAgY29uc3QgY2FtZWxpemVLZXkgPSBjYW1lbGl6ZShrZXkpO1xuICAgIHByb3BzLnB1c2goe1xuICAgICAgdHlwZTogXCJwcm9wc1wiLFxuICAgICAga2V5OiBjYW1lbGl6ZUtleSxcbiAgICAgIHZhbHVlOiByZXR1cm5FcnJvcigoKSA9PiBpbnN0YW5jZS5wcm9wc1trZXldKSxcbiAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgbWV0YTogcHJvcERlZmluaXRpb24gPyB7XG4gICAgICAgIHR5cGU6IHByb3BEZWZpbml0aW9uLnR5cGUgPyBnZXRQcm9wVHlwZShwcm9wRGVmaW5pdGlvbi50eXBlKSA6IFwiYW55XCIsXG4gICAgICAgIHJlcXVpcmVkOiAhIXByb3BEZWZpbml0aW9uLnJlcXVpcmVkLFxuICAgICAgICAuLi5wcm9wRGVmaW5pdGlvbi5kZWZhdWx0ID8ge1xuICAgICAgICAgIGRlZmF1bHQ6IHByb3BEZWZpbml0aW9uLmRlZmF1bHQudG9TdHJpbmcoKVxuICAgICAgICB9IDoge31cbiAgICAgIH0gOiB7IHR5cGU6IFwiaW52YWxpZFwiIH1cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gcHJvcHM7XG59XG5mdW5jdGlvbiBwcm9jZXNzU3RhdGUoaW5zdGFuY2UpIHtcbiAgY29uc3QgdHlwZSA9IGluc3RhbmNlLnR5cGU7XG4gIGNvbnN0IHByb3BzID0gdHlwZSA9PSBudWxsID8gdm9pZCAwIDogdHlwZS5wcm9wcztcbiAgY29uc3QgZ2V0dGVycyA9IHR5cGUudnVleCAmJiB0eXBlLnZ1ZXguZ2V0dGVycztcbiAgY29uc3QgY29tcHV0ZWREZWZzID0gdHlwZS5jb21wdXRlZDtcbiAgY29uc3QgZGF0YSA9IHtcbiAgICAuLi5pbnN0YW5jZS5kYXRhLFxuICAgIC4uLmluc3RhbmNlLnJlbmRlckNvbnRleHRcbiAgfTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGRhdGEpLmZpbHRlcigoa2V5KSA9PiAhKHByb3BzICYmIGtleSBpbiBwcm9wcykgJiYgIShnZXR0ZXJzICYmIGtleSBpbiBnZXR0ZXJzKSAmJiAhKGNvbXB1dGVkRGVmcyAmJiBrZXkgaW4gY29tcHV0ZWREZWZzKSkubWFwKChrZXkpID0+ICh7XG4gICAga2V5LFxuICAgIHR5cGU6IFwiZGF0YVwiLFxuICAgIHZhbHVlOiByZXR1cm5FcnJvcigoKSA9PiBkYXRhW2tleV0pLFxuICAgIGVkaXRhYmxlOiB0cnVlXG4gIH0pKTtcbn1cbmZ1bmN0aW9uIGdldFN0YXRlVHlwZUFuZE5hbWUoaW5mbykge1xuICBjb25zdCBzdGF0ZVR5cGUgPSBpbmZvLmNvbXB1dGVkID8gXCJjb21wdXRlZFwiIDogaW5mby5yZWYgPyBcInJlZlwiIDogaW5mby5yZWFjdGl2ZSA/IFwicmVhY3RpdmVcIiA6IG51bGw7XG4gIGNvbnN0IHN0YXRlVHlwZU5hbWUgPSBzdGF0ZVR5cGUgPyBgJHtzdGF0ZVR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCl9JHtzdGF0ZVR5cGUuc2xpY2UoMSl9YCA6IG51bGw7XG4gIHJldHVybiB7XG4gICAgc3RhdGVUeXBlLFxuICAgIHN0YXRlVHlwZU5hbWVcbiAgfTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NTZXR1cFN0YXRlKGluc3RhbmNlKSB7XG4gIGNvbnN0IHJhdyA9IGluc3RhbmNlLmRldnRvb2xzUmF3U2V0dXBTdGF0ZSB8fCB7fTtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGluc3RhbmNlLnNldHVwU3RhdGUpLmZpbHRlcigoa2V5KSA9PiAhdnVlQnVpbHRpbnMuaGFzKGtleSkgJiYga2V5LnNwbGl0KC8oPz1bQS1aXSkvKVswXSAhPT0gXCJ1c2VcIikubWFwKChrZXkpID0+IHtcbiAgICB2YXIgX2EyNSwgX2IyNSwgX2MsIF9kO1xuICAgIGNvbnN0IHZhbHVlID0gcmV0dXJuRXJyb3IoKCkgPT4gdG9SYXcyKGluc3RhbmNlLnNldHVwU3RhdGVba2V5XSkpO1xuICAgIGNvbnN0IGFjY2Vzc0Vycm9yID0gdmFsdWUgaW5zdGFuY2VvZiBFcnJvcjtcbiAgICBjb25zdCByYXdEYXRhID0gcmF3W2tleV07XG4gICAgbGV0IHJlc3VsdDtcbiAgICBsZXQgaXNPdGhlclR5cGUgPSBhY2Nlc3NFcnJvciB8fCB0eXBlb2YgdmFsdWUgPT09IFwiZnVuY3Rpb25cIiB8fCBlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWx1ZSwgXCJyZW5kZXJcIikgJiYgdHlwZW9mIHZhbHVlLnJlbmRlciA9PT0gXCJmdW5jdGlvblwiIHx8IGVuc3VyZVByb3BlcnR5RXhpc3RzKHZhbHVlLCBcIl9fYXN5bmNMb2FkZXJcIikgJiYgdHlwZW9mIHZhbHVlLl9fYXN5bmNMb2FkZXIgPT09IFwiZnVuY3Rpb25cIiB8fCB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCIgJiYgdmFsdWUgJiYgKFwic2V0dXBcIiBpbiB2YWx1ZSB8fCBcInByb3BzXCIgaW4gdmFsdWUpIHx8IC9edltBLVpdLy50ZXN0KGtleSk7XG4gICAgaWYgKHJhd0RhdGEgJiYgIWFjY2Vzc0Vycm9yKSB7XG4gICAgICBjb25zdCBpbmZvID0gZ2V0U2V0dXBTdGF0ZVR5cGUocmF3RGF0YSk7XG4gICAgICBjb25zdCB7IHN0YXRlVHlwZSwgc3RhdGVUeXBlTmFtZSB9ID0gZ2V0U3RhdGVUeXBlQW5kTmFtZShpbmZvKTtcbiAgICAgIGNvbnN0IGlzU3RhdGUgPSBpbmZvLnJlZiB8fCBpbmZvLmNvbXB1dGVkIHx8IGluZm8ucmVhY3RpdmU7XG4gICAgICBjb25zdCByYXcyID0gZW5zdXJlUHJvcGVydHlFeGlzdHMocmF3RGF0YSwgXCJlZmZlY3RcIikgPyAoKF9iMjUgPSAoX2EyNSA9IHJhd0RhdGEuZWZmZWN0KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5yYXcpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LnRvU3RyaW5nKCkpIHx8ICgoX2QgPSAoX2MgPSByYXdEYXRhLmVmZmVjdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmZuKSA9PSBudWxsID8gdm9pZCAwIDogX2QudG9TdHJpbmcoKSkgOiBudWxsO1xuICAgICAgaWYgKHN0YXRlVHlwZSlcbiAgICAgICAgaXNPdGhlclR5cGUgPSBmYWxzZTtcbiAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgLi4uc3RhdGVUeXBlID8geyBzdGF0ZVR5cGUsIHN0YXRlVHlwZU5hbWUgfSA6IHt9LFxuICAgICAgICAuLi5yYXcyID8geyByYXc6IHJhdzIgfSA6IHt9LFxuICAgICAgICBlZGl0YWJsZTogaXNTdGF0ZSAmJiAhaW5mby5yZWFkb25seVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgdHlwZSA9IGlzT3RoZXJUeXBlID8gXCJzZXR1cCAob3RoZXIpXCIgOiBcInNldHVwXCI7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtleSxcbiAgICAgIHZhbHVlLFxuICAgICAgdHlwZSxcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgaWdub3JlXG4gICAgICAuLi5yZXN1bHRcbiAgICB9O1xuICB9KTtcbn1cbmZ1bmN0aW9uIHByb2Nlc3NDb21wdXRlZChpbnN0YW5jZSwgbWVyZ2VkVHlwZSkge1xuICBjb25zdCB0eXBlID0gbWVyZ2VkVHlwZTtcbiAgY29uc3QgY29tcHV0ZWQgPSBbXTtcbiAgY29uc3QgZGVmcyA9IHR5cGUuY29tcHV0ZWQgfHwge307XG4gIGZvciAoY29uc3Qga2V5IGluIGRlZnMpIHtcbiAgICBjb25zdCBkZWYgPSBkZWZzW2tleV07XG4gICAgY29uc3QgdHlwZTIgPSB0eXBlb2YgZGVmID09PSBcImZ1bmN0aW9uXCIgJiYgZGVmLnZ1ZXggPyBcInZ1ZXggYmluZGluZ3NcIiA6IFwiY29tcHV0ZWRcIjtcbiAgICBjb21wdXRlZC5wdXNoKHtcbiAgICAgIHR5cGU6IHR5cGUyLFxuICAgICAga2V5LFxuICAgICAgdmFsdWU6IHJldHVybkVycm9yKCgpID0+IHtcbiAgICAgICAgdmFyIF9hMjU7XG4gICAgICAgIHJldHVybiAoX2EyNSA9IGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS5wcm94eSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjVba2V5XTtcbiAgICAgIH0pLFxuICAgICAgZWRpdGFibGU6IHR5cGVvZiBkZWYuc2V0ID09PSBcImZ1bmN0aW9uXCJcbiAgICB9KTtcbiAgfVxuICByZXR1cm4gY29tcHV0ZWQ7XG59XG5mdW5jdGlvbiBwcm9jZXNzQXR0cnMoaW5zdGFuY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGluc3RhbmNlLmF0dHJzKS5tYXAoKGtleSkgPT4gKHtcbiAgICB0eXBlOiBcImF0dHJzXCIsXG4gICAga2V5LFxuICAgIHZhbHVlOiByZXR1cm5FcnJvcigoKSA9PiBpbnN0YW5jZS5hdHRyc1trZXldKVxuICB9KSk7XG59XG5mdW5jdGlvbiBwcm9jZXNzUHJvdmlkZShpbnN0YW5jZSkge1xuICByZXR1cm4gUmVmbGVjdC5vd25LZXlzKGluc3RhbmNlLnByb3ZpZGVzKS5tYXAoKGtleSkgPT4gKHtcbiAgICB0eXBlOiBcInByb3ZpZGVkXCIsXG4gICAga2V5OiBrZXkudG9TdHJpbmcoKSxcbiAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gaW5zdGFuY2UucHJvdmlkZXNba2V5XSlcbiAgfSkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc0luamVjdChpbnN0YW5jZSwgbWVyZ2VkVHlwZSkge1xuICBpZiAoIShtZXJnZWRUeXBlID09IG51bGwgPyB2b2lkIDAgOiBtZXJnZWRUeXBlLmluamVjdCkpXG4gICAgcmV0dXJuIFtdO1xuICBsZXQga2V5cyA9IFtdO1xuICBsZXQgZGVmYXVsdFZhbHVlO1xuICBpZiAoQXJyYXkuaXNBcnJheShtZXJnZWRUeXBlLmluamVjdCkpIHtcbiAgICBrZXlzID0gbWVyZ2VkVHlwZS5pbmplY3QubWFwKChrZXkpID0+ICh7XG4gICAgICBrZXksXG4gICAgICBvcmlnaW5hbEtleToga2V5XG4gICAgfSkpO1xuICB9IGVsc2Uge1xuICAgIGtleXMgPSBSZWZsZWN0Lm93bktleXMobWVyZ2VkVHlwZS5pbmplY3QpLm1hcCgoa2V5KSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IG1lcmdlZFR5cGUuaW5qZWN0W2tleV07XG4gICAgICBsZXQgb3JpZ2luYWxLZXk7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiIHx8IHR5cGVvZiB2YWx1ZSA9PT0gXCJzeW1ib2xcIikge1xuICAgICAgICBvcmlnaW5hbEtleSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgb3JpZ2luYWxLZXkgPSB2YWx1ZS5mcm9tO1xuICAgICAgICBkZWZhdWx0VmFsdWUgPSB2YWx1ZS5kZWZhdWx0O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAga2V5LFxuICAgICAgICBvcmlnaW5hbEtleVxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuICByZXR1cm4ga2V5cy5tYXAoKHsga2V5LCBvcmlnaW5hbEtleSB9KSA9PiAoe1xuICAgIHR5cGU6IFwiaW5qZWN0ZWRcIixcbiAgICBrZXk6IG9yaWdpbmFsS2V5ICYmIGtleSAhPT0gb3JpZ2luYWxLZXkgPyBgJHtvcmlnaW5hbEtleS50b1N0cmluZygpfSBcXHUyNzlFICR7a2V5LnRvU3RyaW5nKCl9YCA6IGtleS50b1N0cmluZygpLFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wcm90b3R5cGUtYnVpbHRpbnNcbiAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gaW5zdGFuY2UuY3R4Lmhhc093blByb3BlcnR5KGtleSkgPyBpbnN0YW5jZS5jdHhba2V5XSA6IGluc3RhbmNlLnByb3ZpZGVzLmhhc093blByb3BlcnR5KG9yaWdpbmFsS2V5KSA/IGluc3RhbmNlLnByb3ZpZGVzW29yaWdpbmFsS2V5XSA6IGRlZmF1bHRWYWx1ZSlcbiAgfSkpO1xufVxuZnVuY3Rpb24gcHJvY2Vzc1JlZnMoaW5zdGFuY2UpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGluc3RhbmNlLnJlZnMpLm1hcCgoa2V5KSA9PiAoe1xuICAgIHR5cGU6IFwidGVtcGxhdGUgcmVmc1wiLFxuICAgIGtleSxcbiAgICB2YWx1ZTogcmV0dXJuRXJyb3IoKCkgPT4gaW5zdGFuY2UucmVmc1trZXldKVxuICB9KSk7XG59XG5mdW5jdGlvbiBwcm9jZXNzRXZlbnRMaXN0ZW5lcnMoaW5zdGFuY2UpIHtcbiAgdmFyIF9hMjUsIF9iMjU7XG4gIGNvbnN0IGVtaXRzRGVmaW5pdGlvbiA9IGluc3RhbmNlLnR5cGUuZW1pdHM7XG4gIGNvbnN0IGRlY2xhcmVkRW1pdHMgPSBBcnJheS5pc0FycmF5KGVtaXRzRGVmaW5pdGlvbikgPyBlbWl0c0RlZmluaXRpb24gOiBPYmplY3Qua2V5cyhlbWl0c0RlZmluaXRpb24gIT0gbnVsbCA/IGVtaXRzRGVmaW5pdGlvbiA6IHt9KTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKChfYjI1ID0gKF9hMjUgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2Uudm5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnByb3BzKSAhPSBudWxsID8gX2IyNSA6IHt9KTtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGZvciAoY29uc3Qga2V5IG9mIGtleXMpIHtcbiAgICBjb25zdCBbcHJlZml4LCAuLi5ldmVudE5hbWVQYXJ0c10gPSBrZXkuc3BsaXQoLyg/PVtBLVpdKS8pO1xuICAgIGlmIChwcmVmaXggPT09IFwib25cIikge1xuICAgICAgY29uc3QgZXZlbnROYW1lID0gZXZlbnROYW1lUGFydHMuam9pbihcIi1cIikudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IGlzRGVjbGFyZWQgPSBkZWNsYXJlZEVtaXRzLmluY2x1ZGVzKGV2ZW50TmFtZSk7XG4gICAgICByZXN1bHQucHVzaCh7XG4gICAgICAgIHR5cGU6IFwiZXZlbnQgbGlzdGVuZXJzXCIsXG4gICAgICAgIGtleTogZXZlbnROYW1lLFxuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgIGRpc3BsYXlUZXh0OiBpc0RlY2xhcmVkID8gXCJcXHUyNzA1IERlY2xhcmVkXCIgOiBcIlxcdTI2QTBcXHVGRTBGIE5vdCBkZWNsYXJlZFwiLFxuICAgICAgICAgICAga2V5OiBpc0RlY2xhcmVkID8gXCJcXHUyNzA1IERlY2xhcmVkXCIgOiBcIlxcdTI2QTBcXHVGRTBGIE5vdCBkZWNsYXJlZFwiLFxuICAgICAgICAgICAgdmFsdWU6IGlzRGVjbGFyZWQgPyBcIlxcdTI3MDUgRGVjbGFyZWRcIiA6IFwiXFx1MjZBMFxcdUZFMEYgTm90IGRlY2xhcmVkXCIsXG4gICAgICAgICAgICB0b29sdGlwVGV4dDogIWlzRGVjbGFyZWQgPyBgVGhlIGV2ZW50IDxjb2RlPiR7ZXZlbnROYW1lfTwvY29kZT4gaXMgbm90IGRlY2xhcmVkIGluIHRoZSA8Y29kZT5lbWl0czwvY29kZT4gb3B0aW9uLiBJdCB3aWxsIGxlYWsgaW50byB0aGUgY29tcG9uZW50J3MgYXR0cmlidXRlcyAoPGNvZGU+JGF0dHJzPC9jb2RlPikuYCA6IG51bGxcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcHJvY2Vzc0luc3RhbmNlU3RhdGUoaW5zdGFuY2UpIHtcbiAgY29uc3QgbWVyZ2VkVHlwZSA9IHJlc29sdmVNZXJnZWRPcHRpb25zKGluc3RhbmNlKTtcbiAgcmV0dXJuIHByb2Nlc3NQcm9wcyhpbnN0YW5jZSkuY29uY2F0KFxuICAgIHByb2Nlc3NTdGF0ZShpbnN0YW5jZSksXG4gICAgcHJvY2Vzc1NldHVwU3RhdGUoaW5zdGFuY2UpLFxuICAgIHByb2Nlc3NDb21wdXRlZChpbnN0YW5jZSwgbWVyZ2VkVHlwZSksXG4gICAgcHJvY2Vzc0F0dHJzKGluc3RhbmNlKSxcbiAgICBwcm9jZXNzUHJvdmlkZShpbnN0YW5jZSksXG4gICAgcHJvY2Vzc0luamVjdChpbnN0YW5jZSwgbWVyZ2VkVHlwZSksXG4gICAgcHJvY2Vzc1JlZnMoaW5zdGFuY2UpLFxuICAgIHByb2Nlc3NFdmVudExpc3RlbmVycyhpbnN0YW5jZSlcbiAgKTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2luZGV4LnRzXG5mdW5jdGlvbiBnZXRJbnN0YW5jZVN0YXRlKHBhcmFtcykge1xuICB2YXIgX2EyNTtcbiAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShhY3RpdmVBcHBSZWNvcmQudmFsdWUsIHBhcmFtcy5pbnN0YW5jZUlkKTtcbiAgY29uc3QgaWQgPSBnZXRVbmlxdWVDb21wb25lbnRJZChpbnN0YW5jZSk7XG4gIGNvbnN0IG5hbWUgPSBnZXRJbnN0YW5jZU5hbWUoaW5zdGFuY2UpO1xuICBjb25zdCBmaWxlID0gKF9hMjUgPSBpbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogaW5zdGFuY2UudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuX19maWxlO1xuICBjb25zdCBzdGF0ZSA9IHByb2Nlc3NJbnN0YW5jZVN0YXRlKGluc3RhbmNlKTtcbiAgcmV0dXJuIHtcbiAgICBpZCxcbiAgICBuYW1lLFxuICAgIGZpbGUsXG4gICAgc3RhdGUsXG4gICAgaW5zdGFuY2VcbiAgfTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3RyZWUvd2Fsa2VyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvdHJlZS9maWx0ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBjbGFzc2lmeSBhcyBjbGFzc2lmeTIsIGtlYmFiaXplIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgQ29tcG9uZW50RmlsdGVyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihmaWx0ZXIpIHtcbiAgICB0aGlzLmZpbHRlciA9IGZpbHRlciB8fCBcIlwiO1xuICB9XG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBpbnN0YW5jZSBpcyBxdWFsaWZpZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfFZub2RlfSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAgaXNRdWFsaWZpZWQoaW5zdGFuY2UpIHtcbiAgICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgICByZXR1cm4gY2xhc3NpZnkyKG5hbWUpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5maWx0ZXIpIHx8IGtlYmFiaXplKG5hbWUpLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXModGhpcy5maWx0ZXIpO1xuICB9XG59O1xuZnVuY3Rpb24gY3JlYXRlQ29tcG9uZW50RmlsdGVyKGZpbHRlclRleHQpIHtcbiAgcmV0dXJuIG5ldyBDb21wb25lbnRGaWx0ZXIoZmlsdGVyVGV4dCk7XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC90cmVlL3dhbGtlci50c1xudmFyIENvbXBvbmVudFdhbGtlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xuICAgIC8vIERlZHVwZSBpbnN0YW5jZXMgKFNvbWUgaW5zdGFuY2VzIG1heSBiZSBib3RoIG9uIGEgY29tcG9uZW50IGFuZCBvbiBhIGNoaWxkIGFic3RyYWN0L2Z1bmN0aW9uYWwgY29tcG9uZW50KVxuICAgIHRoaXMuY2FwdHVyZUlkcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgY29uc3QgeyBmaWx0ZXJUZXh0ID0gXCJcIiwgbWF4RGVwdGgsIHJlY3Vyc2l2ZWx5LCBhcGkgfSA9IG9wdGlvbnM7XG4gICAgdGhpcy5jb21wb25lbnRGaWx0ZXIgPSBjcmVhdGVDb21wb25lbnRGaWx0ZXIoZmlsdGVyVGV4dCk7XG4gICAgdGhpcy5tYXhEZXB0aCA9IG1heERlcHRoO1xuICAgIHRoaXMucmVjdXJzaXZlbHkgPSByZWN1cnNpdmVseTtcbiAgICB0aGlzLmFwaSA9IGFwaTtcbiAgfVxuICBnZXRDb21wb25lbnRUcmVlKGluc3RhbmNlKSB7XG4gICAgdGhpcy5jYXB0dXJlSWRzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbiAgICByZXR1cm4gdGhpcy5maW5kUXVhbGlmaWVkQ2hpbGRyZW4oaW5zdGFuY2UsIDApO1xuICB9XG4gIGdldENvbXBvbmVudFBhcmVudHMoaW5zdGFuY2UpIHtcbiAgICB0aGlzLmNhcHR1cmVJZHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICB0aGlzLmNhcHR1cmVJZChpbnN0YW5jZSk7XG4gICAgbGV0IHBhcmVudCA9IGluc3RhbmNlO1xuICAgIHdoaWxlIChwYXJlbnQgPSBwYXJlbnQucGFyZW50KSB7XG4gICAgICB0aGlzLmNhcHR1cmVJZChwYXJlbnQpO1xuICAgICAgcGFyZW50cy5wdXNoKHBhcmVudCk7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9XG4gIGNhcHR1cmVJZChpbnN0YW5jZSkge1xuICAgIGlmICghaW5zdGFuY2UpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpZCA9IGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gIT0gbnVsbCA/IGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gOiBnZXRVbmlxdWVDb21wb25lbnRJZChpbnN0YW5jZSk7XG4gICAgaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyA9IGlkO1xuICAgIGlmICh0aGlzLmNhcHR1cmVJZHMuaGFzKGlkKSlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuY2FwdHVyZUlkcy5zZXQoaWQsIHZvaWQgMCk7XG4gICAgdGhpcy5tYXJrKGluc3RhbmNlKTtcbiAgICByZXR1cm4gaWQ7XG4gIH1cbiAgLyoqXG4gICAqIENhcHR1cmUgdGhlIG1ldGEgaW5mb3JtYXRpb24gb2YgYW4gaW5zdGFuY2UuIChyZWN1cnNpdmUpXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtvYmplY3R9XG4gICAqL1xuICBhc3luYyBjYXB0dXJlKGluc3RhbmNlLCBkZXB0aCkge1xuICAgIHZhciBfYTI1O1xuICAgIGlmICghaW5zdGFuY2UpXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBpZCA9IHRoaXMuY2FwdHVyZUlkKGluc3RhbmNlKTtcbiAgICBjb25zdCBuYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKTtcbiAgICBjb25zdCBjaGlsZHJlbiA9IHRoaXMuZ2V0SW50ZXJuYWxJbnN0YW5jZUNoaWxkcmVuKGluc3RhbmNlLnN1YlRyZWUpLmZpbHRlcigoY2hpbGQpID0+ICFpc0JlaW5nRGVzdHJveWVkKGNoaWxkKSk7XG4gICAgY29uc3QgcGFyZW50cyA9IHRoaXMuZ2V0Q29tcG9uZW50UGFyZW50cyhpbnN0YW5jZSkgfHwgW107XG4gICAgY29uc3QgaW5hY3RpdmUgPSAhIWluc3RhbmNlLmlzRGVhY3RpdmF0ZWQgfHwgcGFyZW50cy5zb21lKChwYXJlbnQpID0+IHBhcmVudC5pc0RlYWN0aXZhdGVkKTtcbiAgICBjb25zdCB0cmVlTm9kZSA9IHtcbiAgICAgIHVpZDogaW5zdGFuY2UudWlkLFxuICAgICAgaWQsXG4gICAgICBuYW1lLFxuICAgICAgcmVuZGVyS2V5OiBnZXRSZW5kZXJLZXkoaW5zdGFuY2Uudm5vZGUgPyBpbnN0YW5jZS52bm9kZS5rZXkgOiBudWxsKSxcbiAgICAgIGluYWN0aXZlLFxuICAgICAgY2hpbGRyZW46IFtdLFxuICAgICAgaXNGcmFnbWVudDogaXNGcmFnbWVudChpbnN0YW5jZSksXG4gICAgICB0YWdzOiB0eXBlb2YgaW5zdGFuY2UudHlwZSAhPT0gXCJmdW5jdGlvblwiID8gW10gOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBsYWJlbDogXCJmdW5jdGlvbmFsXCIsXG4gICAgICAgICAgdGV4dENvbG9yOiA1NTkyNDA1LFxuICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogMTU2NTg3MzRcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIGF1dG9PcGVuOiB0aGlzLnJlY3Vyc2l2ZWx5LFxuICAgICAgZmlsZTogaW5zdGFuY2UudHlwZS5fX2ZpbGUgfHwgXCJcIlxuICAgIH07XG4gICAgaWYgKGRlcHRoIDwgdGhpcy5tYXhEZXB0aCB8fCBpbnN0YW5jZS50eXBlLl9faXNLZWVwQWxpdmUgfHwgcGFyZW50cy5zb21lKChwYXJlbnQpID0+IHBhcmVudC50eXBlLl9faXNLZWVwQWxpdmUpKSB7XG4gICAgICB0cmVlTm9kZS5jaGlsZHJlbiA9IGF3YWl0IFByb21pc2UuYWxsKGNoaWxkcmVuLm1hcCgoY2hpbGQpID0+IHRoaXMuY2FwdHVyZShjaGlsZCwgZGVwdGggKyAxKSkuZmlsdGVyKEJvb2xlYW4pKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXNLZWVwQWxpdmUoaW5zdGFuY2UpKSB7XG4gICAgICBjb25zdCBjYWNoZWRDb21wb25lbnRzID0gdGhpcy5nZXRLZWVwQWxpdmVDYWNoZWRJbnN0YW5jZXMoaW5zdGFuY2UpO1xuICAgICAgY29uc3QgY2hpbGRyZW5JZHMgPSBjaGlsZHJlbi5tYXAoKGNoaWxkKSA9PiBjaGlsZC5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fKTtcbiAgICAgIGZvciAoY29uc3QgY2FjaGVkQ2hpbGQgb2YgY2FjaGVkQ29tcG9uZW50cykge1xuICAgICAgICBpZiAoIWNoaWxkcmVuSWRzLmluY2x1ZGVzKGNhY2hlZENoaWxkLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18pKSB7XG4gICAgICAgICAgY29uc3Qgbm9kZSA9IGF3YWl0IHRoaXMuY2FwdHVyZSh7IC4uLmNhY2hlZENoaWxkLCBpc0RlYWN0aXZhdGVkOiB0cnVlIH0sIGRlcHRoICsgMSk7XG4gICAgICAgICAgaWYgKG5vZGUpXG4gICAgICAgICAgICB0cmVlTm9kZS5jaGlsZHJlbi5wdXNoKG5vZGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHJvb3RFbGVtZW50cyA9IGdldFJvb3RFbGVtZW50c0Zyb21Db21wb25lbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgY29uc3QgZmlyc3RFbGVtZW50ID0gcm9vdEVsZW1lbnRzWzBdO1xuICAgIGlmIChmaXJzdEVsZW1lbnQgPT0gbnVsbCA/IHZvaWQgMCA6IGZpcnN0RWxlbWVudC5wYXJlbnRFbGVtZW50KSB7XG4gICAgICBjb25zdCBwYXJlbnRJbnN0YW5jZSA9IGluc3RhbmNlLnBhcmVudDtcbiAgICAgIGNvbnN0IHBhcmVudFJvb3RFbGVtZW50cyA9IHBhcmVudEluc3RhbmNlID8gZ2V0Um9vdEVsZW1lbnRzRnJvbUNvbXBvbmVudEluc3RhbmNlKHBhcmVudEluc3RhbmNlKSA6IFtdO1xuICAgICAgbGV0IGVsID0gZmlyc3RFbGVtZW50O1xuICAgICAgY29uc3QgaW5kZXhMaXN0ID0gW107XG4gICAgICBkbyB7XG4gICAgICAgIGluZGV4TGlzdC5wdXNoKEFycmF5LmZyb20oZWwucGFyZW50RWxlbWVudC5jaGlsZE5vZGVzKS5pbmRleE9mKGVsKSk7XG4gICAgICAgIGVsID0gZWwucGFyZW50RWxlbWVudDtcbiAgICAgIH0gd2hpbGUgKGVsLnBhcmVudEVsZW1lbnQgJiYgcGFyZW50Um9vdEVsZW1lbnRzLmxlbmd0aCAmJiAhcGFyZW50Um9vdEVsZW1lbnRzLmluY2x1ZGVzKGVsKSk7XG4gICAgICB0cmVlTm9kZS5kb21PcmRlciA9IGluZGV4TGlzdC5yZXZlcnNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyZWVOb2RlLmRvbU9yZGVyID0gWy0xXTtcbiAgICB9XG4gICAgaWYgKChfYTI1ID0gaW5zdGFuY2Uuc3VzcGVuc2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnN1c3BlbnNlS2V5KSB7XG4gICAgICB0cmVlTm9kZS50YWdzLnB1c2goe1xuICAgICAgICBsYWJlbDogaW5zdGFuY2Uuc3VzcGVuc2Uuc3VzcGVuc2VLZXksXG4gICAgICAgIGJhY2tncm91bmRDb2xvcjogMTQ5Nzk4MTIsXG4gICAgICAgIHRleHRDb2xvcjogMTY3NzcyMTVcbiAgICAgIH0pO1xuICAgICAgdGhpcy5tYXJrKGluc3RhbmNlLCB0cnVlKTtcbiAgICB9XG4gICAgdGhpcy5hcGkudmlzaXRDb21wb25lbnRUcmVlKHtcbiAgICAgIHRyZWVOb2RlLFxuICAgICAgY29tcG9uZW50SW5zdGFuY2U6IGluc3RhbmNlLFxuICAgICAgYXBwOiBpbnN0YW5jZS5hcHBDb250ZXh0LmFwcCxcbiAgICAgIGZpbHRlcjogdGhpcy5jb21wb25lbnRGaWx0ZXIuZmlsdGVyXG4gICAgfSk7XG4gICAgcmV0dXJuIHRyZWVOb2RlO1xuICB9XG4gIC8qKlxuICAgKiBGaW5kIHF1YWxpZmllZCBjaGlsZHJlbiBmcm9tIGEgc2luZ2xlIGluc3RhbmNlLlxuICAgKiBJZiB0aGUgaW5zdGFuY2UgaXRzZWxmIGlzIHF1YWxpZmllZCwganVzdCByZXR1cm4gaXRzZWxmLlxuICAgKiBUaGlzIGlzIG9rIGJlY2F1c2UgW10uY29uY2F0IHdvcmtzIGluIGJvdGggY2FzZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfFZub2RlfSBpbnN0YW5jZVxuICAgKiBAcmV0dXJuIHtWdWV8QXJyYXl9XG4gICAqL1xuICBhc3luYyBmaW5kUXVhbGlmaWVkQ2hpbGRyZW4oaW5zdGFuY2UsIGRlcHRoKSB7XG4gICAgdmFyIF9hMjU7XG4gICAgaWYgKHRoaXMuY29tcG9uZW50RmlsdGVyLmlzUXVhbGlmaWVkKGluc3RhbmNlKSAmJiAhKChfYTI1ID0gaW5zdGFuY2UudHlwZS5kZXZ0b29scykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUuaGlkZSkpIHtcbiAgICAgIHJldHVybiBbYXdhaXQgdGhpcy5jYXB0dXJlKGluc3RhbmNlLCBkZXB0aCldO1xuICAgIH0gZWxzZSBpZiAoaW5zdGFuY2Uuc3ViVHJlZSkge1xuICAgICAgY29uc3QgbGlzdCA9IHRoaXMuaXNLZWVwQWxpdmUoaW5zdGFuY2UpID8gdGhpcy5nZXRLZWVwQWxpdmVDYWNoZWRJbnN0YW5jZXMoaW5zdGFuY2UpIDogdGhpcy5nZXRJbnRlcm5hbEluc3RhbmNlQ2hpbGRyZW4oaW5zdGFuY2Uuc3ViVHJlZSk7XG4gICAgICByZXR1cm4gdGhpcy5maW5kUXVhbGlmaWVkQ2hpbGRyZW5Gcm9tTGlzdChsaXN0LCBkZXB0aCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEl0ZXJhdGUgdGhyb3VnaCBhbiBhcnJheSBvZiBpbnN0YW5jZXMgYW5kIGZsYXR0ZW4gaXQgaW50b1xuICAgKiBhbiBhcnJheSBvZiBxdWFsaWZpZWQgaW5zdGFuY2VzLiBUaGlzIGlzIGEgZGVwdGgtZmlyc3RcbiAgICogdHJhdmVyc2FsIC0gZS5nLiBpZiBhbiBpbnN0YW5jZSBpcyBub3QgbWF0Y2hlZCwgd2Ugd2lsbFxuICAgKiByZWN1cnNpdmVseSBnbyBkZWVwZXIgdW50aWwgYSBxdWFsaWZpZWQgY2hpbGQgaXMgZm91bmQuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGluc3RhbmNlc1xuICAgKiBAcmV0dXJuIHtBcnJheX1cbiAgICovXG4gIGFzeW5jIGZpbmRRdWFsaWZpZWRDaGlsZHJlbkZyb21MaXN0KGluc3RhbmNlcywgZGVwdGgpIHtcbiAgICBpbnN0YW5jZXMgPSBpbnN0YW5jZXMuZmlsdGVyKChjaGlsZCkgPT4ge1xuICAgICAgdmFyIF9hMjU7XG4gICAgICByZXR1cm4gIWlzQmVpbmdEZXN0cm95ZWQoY2hpbGQpICYmICEoKF9hMjUgPSBjaGlsZC50eXBlLmRldnRvb2xzKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5oaWRlKTtcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuY29tcG9uZW50RmlsdGVyLmZpbHRlcilcbiAgICAgIHJldHVybiBQcm9taXNlLmFsbChpbnN0YW5jZXMubWFwKChjaGlsZCkgPT4gdGhpcy5jYXB0dXJlKGNoaWxkLCBkZXB0aCkpKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXdhaXQgUHJvbWlzZS5hbGwoaW5zdGFuY2VzLm1hcCgoaSkgPT4gdGhpcy5maW5kUXVhbGlmaWVkQ2hpbGRyZW4oaSwgZGVwdGgpKSkpO1xuICB9XG4gIC8qKlxuICAgKiBHZXQgY2hpbGRyZW4gZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZS5cbiAgICovXG4gIGdldEludGVybmFsSW5zdGFuY2VDaGlsZHJlbihzdWJUcmVlLCBzdXNwZW5zZSA9IG51bGwpIHtcbiAgICBjb25zdCBsaXN0ID0gW107XG4gICAgaWYgKHN1YlRyZWUpIHtcbiAgICAgIGlmIChzdWJUcmVlLmNvbXBvbmVudCkge1xuICAgICAgICAhc3VzcGVuc2UgPyBsaXN0LnB1c2goc3ViVHJlZS5jb21wb25lbnQpIDogbGlzdC5wdXNoKHsgLi4uc3ViVHJlZS5jb21wb25lbnQsIHN1c3BlbnNlIH0pO1xuICAgICAgfSBlbHNlIGlmIChzdWJUcmVlLnN1c3BlbnNlKSB7XG4gICAgICAgIGNvbnN0IHN1c3BlbnNlS2V5ID0gIXN1YlRyZWUuc3VzcGVuc2UuaXNJbkZhbGxiYWNrID8gXCJzdXNwZW5zZSBkZWZhdWx0XCIgOiBcInN1c3BlbnNlIGZhbGxiYWNrXCI7XG4gICAgICAgIGxpc3QucHVzaCguLi50aGlzLmdldEludGVybmFsSW5zdGFuY2VDaGlsZHJlbihzdWJUcmVlLnN1c3BlbnNlLmFjdGl2ZUJyYW5jaCwgeyAuLi5zdWJUcmVlLnN1c3BlbnNlLCBzdXNwZW5zZUtleSB9KSk7XG4gICAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoc3ViVHJlZS5jaGlsZHJlbikpIHtcbiAgICAgICAgc3ViVHJlZS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZFN1YlRyZWUpID0+IHtcbiAgICAgICAgICBpZiAoY2hpbGRTdWJUcmVlLmNvbXBvbmVudClcbiAgICAgICAgICAgICFzdXNwZW5zZSA/IGxpc3QucHVzaChjaGlsZFN1YlRyZWUuY29tcG9uZW50KSA6IGxpc3QucHVzaCh7IC4uLmNoaWxkU3ViVHJlZS5jb21wb25lbnQsIHN1c3BlbnNlIH0pO1xuICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxpc3QucHVzaCguLi50aGlzLmdldEludGVybmFsSW5zdGFuY2VDaGlsZHJlbihjaGlsZFN1YlRyZWUsIHN1c3BlbnNlKSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGlzdC5maWx0ZXIoKGNoaWxkKSA9PiB7XG4gICAgICB2YXIgX2EyNTtcbiAgICAgIHJldHVybiAhaXNCZWluZ0Rlc3Ryb3llZChjaGlsZCkgJiYgISgoX2EyNSA9IGNoaWxkLnR5cGUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmhpZGUpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIGNhcHR1cmVkIGFuZCBzdG9yZSBpdCBpbiB0aGUgaW5zdGFuY2UgbWFwLlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gaW5zdGFuY2VcbiAgICovXG4gIG1hcmsoaW5zdGFuY2UsIGZvcmNlID0gZmFsc2UpIHtcbiAgICBjb25zdCBpbnN0YW5jZU1hcCA9IGdldEFwcFJlY29yZChpbnN0YW5jZSkuaW5zdGFuY2VNYXA7XG4gICAgaWYgKGZvcmNlIHx8ICFpbnN0YW5jZU1hcC5oYXMoaW5zdGFuY2UuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXykpIHtcbiAgICAgIGluc3RhbmNlTWFwLnNldChpbnN0YW5jZS5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fLCBpbnN0YW5jZSk7XG4gICAgICBhY3RpdmVBcHBSZWNvcmQudmFsdWUuaW5zdGFuY2VNYXAgPSBpbnN0YW5jZU1hcDtcbiAgICB9XG4gIH1cbiAgaXNLZWVwQWxpdmUoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gaW5zdGFuY2UudHlwZS5fX2lzS2VlcEFsaXZlICYmIGluc3RhbmNlLl9fdl9jYWNoZTtcbiAgfVxuICBnZXRLZWVwQWxpdmVDYWNoZWRJbnN0YW5jZXMoaW5zdGFuY2UpIHtcbiAgICByZXR1cm4gQXJyYXkuZnJvbShpbnN0YW5jZS5fX3ZfY2FjaGUudmFsdWVzKCkpLm1hcCgodm5vZGUpID0+IHZub2RlLmNvbXBvbmVudCkuZmlsdGVyKEJvb2xlYW4pO1xuICB9XG59O1xuXG4vLyBzcmMvY29yZS90aW1lbGluZS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGlzQnJvd3NlciBhcyBpc0Jyb3dzZXIyIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9jb3JlL3RpbWVsaW5lL3BlcmYudHNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgbWFya0VuZFF1ZXVlID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTtcbnZhciBQRVJGT1JNQU5DRV9FVkVOVF9MQVlFUl9JRCA9IFwicGVyZm9ybWFuY2VcIjtcbmFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1hbmNlTWFya1N0YXJ0KGFwaSwgYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSB7XG4gIGNvbnN0IGFwcFJlY29yZCA9IGF3YWl0IGdldEFwcFJlY29yZChhcHApO1xuICBpZiAoIWFwcFJlY29yZCkge1xuICAgIHJldHVybjtcbiAgfVxuICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0SW5zdGFuY2VOYW1lKHZtKSB8fCBcIlVua25vd24gQ29tcG9uZW50XCI7XG4gIGNvbnN0IGdyb3VwSWQgPSBkZXZ0b29sc1N0YXRlLnBlcmZVbmlxdWVHcm91cElkKys7XG4gIGNvbnN0IGdyb3VwS2V5ID0gYCR7dWlkfS0ke3R5cGV9YDtcbiAgYXBwUmVjb3JkLnBlcmZHcm91cElkcy5zZXQoZ3JvdXBLZXksIHsgZ3JvdXBJZCwgdGltZSB9KTtcbiAgYXdhaXQgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgIGxheWVySWQ6IFBFUkZPUk1BTkNFX0VWRU5UX0xBWUVSX0lELFxuICAgIGV2ZW50OiB7XG4gICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgZGF0YToge1xuICAgICAgICBjb21wb25lbnQ6IGNvbXBvbmVudE5hbWUsXG4gICAgICAgIHR5cGUsXG4gICAgICAgIG1lYXN1cmU6IFwic3RhcnRcIlxuICAgICAgfSxcbiAgICAgIHRpdGxlOiBjb21wb25lbnROYW1lLFxuICAgICAgc3VidGl0bGU6IHR5cGUsXG4gICAgICBncm91cElkXG4gICAgfVxuICB9KTtcbiAgaWYgKG1hcmtFbmRRdWV1ZS5oYXMoZ3JvdXBLZXkpKSB7XG4gICAgY29uc3Qge1xuICAgICAgYXBwOiBhcHAyLFxuICAgICAgdWlkOiB1aWQyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICB0eXBlOiB0eXBlMixcbiAgICAgIHRpbWU6IHRpbWUyXG4gICAgfSA9IG1hcmtFbmRRdWV1ZS5nZXQoZ3JvdXBLZXkpO1xuICAgIG1hcmtFbmRRdWV1ZS5kZWxldGUoZ3JvdXBLZXkpO1xuICAgIGF3YWl0IHBlcmZvcm1hbmNlTWFya0VuZChcbiAgICAgIGFwaSxcbiAgICAgIGFwcDIsXG4gICAgICB1aWQyLFxuICAgICAgaW5zdGFuY2UsXG4gICAgICB0eXBlMixcbiAgICAgIHRpbWUyXG4gICAgKTtcbiAgfVxufVxuZnVuY3Rpb24gcGVyZm9ybWFuY2VNYXJrRW5kKGFwaSwgYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSB7XG4gIGNvbnN0IGFwcFJlY29yZCA9IGdldEFwcFJlY29yZChhcHApO1xuICBpZiAoIWFwcFJlY29yZClcbiAgICByZXR1cm47XG4gIGNvbnN0IGNvbXBvbmVudE5hbWUgPSBnZXRJbnN0YW5jZU5hbWUodm0pIHx8IFwiVW5rbm93biBDb21wb25lbnRcIjtcbiAgY29uc3QgZ3JvdXBLZXkgPSBgJHt1aWR9LSR7dHlwZX1gO1xuICBjb25zdCBncm91cEluZm8gPSBhcHBSZWNvcmQucGVyZkdyb3VwSWRzLmdldChncm91cEtleSk7XG4gIGlmIChncm91cEluZm8pIHtcbiAgICBjb25zdCBncm91cElkID0gZ3JvdXBJbmZvLmdyb3VwSWQ7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gZ3JvdXBJbmZvLnRpbWU7XG4gICAgY29uc3QgZHVyYXRpb24gPSB0aW1lIC0gc3RhcnRUaW1lO1xuICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgIGxheWVySWQ6IFBFUkZPUk1BTkNFX0VWRU5UX0xBWUVSX0lELFxuICAgICAgZXZlbnQ6IHtcbiAgICAgICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNvbXBvbmVudDogY29tcG9uZW50TmFtZSxcbiAgICAgICAgICB0eXBlLFxuICAgICAgICAgIG1lYXN1cmU6IFwiZW5kXCIsXG4gICAgICAgICAgZHVyYXRpb246IHtcbiAgICAgICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgICAgdHlwZTogXCJEdXJhdGlvblwiLFxuICAgICAgICAgICAgICB2YWx1ZTogZHVyYXRpb24sXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGAke2R1cmF0aW9ufSBtc2BcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHRpdGxlOiBjb21wb25lbnROYW1lLFxuICAgICAgICBzdWJ0aXRsZTogdHlwZSxcbiAgICAgICAgZ3JvdXBJZFxuICAgICAgfVxuICAgIH0pO1xuICB9IGVsc2Uge1xuICAgIG1hcmtFbmRRdWV1ZS5zZXQoZ3JvdXBLZXksIHsgYXBwLCB1aWQsIGluc3RhbmNlOiB2bSwgdHlwZSwgdGltZSB9KTtcbiAgfVxufVxuXG4vLyBzcmMvY29yZS90aW1lbGluZS9pbmRleC50c1xudmFyIENPTVBPTkVOVF9FVkVOVF9MQVlFUl9JRCA9IFwiY29tcG9uZW50LWV2ZW50XCI7XG5mdW5jdGlvbiBzZXR1cEJ1aWx0aW5UaW1lbGluZUxheWVycyhhcGkpIHtcbiAgaWYgKCFpc0Jyb3dzZXIyKVxuICAgIHJldHVybjtcbiAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xuICAgIGlkOiBcIm1vdXNlXCIsXG4gICAgbGFiZWw6IFwiTW91c2VcIixcbiAgICBjb2xvcjogMTA3Njg4MTVcbiAgfSk7XG4gIFtcIm1vdXNlZG93blwiLCBcIm1vdXNldXBcIiwgXCJjbGlja1wiLCBcImRibGNsaWNrXCJdLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgIGlmICghZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLnJlY29yZGluZ1N0YXRlIHx8ICFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUubW91c2VFdmVudEVuYWJsZWQpXG4gICAgICByZXR1cm47XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnRUeXBlLCBhc3luYyAoZXZlbnQpID0+IHtcbiAgICAgIGF3YWl0IGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgbGF5ZXJJZDogXCJtb3VzZVwiLFxuICAgICAgICBldmVudDoge1xuICAgICAgICAgIHRpbWU6IERhdGUubm93KCksXG4gICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgdHlwZTogZXZlbnRUeXBlLFxuICAgICAgICAgICAgeDogZXZlbnQuY2xpZW50WCxcbiAgICAgICAgICAgIHk6IGV2ZW50LmNsaWVudFlcbiAgICAgICAgICB9LFxuICAgICAgICAgIHRpdGxlOiBldmVudFR5cGVcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSwge1xuICAgICAgY2FwdHVyZTogdHJ1ZSxcbiAgICAgIHBhc3NpdmU6IHRydWVcbiAgICB9KTtcbiAgfSk7XG4gIGFwaS5hZGRUaW1lbGluZUxheWVyKHtcbiAgICBpZDogXCJrZXlib2FyZFwiLFxuICAgIGxhYmVsOiBcIktleWJvYXJkXCIsXG4gICAgY29sb3I6IDg0NzUwNTVcbiAgfSk7XG4gIFtcImtleXVwXCIsIFwia2V5ZG93blwiLCBcImtleXByZXNzXCJdLmZvckVhY2goKGV2ZW50VHlwZSkgPT4ge1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKGV2ZW50VHlwZSwgYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAoIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5yZWNvcmRpbmdTdGF0ZSB8fCAhZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLmtleWJvYXJkRXZlbnRFbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBhd2FpdCBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgIGxheWVySWQ6IFwia2V5Ym9hcmRcIixcbiAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICB0aW1lOiBEYXRlLm5vdygpLFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHR5cGU6IGV2ZW50VHlwZSxcbiAgICAgICAgICAgIGtleTogZXZlbnQua2V5LFxuICAgICAgICAgICAgY3RybEtleTogZXZlbnQuY3RybEtleSxcbiAgICAgICAgICAgIHNoaWZ0S2V5OiBldmVudC5zaGlmdEtleSxcbiAgICAgICAgICAgIGFsdEtleTogZXZlbnQuYWx0S2V5LFxuICAgICAgICAgICAgbWV0YUtleTogZXZlbnQubWV0YUtleVxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGl0bGU6IGV2ZW50LmtleVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LCB7XG4gICAgICBjYXB0dXJlOiB0cnVlLFxuICAgICAgcGFzc2l2ZTogdHJ1ZVxuICAgIH0pO1xuICB9KTtcbiAgYXBpLmFkZFRpbWVsaW5lTGF5ZXIoe1xuICAgIGlkOiBDT01QT05FTlRfRVZFTlRfTEFZRVJfSUQsXG4gICAgbGFiZWw6IFwiQ29tcG9uZW50IGV2ZW50c1wiLFxuICAgIGNvbG9yOiA1MjI2NjM3XG4gIH0pO1xuICBob29rLm9uLmNvbXBvbmVudEVtaXQoYXN5bmMgKGFwcCwgaW5zdGFuY2UsIGV2ZW50LCBwYXJhbXMpID0+IHtcbiAgICBpZiAoIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5yZWNvcmRpbmdTdGF0ZSB8fCAhZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLmNvbXBvbmVudEV2ZW50RW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBhcHBSZWNvcmQgPSBhd2FpdCBnZXRBcHBSZWNvcmQoYXBwKTtcbiAgICBpZiAoIWFwcFJlY29yZClcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjb21wb25lbnRJZCA9IGAke2FwcFJlY29yZC5pZH06JHtpbnN0YW5jZS51aWR9YDtcbiAgICBjb25zdCBjb21wb25lbnROYW1lID0gZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKSB8fCBcIlVua25vd24gQ29tcG9uZW50XCI7XG4gICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgbGF5ZXJJZDogQ09NUE9ORU5UX0VWRU5UX0xBWUVSX0lELFxuICAgICAgZXZlbnQ6IHtcbiAgICAgICAgdGltZTogRGF0ZS5ub3coKSxcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGNvbXBvbmVudDoge1xuICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICB0eXBlOiBcImNvbXBvbmVudC1kZWZpbml0aW9uXCIsXG4gICAgICAgICAgICAgIGRpc3BsYXk6IGNvbXBvbmVudE5hbWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGV2ZW50LFxuICAgICAgICAgIHBhcmFtc1xuICAgICAgICB9LFxuICAgICAgICB0aXRsZTogZXZlbnQsXG4gICAgICAgIHN1YnRpdGxlOiBgYnkgJHtjb21wb25lbnROYW1lfWAsXG4gICAgICAgIG1ldGE6IHtcbiAgICAgICAgICBjb21wb25lbnRJZFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgaWQ6IFwicGVyZm9ybWFuY2VcIixcbiAgICBsYWJlbDogUEVSRk9STUFOQ0VfRVZFTlRfTEFZRVJfSUQsXG4gICAgY29sb3I6IDQzMDcwNTBcbiAgfSk7XG4gIGhvb2sub24ucGVyZlN0YXJ0KChhcHAsIHVpZCwgdm0sIHR5cGUsIHRpbWUpID0+IHtcbiAgICBpZiAoIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5yZWNvcmRpbmdTdGF0ZSB8fCAhZGV2dG9vbHNTdGF0ZS50aW1lbGluZUxheWVyc1N0YXRlLnBlcmZvcm1hbmNlRXZlbnRFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIHBlcmZvcm1hbmNlTWFya1N0YXJ0KGFwaSwgYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKTtcbiAgfSk7XG4gIGhvb2sub24ucGVyZkVuZCgoYXBwLCB1aWQsIHZtLCB0eXBlLCB0aW1lKSA9PiB7XG4gICAgaWYgKCFkZXZ0b29sc1N0YXRlLnRpbWVsaW5lTGF5ZXJzU3RhdGUucmVjb3JkaW5nU3RhdGUgfHwgIWRldnRvb2xzU3RhdGUudGltZWxpbmVMYXllcnNTdGF0ZS5wZXJmb3JtYW5jZUV2ZW50RW5hYmxlZClcbiAgICAgIHJldHVybjtcbiAgICBwZXJmb3JtYW5jZU1hcmtFbmQoYXBpLCBhcHAsIHVpZCwgdm0sIHR5cGUsIHRpbWUpO1xuICB9KTtcbn1cblxuLy8gc3JjL2NvcmUvdm0vaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgTUFYXyRWTSA9IDEwO1xudmFyICR2bVF1ZXVlID0gW107XG5mdW5jdGlvbiBleHBvc2VJbnN0YW5jZVRvV2luZG93KGNvbXBvbmVudEluc3RhbmNlKSB7XG4gIGlmICh0eXBlb2Ygd2luZG93ID09PSBcInVuZGVmaW5lZFwiKVxuICAgIHJldHVybjtcbiAgY29uc3Qgd2luID0gd2luZG93O1xuICBpZiAoIWNvbXBvbmVudEluc3RhbmNlKVxuICAgIHJldHVybjtcbiAgd2luLiR2bSA9IGNvbXBvbmVudEluc3RhbmNlO1xuICBpZiAoJHZtUXVldWVbMF0gIT09IGNvbXBvbmVudEluc3RhbmNlKSB7XG4gICAgaWYgKCR2bVF1ZXVlLmxlbmd0aCA+PSBNQVhfJFZNKSB7XG4gICAgICAkdm1RdWV1ZS5wb3AoKTtcbiAgICB9XG4gICAgZm9yIChsZXQgaSA9ICR2bVF1ZXVlLmxlbmd0aDsgaSA+IDA7IGktLSkge1xuICAgICAgd2luW2Akdm0ke2l9YF0gPSAkdm1RdWV1ZVtpXSA9ICR2bVF1ZXVlW2kgLSAxXTtcbiAgICB9XG4gICAgd2luLiR2bTAgPSAkdm1RdWV1ZVswXSA9IGNvbXBvbmVudEluc3RhbmNlO1xuICB9XG59XG5cbi8vIHNyYy9jb3JlL3BsdWdpbi9jb21wb25lbnRzLnRzXG52YXIgSU5TUEVDVE9SX0lEID0gXCJjb21wb25lbnRzXCI7XG5mdW5jdGlvbiBjcmVhdGVDb21wb25lbnRzRGV2VG9vbHNQbHVnaW4oYXBwKSB7XG4gIGNvbnN0IGRlc2NyaXB0b3IgPSB7XG4gICAgaWQ6IElOU1BFQ1RPUl9JRCxcbiAgICBsYWJlbDogXCJDb21wb25lbnRzXCIsXG4gICAgYXBwXG4gIH07XG4gIGNvbnN0IHNldHVwRm4gPSAoYXBpKSA9PiB7XG4gICAgYXBpLmFkZEluc3BlY3Rvcih7XG4gICAgICBpZDogSU5TUEVDVE9SX0lELFxuICAgICAgbGFiZWw6IFwiQ29tcG9uZW50c1wiLFxuICAgICAgdHJlZUZpbHRlclBsYWNlaG9sZGVyOiBcIlNlYXJjaCBjb21wb25lbnRzXCJcbiAgICB9KTtcbiAgICBzZXR1cEJ1aWx0aW5UaW1lbGluZUxheWVycyhhcGkpO1xuICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JUcmVlKGFzeW5jIChwYXlsb2FkKSA9PiB7XG4gICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSBnZXRDb21wb25lbnRJbnN0YW5jZShhY3RpdmVBcHBSZWNvcmQudmFsdWUsIHBheWxvYWQuaW5zdGFuY2VJZCk7XG4gICAgICAgIGlmIChpbnN0YW5jZSkge1xuICAgICAgICAgIGNvbnN0IHdhbGtlcjIgPSBuZXcgQ29tcG9uZW50V2Fsa2VyKHtcbiAgICAgICAgICAgIGZpbHRlclRleHQ6IHBheWxvYWQuZmlsdGVyLFxuICAgICAgICAgICAgLy8gQFRPRE86IHNob3VsZCBtYWtlIHRoaXMgY29uZmlndXJhYmxlP1xuICAgICAgICAgICAgbWF4RGVwdGg6IDEwMCxcbiAgICAgICAgICAgIHJlY3Vyc2l2ZWx5OiBmYWxzZSxcbiAgICAgICAgICAgIGFwaVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHBheWxvYWQucm9vdE5vZGVzID0gYXdhaXQgd2Fsa2VyMi5nZXRDb21wb25lbnRUcmVlKGluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGFwaS5vbi5nZXRJbnNwZWN0b3JTdGF0ZShhc3luYyAocGF5bG9hZCkgPT4ge1xuICAgICAgdmFyIF9hMjU7XG4gICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0SW5zdGFuY2VTdGF0ZSh7XG4gICAgICAgICAgaW5zdGFuY2VJZDogcGF5bG9hZC5ub2RlSWRcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IGNvbXBvbmVudEluc3RhbmNlID0gcmVzdWx0Lmluc3RhbmNlO1xuICAgICAgICBjb25zdCBhcHAyID0gKF9hMjUgPSByZXN1bHQuaW5zdGFuY2UpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmFwcENvbnRleHQuYXBwO1xuICAgICAgICBjb25zdCBfcGF5bG9hZCA9IHtcbiAgICAgICAgICBjb21wb25lbnRJbnN0YW5jZSxcbiAgICAgICAgICBhcHA6IGFwcDIsXG4gICAgICAgICAgaW5zdGFuY2VEYXRhOiByZXN1bHRcbiAgICAgICAgfTtcbiAgICAgICAgZGV2dG9vbHNDb250ZXh0Lmhvb2tzLmNhbGxIb29rV2l0aCgoY2FsbGJhY2tzKSA9PiB7XG4gICAgICAgICAgY2FsbGJhY2tzLmZvckVhY2goKGNiKSA9PiBjYihfcGF5bG9hZCkpO1xuICAgICAgICB9LCBcImluc3BlY3RDb21wb25lbnRcIiAvKiBJTlNQRUNUX0NPTVBPTkVOVCAqLyk7XG4gICAgICAgIHBheWxvYWQuc3RhdGUgPSByZXN1bHQ7XG4gICAgICAgIGV4cG9zZUluc3RhbmNlVG9XaW5kb3coY29tcG9uZW50SW5zdGFuY2UpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGFwaS5vbi5lZGl0SW5zcGVjdG9yU3RhdGUoYXN5bmMgKHBheWxvYWQpID0+IHtcbiAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xuICAgICAgICBlZGl0U3RhdGUocGF5bG9hZCk7XG4gICAgICAgIGF3YWl0IGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoXCJjb21wb25lbnRzXCIpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGNvbnN0IGRlYm91bmNlU2VuZEluc3BlY3RvclRyZWUgPSBkZWJvdW5jZTQoKCkgPT4ge1xuICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgfSwgMTIwKTtcbiAgICBjb25zdCBkZWJvdW5jZVNlbmRJbnNwZWN0b3JTdGF0ZSA9IGRlYm91bmNlNCgoKSA9PiB7XG4gICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgfSwgMTIwKTtcbiAgICBjb25zdCBjb21wb25lbnRBZGRlZENsZWFudXAgPSBob29rLm9uLmNvbXBvbmVudEFkZGVkKGFzeW5jIChhcHAyLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KSA9PiB7XG4gICAgICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gICAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoKF9jID0gKF9iMjUgPSAoX2EyNSA9IGFwcDIgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcDIuX2luc3RhbmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS5kZXZ0b29scykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmhpZGUpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICghYXBwMiB8fCB0eXBlb2YgdWlkICE9PSBcIm51bWJlclwiICYmICF1aWQgfHwgIWNvbXBvbmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgaWQgPSBhd2FpdCBnZXRDb21wb25lbnRJZCh7XG4gICAgICAgIGFwcDogYXBwMixcbiAgICAgICAgdWlkLFxuICAgICAgICBpbnN0YW5jZTogY29tcG9uZW50XG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGFwcFJlY29yZCA9IGF3YWl0IGdldEFwcFJlY29yZChhcHAyKTtcbiAgICAgIGlmIChjb21wb25lbnQpIHtcbiAgICAgICAgaWYgKGNvbXBvbmVudC5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fID09IG51bGwpXG4gICAgICAgICAgY29tcG9uZW50Ll9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gPSBpZDtcbiAgICAgICAgaWYgKCEoYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQuaW5zdGFuY2VNYXAuaGFzKGlkKSkpIHtcbiAgICAgICAgICBhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pbnN0YW5jZU1hcC5zZXQoaWQsIGNvbXBvbmVudCk7XG4gICAgICAgICAgaWYgKGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pZCA9PT0gKGFwcFJlY29yZCA9PSBudWxsID8gdm9pZCAwIDogYXBwUmVjb3JkLmlkKSlcbiAgICAgICAgICAgIGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pbnN0YW5jZU1hcCA9IGFwcFJlY29yZC5pbnN0YW5jZU1hcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCFhcHBSZWNvcmQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGRlYm91bmNlU2VuZEluc3BlY3RvclRyZWUoKTtcbiAgICB9KTtcbiAgICBjb25zdCBjb21wb25lbnRVcGRhdGVkQ2xlYW51cCA9IGhvb2sub24uY29tcG9uZW50VXBkYXRlZChhc3luYyAoYXBwMiwgdWlkLCBwYXJlbnRVaWQsIGNvbXBvbmVudCkgPT4ge1xuICAgICAgdmFyIF9hMjUsIF9iMjUsIF9jO1xuICAgICAgaWYgKGRldnRvb2xzU3RhdGUuaGlnaFBlcmZNb2RlRW5hYmxlZClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgaWYgKChfYyA9IChfYjI1ID0gKF9hMjUgPSBhcHAyID09IG51bGwgPyB2b2lkIDAgOiBhcHAyLl9pbnN0YW5jZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUudHlwZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUuZGV2dG9vbHMpID09IG51bGwgPyB2b2lkIDAgOiBfYy5oaWRlKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoIWFwcDIgfHwgdHlwZW9mIHVpZCAhPT0gXCJudW1iZXJcIiAmJiAhdWlkIHx8ICFjb21wb25lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgZ2V0Q29tcG9uZW50SWQoe1xuICAgICAgICBhcHA6IGFwcDIsXG4gICAgICAgIHVpZCxcbiAgICAgICAgaW5zdGFuY2U6IGNvbXBvbmVudFxuICAgICAgfSk7XG4gICAgICBjb25zdCBhcHBSZWNvcmQgPSBhd2FpdCBnZXRBcHBSZWNvcmQoYXBwMik7XG4gICAgICBpZiAoY29tcG9uZW50KSB7XG4gICAgICAgIGlmIChjb21wb25lbnQuX19WVUVfREVWVE9PTFNfTkVYVF9VSURfXyA9PSBudWxsKVxuICAgICAgICAgIGNvbXBvbmVudC5fX1ZVRV9ERVZUT09MU19ORVhUX1VJRF9fID0gaWQ7XG4gICAgICAgIGlmICghKGFwcFJlY29yZCA9PSBudWxsID8gdm9pZCAwIDogYXBwUmVjb3JkLmluc3RhbmNlTWFwLmhhcyhpZCkpKSB7XG4gICAgICAgICAgYXBwUmVjb3JkID09IG51bGwgPyB2b2lkIDAgOiBhcHBSZWNvcmQuaW5zdGFuY2VNYXAuc2V0KGlkLCBjb21wb25lbnQpO1xuICAgICAgICAgIGlmIChhY3RpdmVBcHBSZWNvcmQudmFsdWUuaWQgPT09IChhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pZCkpXG4gICAgICAgICAgICBhY3RpdmVBcHBSZWNvcmQudmFsdWUuaW5zdGFuY2VNYXAgPSBhcHBSZWNvcmQuaW5zdGFuY2VNYXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICghYXBwUmVjb3JkKVxuICAgICAgICByZXR1cm47XG4gICAgICBkZWJvdW5jZVNlbmRJbnNwZWN0b3JUcmVlKCk7XG4gICAgICBkZWJvdW5jZVNlbmRJbnNwZWN0b3JTdGF0ZSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNvbXBvbmVudFJlbW92ZWRDbGVhbnVwID0gaG9vay5vbi5jb21wb25lbnRSZW1vdmVkKGFzeW5jIChhcHAyLCB1aWQsIHBhcmVudFVpZCwgY29tcG9uZW50KSA9PiB7XG4gICAgICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gICAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgICByZXR1cm47XG4gICAgICBpZiAoKF9jID0gKF9iMjUgPSAoX2EyNSA9IGFwcDIgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcDIuX2luc3RhbmNlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS50eXBlKSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS5kZXZ0b29scykgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmhpZGUpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGlmICghYXBwMiB8fCB0eXBlb2YgdWlkICE9PSBcIm51bWJlclwiICYmICF1aWQgfHwgIWNvbXBvbmVudClcbiAgICAgICAgcmV0dXJuO1xuICAgICAgY29uc3QgYXBwUmVjb3JkID0gYXdhaXQgZ2V0QXBwUmVjb3JkKGFwcDIpO1xuICAgICAgaWYgKCFhcHBSZWNvcmQpXG4gICAgICAgIHJldHVybjtcbiAgICAgIGNvbnN0IGlkID0gYXdhaXQgZ2V0Q29tcG9uZW50SWQoe1xuICAgICAgICBhcHA6IGFwcDIsXG4gICAgICAgIHVpZCxcbiAgICAgICAgaW5zdGFuY2U6IGNvbXBvbmVudFxuICAgICAgfSk7XG4gICAgICBhcHBSZWNvcmQgPT0gbnVsbCA/IHZvaWQgMCA6IGFwcFJlY29yZC5pbnN0YW5jZU1hcC5kZWxldGUoaWQpO1xuICAgICAgaWYgKGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pZCA9PT0gKGFwcFJlY29yZCA9PSBudWxsID8gdm9pZCAwIDogYXBwUmVjb3JkLmlkKSlcbiAgICAgICAgYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmluc3RhbmNlTWFwID0gYXBwUmVjb3JkLmluc3RhbmNlTWFwO1xuICAgICAgZGVib3VuY2VTZW5kSW5zcGVjdG9yVHJlZSgpO1xuICAgIH0pO1xuICB9O1xuICByZXR1cm4gW2Rlc2NyaXB0b3IsIHNldHVwRm5dO1xufVxuXG4vLyBzcmMvY29yZS9wbHVnaW4vaW5kZXgudHNcbnZhciBfYTEyLCBfYjEyO1xuKF9iMTIgPSAoX2ExMiA9IHRhcmdldDgpLl9fVlVFX0RFVlRPT0xTX0tJVF9fUkVHSVNURVJFRF9QTFVHSU5fQVBQU19fKSAhPSBudWxsID8gX2IxMiA6IF9hMTIuX19WVUVfREVWVE9PTFNfS0lUX19SRUdJU1RFUkVEX1BMVUdJTl9BUFBTX18gPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuZnVuY3Rpb24gc2V0dXBEZXZUb29sc1BsdWdpbihwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuKSB7XG4gIHJldHVybiBob29rLnNldHVwRGV2VG9vbHNQbHVnaW4ocGx1Z2luRGVzY3JpcHRvciwgc2V0dXBGbik7XG59XG5mdW5jdGlvbiBjYWxsRGV2VG9vbHNQbHVnaW5TZXR1cEZuKHBsdWdpbiwgYXBwKSB7XG4gIGNvbnN0IFtwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuXSA9IHBsdWdpbjtcbiAgaWYgKHBsdWdpbkRlc2NyaXB0b3IuYXBwICE9PSBhcHApXG4gICAgcmV0dXJuO1xuICBjb25zdCBhcGkgPSBuZXcgRGV2VG9vbHNQbHVnaW5BUEkoe1xuICAgIHBsdWdpbjoge1xuICAgICAgc2V0dXBGbixcbiAgICAgIGRlc2NyaXB0b3I6IHBsdWdpbkRlc2NyaXB0b3JcbiAgICB9LFxuICAgIGN0eDogZGV2dG9vbHNDb250ZXh0XG4gIH0pO1xuICBpZiAocGx1Z2luRGVzY3JpcHRvci5wYWNrYWdlTmFtZSA9PT0gXCJ2dWV4XCIpIHtcbiAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XG4gICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKHBheWxvYWQuaW5zcGVjdG9ySWQpO1xuICAgIH0pO1xuICB9XG4gIHNldHVwRm4oYXBpKTtcbn1cbmZ1bmN0aW9uIHJlbW92ZVJlZ2lzdGVyZWRQbHVnaW5BcHAoYXBwKSB7XG4gIHRhcmdldDguX19WVUVfREVWVE9PTFNfS0lUX19SRUdJU1RFUkVEX1BMVUdJTl9BUFBTX18uZGVsZXRlKGFwcCk7XG59XG5mdW5jdGlvbiByZWdpc3RlckRldlRvb2xzUGx1Z2luKGFwcCwgb3B0aW9ucykge1xuICBpZiAodGFyZ2V0OC5fX1ZVRV9ERVZUT09MU19LSVRfX1JFR0lTVEVSRURfUExVR0lOX0FQUFNfXy5oYXMoYXBwKSkge1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkICYmICEob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pbnNwZWN0aW5nQ29tcG9uZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuICB0YXJnZXQ4Ll9fVlVFX0RFVlRPT0xTX0tJVF9fUkVHSVNURVJFRF9QTFVHSU5fQVBQU19fLmFkZChhcHApO1xuICBkZXZ0b29sc1BsdWdpbkJ1ZmZlci5mb3JFYWNoKChwbHVnaW4pID0+IHtcbiAgICBjYWxsRGV2VG9vbHNQbHVnaW5TZXR1cEZuKHBsdWdpbiwgYXBwKTtcbiAgfSk7XG59XG5cbi8vIHNyYy9jb3JlL3JvdXRlci9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGRlZXBDbG9uZSwgdGFyZ2V0IGFzIGdsb2JhbDMgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmltcG9ydCB7IGRlYm91bmNlIGFzIGRlYm91bmNlNSB9IGZyb20gXCJwZXJmZWN0LWRlYm91bmNlXCI7XG5cbi8vIHNyYy9jdHgvcm91dGVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIGdsb2JhbDIgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbnZhciBST1VURVJfS0VZID0gXCJfX1ZVRV9ERVZUT09MU19ST1VURVJfX1wiO1xudmFyIFJPVVRFUl9JTkZPX0tFWSA9IFwiX19WVUVfREVWVE9PTFNfUk9VVEVSX0lORk9fX1wiO1xudmFyIF9hMTMsIF9iMTM7XG4oX2IxMyA9IChfYTEzID0gZ2xvYmFsMilbUk9VVEVSX0lORk9fS0VZXSkgIT0gbnVsbCA/IF9iMTMgOiBfYTEzW1JPVVRFUl9JTkZPX0tFWV0gPSB7XG4gIGN1cnJlbnRSb3V0ZTogbnVsbCxcbiAgcm91dGVzOiBbXVxufTtcbnZhciBfYTE0LCBfYjE0O1xuKF9iMTQgPSAoX2ExNCA9IGdsb2JhbDIpW1JPVVRFUl9LRVldKSAhPSBudWxsID8gX2IxNCA6IF9hMTRbUk9VVEVSX0tFWV0gPSB7fTtcbnZhciBkZXZ0b29sc1JvdXRlckluZm8gPSBuZXcgUHJveHkoZ2xvYmFsMltST1VURVJfSU5GT19LRVldLCB7XG4gIGdldCh0YXJnZXQyMiwgcHJvcGVydHkpIHtcbiAgICByZXR1cm4gZ2xvYmFsMltST1VURVJfSU5GT19LRVldW3Byb3BlcnR5XTtcbiAgfVxufSk7XG52YXIgZGV2dG9vbHNSb3V0ZXIgPSBuZXcgUHJveHkoZ2xvYmFsMltST1VURVJfS0VZXSwge1xuICBnZXQodGFyZ2V0MjIsIHByb3BlcnR5KSB7XG4gICAgaWYgKHByb3BlcnR5ID09PSBcInZhbHVlXCIpIHtcbiAgICAgIHJldHVybiBnbG9iYWwyW1JPVVRFUl9LRVldO1xuICAgIH1cbiAgfVxufSk7XG5cbi8vIHNyYy9jb3JlL3JvdXRlci9pbmRleC50c1xuZnVuY3Rpb24gZ2V0Um91dGVzKHJvdXRlcikge1xuICBjb25zdCByb3V0ZXNNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICByZXR1cm4gKChyb3V0ZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHJvdXRlci5nZXRSb3V0ZXMoKSkgfHwgW10pLmZpbHRlcigoaSkgPT4gIXJvdXRlc01hcC5oYXMoaS5wYXRoKSAmJiByb3V0ZXNNYXAuc2V0KGkucGF0aCwgMSkpO1xufVxuZnVuY3Rpb24gZmlsdGVyUm91dGVzKHJvdXRlcykge1xuICByZXR1cm4gcm91dGVzLm1hcCgoaXRlbSkgPT4ge1xuICAgIGxldCB7IHBhdGgsIG5hbWUsIGNoaWxkcmVuLCBtZXRhIH0gPSBpdGVtO1xuICAgIGlmIChjaGlsZHJlbiA9PSBudWxsID8gdm9pZCAwIDogY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgY2hpbGRyZW4gPSBmaWx0ZXJSb3V0ZXMoY2hpbGRyZW4pO1xuICAgIHJldHVybiB7XG4gICAgICBwYXRoLFxuICAgICAgbmFtZSxcbiAgICAgIGNoaWxkcmVuLFxuICAgICAgbWV0YVxuICAgIH07XG4gIH0pO1xufVxuZnVuY3Rpb24gZmlsdGVyQ3VycmVudFJvdXRlKHJvdXRlKSB7XG4gIGlmIChyb3V0ZSkge1xuICAgIGNvbnN0IHsgZnVsbFBhdGgsIGhhc2gsIGhyZWYsIHBhdGgsIG5hbWUsIG1hdGNoZWQsIHBhcmFtcywgcXVlcnkgfSA9IHJvdXRlO1xuICAgIHJldHVybiB7XG4gICAgICBmdWxsUGF0aCxcbiAgICAgIGhhc2gsXG4gICAgICBocmVmLFxuICAgICAgcGF0aCxcbiAgICAgIG5hbWUsXG4gICAgICBwYXJhbXMsXG4gICAgICBxdWVyeSxcbiAgICAgIG1hdGNoZWQ6IGZpbHRlclJvdXRlcyhtYXRjaGVkKVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHJvdXRlO1xufVxuZnVuY3Rpb24gbm9ybWFsaXplUm91dGVySW5mbyhhcHBSZWNvcmQsIGFjdGl2ZUFwcFJlY29yZDIpIHtcbiAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICB2YXIgX2EyNTtcbiAgICBjb25zdCByb3V0ZXIgPSAoX2EyNSA9IGFwcFJlY29yZC5hcHApID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LmNvbmZpZy5nbG9iYWxQcm9wZXJ0aWVzLiRyb3V0ZXI7XG4gICAgY29uc3QgY3VycmVudFJvdXRlID0gZmlsdGVyQ3VycmVudFJvdXRlKHJvdXRlciA9PSBudWxsID8gdm9pZCAwIDogcm91dGVyLmN1cnJlbnRSb3V0ZS52YWx1ZSk7XG4gICAgY29uc3Qgcm91dGVzID0gZmlsdGVyUm91dGVzKGdldFJvdXRlcyhyb3V0ZXIpKTtcbiAgICBjb25zdCBjID0gY29uc29sZS53YXJuO1xuICAgIGNvbnNvbGUud2FybiA9ICgpID0+IHtcbiAgICB9O1xuICAgIGdsb2JhbDNbUk9VVEVSX0lORk9fS0VZXSA9IHtcbiAgICAgIGN1cnJlbnRSb3V0ZTogY3VycmVudFJvdXRlID8gZGVlcENsb25lKGN1cnJlbnRSb3V0ZSkgOiB7fSxcbiAgICAgIHJvdXRlczogZGVlcENsb25lKHJvdXRlcylcbiAgICB9O1xuICAgIGdsb2JhbDNbUk9VVEVSX0tFWV0gPSByb3V0ZXI7XG4gICAgY29uc29sZS53YXJuID0gYztcbiAgfVxuICBpbml0KCk7XG4gIGhvb2sub24uY29tcG9uZW50VXBkYXRlZChkZWJvdW5jZTUoKCkgPT4ge1xuICAgIHZhciBfYTI1O1xuICAgIGlmICgoKF9hMjUgPSBhY3RpdmVBcHBSZWNvcmQyLnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5hcHApICE9PSBhcHBSZWNvcmQuYXBwKVxuICAgICAgcmV0dXJuO1xuICAgIGluaXQoKTtcbiAgICBpZiAoZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkKVxuICAgICAgcmV0dXJuO1xuICAgIGRldnRvb2xzQ29udGV4dC5ob29rcy5jYWxsSG9vayhcInJvdXRlckluZm9VcGRhdGVkXCIgLyogUk9VVEVSX0lORk9fVVBEQVRFRCAqLywgeyBzdGF0ZTogZ2xvYmFsM1tST1VURVJfSU5GT19LRVldIH0pO1xuICB9LCAyMDApKTtcbn1cblxuLy8gc3JjL2N0eC9hcGkudHNcbmZ1bmN0aW9uIGNyZWF0ZURldlRvb2xzQXBpKGhvb2tzMikge1xuICByZXR1cm4ge1xuICAgIC8vIGdldCBpbnNwZWN0b3IgdHJlZVxuICAgIGFzeW5jIGdldEluc3BlY3RvclRyZWUocGF5bG9hZCkge1xuICAgICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgIGFwcDogYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmFwcCxcbiAgICAgICAgcm9vdE5vZGVzOiBbXVxuICAgICAgfTtcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoYXN5bmMgKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrcy5tYXAoKGNiKSA9PiBjYihfcGF5bG9hZCkpKTtcbiAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgIH0sIFwiZ2V0SW5zcGVjdG9yVHJlZVwiIC8qIEdFVF9JTlNQRUNUT1JfVFJFRSAqLyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfcGF5bG9hZC5yb290Tm9kZXM7XG4gICAgfSxcbiAgICAvLyBnZXQgaW5zcGVjdG9yIHN0YXRlXG4gICAgYXN5bmMgZ2V0SW5zcGVjdG9yU3RhdGUocGF5bG9hZCkge1xuICAgICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgIGFwcDogYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmFwcCxcbiAgICAgICAgc3RhdGU6IG51bGxcbiAgICAgIH07XG4gICAgICBjb25zdCBjdHggPSB7XG4gICAgICAgIGN1cnJlbnRUYWI6IGBjdXN0b20taW5zcGVjdG9yOiR7cGF5bG9hZC5pbnNwZWN0b3JJZH1gXG4gICAgICB9O1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHtcbiAgICAgICAgaG9va3MyLmNhbGxIb29rV2l0aChhc3luYyAoY2FsbGJhY2tzKSA9PiB7XG4gICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoY2FsbGJhY2tzLm1hcCgoY2IpID0+IGNiKF9wYXlsb2FkLCBjdHgpKSk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9LCBcImdldEluc3BlY3RvclN0YXRlXCIgLyogR0VUX0lOU1BFQ1RPUl9TVEFURSAqLyk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfcGF5bG9hZC5zdGF0ZTtcbiAgICB9LFxuICAgIC8vIGVkaXQgaW5zcGVjdG9yIHN0YXRlXG4gICAgZWRpdEluc3BlY3RvclN0YXRlKHBheWxvYWQpIHtcbiAgICAgIGNvbnN0IHN0YXRlRWRpdG9yMiA9IG5ldyBTdGF0ZUVkaXRvcigpO1xuICAgICAgY29uc3QgX3BheWxvYWQgPSB7XG4gICAgICAgIC4uLnBheWxvYWQsXG4gICAgICAgIGFwcDogYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmFwcCxcbiAgICAgICAgc2V0OiAob2JqLCBwYXRoID0gcGF5bG9hZC5wYXRoLCB2YWx1ZSA9IHBheWxvYWQuc3RhdGUudmFsdWUsIGNiKSA9PiB7XG4gICAgICAgICAgc3RhdGVFZGl0b3IyLnNldChvYmosIHBhdGgsIHZhbHVlLCBjYiB8fCBzdGF0ZUVkaXRvcjIuY3JlYXRlRGVmYXVsdFNldENhbGxiYWNrKHBheWxvYWQuc3RhdGUpKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGhvb2tzMi5jYWxsSG9va1dpdGgoKGNhbGxiYWNrcykgPT4ge1xuICAgICAgICBjYWxsYmFja3MuZm9yRWFjaCgoY2IpID0+IGNiKF9wYXlsb2FkKSk7XG4gICAgICB9LCBcImVkaXRJbnNwZWN0b3JTdGF0ZVwiIC8qIEVESVRfSU5TUEVDVE9SX1NUQVRFICovKTtcbiAgICB9LFxuICAgIC8vIHNlbmQgaW5zcGVjdG9yIHN0YXRlXG4gICAgc2VuZEluc3BlY3RvclN0YXRlKGluc3BlY3RvcklkKSB7XG4gICAgICBjb25zdCBpbnNwZWN0b3IgPSBnZXRJbnNwZWN0b3IoaW5zcGVjdG9ySWQpO1xuICAgICAgaG9va3MyLmNhbGxIb29rKFwic2VuZEluc3BlY3RvclN0YXRlXCIgLyogU0VORF9JTlNQRUNUT1JfU1RBVEUgKi8sIHsgaW5zcGVjdG9ySWQsIHBsdWdpbjoge1xuICAgICAgICBkZXNjcmlwdG9yOiBpbnNwZWN0b3IuZGVzY3JpcHRvcixcbiAgICAgICAgc2V0dXBGbjogKCkgPT4gKHt9KVxuICAgICAgfSB9KTtcbiAgICB9LFxuICAgIC8vIGluc3BlY3QgY29tcG9uZW50IGluc3BlY3RvclxuICAgIGluc3BlY3RDb21wb25lbnRJbnNwZWN0b3IoKSB7XG4gICAgICByZXR1cm4gaW5zcGVjdENvbXBvbmVudEhpZ2hMaWdodGVyKCk7XG4gICAgfSxcbiAgICAvLyBjYW5jZWwgaW5zcGVjdCBjb21wb25lbnQgaW5zcGVjdG9yXG4gICAgY2FuY2VsSW5zcGVjdENvbXBvbmVudEluc3BlY3RvcigpIHtcbiAgICAgIHJldHVybiBjYW5jZWxJbnNwZWN0Q29tcG9uZW50SGlnaExpZ2h0ZXIoKTtcbiAgICB9LFxuICAgIC8vIGdldCBjb21wb25lbnQgcmVuZGVyIGNvZGVcbiAgICBnZXRDb21wb25lbnRSZW5kZXJDb2RlKGlkKSB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IGdldENvbXBvbmVudEluc3RhbmNlKGFjdGl2ZUFwcFJlY29yZC52YWx1ZSwgaWQpO1xuICAgICAgaWYgKGluc3RhbmNlKVxuICAgICAgICByZXR1cm4gISh0eXBlb2YgKGluc3RhbmNlID09IG51bGwgPyB2b2lkIDAgOiBpbnN0YW5jZS50eXBlKSA9PT0gXCJmdW5jdGlvblwiKSA/IGluc3RhbmNlLnJlbmRlci50b1N0cmluZygpIDogaW5zdGFuY2UudHlwZS50b1N0cmluZygpO1xuICAgIH0sXG4gICAgLy8gc2Nyb2xsIHRvIGNvbXBvbmVudFxuICAgIHNjcm9sbFRvQ29tcG9uZW50KGlkKSB7XG4gICAgICByZXR1cm4gc2Nyb2xsVG9Db21wb25lbnQoeyBpZCB9KTtcbiAgICB9LFxuICAgIC8vIG9wZW4gaW4gZWRpdG9yXG4gICAgb3BlbkluRWRpdG9yLFxuICAgIC8vIGdldCB2dWUgaW5zcGVjdG9yXG4gICAgZ2V0VnVlSW5zcGVjdG9yOiBnZXRDb21wb25lbnRJbnNwZWN0b3IsXG4gICAgLy8gdG9nZ2xlIGFwcFxuICAgIHRvZ2dsZUFwcChpZCwgb3B0aW9ucykge1xuICAgICAgY29uc3QgYXBwUmVjb3JkID0gZGV2dG9vbHNBcHBSZWNvcmRzLnZhbHVlLmZpbmQoKHJlY29yZCkgPT4gcmVjb3JkLmlkID09PSBpZCk7XG4gICAgICBpZiAoYXBwUmVjb3JkKSB7XG4gICAgICAgIHNldEFjdGl2ZUFwcFJlY29yZElkKGlkKTtcbiAgICAgICAgc2V0QWN0aXZlQXBwUmVjb3JkKGFwcFJlY29yZCk7XG4gICAgICAgIG5vcm1hbGl6ZVJvdXRlckluZm8oYXBwUmVjb3JkLCBhY3RpdmVBcHBSZWNvcmQpO1xuICAgICAgICBjYWxsSW5zcGVjdG9yVXBkYXRlZEhvb2soKTtcbiAgICAgICAgcmVnaXN0ZXJEZXZUb29sc1BsdWdpbihhcHBSZWNvcmQuYXBwLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LFxuICAgIC8vIGluc3BlY3QgZG9tXG4gICAgaW5zcGVjdERPTShpbnN0YW5jZUlkKSB7XG4gICAgICBjb25zdCBpbnN0YW5jZSA9IGdldENvbXBvbmVudEluc3RhbmNlKGFjdGl2ZUFwcFJlY29yZC52YWx1ZSwgaW5zdGFuY2VJZCk7XG4gICAgICBpZiAoaW5zdGFuY2UpIHtcbiAgICAgICAgY29uc3QgW2VsXSA9IGdldFJvb3RFbGVtZW50c0Zyb21Db21wb25lbnRJbnN0YW5jZShpbnN0YW5jZSk7XG4gICAgICAgIGlmIChlbCkge1xuICAgICAgICAgIHRhcmdldDkuX19WVUVfREVWVE9PTFNfSU5TUEVDVF9ET01fVEFSR0VUX18gPSBlbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gICAgdXBkYXRlUGx1Z2luU2V0dGluZ3MocGx1Z2luSWQsIGtleSwgdmFsdWUpIHtcbiAgICAgIHNldFBsdWdpblNldHRpbmdzKHBsdWdpbklkLCBrZXksIHZhbHVlKTtcbiAgICB9LFxuICAgIGdldFBsdWdpblNldHRpbmdzKHBsdWdpbklkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBvcHRpb25zOiBnZXRQbHVnaW5TZXR0aW5nc09wdGlvbnMocGx1Z2luSWQpLFxuICAgICAgICB2YWx1ZXM6IGdldFBsdWdpblNldHRpbmdzKHBsdWdpbklkKVxuICAgICAgfTtcbiAgICB9XG4gIH07XG59XG5cbi8vIHNyYy9jdHgvZW52LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDEwIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgX2ExNSwgX2IxNTtcbihfYjE1ID0gKF9hMTUgPSB0YXJnZXQxMCkuX19WVUVfREVWVE9PTFNfRU5WX18pICE9IG51bGwgPyBfYjE1IDogX2ExNS5fX1ZVRV9ERVZUT09MU19FTlZfXyA9IHtcbiAgdml0ZVBsdWdpbkRldGVjdGVkOiBmYWxzZVxufTtcbmZ1bmN0aW9uIGdldERldlRvb2xzRW52KCkge1xuICByZXR1cm4gdGFyZ2V0MTAuX19WVUVfREVWVE9PTFNfRU5WX187XG59XG5mdW5jdGlvbiBzZXREZXZUb29sc0VudihlbnYpIHtcbiAgdGFyZ2V0MTAuX19WVUVfREVWVE9PTFNfRU5WX18gPSB7XG4gICAgLi4udGFyZ2V0MTAuX19WVUVfREVWVE9PTFNfRU5WX18sXG4gICAgLi4uZW52XG4gIH07XG59XG5cbi8vIHNyYy9jdHgvaW5kZXgudHNcbnZhciBob29rcyA9IGNyZWF0ZURldlRvb2xzQ3R4SG9va3MoKTtcbnZhciBfYTE2LCBfYjE2O1xuKF9iMTYgPSAoX2ExNiA9IHRhcmdldDExKS5fX1ZVRV9ERVZUT09MU19LSVRfQ09OVEVYVF9fKSAhPSBudWxsID8gX2IxNiA6IF9hMTYuX19WVUVfREVWVE9PTFNfS0lUX0NPTlRFWFRfXyA9IHtcbiAgaG9va3MsXG4gIGdldCBzdGF0ZSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uZGV2dG9vbHNTdGF0ZSxcbiAgICAgIGFjdGl2ZUFwcFJlY29yZElkOiBhY3RpdmVBcHBSZWNvcmQuaWQsXG4gICAgICBhY3RpdmVBcHBSZWNvcmQ6IGFjdGl2ZUFwcFJlY29yZC52YWx1ZSxcbiAgICAgIGFwcFJlY29yZHM6IGRldnRvb2xzQXBwUmVjb3Jkcy52YWx1ZVxuICAgIH07XG4gIH0sXG4gIGFwaTogY3JlYXRlRGV2VG9vbHNBcGkoaG9va3MpXG59O1xudmFyIGRldnRvb2xzQ29udGV4dCA9IHRhcmdldDExLl9fVlVFX0RFVlRPT0xTX0tJVF9DT05URVhUX187XG5cbi8vIHNyYy9jb3JlL2FwcC9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBpbXBvcnRfc3BlYWtpbmd1cmwgPSBfX3RvRVNNKHJlcXVpcmVfc3BlYWtpbmd1cmwyKCksIDEpO1xuaW1wb3J0IHsgaXNCcm93c2VyIGFzIGlzQnJvd3NlcjMsIHRhcmdldCBhcyB0YXJnZXQxMiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9hMTcsIF9iMTc7XG52YXIgYXBwUmVjb3JkSW5mbyA9IChfYjE3ID0gKF9hMTcgPSB0YXJnZXQxMikuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lORk9fXykgIT0gbnVsbCA/IF9iMTcgOiBfYTE3Ll9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JTkZPX18gPSB7XG4gIGlkOiAwLFxuICBhcHBJZHM6IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KClcbn07XG5mdW5jdGlvbiBnZXRBcHBSZWNvcmROYW1lKGFwcCwgZmFsbGJhY2tOYW1lKSB7XG4gIHZhciBfYTI1O1xuICByZXR1cm4gKChfYTI1ID0gYXBwID09IG51bGwgPyB2b2lkIDAgOiBhcHAuX2NvbXBvbmVudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUubmFtZSkgfHwgYEFwcCAke2ZhbGxiYWNrTmFtZX1gO1xufVxuZnVuY3Rpb24gZ2V0QXBwUm9vdEluc3RhbmNlKGFwcCkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2MsIF9kO1xuICBpZiAoYXBwLl9pbnN0YW5jZSlcbiAgICByZXR1cm4gYXBwLl9pbnN0YW5jZTtcbiAgZWxzZSBpZiAoKF9iMjUgPSAoX2EyNSA9IGFwcC5fY29udGFpbmVyKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5fdm5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LmNvbXBvbmVudClcbiAgICByZXR1cm4gKF9kID0gKF9jID0gYXBwLl9jb250YWluZXIpID09IG51bGwgPyB2b2lkIDAgOiBfYy5fdm5vZGUpID09IG51bGwgPyB2b2lkIDAgOiBfZC5jb21wb25lbnQ7XG59XG5mdW5jdGlvbiByZW1vdmVBcHBSZWNvcmRJZChhcHApIHtcbiAgY29uc3QgaWQgPSBhcHAuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lEX187XG4gIGlmIChpZCAhPSBudWxsKSB7XG4gICAgYXBwUmVjb3JkSW5mby5hcHBJZHMuZGVsZXRlKGlkKTtcbiAgICBhcHBSZWNvcmRJbmZvLmlkLS07XG4gIH1cbn1cbmZ1bmN0aW9uIGdldEFwcFJlY29yZElkKGFwcCwgZGVmYXVsdElkKSB7XG4gIGlmIChhcHAuX19WVUVfREVWVE9PTFNfTkVYVF9BUFBfUkVDT1JEX0lEX18gIT0gbnVsbClcbiAgICByZXR1cm4gYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JRF9fO1xuICBsZXQgaWQgPSBkZWZhdWx0SWQgIT0gbnVsbCA/IGRlZmF1bHRJZCA6IChhcHBSZWNvcmRJbmZvLmlkKyspLnRvU3RyaW5nKCk7XG4gIGlmIChkZWZhdWx0SWQgJiYgYXBwUmVjb3JkSW5mby5hcHBJZHMuaGFzKGlkKSkge1xuICAgIGxldCBjb3VudCA9IDE7XG4gICAgd2hpbGUgKGFwcFJlY29yZEluZm8uYXBwSWRzLmhhcyhgJHtkZWZhdWx0SWR9XyR7Y291bnR9YCkpXG4gICAgICBjb3VudCsrO1xuICAgIGlkID0gYCR7ZGVmYXVsdElkfV8ke2NvdW50fWA7XG4gIH1cbiAgYXBwUmVjb3JkSW5mby5hcHBJZHMuYWRkKGlkKTtcbiAgYXBwLl9fVlVFX0RFVlRPT0xTX05FWFRfQVBQX1JFQ09SRF9JRF9fID0gaWQ7XG4gIHJldHVybiBpZDtcbn1cbmZ1bmN0aW9uIGNyZWF0ZUFwcFJlY29yZChhcHAsIHR5cGVzKSB7XG4gIHZhciBfYTI1LCBfYjI1O1xuICBjb25zdCByb290SW5zdGFuY2UgPSBnZXRBcHBSb290SW5zdGFuY2UoYXBwKTtcbiAgaWYgKHJvb3RJbnN0YW5jZSkge1xuICAgIGFwcFJlY29yZEluZm8uaWQrKztcbiAgICBjb25zdCBuYW1lID0gZ2V0QXBwUmVjb3JkTmFtZShhcHAsIGFwcFJlY29yZEluZm8uaWQudG9TdHJpbmcoKSk7XG4gICAgY29uc3QgaWQgPSBnZXRBcHBSZWNvcmRJZChhcHAsICgwLCBpbXBvcnRfc3BlYWtpbmd1cmwuZGVmYXVsdCkobmFtZSkpO1xuICAgIGNvbnN0IFtlbF0gPSBnZXRSb290RWxlbWVudHNGcm9tQ29tcG9uZW50SW5zdGFuY2Uocm9vdEluc3RhbmNlKTtcbiAgICBjb25zdCByZWNvcmQgPSB7XG4gICAgICBpZCxcbiAgICAgIG5hbWUsXG4gICAgICB0eXBlcyxcbiAgICAgIGluc3RhbmNlTWFwOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuICAgICAgcGVyZkdyb3VwSWRzOiAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpLFxuICAgICAgcm9vdEluc3RhbmNlLFxuICAgICAgaWZyYW1lOiBpc0Jyb3dzZXIzICYmIGRvY3VtZW50ICE9PSAoZWwgPT0gbnVsbCA/IHZvaWQgMCA6IGVsLm93bmVyRG9jdW1lbnQpID8gKF9iMjUgPSAoX2EyNSA9IGVsID09IG51bGwgPyB2b2lkIDAgOiBlbC5vd25lckRvY3VtZW50KSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5sb2NhdGlvbikgPT0gbnVsbCA/IHZvaWQgMCA6IF9iMjUucGF0aG5hbWUgOiB2b2lkIDBcbiAgICB9O1xuICAgIGFwcC5fX1ZVRV9ERVZUT09MU19ORVhUX0FQUF9SRUNPUkRfXyA9IHJlY29yZDtcbiAgICBjb25zdCByb290SWQgPSBgJHtyZWNvcmQuaWR9OnJvb3RgO1xuICAgIHJlY29yZC5pbnN0YW5jZU1hcC5zZXQocm9vdElkLCByZWNvcmQucm9vdEluc3RhbmNlKTtcbiAgICByZWNvcmQucm9vdEluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18gPSByb290SWQ7XG4gICAgcmV0dXJuIHJlY29yZDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4ge307XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvaWZyYW1lL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gZGV0ZWN0SWZyYW1lQXBwKHRhcmdldDIyLCBpbklmcmFtZSA9IGZhbHNlKSB7XG4gIGlmIChpbklmcmFtZSkge1xuICAgIGxldCBzZW5kRXZlbnRUb1BhcmVudDIgPSBmdW5jdGlvbihjYikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgaG9vazMgPSB3aW5kb3cucGFyZW50Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG4gICAgICAgIGlmIChob29rMykge1xuICAgICAgICAgIGNiKGhvb2szKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHNlbmRFdmVudFRvUGFyZW50ID0gc2VuZEV2ZW50VG9QYXJlbnQyO1xuICAgIGNvbnN0IGhvb2syID0ge1xuICAgICAgaWQ6IFwidnVlLWRldnRvb2xzLW5leHRcIixcbiAgICAgIGRldnRvb2xzVmVyc2lvbjogXCI3LjBcIixcbiAgICAgIG9uOiAoZXZlbnQsIGNiKSA9PiB7XG4gICAgICAgIHNlbmRFdmVudFRvUGFyZW50MigoaG9vazMpID0+IHtcbiAgICAgICAgICBob29rMy5vbihldmVudCwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBvbmNlOiAoZXZlbnQsIGNiKSA9PiB7XG4gICAgICAgIHNlbmRFdmVudFRvUGFyZW50MigoaG9vazMpID0+IHtcbiAgICAgICAgICBob29rMy5vbmNlKGV2ZW50LCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIG9mZjogKGV2ZW50LCBjYikgPT4ge1xuICAgICAgICBzZW5kRXZlbnRUb1BhcmVudDIoKGhvb2szKSA9PiB7XG4gICAgICAgICAgaG9vazMub2ZmKGV2ZW50LCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGVtaXQ6IChldmVudCwgLi4ucGF5bG9hZCkgPT4ge1xuICAgICAgICBzZW5kRXZlbnRUb1BhcmVudDIoKGhvb2szKSA9PiB7XG4gICAgICAgICAgaG9vazMuZW1pdChldmVudCwgLi4ucGF5bG9hZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldDIyLCBcIl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX19cIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gaG9vazI7XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbiAgZnVuY3Rpb24gaW5qZWN0VnVlSG9va1RvSWZyYW1lKGlmcmFtZSkge1xuICAgIGlmIChpZnJhbWUuX192ZGV2dG9vbHNfX2luamVjdGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICBpZnJhbWUuX192ZGV2dG9vbHNfX2luamVjdGVkID0gdHJ1ZTtcbiAgICAgIGNvbnN0IGluamVjdCA9ICgpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBpZnJhbWUuY29udGVudFdpbmRvdy5fX1ZVRV9ERVZUT09MU19JRlJBTUVfXyA9IGlmcmFtZTtcbiAgICAgICAgICBjb25zdCBzY3JpcHQgPSBpZnJhbWUuY29udGVudERvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgc2NyaXB0LnRleHRDb250ZW50ID0gYDsoJHtkZXRlY3RJZnJhbWVBcHAudG9TdHJpbmcoKX0pKHdpbmRvdywgdHJ1ZSlgO1xuICAgICAgICAgIGlmcmFtZS5jb250ZW50RG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICB9XG4gICAgICB9O1xuICAgICAgaW5qZWN0KCk7XG4gICAgICBpZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIiwgKCkgPT4gaW5qZWN0KCkpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gaW5qZWN0VnVlSG9va1RvSWZyYW1lcygpIHtcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBpZnJhbWVzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiaWZyYW1lOm5vdChbZGF0YS12dWUtZGV2dG9vbHMtaWdub3JlXSlcIikpO1xuICAgIGZvciAoY29uc3QgaWZyYW1lIG9mIGlmcmFtZXMpIHtcbiAgICAgIGluamVjdFZ1ZUhvb2tUb0lmcmFtZShpZnJhbWUpO1xuICAgIH1cbiAgfVxuICBpbmplY3RWdWVIb29rVG9JZnJhbWVzKCk7XG4gIGxldCBpZnJhbWVBcHBDaGVja3MgPSAwO1xuICBjb25zdCBpZnJhbWVBcHBDaGVja1RpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgIGluamVjdFZ1ZUhvb2tUb0lmcmFtZXMoKTtcbiAgICBpZnJhbWVBcHBDaGVja3MrKztcbiAgICBpZiAoaWZyYW1lQXBwQ2hlY2tzID49IDUpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwoaWZyYW1lQXBwQ2hlY2tUaW1lcik7XG4gICAgfVxuICB9LCAxZTMpO1xufVxuXG4vLyBzcmMvY29yZS9pbmRleC50c1xuZnVuY3Rpb24gaW5pdERldlRvb2xzKCkge1xuICB2YXIgX2EyNTtcbiAgZGV0ZWN0SWZyYW1lQXBwKHRhcmdldDEzKTtcbiAgdXBkYXRlRGV2VG9vbHNTdGF0ZSh7XG4gICAgdml0ZVBsdWdpbkRldGVjdGVkOiBnZXREZXZUb29sc0VudigpLnZpdGVQbHVnaW5EZXRlY3RlZFxuICB9KTtcbiAgY29uc3QgaXNEZXZUb29sc05leHQgPSAoKF9hMjUgPSB0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5pZCkgPT09IFwidnVlLWRldnRvb2xzLW5leHRcIjtcbiAgaWYgKHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18gJiYgaXNEZXZUb29sc05leHQpXG4gICAgcmV0dXJuO1xuICBjb25zdCBfZGV2dG9vbHNIb29rID0gY3JlYXRlRGV2VG9vbHNIb29rKCk7XG4gIGlmICh0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19IT09LX1JFUExBWV9fKSB7XG4gICAgdHJ5IHtcbiAgICAgIHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18uZm9yRWFjaCgoY2IpID0+IGNiKF9kZXZ0b29sc0hvb2spKTtcbiAgICAgIHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0hPT0tfUkVQTEFZX18gPSBbXTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW3Z1ZS1kZXZ0b29sc10gRXJyb3IgZHVyaW5nIGhvb2sgcmVwbGF5XCIsIGUpO1xuICAgIH1cbiAgfVxuICBfZGV2dG9vbHNIb29rLm9uY2UoXCJpbml0XCIsIChWdWUpID0+IHtcbiAgICB0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19WVUUyX0FQUF9ERVRFQ1RFRF9fID0gdHJ1ZTtcbiAgICBjb25zb2xlLmxvZyhcIiVjW19fX19fVnVlIERldlRvb2xzIHY3IGxvZ19fX19fXVwiLCBcImNvbG9yOiByZWQ7IGZvbnQtYm9sZDogNjAwOyBmb250LXNpemU6IDE2cHg7XCIpO1xuICAgIGNvbnNvbGUubG9nKFwiJWNWdWUgRGV2VG9vbHMgdjcgZGV0ZWN0ZWQgaW4geW91ciBWdWUyIHByb2plY3QuIHY3IG9ubHkgc3VwcG9ydHMgVnVlMyBhbmQgd2lsbCBub3Qgd29yay5cIiwgXCJmb250LWJvbGQ6IDUwMDsgZm9udC1zaXplOiAxNHB4O1wiKTtcbiAgICBjb25zdCBsZWdhY3lDaHJvbWVVcmwgPSBcImh0dHBzOi8vY2hyb21ld2Vic3RvcmUuZ29vZ2xlLmNvbS9kZXRhaWwvdnVlanMtZGV2dG9vbHMvaWFham1sY2VwbGVjYmxqaWFsaGhrbWVkamxwZGJsaHBcIjtcbiAgICBjb25zdCBsZWdhY3lGaXJlZm94VXJsID0gXCJodHRwczovL2FkZG9ucy5tb3ppbGxhLm9yZy9maXJlZm94L2FkZG9uL3Z1ZS1qcy1kZXZ0b29scy12Ni1sZWdhY3lcIjtcbiAgICBjb25zb2xlLmxvZyhgJWNUaGUgbGVnYWN5IHZlcnNpb24gb2YgY2hyb21lIGV4dGVuc2lvbiB0aGF0IHN1cHBvcnRzIGJvdGggVnVlIDIgYW5kIFZ1ZSAzIGhhcyBiZWVuIG1vdmVkIHRvICVjICR7bGVnYWN5Q2hyb21lVXJsfWAsIFwiZm9udC1zaXplOiAxNHB4O1wiLCBcInRleHQtZGVjb3JhdGlvbjogdW5kZXJsaW5lOyBjdXJzb3I6IHBvaW50ZXI7Zm9udC1zaXplOiAxNHB4O1wiKTtcbiAgICBjb25zb2xlLmxvZyhgJWNUaGUgbGVnYWN5IHZlcnNpb24gb2YgZmlyZWZveCBleHRlbnNpb24gdGhhdCBzdXBwb3J0cyBib3RoIFZ1ZSAyIGFuZCBWdWUgMyBoYXMgYmVlbiBtb3ZlZCB0byAlYyAke2xlZ2FjeUZpcmVmb3hVcmx9YCwgXCJmb250LXNpemU6IDE0cHg7XCIsIFwidGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7IGN1cnNvcjogcG9pbnRlcjtmb250LXNpemU6IDE0cHg7XCIpO1xuICAgIGNvbnNvbGUubG9nKFwiJWNQbGVhc2UgaW5zdGFsbCBhbmQgZW5hYmxlIG9ubHkgdGhlIGxlZ2FjeSB2ZXJzaW9uIGZvciB5b3VyIFZ1ZTIgYXBwLlwiLCBcImZvbnQtYm9sZDogNTAwOyBmb250LXNpemU6IDE0cHg7XCIpO1xuICAgIGNvbnNvbGUubG9nKFwiJWNbX19fX19WdWUgRGV2VG9vbHMgdjcgbG9nX19fX19dXCIsIFwiY29sb3I6IHJlZDsgZm9udC1ib2xkOiA2MDA7IGZvbnQtc2l6ZTogMTZweDtcIik7XG4gIH0pO1xuICBob29rLm9uLnNldHVwRGV2dG9vbHNQbHVnaW4oKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pID0+IHtcbiAgICB2YXIgX2EyNjtcbiAgICBhZGREZXZUb29sc1BsdWdpblRvQnVmZmVyKHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4pO1xuICAgIGNvbnN0IHsgYXBwIH0gPSAoX2EyNiA9IGFjdGl2ZUFwcFJlY29yZCkgIT0gbnVsbCA/IF9hMjYgOiB7fTtcbiAgICBpZiAocGx1Z2luRGVzY3JpcHRvci5zZXR0aW5ncykge1xuICAgICAgaW5pdFBsdWdpblNldHRpbmdzKHBsdWdpbkRlc2NyaXB0b3IuaWQsIHBsdWdpbkRlc2NyaXB0b3Iuc2V0dGluZ3MpO1xuICAgIH1cbiAgICBpZiAoIWFwcClcbiAgICAgIHJldHVybjtcbiAgICBjYWxsRGV2VG9vbHNQbHVnaW5TZXR1cEZuKFtwbHVnaW5EZXNjcmlwdG9yLCBzZXR1cEZuXSwgYXBwKTtcbiAgfSk7XG4gIG9uTGVnYWN5RGV2VG9vbHNQbHVnaW5BcGlBdmFpbGFibGUoKCkgPT4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQbHVnaW5CdWZmZXIgPSBkZXZ0b29sc1BsdWdpbkJ1ZmZlci5maWx0ZXIoKFtpdGVtXSkgPT4gaXRlbS5pZCAhPT0gXCJjb21wb25lbnRzXCIpO1xuICAgIG5vcm1hbGl6ZWRQbHVnaW5CdWZmZXIuZm9yRWFjaCgoW3BsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm5dKSA9PiB7XG4gICAgICBfZGV2dG9vbHNIb29rLmVtaXQoXCJkZXZ0b29scy1wbHVnaW46c2V0dXBcIiAvKiBTRVRVUF9ERVZUT09MU19QTFVHSU4gKi8sIHBsdWdpbkRlc2NyaXB0b3IsIHNldHVwRm4sIHsgdGFyZ2V0OiBcImxlZ2FjeVwiIH0pO1xuICAgIH0pO1xuICB9KTtcbiAgaG9vay5vbi52dWVBcHBJbml0KGFzeW5jIChhcHAsIHZlcnNpb24sIHR5cGVzKSA9PiB7XG4gICAgY29uc3QgYXBwUmVjb3JkID0gY3JlYXRlQXBwUmVjb3JkKGFwcCwgdHlwZXMpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRBcHBSZWNvcmQgPSB7XG4gICAgICAuLi5hcHBSZWNvcmQsXG4gICAgICBhcHAsXG4gICAgICB2ZXJzaW9uXG4gICAgfTtcbiAgICBhZGREZXZUb29sc0FwcFJlY29yZChub3JtYWxpemVkQXBwUmVjb3JkKTtcbiAgICBpZiAoZGV2dG9vbHNBcHBSZWNvcmRzLnZhbHVlLmxlbmd0aCA9PT0gMSkge1xuICAgICAgc2V0QWN0aXZlQXBwUmVjb3JkKG5vcm1hbGl6ZWRBcHBSZWNvcmQpO1xuICAgICAgc2V0QWN0aXZlQXBwUmVjb3JkSWQobm9ybWFsaXplZEFwcFJlY29yZC5pZCk7XG4gICAgICBub3JtYWxpemVSb3V0ZXJJbmZvKG5vcm1hbGl6ZWRBcHBSZWNvcmQsIGFjdGl2ZUFwcFJlY29yZCk7XG4gICAgICByZWdpc3RlckRldlRvb2xzUGx1Z2luKG5vcm1hbGl6ZWRBcHBSZWNvcmQuYXBwKTtcbiAgICB9XG4gICAgc2V0dXBEZXZUb29sc1BsdWdpbiguLi5jcmVhdGVDb21wb25lbnRzRGV2VG9vbHNQbHVnaW4obm9ybWFsaXplZEFwcFJlY29yZC5hcHApKTtcbiAgICB1cGRhdGVEZXZUb29sc1N0YXRlKHtcbiAgICAgIGNvbm5lY3RlZDogdHJ1ZVxuICAgIH0pO1xuICAgIF9kZXZ0b29sc0hvb2suYXBwcy5wdXNoKGFwcCk7XG4gIH0pO1xuICBob29rLm9uLnZ1ZUFwcFVubW91bnQoYXN5bmMgKGFwcCkgPT4ge1xuICAgIGNvbnN0IGFjdGl2ZVJlY29yZHMgPSBkZXZ0b29sc0FwcFJlY29yZHMudmFsdWUuZmlsdGVyKChhcHBSZWNvcmQpID0+IGFwcFJlY29yZC5hcHAgIT09IGFwcCk7XG4gICAgaWYgKGFjdGl2ZVJlY29yZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB1cGRhdGVEZXZUb29sc1N0YXRlKHtcbiAgICAgICAgY29ubmVjdGVkOiBmYWxzZVxuICAgICAgfSk7XG4gICAgfVxuICAgIHJlbW92ZURldlRvb2xzQXBwUmVjb3JkKGFwcCk7XG4gICAgcmVtb3ZlQXBwUmVjb3JkSWQoYXBwKTtcbiAgICBpZiAoYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmFwcCA9PT0gYXBwKSB7XG4gICAgICBzZXRBY3RpdmVBcHBSZWNvcmQoYWN0aXZlUmVjb3Jkc1swXSk7XG4gICAgICBkZXZ0b29sc0NvbnRleHQuaG9va3MuY2FsbEhvb2soXCJzZW5kQWN0aXZlQXBwVXBkYXRlZFRvQ2xpZW50XCIgLyogU0VORF9BQ1RJVkVfQVBQX1VOTU9VTlRFRF9UT19DTElFTlQgKi8pO1xuICAgIH1cbiAgICB0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLmFwcHMuc3BsaWNlKHRhcmdldDEzLl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18uYXBwcy5pbmRleE9mKGFwcCksIDEpO1xuICAgIHJlbW92ZVJlZ2lzdGVyZWRQbHVnaW5BcHAoYXBwKTtcbiAgfSk7XG4gIHN1YnNjcmliZURldlRvb2xzSG9vayhfZGV2dG9vbHNIb29rKTtcbiAgaWYgKCF0YXJnZXQxMy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldDEzLCBcIl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX19cIiwge1xuICAgICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4gX2RldnRvb2xzSG9vaztcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIWlzTnV4dEFwcCkge1xuICAgICAgT2JqZWN0LmFzc2lnbihfX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fLCBfZGV2dG9vbHNIb29rKTtcbiAgICB9XG4gIH1cbn1cbmZ1bmN0aW9uIG9uRGV2VG9vbHNDbGllbnRDb25uZWN0ZWQoZm4pIHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgaWYgKGRldnRvb2xzU3RhdGUuY29ubmVjdGVkICYmIGRldnRvb2xzU3RhdGUuY2xpZW50Q29ubmVjdGVkKSB7XG4gICAgICBmbigpO1xuICAgICAgcmVzb2x2ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkZXZ0b29sc0NvbnRleHQuaG9va3MuaG9vayhcImRldnRvb2xzQ29ubmVjdGVkVXBkYXRlZFwiIC8qIERFVlRPT0xTX0NPTk5FQ1RFRF9VUERBVEVEICovLCAoeyBzdGF0ZSB9KSA9PiB7XG4gICAgICBpZiAoc3RhdGUuY29ubmVjdGVkICYmIHN0YXRlLmNsaWVudENvbm5lY3RlZCkge1xuICAgICAgICBmbigpO1xuICAgICAgICByZXNvbHZlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xufVxuXG4vLyBzcmMvY29yZS9oaWdoLXBlcmYtbW9kZS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIHRvZ2dsZUhpZ2hQZXJmTW9kZShzdGF0ZSkge1xuICBkZXZ0b29sc1N0YXRlLmhpZ2hQZXJmTW9kZUVuYWJsZWQgPSBzdGF0ZSAhPSBudWxsID8gc3RhdGUgOiAhZGV2dG9vbHNTdGF0ZS5oaWdoUGVyZk1vZGVFbmFibGVkO1xuICBpZiAoIXN0YXRlICYmIGFjdGl2ZUFwcFJlY29yZC52YWx1ZSkge1xuICAgIHJlZ2lzdGVyRGV2VG9vbHNQbHVnaW4oYWN0aXZlQXBwUmVjb3JkLnZhbHVlLmFwcCk7XG4gIH1cbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2Zvcm1hdC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL3Jldml2ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyB0YXJnZXQgYXMgdGFyZ2V0MTQgfSBmcm9tIFwiQHZ1ZS9kZXZ0b29scy1zaGFyZWRcIjtcbmZ1bmN0aW9uIHJldml2ZVNldCh2YWwpIHtcbiAgY29uc3QgcmVzdWx0ID0gLyogQF9fUFVSRV9fICovIG5ldyBTZXQoKTtcbiAgY29uc3QgbGlzdCA9IHZhbC5fY3VzdG9tLnZhbHVlO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCB2YWx1ZSA9IGxpc3RbaV07XG4gICAgcmVzdWx0LmFkZChyZXZpdmUodmFsdWUpKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gcmV2aXZlTWFwKHZhbCkge1xuICBjb25zdCByZXN1bHQgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBjb25zdCBsaXN0ID0gdmFsLl9jdXN0b20udmFsdWU7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHsga2V5LCB2YWx1ZSB9ID0gbGlzdFtpXTtcbiAgICByZXN1bHQuc2V0KGtleSwgcmV2aXZlKHZhbHVlKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHJldml2ZSh2YWwpIHtcbiAgaWYgKHZhbCA9PT0gVU5ERUZJTkVEKSB7XG4gICAgcmV0dXJuIHZvaWQgMDtcbiAgfSBlbHNlIGlmICh2YWwgPT09IElORklOSVRZKSB7XG4gICAgcmV0dXJuIE51bWJlci5QT1NJVElWRV9JTkZJTklUWTtcbiAgfSBlbHNlIGlmICh2YWwgPT09IE5FR0FUSVZFX0lORklOSVRZKSB7XG4gICAgcmV0dXJuIE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcbiAgfSBlbHNlIGlmICh2YWwgPT09IE5BTikge1xuICAgIHJldHVybiBOdW1iZXIuTmFOO1xuICB9IGVsc2UgaWYgKHZhbCAmJiB2YWwuX2N1c3RvbSkge1xuICAgIGNvbnN0IHsgX2N1c3RvbTogY3VzdG9tIH0gPSB2YWw7XG4gICAgaWYgKGN1c3RvbS50eXBlID09PSBcImNvbXBvbmVudFwiKVxuICAgICAgcmV0dXJuIGFjdGl2ZUFwcFJlY29yZC52YWx1ZS5pbnN0YW5jZU1hcC5nZXQoY3VzdG9tLmlkKTtcbiAgICBlbHNlIGlmIChjdXN0b20udHlwZSA9PT0gXCJtYXBcIilcbiAgICAgIHJldHVybiByZXZpdmVNYXAodmFsKTtcbiAgICBlbHNlIGlmIChjdXN0b20udHlwZSA9PT0gXCJzZXRcIilcbiAgICAgIHJldHVybiByZXZpdmVTZXQodmFsKTtcbiAgICBlbHNlIGlmIChjdXN0b20udHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICAgIHJldHVybiBCaWdJbnQoY3VzdG9tLnZhbHVlKTtcbiAgICBlbHNlXG4gICAgICByZXR1cm4gcmV2aXZlKGN1c3RvbS52YWx1ZSk7XG4gIH0gZWxzZSBpZiAoc3ltYm9sUkUudGVzdCh2YWwpKSB7XG4gICAgY29uc3QgWywgc3RyaW5nXSA9IHN5bWJvbFJFLmV4ZWModmFsKTtcbiAgICByZXR1cm4gU3ltYm9sLmZvcihzdHJpbmcpO1xuICB9IGVsc2UgaWYgKHNwZWNpYWxUeXBlUkUudGVzdCh2YWwpKSB7XG4gICAgY29uc3QgWywgdHlwZSwgc3RyaW5nLCAsIGRldGFpbHNdID0gc3BlY2lhbFR5cGVSRS5leGVjKHZhbCk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IHRhcmdldDE0W3R5cGVdKHN0cmluZyk7XG4gICAgaWYgKHR5cGUgPT09IFwiRXJyb3JcIiAmJiBkZXRhaWxzKVxuICAgICAgcmVzdWx0LnN0YWNrID0gZGV0YWlscztcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWw7XG4gIH1cbn1cbmZ1bmN0aW9uIHJldml2ZXIoa2V5LCB2YWx1ZSkge1xuICByZXR1cm4gcmV2aXZlKHZhbHVlKTtcbn1cblxuLy8gc3JjL2NvcmUvY29tcG9uZW50L3N0YXRlL2Zvcm1hdC50c1xuZnVuY3Rpb24gZ2V0SW5zcGVjdG9yU3RhdGVWYWx1ZVR5cGUodmFsdWUsIHJhdyA9IHRydWUpIHtcbiAgY29uc3QgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKHZhbHVlID09IG51bGwgfHwgdmFsdWUgPT09IFVOREVGSU5FRCB8fCB2YWx1ZSA9PT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBcIm51bGxcIjtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcImJvb2xlYW5cIiB8fCB0eXBlID09PSBcIm51bWJlclwiIHx8IHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gTkVHQVRJVkVfSU5GSU5JVFkgfHwgdmFsdWUgPT09IE5BTikge1xuICAgIHJldHVybiBcImxpdGVyYWxcIjtcbiAgfSBlbHNlIGlmICh2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUuX2N1c3RvbSkge1xuICAgIGlmIChyYXcgfHwgdmFsdWUuX2N1c3RvbS5kaXNwbGF5ICE9IG51bGwgfHwgdmFsdWUuX2N1c3RvbS5kaXNwbGF5VGV4dCAhPSBudWxsKVxuICAgICAgcmV0dXJuIFwiY3VzdG9tXCI7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIGdldEluc3BlY3RvclN0YXRlVmFsdWVUeXBlKHZhbHVlLl9jdXN0b20udmFsdWUpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IHR5cGVNYXRjaCA9IHNwZWNpYWxUeXBlUkUuZXhlYyh2YWx1ZSk7XG4gICAgaWYgKHR5cGVNYXRjaCkge1xuICAgICAgY29uc3QgWywgdHlwZTJdID0gdHlwZU1hdGNoO1xuICAgICAgcmV0dXJuIGBuYXRpdmUgJHt0eXBlMn1gO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gXCJzdHJpbmdcIjtcbiAgICB9XG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkgfHwgKHZhbHVlID09IG51bGwgPyB2b2lkIDAgOiB2YWx1ZS5faXNBcnJheSkpIHtcbiAgICByZXR1cm4gXCJhcnJheVwiO1xuICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgcmV0dXJuIFwicGxhaW4tb2JqZWN0XCI7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIFwidW5rbm93blwiO1xuICB9XG59XG5mdW5jdGlvbiBmb3JtYXRJbnNwZWN0b3JTdGF0ZVZhbHVlKHZhbHVlLCBxdW90ZXMgPSBmYWxzZSwgb3B0aW9ucykge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGNvbnN0IHsgY3VzdG9tQ2xhc3MgfSA9IG9wdGlvbnMgIT0gbnVsbCA/IG9wdGlvbnMgOiB7fTtcbiAgbGV0IHJlc3VsdDtcbiAgY29uc3QgdHlwZSA9IGdldEluc3BlY3RvclN0YXRlVmFsdWVUeXBlKHZhbHVlLCBmYWxzZSk7XG4gIGlmICh0eXBlICE9PSBcImN1c3RvbVwiICYmICh2YWx1ZSA9PSBudWxsID8gdm9pZCAwIDogdmFsdWUuX2N1c3RvbSkpXG4gICAgdmFsdWUgPSB2YWx1ZS5fY3VzdG9tLnZhbHVlO1xuICBpZiAocmVzdWx0ID0gaW50ZXJuYWxTdGF0ZVRva2VuVG9TdHJpbmcodmFsdWUpKSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcImN1c3RvbVwiKSB7XG4gICAgY29uc3QgbmVzdGVkTmFtZSA9ICgoX2EyNSA9IHZhbHVlLl9jdXN0b20udmFsdWUpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1Ll9jdXN0b20pICYmIGZvcm1hdEluc3BlY3RvclN0YXRlVmFsdWUodmFsdWUuX2N1c3RvbS52YWx1ZSwgcXVvdGVzLCBvcHRpb25zKTtcbiAgICByZXR1cm4gbmVzdGVkTmFtZSB8fCB2YWx1ZS5fY3VzdG9tLmRpc3BsYXlUZXh0IHx8IHZhbHVlLl9jdXN0b20uZGlzcGxheTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcImFycmF5XCIpIHtcbiAgICByZXR1cm4gYEFycmF5WyR7dmFsdWUubGVuZ3RofV1gO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IFwicGxhaW4tb2JqZWN0XCIpIHtcbiAgICByZXR1cm4gYE9iamVjdCR7T2JqZWN0LmtleXModmFsdWUpLmxlbmd0aCA/IFwiXCIgOiBcIiAoZW1wdHkpXCJ9YDtcbiAgfSBlbHNlIGlmICh0eXBlID09IG51bGwgPyB2b2lkIDAgOiB0eXBlLmluY2x1ZGVzKFwibmF0aXZlXCIpKSB7XG4gICAgcmV0dXJuIGVzY2FwZSgoX2IyNSA9IHNwZWNpYWxUeXBlUkUuZXhlYyh2YWx1ZSkpID09IG51bGwgPyB2b2lkIDAgOiBfYjI1WzJdKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICBjb25zdCB0eXBlTWF0Y2ggPSB2YWx1ZS5tYXRjaChyYXdUeXBlUkUpO1xuICAgIGlmICh0eXBlTWF0Y2gpIHtcbiAgICAgIHZhbHVlID0gZXNjYXBlU3RyaW5nKHR5cGVNYXRjaFsxXSk7XG4gICAgfSBlbHNlIGlmIChxdW90ZXMpIHtcbiAgICAgIHZhbHVlID0gYDxzcGFuPlwiPC9zcGFuPiR7KGN1c3RvbUNsYXNzID09IG51bGwgPyB2b2lkIDAgOiBjdXN0b21DbGFzcy5zdHJpbmcpID8gYDxzcGFuIGNsYXNzPSR7Y3VzdG9tQ2xhc3Muc3RyaW5nfT4ke2VzY2FwZVN0cmluZyh2YWx1ZSl9PC9zcGFuPmAgOiBlc2NhcGVTdHJpbmcodmFsdWUpfTxzcGFuPlwiPC9zcGFuPmA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbHVlID0gKGN1c3RvbUNsYXNzID09IG51bGwgPyB2b2lkIDAgOiBjdXN0b21DbGFzcy5zdHJpbmcpID8gYDxzcGFuIGNsYXNzPVwiJHsoX2MgPSBjdXN0b21DbGFzcyA9PSBudWxsID8gdm9pZCAwIDogY3VzdG9tQ2xhc3Muc3RyaW5nKSAhPSBudWxsID8gX2MgOiBcIlwifVwiPiR7ZXNjYXBlU3RyaW5nKHZhbHVlKX08L3NwYW4+YCA6IGVzY2FwZVN0cmluZyh2YWx1ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cbmZ1bmN0aW9uIGVzY2FwZVN0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gZXNjYXBlKHZhbHVlKS5yZXBsYWNlKC8gL2csIFwiJm5ic3A7XCIpLnJlcGxhY2UoL1xcbi9nLCBcIjxzcGFuPlxcXFxuPC9zcGFuPlwiKTtcbn1cbmZ1bmN0aW9uIGdldFJhdyh2YWx1ZSkge1xuICB2YXIgX2EyNSwgX2IyNSwgX2M7XG4gIGxldCBjdXN0b21UeXBlO1xuICBjb25zdCBpc0N1c3RvbSA9IGdldEluc3BlY3RvclN0YXRlVmFsdWVUeXBlKHZhbHVlKSA9PT0gXCJjdXN0b21cIjtcbiAgbGV0IGluaGVyaXQgPSB7fTtcbiAgaWYgKGlzQ3VzdG9tKSB7XG4gICAgY29uc3QgZGF0YSA9IHZhbHVlO1xuICAgIGNvbnN0IGN1c3RvbVZhbHVlID0gKF9hMjUgPSBkYXRhLl9jdXN0b20pID09IG51bGwgPyB2b2lkIDAgOiBfYTI1LnZhbHVlO1xuICAgIGNvbnN0IGN1cnJlbnRDdXN0b21UeXBlID0gKF9iMjUgPSBkYXRhLl9jdXN0b20pID09IG51bGwgPyB2b2lkIDAgOiBfYjI1LnR5cGU7XG4gICAgY29uc3QgbmVzdGVkQ3VzdG9tID0gdHlwZW9mIGN1c3RvbVZhbHVlID09PSBcIm9iamVjdFwiICYmIGN1c3RvbVZhbHVlICE9PSBudWxsICYmIFwiX2N1c3RvbVwiIGluIGN1c3RvbVZhbHVlID8gZ2V0UmF3KGN1c3RvbVZhbHVlKSA6IHsgaW5oZXJpdDogdm9pZCAwLCB2YWx1ZTogdm9pZCAwLCBjdXN0b21UeXBlOiB2b2lkIDAgfTtcbiAgICBpbmhlcml0ID0gbmVzdGVkQ3VzdG9tLmluaGVyaXQgfHwgKChfYyA9IGRhdGEuX2N1c3RvbSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmZpZWxkcykgfHwge307XG4gICAgdmFsdWUgPSBuZXN0ZWRDdXN0b20udmFsdWUgfHwgY3VzdG9tVmFsdWU7XG4gICAgY3VzdG9tVHlwZSA9IG5lc3RlZEN1c3RvbS5jdXN0b21UeXBlIHx8IGN1cnJlbnRDdXN0b21UeXBlO1xuICB9XG4gIGlmICh2YWx1ZSAmJiB2YWx1ZS5faXNBcnJheSlcbiAgICB2YWx1ZSA9IHZhbHVlLml0ZW1zO1xuICByZXR1cm4geyB2YWx1ZSwgaW5oZXJpdCwgY3VzdG9tVHlwZSB9O1xufVxuZnVuY3Rpb24gdG9FZGl0KHZhbHVlLCBjdXN0b21UeXBlKSB7XG4gIGlmIChjdXN0b21UeXBlID09PSBcImJpZ2ludFwiKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgaWYgKGN1c3RvbVR5cGUgPT09IFwiZGF0ZVwiKVxuICAgIHJldHVybiB2YWx1ZTtcbiAgcmV0dXJuIHJlcGxhY2VUb2tlblRvU3RyaW5nKEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XG59XG5mdW5jdGlvbiB0b1N1Ym1pdCh2YWx1ZSwgY3VzdG9tVHlwZSkge1xuICBpZiAoY3VzdG9tVHlwZSA9PT0gXCJiaWdpbnRcIilcbiAgICByZXR1cm4gQmlnSW50KHZhbHVlKTtcbiAgaWYgKGN1c3RvbVR5cGUgPT09IFwiZGF0ZVwiKVxuICAgIHJldHVybiBuZXcgRGF0ZSh2YWx1ZSk7XG4gIHJldHVybiBKU09OLnBhcnNlKHJlcGxhY2VTdHJpbmdUb1Rva2VuKHZhbHVlKSwgcmV2aXZlcik7XG59XG5cbi8vIHNyYy9jb3JlL2RldnRvb2xzLWNsaWVudC9kZXRlY3RlZC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxNSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuZnVuY3Rpb24gdXBkYXRlRGV2VG9vbHNDbGllbnREZXRlY3RlZChwYXJhbXMpIHtcbiAgZGV2dG9vbHNTdGF0ZS5kZXZ0b29sc0NsaWVudERldGVjdGVkID0ge1xuICAgIC4uLmRldnRvb2xzU3RhdGUuZGV2dG9vbHNDbGllbnREZXRlY3RlZCxcbiAgICAuLi5wYXJhbXNcbiAgfTtcbiAgY29uc3QgZGV2dG9vbHNDbGllbnRWaXNpYmxlID0gT2JqZWN0LnZhbHVlcyhkZXZ0b29sc1N0YXRlLmRldnRvb2xzQ2xpZW50RGV0ZWN0ZWQpLnNvbWUoQm9vbGVhbik7XG4gIHRvZ2dsZUhpZ2hQZXJmTW9kZSghZGV2dG9vbHNDbGllbnRWaXNpYmxlKTtcbn1cbnZhciBfYTE4LCBfYjE4O1xuKF9iMTggPSAoX2ExOCA9IHRhcmdldDE1KS5fX1ZVRV9ERVZUT09MU19VUERBVEVfQ0xJRU5UX0RFVEVDVEVEX18pICE9IG51bGwgPyBfYjE4IDogX2ExOC5fX1ZVRV9ERVZUT09MU19VUERBVEVfQ0xJRU5UX0RFVEVDVEVEX18gPSB1cGRhdGVEZXZUb29sc0NsaWVudERldGVjdGVkO1xuXG4vLyBzcmMvbWVzc2FnaW5nL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDIxIH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5pbXBvcnQgeyBjcmVhdGVCaXJwYywgY3JlYXRlQmlycGNHcm91cCB9IGZyb20gXCJiaXJwY1wiO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvaW5kZXgudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9icm9hZGNhc3QtY2hhbm5lbC9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvaW5kZXguanNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L2NsYXNzLXJlZ2lzdHJ5LmpzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9yZWdpc3RyeS5qc1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvZG91YmxlLWluZGV4ZWQta3YuanNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgRG91YmxlSW5kZXhlZEtWID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmtleVRvVmFsdWUgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICAgIHRoaXMudmFsdWVUb0tleSA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gIH1cbiAgc2V0KGtleSwgdmFsdWUpIHtcbiAgICB0aGlzLmtleVRvVmFsdWUuc2V0KGtleSwgdmFsdWUpO1xuICAgIHRoaXMudmFsdWVUb0tleS5zZXQodmFsdWUsIGtleSk7XG4gIH1cbiAgZ2V0QnlLZXkoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMua2V5VG9WYWx1ZS5nZXQoa2V5KTtcbiAgfVxuICBnZXRCeVZhbHVlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHRoaXMudmFsdWVUb0tleS5nZXQodmFsdWUpO1xuICB9XG4gIGNsZWFyKCkge1xuICAgIHRoaXMua2V5VG9WYWx1ZS5jbGVhcigpO1xuICAgIHRoaXMudmFsdWVUb0tleS5jbGVhcigpO1xuICB9XG59O1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9yZWdpc3RyeS5qc1xudmFyIFJlZ2lzdHJ5ID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihnZW5lcmF0ZUlkZW50aWZpZXIpIHtcbiAgICB0aGlzLmdlbmVyYXRlSWRlbnRpZmllciA9IGdlbmVyYXRlSWRlbnRpZmllcjtcbiAgICB0aGlzLmt2ID0gbmV3IERvdWJsZUluZGV4ZWRLVigpO1xuICB9XG4gIHJlZ2lzdGVyKHZhbHVlLCBpZGVudGlmaWVyKSB7XG4gICAgaWYgKHRoaXMua3YuZ2V0QnlWYWx1ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFpZGVudGlmaWVyKSB7XG4gICAgICBpZGVudGlmaWVyID0gdGhpcy5nZW5lcmF0ZUlkZW50aWZpZXIodmFsdWUpO1xuICAgIH1cbiAgICB0aGlzLmt2LnNldChpZGVudGlmaWVyLCB2YWx1ZSk7XG4gIH1cbiAgY2xlYXIoKSB7XG4gICAgdGhpcy5rdi5jbGVhcigpO1xuICB9XG4gIGdldElkZW50aWZpZXIodmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5rdi5nZXRCeVZhbHVlKHZhbHVlKTtcbiAgfVxuICBnZXRWYWx1ZShpZGVudGlmaWVyKSB7XG4gICAgcmV0dXJuIHRoaXMua3YuZ2V0QnlLZXkoaWRlbnRpZmllcik7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L2NsYXNzLXJlZ2lzdHJ5LmpzXG52YXIgQ2xhc3NSZWdpc3RyeSA9IGNsYXNzIGV4dGVuZHMgUmVnaXN0cnkge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigoYykgPT4gYy5uYW1lKTtcbiAgICB0aGlzLmNsYXNzVG9BbGxvd2VkUHJvcHMgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICB9XG4gIHJlZ2lzdGVyKHZhbHVlLCBvcHRpb25zKSB7XG4gICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSBcIm9iamVjdFwiKSB7XG4gICAgICBpZiAob3B0aW9ucy5hbGxvd1Byb3BzKSB7XG4gICAgICAgIHRoaXMuY2xhc3NUb0FsbG93ZWRQcm9wcy5zZXQodmFsdWUsIG9wdGlvbnMuYWxsb3dQcm9wcyk7XG4gICAgICB9XG4gICAgICBzdXBlci5yZWdpc3Rlcih2YWx1ZSwgb3B0aW9ucy5pZGVudGlmaWVyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VwZXIucmVnaXN0ZXIodmFsdWUsIG9wdGlvbnMpO1xuICAgIH1cbiAgfVxuICBnZXRBbGxvd2VkUHJvcHModmFsdWUpIHtcbiAgICByZXR1cm4gdGhpcy5jbGFzc1RvQWxsb3dlZFByb3BzLmdldCh2YWx1ZSk7XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L2N1c3RvbS10cmFuc2Zvcm1lci1yZWdpc3RyeS5qc1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvdXRpbC5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIHZhbHVlc09mT2JqKHJlY29yZCkge1xuICBpZiAoXCJ2YWx1ZXNcIiBpbiBPYmplY3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhyZWNvcmQpO1xuICB9XG4gIGNvbnN0IHZhbHVlcyA9IFtdO1xuICBmb3IgKGNvbnN0IGtleSBpbiByZWNvcmQpIHtcbiAgICBpZiAocmVjb3JkLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIHZhbHVlcy5wdXNoKHJlY29yZFtrZXldKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlcztcbn1cbmZ1bmN0aW9uIGZpbmQocmVjb3JkLCBwcmVkaWNhdGUpIHtcbiAgY29uc3QgdmFsdWVzID0gdmFsdWVzT2ZPYmoocmVjb3JkKTtcbiAgaWYgKFwiZmluZFwiIGluIHZhbHVlcykge1xuICAgIHJldHVybiB2YWx1ZXMuZmluZChwcmVkaWNhdGUpO1xuICB9XG4gIGNvbnN0IHZhbHVlc05vdE5ldmVyID0gdmFsdWVzO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHZhbHVlc05vdE5ldmVyLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdmFsdWUgPSB2YWx1ZXNOb3ROZXZlcltpXTtcbiAgICBpZiAocHJlZGljYXRlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufVxuZnVuY3Rpb24gZm9yRWFjaChyZWNvcmQsIHJ1bikge1xuICBPYmplY3QuZW50cmllcyhyZWNvcmQpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4gcnVuKHZhbHVlLCBrZXkpKTtcbn1cbmZ1bmN0aW9uIGluY2x1ZGVzKGFyciwgdmFsdWUpIHtcbiAgcmV0dXJuIGFyci5pbmRleE9mKHZhbHVlKSAhPT0gLTE7XG59XG5mdW5jdGlvbiBmaW5kQXJyKHJlY29yZCwgcHJlZGljYXRlKSB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmVjb3JkLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgdmFsdWUgPSByZWNvcmRbaV07XG4gICAgaWYgKHByZWRpY2F0ZSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZvaWQgMDtcbn1cblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvY3VzdG9tLXRyYW5zZm9ybWVyLXJlZ2lzdHJ5LmpzXG52YXIgQ3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeSA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy50cmFuc2ZvbWVycyA9IHt9O1xuICB9XG4gIHJlZ2lzdGVyKHRyYW5zZm9ybWVyKSB7XG4gICAgdGhpcy50cmFuc2ZvbWVyc1t0cmFuc2Zvcm1lci5uYW1lXSA9IHRyYW5zZm9ybWVyO1xuICB9XG4gIGZpbmRBcHBsaWNhYmxlKHYpIHtcbiAgICByZXR1cm4gZmluZCh0aGlzLnRyYW5zZm9tZXJzLCAodHJhbnNmb3JtZXIpID0+IHRyYW5zZm9ybWVyLmlzQXBwbGljYWJsZSh2KSk7XG4gIH1cbiAgZmluZEJ5TmFtZShuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb21lcnNbbmFtZV07XG4gIH1cbn07XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L3BsYWluZXIuanNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L2lzLmpzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIGdldFR5cGUgPSAocGF5bG9hZCkgPT4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHBheWxvYWQpLnNsaWNlKDgsIC0xKTtcbnZhciBpc1VuZGVmaW5lZCA9IChwYXlsb2FkKSA9PiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJ1bmRlZmluZWRcIjtcbnZhciBpc051bGwgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCA9PT0gbnVsbDtcbnZhciBpc1BsYWluT2JqZWN0MiA9IChwYXlsb2FkKSA9PiB7XG4gIGlmICh0eXBlb2YgcGF5bG9hZCAhPT0gXCJvYmplY3RcIiB8fCBwYXlsb2FkID09PSBudWxsKVxuICAgIHJldHVybiBmYWxzZTtcbiAgaWYgKHBheWxvYWQgPT09IE9iamVjdC5wcm90b3R5cGUpXG4gICAgcmV0dXJuIGZhbHNlO1xuICBpZiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHBheWxvYWQpID09PSBudWxsKVxuICAgIHJldHVybiB0cnVlO1xuICByZXR1cm4gT2JqZWN0LmdldFByb3RvdHlwZU9mKHBheWxvYWQpID09PSBPYmplY3QucHJvdG90eXBlO1xufTtcbnZhciBpc0VtcHR5T2JqZWN0ID0gKHBheWxvYWQpID0+IGlzUGxhaW5PYmplY3QyKHBheWxvYWQpICYmIE9iamVjdC5rZXlzKHBheWxvYWQpLmxlbmd0aCA9PT0gMDtcbnZhciBpc0FycmF5ID0gKHBheWxvYWQpID0+IEFycmF5LmlzQXJyYXkocGF5bG9hZCk7XG52YXIgaXNTdHJpbmcgPSAocGF5bG9hZCkgPT4gdHlwZW9mIHBheWxvYWQgPT09IFwic3RyaW5nXCI7XG52YXIgaXNOdW1iZXIgPSAocGF5bG9hZCkgPT4gdHlwZW9mIHBheWxvYWQgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKHBheWxvYWQpO1xudmFyIGlzQm9vbGVhbiA9IChwYXlsb2FkKSA9PiB0eXBlb2YgcGF5bG9hZCA9PT0gXCJib29sZWFuXCI7XG52YXIgaXNSZWdFeHAgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCBpbnN0YW5jZW9mIFJlZ0V4cDtcbnZhciBpc01hcCA9IChwYXlsb2FkKSA9PiBwYXlsb2FkIGluc3RhbmNlb2YgTWFwO1xudmFyIGlzU2V0ID0gKHBheWxvYWQpID0+IHBheWxvYWQgaW5zdGFuY2VvZiBTZXQ7XG52YXIgaXNTeW1ib2wgPSAocGF5bG9hZCkgPT4gZ2V0VHlwZShwYXlsb2FkKSA9PT0gXCJTeW1ib2xcIjtcbnZhciBpc0RhdGUgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCBpbnN0YW5jZW9mIERhdGUgJiYgIWlzTmFOKHBheWxvYWQudmFsdWVPZigpKTtcbnZhciBpc0Vycm9yID0gKHBheWxvYWQpID0+IHBheWxvYWQgaW5zdGFuY2VvZiBFcnJvcjtcbnZhciBpc05hTlZhbHVlID0gKHBheWxvYWQpID0+IHR5cGVvZiBwYXlsb2FkID09PSBcIm51bWJlclwiICYmIGlzTmFOKHBheWxvYWQpO1xudmFyIGlzUHJpbWl0aXZlMiA9IChwYXlsb2FkKSA9PiBpc0Jvb2xlYW4ocGF5bG9hZCkgfHwgaXNOdWxsKHBheWxvYWQpIHx8IGlzVW5kZWZpbmVkKHBheWxvYWQpIHx8IGlzTnVtYmVyKHBheWxvYWQpIHx8IGlzU3RyaW5nKHBheWxvYWQpIHx8IGlzU3ltYm9sKHBheWxvYWQpO1xudmFyIGlzQmlnaW50ID0gKHBheWxvYWQpID0+IHR5cGVvZiBwYXlsb2FkID09PSBcImJpZ2ludFwiO1xudmFyIGlzSW5maW5pdGUgPSAocGF5bG9hZCkgPT4gcGF5bG9hZCA9PT0gSW5maW5pdHkgfHwgcGF5bG9hZCA9PT0gLUluZmluaXR5O1xudmFyIGlzVHlwZWRBcnJheSA9IChwYXlsb2FkKSA9PiBBcnJheUJ1ZmZlci5pc1ZpZXcocGF5bG9hZCkgJiYgIShwYXlsb2FkIGluc3RhbmNlb2YgRGF0YVZpZXcpO1xudmFyIGlzVVJMID0gKHBheWxvYWQpID0+IHBheWxvYWQgaW5zdGFuY2VvZiBVUkw7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9zdXBlcmpzb25AMi4yLjIvbm9kZV9tb2R1bGVzL3N1cGVyanNvbi9kaXN0L3BhdGhzdHJpbmdpZmllci5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBlc2NhcGVLZXkgPSAoa2V5KSA9PiBrZXkucmVwbGFjZSgvXFwuL2csIFwiXFxcXC5cIik7XG52YXIgc3RyaW5naWZ5UGF0aCA9IChwYXRoKSA9PiBwYXRoLm1hcChTdHJpbmcpLm1hcChlc2NhcGVLZXkpLmpvaW4oXCIuXCIpO1xudmFyIHBhcnNlUGF0aCA9IChzdHJpbmcpID0+IHtcbiAgY29uc3QgcmVzdWx0ID0gW107XG4gIGxldCBzZWdtZW50ID0gXCJcIjtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgY2hhciA9IHN0cmluZy5jaGFyQXQoaSk7XG4gICAgY29uc3QgaXNFc2NhcGVkRG90ID0gY2hhciA9PT0gXCJcXFxcXCIgJiYgc3RyaW5nLmNoYXJBdChpICsgMSkgPT09IFwiLlwiO1xuICAgIGlmIChpc0VzY2FwZWREb3QpIHtcbiAgICAgIHNlZ21lbnQgKz0gXCIuXCI7XG4gICAgICBpKys7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgaXNFbmRPZlNlZ21lbnQgPSBjaGFyID09PSBcIi5cIjtcbiAgICBpZiAoaXNFbmRPZlNlZ21lbnQpIHtcbiAgICAgIHJlc3VsdC5wdXNoKHNlZ21lbnQpO1xuICAgICAgc2VnbWVudCA9IFwiXCI7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgc2VnbWVudCArPSBjaGFyO1xuICB9XG4gIGNvbnN0IGxhc3RTZWdtZW50ID0gc2VnbWVudDtcbiAgcmVzdWx0LnB1c2gobGFzdFNlZ21lbnQpO1xuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvdHJhbnNmb3JtZXIuanNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBzaW1wbGVUcmFuc2Zvcm1hdGlvbihpc0FwcGxpY2FibGUsIGFubm90YXRpb24sIHRyYW5zZm9ybSwgdW50cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIHtcbiAgICBpc0FwcGxpY2FibGUsXG4gICAgYW5ub3RhdGlvbixcbiAgICB0cmFuc2Zvcm0sXG4gICAgdW50cmFuc2Zvcm1cbiAgfTtcbn1cbnZhciBzaW1wbGVSdWxlcyA9IFtcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oaXNVbmRlZmluZWQsIFwidW5kZWZpbmVkXCIsICgpID0+IG51bGwsICgpID0+IHZvaWQgMCksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzQmlnaW50LCBcImJpZ2ludFwiLCAodikgPT4gdi50b1N0cmluZygpLCAodikgPT4ge1xuICAgIGlmICh0eXBlb2YgQmlnSW50ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICByZXR1cm4gQmlnSW50KHYpO1xuICAgIH1cbiAgICBjb25zb2xlLmVycm9yKFwiUGxlYXNlIGFkZCBhIEJpZ0ludCBwb2x5ZmlsbC5cIik7XG4gICAgcmV0dXJuIHY7XG4gIH0pLFxuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbihpc0RhdGUsIFwiRGF0ZVwiLCAodikgPT4gdi50b0lTT1N0cmluZygpLCAodikgPT4gbmV3IERhdGUodikpLFxuICBzaW1wbGVUcmFuc2Zvcm1hdGlvbihpc0Vycm9yLCBcIkVycm9yXCIsICh2LCBzdXBlckpzb24pID0+IHtcbiAgICBjb25zdCBiYXNlRXJyb3IgPSB7XG4gICAgICBuYW1lOiB2Lm5hbWUsXG4gICAgICBtZXNzYWdlOiB2Lm1lc3NhZ2VcbiAgICB9O1xuICAgIHN1cGVySnNvbi5hbGxvd2VkRXJyb3JQcm9wcy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgICBiYXNlRXJyb3JbcHJvcF0gPSB2W3Byb3BdO1xuICAgIH0pO1xuICAgIHJldHVybiBiYXNlRXJyb3I7XG4gIH0sICh2LCBzdXBlckpzb24pID0+IHtcbiAgICBjb25zdCBlID0gbmV3IEVycm9yKHYubWVzc2FnZSk7XG4gICAgZS5uYW1lID0gdi5uYW1lO1xuICAgIGUuc3RhY2sgPSB2LnN0YWNrO1xuICAgIHN1cGVySnNvbi5hbGxvd2VkRXJyb3JQcm9wcy5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgICBlW3Byb3BdID0gdltwcm9wXTtcbiAgICB9KTtcbiAgICByZXR1cm4gZTtcbiAgfSksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzUmVnRXhwLCBcInJlZ2V4cFwiLCAodikgPT4gXCJcIiArIHYsIChyZWdleCkgPT4ge1xuICAgIGNvbnN0IGJvZHkgPSByZWdleC5zbGljZSgxLCByZWdleC5sYXN0SW5kZXhPZihcIi9cIikpO1xuICAgIGNvbnN0IGZsYWdzID0gcmVnZXguc2xpY2UocmVnZXgubGFzdEluZGV4T2YoXCIvXCIpICsgMSk7XG4gICAgcmV0dXJuIG5ldyBSZWdFeHAoYm9keSwgZmxhZ3MpO1xuICB9KSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oXG4gICAgaXNTZXQsXG4gICAgXCJzZXRcIixcbiAgICAvLyAoc2V0cyBvbmx5IGV4aXN0IGluIGVzNispXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGVzNS9uby1lczYtbWV0aG9kc1xuICAgICh2KSA9PiBbLi4udi52YWx1ZXMoKV0sXG4gICAgKHYpID0+IG5ldyBTZXQodilcbiAgKSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oaXNNYXAsIFwibWFwXCIsICh2KSA9PiBbLi4udi5lbnRyaWVzKCldLCAodikgPT4gbmV3IE1hcCh2KSksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKCh2KSA9PiBpc05hTlZhbHVlKHYpIHx8IGlzSW5maW5pdGUodiksIFwibnVtYmVyXCIsICh2KSA9PiB7XG4gICAgaWYgKGlzTmFOVmFsdWUodikpIHtcbiAgICAgIHJldHVybiBcIk5hTlwiO1xuICAgIH1cbiAgICBpZiAodiA+IDApIHtcbiAgICAgIHJldHVybiBcIkluZmluaXR5XCI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBcIi1JbmZpbml0eVwiO1xuICAgIH1cbiAgfSwgTnVtYmVyKSxcbiAgc2ltcGxlVHJhbnNmb3JtYXRpb24oKHYpID0+IHYgPT09IDAgJiYgMSAvIHYgPT09IC1JbmZpbml0eSwgXCJudW1iZXJcIiwgKCkgPT4ge1xuICAgIHJldHVybiBcIi0wXCI7XG4gIH0sIE51bWJlciksXG4gIHNpbXBsZVRyYW5zZm9ybWF0aW9uKGlzVVJMLCBcIlVSTFwiLCAodikgPT4gdi50b1N0cmluZygpLCAodikgPT4gbmV3IFVSTCh2KSlcbl07XG5mdW5jdGlvbiBjb21wb3NpdGVUcmFuc2Zvcm1hdGlvbihpc0FwcGxpY2FibGUsIGFubm90YXRpb24sIHRyYW5zZm9ybSwgdW50cmFuc2Zvcm0pIHtcbiAgcmV0dXJuIHtcbiAgICBpc0FwcGxpY2FibGUsXG4gICAgYW5ub3RhdGlvbixcbiAgICB0cmFuc2Zvcm0sXG4gICAgdW50cmFuc2Zvcm1cbiAgfTtcbn1cbnZhciBzeW1ib2xSdWxlID0gY29tcG9zaXRlVHJhbnNmb3JtYXRpb24oKHMsIHN1cGVySnNvbikgPT4ge1xuICBpZiAoaXNTeW1ib2wocykpIHtcbiAgICBjb25zdCBpc1JlZ2lzdGVyZWQgPSAhIXN1cGVySnNvbi5zeW1ib2xSZWdpc3RyeS5nZXRJZGVudGlmaWVyKHMpO1xuICAgIHJldHVybiBpc1JlZ2lzdGVyZWQ7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufSwgKHMsIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCBpZGVudGlmaWVyID0gc3VwZXJKc29uLnN5bWJvbFJlZ2lzdHJ5LmdldElkZW50aWZpZXIocyk7XG4gIHJldHVybiBbXCJzeW1ib2xcIiwgaWRlbnRpZmllcl07XG59LCAodikgPT4gdi5kZXNjcmlwdGlvbiwgKF8sIGEsIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCB2YWx1ZSA9IHN1cGVySnNvbi5zeW1ib2xSZWdpc3RyeS5nZXRWYWx1ZShhWzFdKTtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBkZXNlcmlhbGl6ZSB1bmtub3duIHN5bWJvbFwiKTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59KTtcbnZhciBjb25zdHJ1Y3RvclRvTmFtZSA9IFtcbiAgSW50OEFycmF5LFxuICBVaW50OEFycmF5LFxuICBJbnQxNkFycmF5LFxuICBVaW50MTZBcnJheSxcbiAgSW50MzJBcnJheSxcbiAgVWludDMyQXJyYXksXG4gIEZsb2F0MzJBcnJheSxcbiAgRmxvYXQ2NEFycmF5LFxuICBVaW50OENsYW1wZWRBcnJheVxuXS5yZWR1Y2UoKG9iaiwgY3RvcikgPT4ge1xuICBvYmpbY3Rvci5uYW1lXSA9IGN0b3I7XG4gIHJldHVybiBvYmo7XG59LCB7fSk7XG52YXIgdHlwZWRBcnJheVJ1bGUgPSBjb21wb3NpdGVUcmFuc2Zvcm1hdGlvbihpc1R5cGVkQXJyYXksICh2KSA9PiBbXCJ0eXBlZC1hcnJheVwiLCB2LmNvbnN0cnVjdG9yLm5hbWVdLCAodikgPT4gWy4uLnZdLCAodiwgYSkgPT4ge1xuICBjb25zdCBjdG9yID0gY29uc3RydWN0b3JUb05hbWVbYVsxXV07XG4gIGlmICghY3Rvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBkZXNlcmlhbGl6ZSB1bmtub3duIHR5cGVkIGFycmF5XCIpO1xuICB9XG4gIHJldHVybiBuZXcgY3Rvcih2KTtcbn0pO1xuZnVuY3Rpb24gaXNJbnN0YW5jZU9mUmVnaXN0ZXJlZENsYXNzKHBvdGVudGlhbENsYXNzLCBzdXBlckpzb24pIHtcbiAgaWYgKHBvdGVudGlhbENsYXNzID09IG51bGwgPyB2b2lkIDAgOiBwb3RlbnRpYWxDbGFzcy5jb25zdHJ1Y3Rvcikge1xuICAgIGNvbnN0IGlzUmVnaXN0ZXJlZCA9ICEhc3VwZXJKc29uLmNsYXNzUmVnaXN0cnkuZ2V0SWRlbnRpZmllcihwb3RlbnRpYWxDbGFzcy5jb25zdHJ1Y3Rvcik7XG4gICAgcmV0dXJuIGlzUmVnaXN0ZXJlZDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG52YXIgY2xhc3NSdWxlID0gY29tcG9zaXRlVHJhbnNmb3JtYXRpb24oaXNJbnN0YW5jZU9mUmVnaXN0ZXJlZENsYXNzLCAoY2xhenosIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCBpZGVudGlmaWVyID0gc3VwZXJKc29uLmNsYXNzUmVnaXN0cnkuZ2V0SWRlbnRpZmllcihjbGF6ei5jb25zdHJ1Y3Rvcik7XG4gIHJldHVybiBbXCJjbGFzc1wiLCBpZGVudGlmaWVyXTtcbn0sIChjbGF6eiwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IGFsbG93ZWRQcm9wcyA9IHN1cGVySnNvbi5jbGFzc1JlZ2lzdHJ5LmdldEFsbG93ZWRQcm9wcyhjbGF6ei5jb25zdHJ1Y3Rvcik7XG4gIGlmICghYWxsb3dlZFByb3BzKSB7XG4gICAgcmV0dXJuIHsgLi4uY2xhenogfTtcbiAgfVxuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgYWxsb3dlZFByb3BzLmZvckVhY2goKHByb3ApID0+IHtcbiAgICByZXN1bHRbcHJvcF0gPSBjbGF6eltwcm9wXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59LCAodiwgYSwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IGNsYXp6ID0gc3VwZXJKc29uLmNsYXNzUmVnaXN0cnkuZ2V0VmFsdWUoYVsxXSk7XG4gIGlmICghY2xhenopIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYFRyeWluZyB0byBkZXNlcmlhbGl6ZSB1bmtub3duIGNsYXNzICcke2FbMV19JyAtIGNoZWNrIGh0dHBzOi8vZ2l0aHViLmNvbS9ibGl0ei1qcy9zdXBlcmpzb24vaXNzdWVzLzExNiNpc3N1ZWNvbW1lbnQtNzczOTk2NTY0YCk7XG4gIH1cbiAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShjbGF6ei5wcm90b3R5cGUpLCB2KTtcbn0pO1xudmFyIGN1c3RvbVJ1bGUgPSBjb21wb3NpdGVUcmFuc2Zvcm1hdGlvbigodmFsdWUsIHN1cGVySnNvbikgPT4ge1xuICByZXR1cm4gISFzdXBlckpzb24uY3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeS5maW5kQXBwbGljYWJsZSh2YWx1ZSk7XG59LCAodmFsdWUsIHN1cGVySnNvbikgPT4ge1xuICBjb25zdCB0cmFuc2Zvcm1lciA9IHN1cGVySnNvbi5jdXN0b21UcmFuc2Zvcm1lclJlZ2lzdHJ5LmZpbmRBcHBsaWNhYmxlKHZhbHVlKTtcbiAgcmV0dXJuIFtcImN1c3RvbVwiLCB0cmFuc2Zvcm1lci5uYW1lXTtcbn0sICh2YWx1ZSwgc3VwZXJKc29uKSA9PiB7XG4gIGNvbnN0IHRyYW5zZm9ybWVyID0gc3VwZXJKc29uLmN1c3RvbVRyYW5zZm9ybWVyUmVnaXN0cnkuZmluZEFwcGxpY2FibGUodmFsdWUpO1xuICByZXR1cm4gdHJhbnNmb3JtZXIuc2VyaWFsaXplKHZhbHVlKTtcbn0sICh2LCBhLCBzdXBlckpzb24pID0+IHtcbiAgY29uc3QgdHJhbnNmb3JtZXIgPSBzdXBlckpzb24uY3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeS5maW5kQnlOYW1lKGFbMV0pO1xuICBpZiAoIXRyYW5zZm9ybWVyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGRlc2VyaWFsaXplIHVua25vd24gY3VzdG9tIHZhbHVlXCIpO1xuICB9XG4gIHJldHVybiB0cmFuc2Zvcm1lci5kZXNlcmlhbGl6ZSh2KTtcbn0pO1xudmFyIGNvbXBvc2l0ZVJ1bGVzID0gW2NsYXNzUnVsZSwgc3ltYm9sUnVsZSwgY3VzdG9tUnVsZSwgdHlwZWRBcnJheVJ1bGVdO1xudmFyIHRyYW5zZm9ybVZhbHVlID0gKHZhbHVlLCBzdXBlckpzb24pID0+IHtcbiAgY29uc3QgYXBwbGljYWJsZUNvbXBvc2l0ZVJ1bGUgPSBmaW5kQXJyKGNvbXBvc2l0ZVJ1bGVzLCAocnVsZSkgPT4gcnVsZS5pc0FwcGxpY2FibGUodmFsdWUsIHN1cGVySnNvbikpO1xuICBpZiAoYXBwbGljYWJsZUNvbXBvc2l0ZVJ1bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IGFwcGxpY2FibGVDb21wb3NpdGVSdWxlLnRyYW5zZm9ybSh2YWx1ZSwgc3VwZXJKc29uKSxcbiAgICAgIHR5cGU6IGFwcGxpY2FibGVDb21wb3NpdGVSdWxlLmFubm90YXRpb24odmFsdWUsIHN1cGVySnNvbilcbiAgICB9O1xuICB9XG4gIGNvbnN0IGFwcGxpY2FibGVTaW1wbGVSdWxlID0gZmluZEFycihzaW1wbGVSdWxlcywgKHJ1bGUpID0+IHJ1bGUuaXNBcHBsaWNhYmxlKHZhbHVlLCBzdXBlckpzb24pKTtcbiAgaWYgKGFwcGxpY2FibGVTaW1wbGVSdWxlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBhcHBsaWNhYmxlU2ltcGxlUnVsZS50cmFuc2Zvcm0odmFsdWUsIHN1cGVySnNvbiksXG4gICAgICB0eXBlOiBhcHBsaWNhYmxlU2ltcGxlUnVsZS5hbm5vdGF0aW9uXG4gICAgfTtcbiAgfVxuICByZXR1cm4gdm9pZCAwO1xufTtcbnZhciBzaW1wbGVSdWxlc0J5QW5ub3RhdGlvbiA9IHt9O1xuc2ltcGxlUnVsZXMuZm9yRWFjaCgocnVsZSkgPT4ge1xuICBzaW1wbGVSdWxlc0J5QW5ub3RhdGlvbltydWxlLmFubm90YXRpb25dID0gcnVsZTtcbn0pO1xudmFyIHVudHJhbnNmb3JtVmFsdWUgPSAoanNvbiwgdHlwZSwgc3VwZXJKc29uKSA9PiB7XG4gIGlmIChpc0FycmF5KHR5cGUpKSB7XG4gICAgc3dpdGNoICh0eXBlWzBdKSB7XG4gICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIHJldHVybiBzeW1ib2xSdWxlLnVudHJhbnNmb3JtKGpzb24sIHR5cGUsIHN1cGVySnNvbik7XG4gICAgICBjYXNlIFwiY2xhc3NcIjpcbiAgICAgICAgcmV0dXJuIGNsYXNzUnVsZS51bnRyYW5zZm9ybShqc29uLCB0eXBlLCBzdXBlckpzb24pO1xuICAgICAgY2FzZSBcImN1c3RvbVwiOlxuICAgICAgICByZXR1cm4gY3VzdG9tUnVsZS51bnRyYW5zZm9ybShqc29uLCB0eXBlLCBzdXBlckpzb24pO1xuICAgICAgY2FzZSBcInR5cGVkLWFycmF5XCI6XG4gICAgICAgIHJldHVybiB0eXBlZEFycmF5UnVsZS51bnRyYW5zZm9ybShqc29uLCB0eXBlLCBzdXBlckpzb24pO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5rbm93biB0cmFuc2Zvcm1hdGlvbjogXCIgKyB0eXBlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgdHJhbnNmb3JtYXRpb24gPSBzaW1wbGVSdWxlc0J5QW5ub3RhdGlvblt0eXBlXTtcbiAgICBpZiAoIXRyYW5zZm9ybWF0aW9uKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVbmtub3duIHRyYW5zZm9ybWF0aW9uOiBcIiArIHR5cGUpO1xuICAgIH1cbiAgICByZXR1cm4gdHJhbnNmb3JtYXRpb24udW50cmFuc2Zvcm0oanNvbiwgc3VwZXJKc29uKTtcbiAgfVxufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvYWNjZXNzRGVlcC5qc1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBnZXROdGhLZXkgPSAodmFsdWUsIG4pID0+IHtcbiAgaWYgKG4gPiB2YWx1ZS5zaXplKVxuICAgIHRocm93IG5ldyBFcnJvcihcImluZGV4IG91dCBvZiBib3VuZHNcIik7XG4gIGNvbnN0IGtleXMgPSB2YWx1ZS5rZXlzKCk7XG4gIHdoaWxlIChuID4gMCkge1xuICAgIGtleXMubmV4dCgpO1xuICAgIG4tLTtcbiAgfVxuICByZXR1cm4ga2V5cy5uZXh0KCkudmFsdWU7XG59O1xuZnVuY3Rpb24gdmFsaWRhdGVQYXRoKHBhdGgpIHtcbiAgaWYgKGluY2x1ZGVzKHBhdGgsIFwiX19wcm90b19fXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiX19wcm90b19fIGlzIG5vdCBhbGxvd2VkIGFzIGEgcHJvcGVydHlcIik7XG4gIH1cbiAgaWYgKGluY2x1ZGVzKHBhdGgsIFwicHJvdG90eXBlXCIpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwicHJvdG90eXBlIGlzIG5vdCBhbGxvd2VkIGFzIGEgcHJvcGVydHlcIik7XG4gIH1cbiAgaWYgKGluY2x1ZGVzKHBhdGgsIFwiY29uc3RydWN0b3JcIikpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJjb25zdHJ1Y3RvciBpcyBub3QgYWxsb3dlZCBhcyBhIHByb3BlcnR5XCIpO1xuICB9XG59XG52YXIgZ2V0RGVlcCA9IChvYmplY3QsIHBhdGgpID0+IHtcbiAgdmFsaWRhdGVQYXRoKHBhdGgpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBrZXkgPSBwYXRoW2ldO1xuICAgIGlmIChpc1NldChvYmplY3QpKSB7XG4gICAgICBvYmplY3QgPSBnZXROdGhLZXkob2JqZWN0LCAra2V5KTtcbiAgICB9IGVsc2UgaWYgKGlzTWFwKG9iamVjdCkpIHtcbiAgICAgIGNvbnN0IHJvdyA9ICtrZXk7XG4gICAgICBjb25zdCB0eXBlID0gK3BhdGhbKytpXSA9PT0gMCA/IFwia2V5XCIgOiBcInZhbHVlXCI7XG4gICAgICBjb25zdCBrZXlPZlJvdyA9IGdldE50aEtleShvYmplY3QsIHJvdyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImtleVwiOlxuICAgICAgICAgIG9iamVjdCA9IGtleU9mUm93O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidmFsdWVcIjpcbiAgICAgICAgICBvYmplY3QgPSBvYmplY3QuZ2V0KGtleU9mUm93KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gICAgfVxuICB9XG4gIHJldHVybiBvYmplY3Q7XG59O1xudmFyIHNldERlZXAgPSAob2JqZWN0LCBwYXRoLCBtYXBwZXIpID0+IHtcbiAgdmFsaWRhdGVQYXRoKHBhdGgpO1xuICBpZiAocGF0aC5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gbWFwcGVyKG9iamVjdCk7XG4gIH1cbiAgbGV0IHBhcmVudCA9IG9iamVjdDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwYXRoLmxlbmd0aCAtIDE7IGkrKykge1xuICAgIGNvbnN0IGtleSA9IHBhdGhbaV07XG4gICAgaWYgKGlzQXJyYXkocGFyZW50KSkge1xuICAgICAgY29uc3QgaW5kZXggPSAra2V5O1xuICAgICAgcGFyZW50ID0gcGFyZW50W2luZGV4XTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QyKHBhcmVudCkpIHtcbiAgICAgIHBhcmVudCA9IHBhcmVudFtrZXldO1xuICAgIH0gZWxzZSBpZiAoaXNTZXQocGFyZW50KSkge1xuICAgICAgY29uc3Qgcm93ID0gK2tleTtcbiAgICAgIHBhcmVudCA9IGdldE50aEtleShwYXJlbnQsIHJvdyk7XG4gICAgfSBlbHNlIGlmIChpc01hcChwYXJlbnQpKSB7XG4gICAgICBjb25zdCBpc0VuZCA9IGkgPT09IHBhdGgubGVuZ3RoIC0gMjtcbiAgICAgIGlmIChpc0VuZCkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJvdyA9ICtrZXk7XG4gICAgICBjb25zdCB0eXBlID0gK3BhdGhbKytpXSA9PT0gMCA/IFwia2V5XCIgOiBcInZhbHVlXCI7XG4gICAgICBjb25zdCBrZXlPZlJvdyA9IGdldE50aEtleShwYXJlbnQsIHJvdyk7XG4gICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBcImtleVwiOlxuICAgICAgICAgIHBhcmVudCA9IGtleU9mUm93O1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwidmFsdWVcIjpcbiAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuZ2V0KGtleU9mUm93KTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgY29uc3QgbGFzdEtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgaWYgKGlzQXJyYXkocGFyZW50KSkge1xuICAgIHBhcmVudFsrbGFzdEtleV0gPSBtYXBwZXIocGFyZW50WytsYXN0S2V5XSk7XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdDIocGFyZW50KSkge1xuICAgIHBhcmVudFtsYXN0S2V5XSA9IG1hcHBlcihwYXJlbnRbbGFzdEtleV0pO1xuICB9XG4gIGlmIChpc1NldChwYXJlbnQpKSB7XG4gICAgY29uc3Qgb2xkVmFsdWUgPSBnZXROdGhLZXkocGFyZW50LCArbGFzdEtleSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSBtYXBwZXIob2xkVmFsdWUpO1xuICAgIGlmIChvbGRWYWx1ZSAhPT0gbmV3VmFsdWUpIHtcbiAgICAgIHBhcmVudC5kZWxldGUob2xkVmFsdWUpO1xuICAgICAgcGFyZW50LmFkZChuZXdWYWx1ZSk7XG4gICAgfVxuICB9XG4gIGlmIChpc01hcChwYXJlbnQpKSB7XG4gICAgY29uc3Qgcm93ID0gK3BhdGhbcGF0aC5sZW5ndGggLSAyXTtcbiAgICBjb25zdCBrZXlUb1JvdyA9IGdldE50aEtleShwYXJlbnQsIHJvdyk7XG4gICAgY29uc3QgdHlwZSA9ICtsYXN0S2V5ID09PSAwID8gXCJrZXlcIiA6IFwidmFsdWVcIjtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgXCJrZXlcIjoge1xuICAgICAgICBjb25zdCBuZXdLZXkgPSBtYXBwZXIoa2V5VG9Sb3cpO1xuICAgICAgICBwYXJlbnQuc2V0KG5ld0tleSwgcGFyZW50LmdldChrZXlUb1JvdykpO1xuICAgICAgICBpZiAobmV3S2V5ICE9PSBrZXlUb1Jvdykge1xuICAgICAgICAgIHBhcmVudC5kZWxldGUoa2V5VG9Sb3cpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBcInZhbHVlXCI6IHtcbiAgICAgICAgcGFyZW50LnNldChrZXlUb1JvdywgbWFwcGVyKHBhcmVudC5nZXQoa2V5VG9Sb3cpKSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gb2JqZWN0O1xufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3N1cGVyanNvbkAyLjIuMi9ub2RlX21vZHVsZXMvc3VwZXJqc29uL2Rpc3QvcGxhaW5lci5qc1xuZnVuY3Rpb24gdHJhdmVyc2UodHJlZSwgd2Fsa2VyMiwgb3JpZ2luID0gW10pIHtcbiAgaWYgKCF0cmVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghaXNBcnJheSh0cmVlKSkge1xuICAgIGZvckVhY2godHJlZSwgKHN1YnRyZWUsIGtleSkgPT4gdHJhdmVyc2Uoc3VidHJlZSwgd2Fsa2VyMiwgWy4uLm9yaWdpbiwgLi4ucGFyc2VQYXRoKGtleSldKSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIGNvbnN0IFtub2RlVmFsdWUsIGNoaWxkcmVuXSA9IHRyZWU7XG4gIGlmIChjaGlsZHJlbikge1xuICAgIGZvckVhY2goY2hpbGRyZW4sIChjaGlsZCwga2V5KSA9PiB7XG4gICAgICB0cmF2ZXJzZShjaGlsZCwgd2Fsa2VyMiwgWy4uLm9yaWdpbiwgLi4ucGFyc2VQYXRoKGtleSldKTtcbiAgICB9KTtcbiAgfVxuICB3YWxrZXIyKG5vZGVWYWx1ZSwgb3JpZ2luKTtcbn1cbmZ1bmN0aW9uIGFwcGx5VmFsdWVBbm5vdGF0aW9ucyhwbGFpbiwgYW5ub3RhdGlvbnMsIHN1cGVySnNvbikge1xuICB0cmF2ZXJzZShhbm5vdGF0aW9ucywgKHR5cGUsIHBhdGgpID0+IHtcbiAgICBwbGFpbiA9IHNldERlZXAocGxhaW4sIHBhdGgsICh2KSA9PiB1bnRyYW5zZm9ybVZhbHVlKHYsIHR5cGUsIHN1cGVySnNvbikpO1xuICB9KTtcbiAgcmV0dXJuIHBsYWluO1xufVxuZnVuY3Rpb24gYXBwbHlSZWZlcmVudGlhbEVxdWFsaXR5QW5ub3RhdGlvbnMocGxhaW4sIGFubm90YXRpb25zKSB7XG4gIGZ1bmN0aW9uIGFwcGx5KGlkZW50aWNhbFBhdGhzLCBwYXRoKSB7XG4gICAgY29uc3Qgb2JqZWN0ID0gZ2V0RGVlcChwbGFpbiwgcGFyc2VQYXRoKHBhdGgpKTtcbiAgICBpZGVudGljYWxQYXRocy5tYXAocGFyc2VQYXRoKS5mb3JFYWNoKChpZGVudGljYWxPYmplY3RQYXRoKSA9PiB7XG4gICAgICBwbGFpbiA9IHNldERlZXAocGxhaW4sIGlkZW50aWNhbE9iamVjdFBhdGgsICgpID0+IG9iamVjdCk7XG4gICAgfSk7XG4gIH1cbiAgaWYgKGlzQXJyYXkoYW5ub3RhdGlvbnMpKSB7XG4gICAgY29uc3QgW3Jvb3QsIG90aGVyXSA9IGFubm90YXRpb25zO1xuICAgIHJvb3QuZm9yRWFjaCgoaWRlbnRpY2FsUGF0aCkgPT4ge1xuICAgICAgcGxhaW4gPSBzZXREZWVwKHBsYWluLCBwYXJzZVBhdGgoaWRlbnRpY2FsUGF0aCksICgpID0+IHBsYWluKTtcbiAgICB9KTtcbiAgICBpZiAob3RoZXIpIHtcbiAgICAgIGZvckVhY2gob3RoZXIsIGFwcGx5KTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZm9yRWFjaChhbm5vdGF0aW9ucywgYXBwbHkpO1xuICB9XG4gIHJldHVybiBwbGFpbjtcbn1cbnZhciBpc0RlZXAgPSAob2JqZWN0LCBzdXBlckpzb24pID0+IGlzUGxhaW5PYmplY3QyKG9iamVjdCkgfHwgaXNBcnJheShvYmplY3QpIHx8IGlzTWFwKG9iamVjdCkgfHwgaXNTZXQob2JqZWN0KSB8fCBpc0luc3RhbmNlT2ZSZWdpc3RlcmVkQ2xhc3Mob2JqZWN0LCBzdXBlckpzb24pO1xuZnVuY3Rpb24gYWRkSWRlbnRpdHkob2JqZWN0LCBwYXRoLCBpZGVudGl0aWVzKSB7XG4gIGNvbnN0IGV4aXN0aW5nU2V0ID0gaWRlbnRpdGllcy5nZXQob2JqZWN0KTtcbiAgaWYgKGV4aXN0aW5nU2V0KSB7XG4gICAgZXhpc3RpbmdTZXQucHVzaChwYXRoKTtcbiAgfSBlbHNlIHtcbiAgICBpZGVudGl0aWVzLnNldChvYmplY3QsIFtwYXRoXSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGdlbmVyYXRlUmVmZXJlbnRpYWxFcXVhbGl0eUFubm90YXRpb25zKGlkZW50aXRpdGVzLCBkZWR1cGUpIHtcbiAgY29uc3QgcmVzdWx0ID0ge307XG4gIGxldCByb290RXF1YWxpdHlQYXRocyA9IHZvaWQgMDtcbiAgaWRlbnRpdGl0ZXMuZm9yRWFjaCgocGF0aHMpID0+IHtcbiAgICBpZiAocGF0aHMubGVuZ3RoIDw9IDEpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKCFkZWR1cGUpIHtcbiAgICAgIHBhdGhzID0gcGF0aHMubWFwKChwYXRoKSA9PiBwYXRoLm1hcChTdHJpbmcpKS5zb3J0KChhLCBiKSA9PiBhLmxlbmd0aCAtIGIubGVuZ3RoKTtcbiAgICB9XG4gICAgY29uc3QgW3JlcHJlc2VudGF0aXZlUGF0aCwgLi4uaWRlbnRpY2FsUGF0aHNdID0gcGF0aHM7XG4gICAgaWYgKHJlcHJlc2VudGF0aXZlUGF0aC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJvb3RFcXVhbGl0eVBhdGhzID0gaWRlbnRpY2FsUGF0aHMubWFwKHN0cmluZ2lmeVBhdGgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRbc3RyaW5naWZ5UGF0aChyZXByZXNlbnRhdGl2ZVBhdGgpXSA9IGlkZW50aWNhbFBhdGhzLm1hcChzdHJpbmdpZnlQYXRoKTtcbiAgICB9XG4gIH0pO1xuICBpZiAocm9vdEVxdWFsaXR5UGF0aHMpIHtcbiAgICBpZiAoaXNFbXB0eU9iamVjdChyZXN1bHQpKSB7XG4gICAgICByZXR1cm4gW3Jvb3RFcXVhbGl0eVBhdGhzXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIFtyb290RXF1YWxpdHlQYXRocywgcmVzdWx0XTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGlzRW1wdHlPYmplY3QocmVzdWx0KSA/IHZvaWQgMCA6IHJlc3VsdDtcbiAgfVxufVxudmFyIHdhbGtlciA9IChvYmplY3QsIGlkZW50aXRpZXMsIHN1cGVySnNvbiwgZGVkdXBlLCBwYXRoID0gW10sIG9iamVjdHNJblRoaXNQYXRoID0gW10sIHNlZW5PYmplY3RzID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSkgPT4ge1xuICB2YXIgX2EyNTtcbiAgY29uc3QgcHJpbWl0aXZlID0gaXNQcmltaXRpdmUyKG9iamVjdCk7XG4gIGlmICghcHJpbWl0aXZlKSB7XG4gICAgYWRkSWRlbnRpdHkob2JqZWN0LCBwYXRoLCBpZGVudGl0aWVzKTtcbiAgICBjb25zdCBzZWVuID0gc2Vlbk9iamVjdHMuZ2V0KG9iamVjdCk7XG4gICAgaWYgKHNlZW4pIHtcbiAgICAgIHJldHVybiBkZWR1cGUgPyB7XG4gICAgICAgIHRyYW5zZm9ybWVkVmFsdWU6IG51bGxcbiAgICAgIH0gOiBzZWVuO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzRGVlcChvYmplY3QsIHN1cGVySnNvbikpIHtcbiAgICBjb25zdCB0cmFuc2Zvcm1lZDIgPSB0cmFuc2Zvcm1WYWx1ZShvYmplY3QsIHN1cGVySnNvbik7XG4gICAgY29uc3QgcmVzdWx0MiA9IHRyYW5zZm9ybWVkMiA/IHtcbiAgICAgIHRyYW5zZm9ybWVkVmFsdWU6IHRyYW5zZm9ybWVkMi52YWx1ZSxcbiAgICAgIGFubm90YXRpb25zOiBbdHJhbnNmb3JtZWQyLnR5cGVdXG4gICAgfSA6IHtcbiAgICAgIHRyYW5zZm9ybWVkVmFsdWU6IG9iamVjdFxuICAgIH07XG4gICAgaWYgKCFwcmltaXRpdmUpIHtcbiAgICAgIHNlZW5PYmplY3RzLnNldChvYmplY3QsIHJlc3VsdDIpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0MjtcbiAgfVxuICBpZiAoaW5jbHVkZXMob2JqZWN0c0luVGhpc1BhdGgsIG9iamVjdCkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHJhbnNmb3JtZWRWYWx1ZTogbnVsbFxuICAgIH07XG4gIH1cbiAgY29uc3QgdHJhbnNmb3JtYXRpb25SZXN1bHQgPSB0cmFuc2Zvcm1WYWx1ZShvYmplY3QsIHN1cGVySnNvbik7XG4gIGNvbnN0IHRyYW5zZm9ybWVkID0gKF9hMjUgPSB0cmFuc2Zvcm1hdGlvblJlc3VsdCA9PSBudWxsID8gdm9pZCAwIDogdHJhbnNmb3JtYXRpb25SZXN1bHQudmFsdWUpICE9IG51bGwgPyBfYTI1IDogb2JqZWN0O1xuICBjb25zdCB0cmFuc2Zvcm1lZFZhbHVlID0gaXNBcnJheSh0cmFuc2Zvcm1lZCkgPyBbXSA6IHt9O1xuICBjb25zdCBpbm5lckFubm90YXRpb25zID0ge307XG4gIGZvckVhY2godHJhbnNmb3JtZWQsICh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICBpZiAoaW5kZXggPT09IFwiX19wcm90b19fXCIgfHwgaW5kZXggPT09IFwiY29uc3RydWN0b3JcIiB8fCBpbmRleCA9PT0gXCJwcm90b3R5cGVcIikge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBEZXRlY3RlZCBwcm9wZXJ0eSAke2luZGV4fS4gVGhpcyBpcyBhIHByb3RvdHlwZSBwb2xsdXRpb24gcmlzaywgcGxlYXNlIHJlbW92ZSBpdCBmcm9tIHlvdXIgb2JqZWN0LmApO1xuICAgIH1cbiAgICBjb25zdCByZWN1cnNpdmVSZXN1bHQgPSB3YWxrZXIodmFsdWUsIGlkZW50aXRpZXMsIHN1cGVySnNvbiwgZGVkdXBlLCBbLi4ucGF0aCwgaW5kZXhdLCBbLi4ub2JqZWN0c0luVGhpc1BhdGgsIG9iamVjdF0sIHNlZW5PYmplY3RzKTtcbiAgICB0cmFuc2Zvcm1lZFZhbHVlW2luZGV4XSA9IHJlY3Vyc2l2ZVJlc3VsdC50cmFuc2Zvcm1lZFZhbHVlO1xuICAgIGlmIChpc0FycmF5KHJlY3Vyc2l2ZVJlc3VsdC5hbm5vdGF0aW9ucykpIHtcbiAgICAgIGlubmVyQW5ub3RhdGlvbnNbaW5kZXhdID0gcmVjdXJzaXZlUmVzdWx0LmFubm90YXRpb25zO1xuICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdDIocmVjdXJzaXZlUmVzdWx0LmFubm90YXRpb25zKSkge1xuICAgICAgZm9yRWFjaChyZWN1cnNpdmVSZXN1bHQuYW5ub3RhdGlvbnMsICh0cmVlLCBrZXkpID0+IHtcbiAgICAgICAgaW5uZXJBbm5vdGF0aW9uc1tlc2NhcGVLZXkoaW5kZXgpICsgXCIuXCIgKyBrZXldID0gdHJlZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIGNvbnN0IHJlc3VsdCA9IGlzRW1wdHlPYmplY3QoaW5uZXJBbm5vdGF0aW9ucykgPyB7XG4gICAgdHJhbnNmb3JtZWRWYWx1ZSxcbiAgICBhbm5vdGF0aW9uczogISF0cmFuc2Zvcm1hdGlvblJlc3VsdCA/IFt0cmFuc2Zvcm1hdGlvblJlc3VsdC50eXBlXSA6IHZvaWQgMFxuICB9IDoge1xuICAgIHRyYW5zZm9ybWVkVmFsdWUsXG4gICAgYW5ub3RhdGlvbnM6ICEhdHJhbnNmb3JtYXRpb25SZXN1bHQgPyBbdHJhbnNmb3JtYXRpb25SZXN1bHQudHlwZSwgaW5uZXJBbm5vdGF0aW9uc10gOiBpbm5lckFubm90YXRpb25zXG4gIH07XG4gIGlmICghcHJpbWl0aXZlKSB7XG4gICAgc2Vlbk9iamVjdHMuc2V0KG9iamVjdCwgcmVzdWx0KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2NvcHktYW55dGhpbmdAMy4wLjUvbm9kZV9tb2R1bGVzL2NvcHktYW55dGhpbmcvZGlzdC9pbmRleC5qc1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL2lzLXdoYXRANC4xLjE2L25vZGVfbW9kdWxlcy9pcy13aGF0L2Rpc3QvaW5kZXguanNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBnZXRUeXBlMihwYXlsb2FkKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocGF5bG9hZCkuc2xpY2UoOCwgLTEpO1xufVxuZnVuY3Rpb24gaXNBcnJheTIocGF5bG9hZCkge1xuICByZXR1cm4gZ2V0VHlwZTIocGF5bG9hZCkgPT09IFwiQXJyYXlcIjtcbn1cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QzKHBheWxvYWQpIHtcbiAgaWYgKGdldFR5cGUyKHBheWxvYWQpICE9PSBcIk9iamVjdFwiKVxuICAgIHJldHVybiBmYWxzZTtcbiAgY29uc3QgcHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHBheWxvYWQpO1xuICByZXR1cm4gISFwcm90b3R5cGUgJiYgcHJvdG90eXBlLmNvbnN0cnVjdG9yID09PSBPYmplY3QgJiYgcHJvdG90eXBlID09PSBPYmplY3QucHJvdG90eXBlO1xufVxuZnVuY3Rpb24gaXNOdWxsMihwYXlsb2FkKSB7XG4gIHJldHVybiBnZXRUeXBlMihwYXlsb2FkKSA9PT0gXCJOdWxsXCI7XG59XG5mdW5jdGlvbiBpc09uZU9mKGEsIGIsIGMsIGQsIGUpIHtcbiAgcmV0dXJuICh2YWx1ZSkgPT4gYSh2YWx1ZSkgfHwgYih2YWx1ZSkgfHwgISFjICYmIGModmFsdWUpIHx8ICEhZCAmJiBkKHZhbHVlKSB8fCAhIWUgJiYgZSh2YWx1ZSk7XG59XG5mdW5jdGlvbiBpc1VuZGVmaW5lZDIocGF5bG9hZCkge1xuICByZXR1cm4gZ2V0VHlwZTIocGF5bG9hZCkgPT09IFwiVW5kZWZpbmVkXCI7XG59XG52YXIgaXNOdWxsT3JVbmRlZmluZWQgPSBpc09uZU9mKGlzTnVsbDIsIGlzVW5kZWZpbmVkMik7XG5cbi8vIC4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9jb3B5LWFueXRoaW5nQDMuMC41L25vZGVfbW9kdWxlcy9jb3B5LWFueXRoaW5nL2Rpc3QvaW5kZXguanNcbmZ1bmN0aW9uIGFzc2lnblByb3AoY2FycnksIGtleSwgbmV3VmFsLCBvcmlnaW5hbE9iamVjdCwgaW5jbHVkZU5vbmVudW1lcmFibGUpIHtcbiAgY29uc3QgcHJvcFR5cGUgPSB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKG9yaWdpbmFsT2JqZWN0LCBrZXkpID8gXCJlbnVtZXJhYmxlXCIgOiBcIm5vbmVudW1lcmFibGVcIjtcbiAgaWYgKHByb3BUeXBlID09PSBcImVudW1lcmFibGVcIilcbiAgICBjYXJyeVtrZXldID0gbmV3VmFsO1xuICBpZiAoaW5jbHVkZU5vbmVudW1lcmFibGUgJiYgcHJvcFR5cGUgPT09IFwibm9uZW51bWVyYWJsZVwiKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhcnJ5LCBrZXksIHtcbiAgICAgIHZhbHVlOiBuZXdWYWwsXG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNvcHkodGFyZ2V0MjIsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAoaXNBcnJheTIodGFyZ2V0MjIpKSB7XG4gICAgcmV0dXJuIHRhcmdldDIyLm1hcCgoaXRlbSkgPT4gY29weShpdGVtLCBvcHRpb25zKSk7XG4gIH1cbiAgaWYgKCFpc1BsYWluT2JqZWN0Myh0YXJnZXQyMikpIHtcbiAgICByZXR1cm4gdGFyZ2V0MjI7XG4gIH1cbiAgY29uc3QgcHJvcHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0YXJnZXQyMik7XG4gIGNvbnN0IHN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHRhcmdldDIyKTtcbiAgcmV0dXJuIFsuLi5wcm9wcywgLi4uc3ltYm9sc10ucmVkdWNlKChjYXJyeSwga2V5KSA9PiB7XG4gICAgaWYgKGlzQXJyYXkyKG9wdGlvbnMucHJvcHMpICYmICFvcHRpb25zLnByb3BzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgIHJldHVybiBjYXJyeTtcbiAgICB9XG4gICAgY29uc3QgdmFsID0gdGFyZ2V0MjJba2V5XTtcbiAgICBjb25zdCBuZXdWYWwgPSBjb3B5KHZhbCwgb3B0aW9ucyk7XG4gICAgYXNzaWduUHJvcChjYXJyeSwga2V5LCBuZXdWYWwsIHRhcmdldDIyLCBvcHRpb25zLm5vbmVudW1lcmFibGUpO1xuICAgIHJldHVybiBjYXJyeTtcbiAgfSwge30pO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vc3VwZXJqc29uQDIuMi4yL25vZGVfbW9kdWxlcy9zdXBlcmpzb24vZGlzdC9pbmRleC5qc1xudmFyIFN1cGVySlNPTiA9IGNsYXNzIHtcbiAgLyoqXG4gICAqIEBwYXJhbSBkZWR1cGVSZWZlcmVudGlhbEVxdWFsaXRpZXMgIElmIHRydWUsIFN1cGVySlNPTiB3aWxsIG1ha2Ugc3VyZSBvbmx5IG9uZSBpbnN0YW5jZSBvZiByZWZlcmVudGlhbGx5IGVxdWFsIG9iamVjdHMgYXJlIHNlcmlhbGl6ZWQgYW5kIHRoZSByZXN0IGFyZSByZXBsYWNlZCB3aXRoIGBudWxsYC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHsgZGVkdXBlID0gZmFsc2UgfSA9IHt9KSB7XG4gICAgdGhpcy5jbGFzc1JlZ2lzdHJ5ID0gbmV3IENsYXNzUmVnaXN0cnkoKTtcbiAgICB0aGlzLnN5bWJvbFJlZ2lzdHJ5ID0gbmV3IFJlZ2lzdHJ5KChzKSA9PiB7XG4gICAgICB2YXIgX2EyNTtcbiAgICAgIHJldHVybiAoX2EyNSA9IHMuZGVzY3JpcHRpb24pICE9IG51bGwgPyBfYTI1IDogXCJcIjtcbiAgICB9KTtcbiAgICB0aGlzLmN1c3RvbVRyYW5zZm9ybWVyUmVnaXN0cnkgPSBuZXcgQ3VzdG9tVHJhbnNmb3JtZXJSZWdpc3RyeSgpO1xuICAgIHRoaXMuYWxsb3dlZEVycm9yUHJvcHMgPSBbXTtcbiAgICB0aGlzLmRlZHVwZSA9IGRlZHVwZTtcbiAgfVxuICBzZXJpYWxpemUob2JqZWN0KSB7XG4gICAgY29uc3QgaWRlbnRpdGllcyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgY29uc3Qgb3V0cHV0ID0gd2Fsa2VyKG9iamVjdCwgaWRlbnRpdGllcywgdGhpcywgdGhpcy5kZWR1cGUpO1xuICAgIGNvbnN0IHJlcyA9IHtcbiAgICAgIGpzb246IG91dHB1dC50cmFuc2Zvcm1lZFZhbHVlXG4gICAgfTtcbiAgICBpZiAob3V0cHV0LmFubm90YXRpb25zKSB7XG4gICAgICByZXMubWV0YSA9IHtcbiAgICAgICAgLi4ucmVzLm1ldGEsXG4gICAgICAgIHZhbHVlczogb3V0cHV0LmFubm90YXRpb25zXG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBlcXVhbGl0eUFubm90YXRpb25zID0gZ2VuZXJhdGVSZWZlcmVudGlhbEVxdWFsaXR5QW5ub3RhdGlvbnMoaWRlbnRpdGllcywgdGhpcy5kZWR1cGUpO1xuICAgIGlmIChlcXVhbGl0eUFubm90YXRpb25zKSB7XG4gICAgICByZXMubWV0YSA9IHtcbiAgICAgICAgLi4ucmVzLm1ldGEsXG4gICAgICAgIHJlZmVyZW50aWFsRXF1YWxpdGllczogZXF1YWxpdHlBbm5vdGF0aW9uc1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICBkZXNlcmlhbGl6ZShwYXlsb2FkKSB7XG4gICAgY29uc3QgeyBqc29uLCBtZXRhIH0gPSBwYXlsb2FkO1xuICAgIGxldCByZXN1bHQgPSBjb3B5KGpzb24pO1xuICAgIGlmIChtZXRhID09IG51bGwgPyB2b2lkIDAgOiBtZXRhLnZhbHVlcykge1xuICAgICAgcmVzdWx0ID0gYXBwbHlWYWx1ZUFubm90YXRpb25zKHJlc3VsdCwgbWV0YS52YWx1ZXMsIHRoaXMpO1xuICAgIH1cbiAgICBpZiAobWV0YSA9PSBudWxsID8gdm9pZCAwIDogbWV0YS5yZWZlcmVudGlhbEVxdWFsaXRpZXMpIHtcbiAgICAgIHJlc3VsdCA9IGFwcGx5UmVmZXJlbnRpYWxFcXVhbGl0eUFubm90YXRpb25zKHJlc3VsdCwgbWV0YS5yZWZlcmVudGlhbEVxdWFsaXRpZXMpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHN0cmluZ2lmeShvYmplY3QpIHtcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy5zZXJpYWxpemUob2JqZWN0KSk7XG4gIH1cbiAgcGFyc2Uoc3RyaW5nKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVzZXJpYWxpemUoSlNPTi5wYXJzZShzdHJpbmcpKTtcbiAgfVxuICByZWdpc3RlckNsYXNzKHYsIG9wdGlvbnMpIHtcbiAgICB0aGlzLmNsYXNzUmVnaXN0cnkucmVnaXN0ZXIodiwgb3B0aW9ucyk7XG4gIH1cbiAgcmVnaXN0ZXJTeW1ib2wodiwgaWRlbnRpZmllcikge1xuICAgIHRoaXMuc3ltYm9sUmVnaXN0cnkucmVnaXN0ZXIodiwgaWRlbnRpZmllcik7XG4gIH1cbiAgcmVnaXN0ZXJDdXN0b20odHJhbnNmb3JtZXIsIG5hbWUpIHtcbiAgICB0aGlzLmN1c3RvbVRyYW5zZm9ybWVyUmVnaXN0cnkucmVnaXN0ZXIoe1xuICAgICAgbmFtZSxcbiAgICAgIC4uLnRyYW5zZm9ybWVyXG4gICAgfSk7XG4gIH1cbiAgYWxsb3dFcnJvclByb3BzKC4uLnByb3BzKSB7XG4gICAgdGhpcy5hbGxvd2VkRXJyb3JQcm9wcy5wdXNoKC4uLnByb3BzKTtcbiAgfVxufTtcblN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UgPSBuZXcgU3VwZXJKU09OKCk7XG5TdXBlckpTT04uc2VyaWFsaXplID0gU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZS5zZXJpYWxpemUuYmluZChTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlKTtcblN1cGVySlNPTi5kZXNlcmlhbGl6ZSA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UuZGVzZXJpYWxpemUuYmluZChTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlKTtcblN1cGVySlNPTi5zdHJpbmdpZnkgPSBTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlLnN0cmluZ2lmeS5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLnBhcnNlID0gU3VwZXJKU09OLmRlZmF1bHRJbnN0YW5jZS5wYXJzZS5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xuU3VwZXJKU09OLnJlZ2lzdGVyQ2xhc3MgPSBTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlLnJlZ2lzdGVyQ2xhc3MuYmluZChTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlKTtcblN1cGVySlNPTi5yZWdpc3RlclN5bWJvbCA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UucmVnaXN0ZXJTeW1ib2wuYmluZChTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlKTtcblN1cGVySlNPTi5yZWdpc3RlckN1c3RvbSA9IFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UucmVnaXN0ZXJDdXN0b20uYmluZChTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlKTtcblN1cGVySlNPTi5hbGxvd0Vycm9yUHJvcHMgPSBTdXBlckpTT04uZGVmYXVsdEluc3RhbmNlLmFsbG93RXJyb3JQcm9wcy5iaW5kKFN1cGVySlNPTi5kZWZhdWx0SW5zdGFuY2UpO1xudmFyIHNlcmlhbGl6ZSA9IFN1cGVySlNPTi5zZXJpYWxpemU7XG52YXIgZGVzZXJpYWxpemUgPSBTdXBlckpTT04uZGVzZXJpYWxpemU7XG52YXIgc3RyaW5naWZ5ID0gU3VwZXJKU09OLnN0cmluZ2lmeTtcbnZhciBwYXJzZSA9IFN1cGVySlNPTi5wYXJzZTtcbnZhciByZWdpc3RlckNsYXNzID0gU3VwZXJKU09OLnJlZ2lzdGVyQ2xhc3M7XG52YXIgcmVnaXN0ZXJDdXN0b20gPSBTdXBlckpTT04ucmVnaXN0ZXJDdXN0b207XG52YXIgcmVnaXN0ZXJTeW1ib2wgPSBTdXBlckpTT04ucmVnaXN0ZXJTeW1ib2w7XG52YXIgYWxsb3dFcnJvclByb3BzID0gU3VwZXJKU09OLmFsbG93RXJyb3JQcm9wcztcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2Jyb2FkY2FzdC1jaGFubmVsL2NvbnRleHQudHNcbmluaXRfZXNtX3NoaW1zKCk7XG52YXIgX19ERVZUT09MU19LSVRfQlJPQURDQVNUX01FU1NBR0lOR19FVkVOVF9LRVkgPSBcIl9fZGV2dG9vbHMta2l0LWJyb2FkY2FzdC1tZXNzYWdpbmctZXZlbnQta2V5X19cIjtcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2Jyb2FkY2FzdC1jaGFubmVsL2luZGV4LnRzXG52YXIgQlJPQURDQVNUX0NIQU5ORUxfTkFNRSA9IFwiX19kZXZ0b29scy1raXQ6YnJvYWRjYXN0LWNoYW5uZWxfX1wiO1xuZnVuY3Rpb24gY3JlYXRlQnJvYWRjYXN0Q2hhbm5lbCgpIHtcbiAgY29uc3QgY2hhbm5lbCA9IG5ldyBCcm9hZGNhc3RDaGFubmVsKEJST0FEQ0FTVF9DSEFOTkVMX05BTUUpO1xuICByZXR1cm4ge1xuICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICBjaGFubmVsLnBvc3RNZXNzYWdlKFN1cGVySlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBldmVudDogX19ERVZUT09MU19LSVRfQlJPQURDQVNUX01FU1NBR0lOR19FVkVOVF9LRVksXG4gICAgICAgIGRhdGFcbiAgICAgIH0pKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgY2hhbm5lbC5vbm1lc3NhZ2UgPSAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc3QgcGFyc2VkID0gU3VwZXJKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICBpZiAocGFyc2VkLmV2ZW50ID09PSBfX0RFVlRPT0xTX0tJVF9CUk9BRENBU1RfTUVTU0FHSU5HX0VWRU5UX0tFWSkge1xuICAgICAgICAgIGhhbmRsZXIocGFyc2VkLmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2VsZWN0cm9uL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vY2xpZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vY29udGV4dC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxNiB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9fRUxFQ1RST05fQ0xJRU5UX0NPTlRFWFRfXyA9IFwiZWxlY3Ryb246Y2xpZW50LWNvbnRleHRcIjtcbnZhciBfX0VMRUNUUk9OX1JQT1hZX0NPTlRFWFRfXyA9IFwiZWxlY3Ryb246cHJveHktY29udGV4dFwiO1xudmFyIF9fRUxFQ1RST05fU0VSVkVSX0NPTlRFWFRfXyA9IFwiZWxlY3Ryb246c2VydmVyLWNvbnRleHRcIjtcbnZhciBfX0RFVlRPT0xTX0tJVF9FTEVDVFJPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18gPSB7XG4gIC8vIGNsaWVudFxuICBDTElFTlRfVE9fUFJPWFk6IFwiY2xpZW50LT5wcm94eVwiLFxuICAvLyBvbjogcHJveHktPmNsaWVudFxuICAvLyBwcm94eVxuICBQUk9YWV9UT19DTElFTlQ6IFwicHJveHktPmNsaWVudFwiLFxuICAvLyBvbjogc2VydmVyLT5wcm94eVxuICBQUk9YWV9UT19TRVJWRVI6IFwicHJveHktPnNlcnZlclwiLFxuICAvLyBvbjogY2xpZW50LT5wcm94eVxuICAvLyBzZXJ2ZXJcbiAgU0VSVkVSX1RPX1BST1hZOiBcInNlcnZlci0+cHJveHlcIlxuICAvLyBvbjogcHJveHktPnNlcnZlclxufTtcbmZ1bmN0aW9uIGdldEVsZWN0cm9uQ2xpZW50Q29udGV4dCgpIHtcbiAgcmV0dXJuIHRhcmdldDE2W19fRUxFQ1RST05fQ0xJRU5UX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRFbGVjdHJvbkNsaWVudENvbnRleHQoY29udGV4dCkge1xuICB0YXJnZXQxNltfX0VMRUNUUk9OX0NMSUVOVF9DT05URVhUX19dID0gY29udGV4dDtcbn1cbmZ1bmN0aW9uIGdldEVsZWN0cm9uUHJveHlDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MTZbX19FTEVDVFJPTl9SUE9YWV9DT05URVhUX19dO1xufVxuZnVuY3Rpb24gc2V0RWxlY3Ryb25Qcm94eUNvbnRleHQoY29udGV4dCkge1xuICB0YXJnZXQxNltfX0VMRUNUUk9OX1JQT1hZX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuZnVuY3Rpb24gZ2V0RWxlY3Ryb25TZXJ2ZXJDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MTZbX19FTEVDVFJPTl9TRVJWRVJfQ09OVEVYVF9fXTtcbn1cbmZ1bmN0aW9uIHNldEVsZWN0cm9uU2VydmVyQ29udGV4dChjb250ZXh0KSB7XG4gIHRhcmdldDE2W19fRUxFQ1RST05fU0VSVkVSX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZWxlY3Ryb24vY2xpZW50LnRzXG5mdW5jdGlvbiBjcmVhdGVFbGVjdHJvbkNsaWVudENoYW5uZWwoKSB7XG4gIGNvbnN0IHNvY2tldCA9IGdldEVsZWN0cm9uQ2xpZW50Q29udGV4dCgpO1xuICByZXR1cm4ge1xuICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICBzb2NrZXQuZW1pdChfX0RFVlRPT0xTX0tJVF9FTEVDVFJPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uQ0xJRU5UX1RPX1BST1hZLCBTdXBlckpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgc29ja2V0Lm9uKF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5QUk9YWV9UT19DTElFTlQsIChlKSA9PiB7XG4gICAgICAgIGhhbmRsZXIoU3VwZXJKU09OLnBhcnNlKGUpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2VsZWN0cm9uL3Byb3h5LnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gY3JlYXRlRWxlY3Ryb25Qcm94eUNoYW5uZWwoKSB7XG4gIGNvbnN0IHNvY2tldCA9IGdldEVsZWN0cm9uUHJveHlDb250ZXh0KCk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgc29ja2V0Lm9uKF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5TRVJWRVJfVE9fUFJPWFksIChkYXRhKSA9PiB7XG4gICAgICAgIHNvY2tldC5icm9hZGNhc3QuZW1pdChfX0RFVlRPT0xTX0tJVF9FTEVDVFJPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uUFJPWFlfVE9fQ0xJRU5ULCBkYXRhKTtcbiAgICAgIH0pO1xuICAgICAgc29ja2V0Lm9uKF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5DTElFTlRfVE9fUFJPWFksIChkYXRhKSA9PiB7XG4gICAgICAgIHNvY2tldC5icm9hZGNhc3QuZW1pdChfX0RFVlRPT0xTX0tJVF9FTEVDVFJPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uUFJPWFlfVE9fU0VSVkVSLCBkYXRhKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2VsZWN0cm9uL3NlcnZlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUVsZWN0cm9uU2VydmVyQ2hhbm5lbCgpIHtcbiAgY29uc3Qgc29ja2V0ID0gZ2V0RWxlY3Ryb25TZXJ2ZXJDb250ZXh0KCk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIHNvY2tldC5lbWl0KF9fREVWVE9PTFNfS0lUX0VMRUNUUk9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5TRVJWRVJfVE9fUFJPWFksIFN1cGVySlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xuICAgIH0sXG4gICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICBzb2NrZXQub24oX19ERVZUT09MU19LSVRfRUxFQ1RST05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fLlBST1hZX1RPX1NFUlZFUiwgKGRhdGEpID0+IHtcbiAgICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZGF0YSkpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL2NsaWVudC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2V4dGVuc2lvbi9jb250ZXh0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDE3IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgX19FWFRFTlNJT05fQ0xJRU5UX0NPTlRFWFRfXyA9IFwiZWxlY3Ryb246Y2xpZW50LWNvbnRleHRcIjtcbnZhciBfX0RFVlRPT0xTX0tJVF9FWFRFTlNJT05fTUVTU0FHSU5HX0VWRU5UX0tFWV9fID0ge1xuICAvLyBjbGllbnRcbiAgQ0xJRU5UX1RPX1BST1hZOiBcImNsaWVudC0+cHJveHlcIixcbiAgLy8gb246IHByb3h5LT5jbGllbnRcbiAgLy8gcHJveHlcbiAgUFJPWFlfVE9fQ0xJRU5UOiBcInByb3h5LT5jbGllbnRcIixcbiAgLy8gb246IHNlcnZlci0+cHJveHlcbiAgUFJPWFlfVE9fU0VSVkVSOiBcInByb3h5LT5zZXJ2ZXJcIixcbiAgLy8gb246IGNsaWVudC0+cHJveHlcbiAgLy8gc2VydmVyXG4gIFNFUlZFUl9UT19QUk9YWTogXCJzZXJ2ZXItPnByb3h5XCJcbiAgLy8gb246IHByb3h5LT5zZXJ2ZXJcbn07XG5mdW5jdGlvbiBnZXRFeHRlbnNpb25DbGllbnRDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MTdbX19FWFRFTlNJT05fQ0xJRU5UX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRFeHRlbnNpb25DbGllbnRDb250ZXh0KGNvbnRleHQpIHtcbiAgdGFyZ2V0MTdbX19FWFRFTlNJT05fQ0xJRU5UX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvZXh0ZW5zaW9uL2NsaWVudC50c1xuZnVuY3Rpb24gY3JlYXRlRXh0ZW5zaW9uQ2xpZW50Q2hhbm5lbCgpIHtcbiAgbGV0IGRpc2Nvbm5lY3RlZCA9IGZhbHNlO1xuICBsZXQgcG9ydCA9IG51bGw7XG4gIGxldCByZWNvbm5lY3RUaW1lciA9IG51bGw7XG4gIGxldCBvbk1lc3NhZ2VIYW5kbGVyID0gbnVsbDtcbiAgZnVuY3Rpb24gY29ubmVjdCgpIHtcbiAgICB0cnkge1xuICAgICAgY2xlYXJUaW1lb3V0KHJlY29ubmVjdFRpbWVyKTtcbiAgICAgIHBvcnQgPSBjaHJvbWUucnVudGltZS5jb25uZWN0KHtcbiAgICAgICAgbmFtZTogYCR7Y2hyb21lLmRldnRvb2xzLmluc3BlY3RlZFdpbmRvdy50YWJJZH1gXG4gICAgICB9KTtcbiAgICAgIHNldEV4dGVuc2lvbkNsaWVudENvbnRleHQocG9ydCk7XG4gICAgICBkaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAgIHBvcnQgPT0gbnVsbCA/IHZvaWQgMCA6IHBvcnQub25NZXNzYWdlLmFkZExpc3RlbmVyKG9uTWVzc2FnZUhhbmRsZXIpO1xuICAgICAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgICAgICBkaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICBwb3J0ID09IG51bGwgPyB2b2lkIDAgOiBwb3J0Lm9uTWVzc2FnZS5yZW1vdmVMaXN0ZW5lcihvbk1lc3NhZ2VIYW5kbGVyKTtcbiAgICAgICAgcmVjb25uZWN0VGltZXIgPSBzZXRUaW1lb3V0KGNvbm5lY3QsIDFlMyk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBkaXNjb25uZWN0ZWQgPSB0cnVlO1xuICAgIH1cbiAgfVxuICBjb25uZWN0KCk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIGlmIChkaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcG9ydCA9PSBudWxsID8gdm9pZCAwIDogcG9ydC5wb3N0TWVzc2FnZShTdXBlckpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgb25NZXNzYWdlSGFuZGxlciA9IChkYXRhKSA9PiB7XG4gICAgICAgIGlmIChkaXNjb25uZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZGF0YSkpO1xuICAgICAgfTtcbiAgICAgIHBvcnQgPT0gbnVsbCA/IHZvaWQgMCA6IHBvcnQub25NZXNzYWdlLmFkZExpc3RlbmVyKG9uTWVzc2FnZUhhbmRsZXIpO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2V4dGVuc2lvbi9wcm94eS50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmZ1bmN0aW9uIGNyZWF0ZUV4dGVuc2lvblByb3h5Q2hhbm5lbCgpIHtcbiAgY29uc3QgcG9ydCA9IGNocm9tZS5ydW50aW1lLmNvbm5lY3Qoe1xuICAgIG5hbWU6IFwiY29udGVudC1zY3JpcHRcIlxuICB9KTtcbiAgZnVuY3Rpb24gc2VuZE1lc3NhZ2VUb1VzZXJBcHAocGF5bG9hZCkge1xuICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XG4gICAgICBzb3VyY2U6IF9fREVWVE9PTFNfS0lUX0VYVEVOU0lPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uUFJPWFlfVE9fU0VSVkVSLFxuICAgICAgcGF5bG9hZFxuICAgIH0sIFwiKlwiKTtcbiAgfVxuICBmdW5jdGlvbiBzZW5kTWVzc2FnZVRvRGV2VG9vbHNDbGllbnQoZSkge1xuICAgIGlmIChlLmRhdGEgJiYgZS5kYXRhLnNvdXJjZSA9PT0gX19ERVZUT09MU19LSVRfRVhURU5TSU9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5TRVJWRVJfVE9fUFJPWFkpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHBvcnQucG9zdE1lc3NhZ2UoZS5kYXRhLnBheWxvYWQpO1xuICAgICAgfSBjYXRjaCAoZTIpIHtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcG9ydC5vbk1lc3NhZ2UuYWRkTGlzdGVuZXIoc2VuZE1lc3NhZ2VUb1VzZXJBcHApO1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgc2VuZE1lc3NhZ2VUb0RldlRvb2xzQ2xpZW50KTtcbiAgcG9ydC5vbkRpc2Nvbm5lY3QuYWRkTGlzdGVuZXIoKCkgPT4ge1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBzZW5kTWVzc2FnZVRvRGV2VG9vbHNDbGllbnQpO1xuICAgIHNlbmRNZXNzYWdlVG9Vc2VyQXBwKFN1cGVySlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZXZlbnQ6IFwic2h1dGRvd25cIlxuICAgIH0pKTtcbiAgfSk7XG4gIHNlbmRNZXNzYWdlVG9Vc2VyQXBwKFN1cGVySlNPTi5zdHJpbmdpZnkoe1xuICAgIGV2ZW50OiBcImluaXRcIlxuICB9KSk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2V4dGVuc2lvbi9zZXJ2ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBjcmVhdGVFeHRlbnNpb25TZXJ2ZXJDaGFubmVsKCkge1xuICByZXR1cm4ge1xuICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICB3aW5kb3cucG9zdE1lc3NhZ2Uoe1xuICAgICAgICBzb3VyY2U6IF9fREVWVE9PTFNfS0lUX0VYVEVOU0lPTl9NRVNTQUdJTkdfRVZFTlRfS0VZX18uU0VSVkVSX1RPX1BST1hZLFxuICAgICAgICBwYXlsb2FkOiBTdXBlckpTT04uc3RyaW5naWZ5KGRhdGEpXG4gICAgICB9LCBcIipcIik7XG4gICAgfSxcbiAgICBvbjogKGhhbmRsZXIpID0+IHtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5kYXRhLnNvdXJjZSA9PT0gX19ERVZUT09MU19LSVRfRVhURU5TSU9OX01FU1NBR0lOR19FVkVOVF9LRVlfXy5QUk9YWV9UT19TRVJWRVIgJiYgZXZlbnQuZGF0YS5wYXlsb2FkKSB7XG4gICAgICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZXZlbnQuZGF0YS5wYXlsb2FkKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgbGlzdGVuZXIpO1xuICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIGxpc3RlbmVyKTtcbiAgICAgIH07XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvaWZyYW1lL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvaWZyYW1lL2NsaWVudC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IGlzQnJvd3NlciBhcyBpc0Jyb3dzZXI0IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy9pZnJhbWUvY29udGV4dC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQxOCB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xudmFyIF9fREVWVE9PTFNfS0lUX0lGUkFNRV9NRVNTQUdJTkdfRVZFTlRfS0VZID0gXCJfX2RldnRvb2xzLWtpdC1pZnJhbWUtbWVzc2FnaW5nLWV2ZW50LWtleV9fXCI7XG52YXIgX19JRlJBTUVfU0VSVkVSX0NPTlRFWFRfXyA9IFwiaWZyYW1lOnNlcnZlci1jb250ZXh0XCI7XG5mdW5jdGlvbiBnZXRJZnJhbWVTZXJ2ZXJDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MThbX19JRlJBTUVfU0VSVkVSX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRJZnJhbWVTZXJ2ZXJDb250ZXh0KGNvbnRleHQpIHtcbiAgdGFyZ2V0MThbX19JRlJBTUVfU0VSVkVSX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvaWZyYW1lL2NsaWVudC50c1xuZnVuY3Rpb24gY3JlYXRlSWZyYW1lQ2xpZW50Q2hhbm5lbCgpIHtcbiAgaWYgKCFpc0Jyb3dzZXI0KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICB9LFxuICAgICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHBvc3Q6IChkYXRhKSA9PiB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKFN1cGVySlNPTi5zdHJpbmdpZnkoe1xuICAgICAgZXZlbnQ6IF9fREVWVE9PTFNfS0lUX0lGUkFNRV9NRVNTQUdJTkdfRVZFTlRfS0VZLFxuICAgICAgZGF0YVxuICAgIH0pLCBcIipcIiksXG4gICAgb246IChoYW5kbGVyKSA9PiB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIiwgKGV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBwYXJzZWQgPSBTdXBlckpTT04ucGFyc2UoZXZlbnQuZGF0YSk7XG4gICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IHdpbmRvdy5wYXJlbnQgJiYgcGFyc2VkLmV2ZW50ID09PSBfX0RFVlRPT0xTX0tJVF9JRlJBTUVfTUVTU0FHSU5HX0VWRU5UX0tFWSkge1xuICAgICAgICAgIGhhbmRsZXIocGFyc2VkLmRhdGEpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICB9XG4gICAgfSlcbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL2lmcmFtZS9zZXJ2ZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5pbXBvcnQgeyBpc0Jyb3dzZXIgYXMgaXNCcm93c2VyNSB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuZnVuY3Rpb24gY3JlYXRlSWZyYW1lU2VydmVyQ2hhbm5lbCgpIHtcbiAgaWYgKCFpc0Jyb3dzZXI1KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICB9LFxuICAgICAgb246IChoYW5kbGVyKSA9PiB7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHBvc3Q6IChkYXRhKSA9PiB7XG4gICAgICB2YXIgX2EyNTtcbiAgICAgIGNvbnN0IGlmcmFtZSA9IGdldElmcmFtZVNlcnZlckNvbnRleHQoKTtcbiAgICAgIChfYTI1ID0gaWZyYW1lID09IG51bGwgPyB2b2lkIDAgOiBpZnJhbWUuY29udGVudFdpbmRvdykgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucG9zdE1lc3NhZ2UoU3VwZXJKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGV2ZW50OiBfX0RFVlRPT0xTX0tJVF9JRlJBTUVfTUVTU0FHSU5HX0VWRU5UX0tFWSxcbiAgICAgICAgZGF0YVxuICAgICAgfSksIFwiKlwiKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zdCBpZnJhbWUgPSBnZXRJZnJhbWVTZXJ2ZXJDb250ZXh0KCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcGFyc2VkID0gU3VwZXJKU09OLnBhcnNlKGV2ZW50LmRhdGEpO1xuICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IChpZnJhbWUgPT0gbnVsbCA/IHZvaWQgMCA6IGlmcmFtZS5jb250ZW50V2luZG93KSAmJiBwYXJzZWQuZXZlbnQgPT09IF9fREVWVE9PTFNfS0lUX0lGUkFNRV9NRVNTQUdJTkdfRVZFTlRfS0VZKSB7XG4gICAgICAgICAgICBoYW5kbGVyKHBhcnNlZC5kYXRhKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvdml0ZS9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL3ZpdGUvY2xpZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvdml0ZS9jb250ZXh0LnRzXG5pbml0X2VzbV9zaGltcygpO1xuaW1wb3J0IHsgdGFyZ2V0IGFzIHRhcmdldDE5IH0gZnJvbSBcIkB2dWUvZGV2dG9vbHMtc2hhcmVkXCI7XG52YXIgX19ERVZUT09MU19LSVRfVklURV9NRVNTQUdJTkdfRVZFTlRfS0VZID0gXCJfX2RldnRvb2xzLWtpdC12aXRlLW1lc3NhZ2luZy1ldmVudC1rZXlfX1wiO1xudmFyIF9fVklURV9DTElFTlRfQ09OVEVYVF9fID0gXCJ2aXRlOmNsaWVudC1jb250ZXh0XCI7XG52YXIgX19WSVRFX1NFUlZFUl9DT05URVhUX18gPSBcInZpdGU6c2VydmVyLWNvbnRleHRcIjtcbmZ1bmN0aW9uIGdldFZpdGVDbGllbnRDb250ZXh0KCkge1xuICByZXR1cm4gdGFyZ2V0MTlbX19WSVRFX0NMSUVOVF9DT05URVhUX19dO1xufVxuZnVuY3Rpb24gc2V0Vml0ZUNsaWVudENvbnRleHQoY29udGV4dCkge1xuICB0YXJnZXQxOVtfX1ZJVEVfQ0xJRU5UX0NPTlRFWFRfX10gPSBjb250ZXh0O1xufVxuZnVuY3Rpb24gZ2V0Vml0ZVNlcnZlckNvbnRleHQoKSB7XG4gIHJldHVybiB0YXJnZXQxOVtfX1ZJVEVfU0VSVkVSX0NPTlRFWFRfX107XG59XG5mdW5jdGlvbiBzZXRWaXRlU2VydmVyQ29udGV4dChjb250ZXh0KSB7XG4gIHRhcmdldDE5W19fVklURV9TRVJWRVJfQ09OVEVYVF9fXSA9IGNvbnRleHQ7XG59XG5cbi8vIHNyYy9tZXNzYWdpbmcvcHJlc2V0cy92aXRlL2NsaWVudC50c1xuZnVuY3Rpb24gY3JlYXRlVml0ZUNsaWVudENoYW5uZWwoKSB7XG4gIGNvbnN0IGNsaWVudCA9IGdldFZpdGVDbGllbnRDb250ZXh0KCk7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHtcbiAgICAgIGNsaWVudCA9PSBudWxsID8gdm9pZCAwIDogY2xpZW50LnNlbmQoX19ERVZUT09MU19LSVRfVklURV9NRVNTQUdJTkdfRVZFTlRfS0VZLCBTdXBlckpTT04uc3RyaW5naWZ5KGRhdGEpKTtcbiAgICB9LFxuICAgIG9uOiAoaGFuZGxlcikgPT4ge1xuICAgICAgY2xpZW50ID09IG51bGwgPyB2b2lkIDAgOiBjbGllbnQub24oX19ERVZUT09MU19LSVRfVklURV9NRVNTQUdJTkdfRVZFTlRfS0VZLCAoZXZlbnQpID0+IHtcbiAgICAgICAgaGFuZGxlcihTdXBlckpTT04ucGFyc2UoZXZlbnQpKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL3ZpdGUvc2VydmVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuZnVuY3Rpb24gY3JlYXRlVml0ZVNlcnZlckNoYW5uZWwoKSB7XG4gIHZhciBfYTI1O1xuICBjb25zdCB2aXRlU2VydmVyID0gZ2V0Vml0ZVNlcnZlckNvbnRleHQoKTtcbiAgY29uc3Qgd3MgPSAoX2EyNSA9IHZpdGVTZXJ2ZXIuaG90KSAhPSBudWxsID8gX2EyNSA6IHZpdGVTZXJ2ZXIud3M7XG4gIHJldHVybiB7XG4gICAgcG9zdDogKGRhdGEpID0+IHdzID09IG51bGwgPyB2b2lkIDAgOiB3cy5zZW5kKF9fREVWVE9PTFNfS0lUX1ZJVEVfTUVTU0FHSU5HX0VWRU5UX0tFWSwgU3VwZXJKU09OLnN0cmluZ2lmeShkYXRhKSksXG4gICAgb246IChoYW5kbGVyKSA9PiB3cyA9PSBudWxsID8gdm9pZCAwIDogd3Mub24oX19ERVZUT09MU19LSVRfVklURV9NRVNTQUdJTkdfRVZFTlRfS0VZLCAoZXZlbnQpID0+IHtcbiAgICAgIGhhbmRsZXIoU3VwZXJKU09OLnBhcnNlKGV2ZW50KSk7XG4gICAgfSlcbiAgfTtcbn1cblxuLy8gc3JjL21lc3NhZ2luZy9wcmVzZXRzL3dzL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvd3MvY2xpZW50LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvd3MvY29udGV4dC50c1xuaW5pdF9lc21fc2hpbXMoKTtcbmltcG9ydCB7IHRhcmdldCBhcyB0YXJnZXQyMCB9IGZyb20gXCJAdnVlL2RldnRvb2xzLXNoYXJlZFwiO1xuXG4vLyBzcmMvbWVzc2FnaW5nL3ByZXNldHMvd3Mvc2VydmVyLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvbWVzc2FnaW5nL2luZGV4LnRzXG52YXIgX2ExOSwgX2IxOTtcbihfYjE5ID0gKF9hMTkgPSB0YXJnZXQyMSkuX19WVUVfREVWVE9PTFNfS0lUX01FU1NBR0VfQ0hBTk5FTFNfXykgIT0gbnVsbCA/IF9iMTkgOiBfYTE5Ll9fVlVFX0RFVlRPT0xTX0tJVF9NRVNTQUdFX0NIQU5ORUxTX18gPSBbXTtcbnZhciBfYTIwLCBfYjIwO1xuKF9iMjAgPSAoX2EyMCA9IHRhcmdldDIxKS5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX0NMSUVOVF9fKSAhPSBudWxsID8gX2IyMCA6IF9hMjAuX19WVUVfREVWVE9PTFNfS0lUX1JQQ19DTElFTlRfXyA9IG51bGw7XG52YXIgX2EyMSwgX2IyMTtcbihfYjIxID0gKF9hMjEgPSB0YXJnZXQyMSkuX19WVUVfREVWVE9PTFNfS0lUX1JQQ19TRVJWRVJfXykgIT0gbnVsbCA/IF9iMjEgOiBfYTIxLl9fVlVFX0RFVlRPT0xTX0tJVF9SUENfU0VSVkVSX18gPSBudWxsO1xudmFyIF9hMjIsIF9iMjI7XG4oX2IyMiA9IChfYTIyID0gdGFyZ2V0MjEpLl9fVlVFX0RFVlRPT0xTX0tJVF9WSVRFX1JQQ19DTElFTlRfXykgIT0gbnVsbCA/IF9iMjIgOiBfYTIyLl9fVlVFX0RFVlRPT0xTX0tJVF9WSVRFX1JQQ19DTElFTlRfXyA9IG51bGw7XG52YXIgX2EyMywgX2IyMztcbihfYjIzID0gKF9hMjMgPSB0YXJnZXQyMSkuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX1NFUlZFUl9fKSAhPSBudWxsID8gX2IyMyA6IF9hMjMuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX1NFUlZFUl9fID0gbnVsbDtcbnZhciBfYTI0LCBfYjI0O1xuKF9iMjQgPSAoX2EyNCA9IHRhcmdldDIxKS5fX1ZVRV9ERVZUT09MU19LSVRfQlJPQURDQVNUX1JQQ19TRVJWRVJfXykgIT0gbnVsbCA/IF9iMjQgOiBfYTI0Ll9fVlVFX0RFVlRPT0xTX0tJVF9CUk9BRENBU1RfUlBDX1NFUlZFUl9fID0gbnVsbDtcbmZ1bmN0aW9uIHNldFJwY0NsaWVudFRvR2xvYmFsKHJwYykge1xuICB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX0NMSUVOVF9fID0gcnBjO1xufVxuZnVuY3Rpb24gc2V0UnBjU2VydmVyVG9HbG9iYWwocnBjKSB7XG4gIHRhcmdldDIxLl9fVlVFX0RFVlRPT0xTX0tJVF9SUENfU0VSVkVSX18gPSBycGM7XG59XG5mdW5jdGlvbiBnZXRScGNDbGllbnQoKSB7XG4gIHJldHVybiB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfUlBDX0NMSUVOVF9fO1xufVxuZnVuY3Rpb24gZ2V0UnBjU2VydmVyKCkge1xuICByZXR1cm4gdGFyZ2V0MjEuX19WVUVfREVWVE9PTFNfS0lUX1JQQ19TRVJWRVJfXztcbn1cbmZ1bmN0aW9uIHNldFZpdGVScGNDbGllbnRUb0dsb2JhbChycGMpIHtcbiAgdGFyZ2V0MjEuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX0NMSUVOVF9fID0gcnBjO1xufVxuZnVuY3Rpb24gc2V0Vml0ZVJwY1NlcnZlclRvR2xvYmFsKHJwYykge1xuICB0YXJnZXQyMS5fX1ZVRV9ERVZUT09MU19LSVRfVklURV9SUENfU0VSVkVSX18gPSBycGM7XG59XG5mdW5jdGlvbiBnZXRWaXRlUnBjQ2xpZW50KCkge1xuICByZXR1cm4gdGFyZ2V0MjEuX19WVUVfREVWVE9PTFNfS0lUX1ZJVEVfUlBDX0NMSUVOVF9fO1xufVxuZnVuY3Rpb24gZ2V0Vml0ZVJwY1NlcnZlcigpIHtcbiAgcmV0dXJuIHRhcmdldDIxLl9fVlVFX0RFVlRPT0xTX0tJVF9WSVRFX1JQQ19TRVJWRVJfXztcbn1cbmZ1bmN0aW9uIGdldENoYW5uZWwocHJlc2V0LCBob3N0ID0gXCJjbGllbnRcIikge1xuICBjb25zdCBjaGFubmVsID0ge1xuICAgIGlmcmFtZToge1xuICAgICAgY2xpZW50OiBjcmVhdGVJZnJhbWVDbGllbnRDaGFubmVsLFxuICAgICAgc2VydmVyOiBjcmVhdGVJZnJhbWVTZXJ2ZXJDaGFubmVsXG4gICAgfVtob3N0XSxcbiAgICBlbGVjdHJvbjoge1xuICAgICAgY2xpZW50OiBjcmVhdGVFbGVjdHJvbkNsaWVudENoYW5uZWwsXG4gICAgICBwcm94eTogY3JlYXRlRWxlY3Ryb25Qcm94eUNoYW5uZWwsXG4gICAgICBzZXJ2ZXI6IGNyZWF0ZUVsZWN0cm9uU2VydmVyQ2hhbm5lbFxuICAgIH1baG9zdF0sXG4gICAgdml0ZToge1xuICAgICAgY2xpZW50OiBjcmVhdGVWaXRlQ2xpZW50Q2hhbm5lbCxcbiAgICAgIHNlcnZlcjogY3JlYXRlVml0ZVNlcnZlckNoYW5uZWxcbiAgICB9W2hvc3RdLFxuICAgIGJyb2FkY2FzdDoge1xuICAgICAgY2xpZW50OiBjcmVhdGVCcm9hZGNhc3RDaGFubmVsLFxuICAgICAgc2VydmVyOiBjcmVhdGVCcm9hZGNhc3RDaGFubmVsXG4gICAgfVtob3N0XSxcbiAgICBleHRlbnNpb246IHtcbiAgICAgIGNsaWVudDogY3JlYXRlRXh0ZW5zaW9uQ2xpZW50Q2hhbm5lbCxcbiAgICAgIHByb3h5OiBjcmVhdGVFeHRlbnNpb25Qcm94eUNoYW5uZWwsXG4gICAgICBzZXJ2ZXI6IGNyZWF0ZUV4dGVuc2lvblNlcnZlckNoYW5uZWxcbiAgICB9W2hvc3RdXG4gIH1bcHJlc2V0XTtcbiAgcmV0dXJuIGNoYW5uZWwoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVJwY0NsaWVudChmdW5jdGlvbnMsIG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7IGNoYW5uZWw6IF9jaGFubmVsLCBvcHRpb25zOiBfb3B0aW9ucywgcHJlc2V0IH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGFubmVsID0gcHJlc2V0ID8gZ2V0Q2hhbm5lbChwcmVzZXQpIDogX2NoYW5uZWw7XG4gIGNvbnN0IHJwYyA9IGNyZWF0ZUJpcnBjKGZ1bmN0aW9ucywge1xuICAgIC4uLl9vcHRpb25zLFxuICAgIC4uLmNoYW5uZWwsXG4gICAgdGltZW91dDogLTFcbiAgfSk7XG4gIGlmIChwcmVzZXQgPT09IFwidml0ZVwiKSB7XG4gICAgc2V0Vml0ZVJwY0NsaWVudFRvR2xvYmFsKHJwYyk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHNldFJwY0NsaWVudFRvR2xvYmFsKHJwYyk7XG4gIHJldHVybiBycGM7XG59XG5mdW5jdGlvbiBjcmVhdGVScGNTZXJ2ZXIoZnVuY3Rpb25zLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgeyBjaGFubmVsOiBfY2hhbm5lbCwgb3B0aW9uczogX29wdGlvbnMsIHByZXNldCB9ID0gb3B0aW9ucztcbiAgY29uc3QgY2hhbm5lbCA9IHByZXNldCA/IGdldENoYW5uZWwocHJlc2V0LCBcInNlcnZlclwiKSA6IF9jaGFubmVsO1xuICBjb25zdCBycGNTZXJ2ZXIgPSBnZXRScGNTZXJ2ZXIoKTtcbiAgaWYgKCFycGNTZXJ2ZXIpIHtcbiAgICBjb25zdCBncm91cCA9IGNyZWF0ZUJpcnBjR3JvdXAoZnVuY3Rpb25zLCBbY2hhbm5lbF0sIHtcbiAgICAgIC4uLl9vcHRpb25zLFxuICAgICAgdGltZW91dDogLTFcbiAgICB9KTtcbiAgICBpZiAocHJlc2V0ID09PSBcInZpdGVcIikge1xuICAgICAgc2V0Vml0ZVJwY1NlcnZlclRvR2xvYmFsKGdyb3VwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgc2V0UnBjU2VydmVyVG9HbG9iYWwoZ3JvdXApO1xuICB9IGVsc2Uge1xuICAgIHJwY1NlcnZlci51cGRhdGVDaGFubmVscygoY2hhbm5lbHMpID0+IHtcbiAgICAgIGNoYW5uZWxzLnB1c2goY2hhbm5lbCk7XG4gICAgfSk7XG4gIH1cbn1cbmZ1bmN0aW9uIGNyZWF0ZVJwY1Byb3h5KG9wdGlvbnMgPSB7fSkge1xuICBjb25zdCB7IGNoYW5uZWw6IF9jaGFubmVsLCBvcHRpb25zOiBfb3B0aW9ucywgcHJlc2V0IH0gPSBvcHRpb25zO1xuICBjb25zdCBjaGFubmVsID0gcHJlc2V0ID8gZ2V0Q2hhbm5lbChwcmVzZXQsIFwicHJveHlcIikgOiBfY2hhbm5lbDtcbiAgcmV0dXJuIGNyZWF0ZUJpcnBjKHt9LCB7XG4gICAgLi4uX29wdGlvbnMsXG4gICAgLi4uY2hhbm5lbCxcbiAgICB0aW1lb3V0OiAtMVxuICB9KTtcbn1cblxuLy8gc3JjL3NoYXJlZC9pbmRleC50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3NoYXJlZC9lbnYudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9zaGFyZWQvdGltZS50c1xuaW5pdF9lc21fc2hpbXMoKTtcblxuLy8gc3JjL3NoYXJlZC91dGlsLnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29yZS9jb21wb25lbnQvc3RhdGUvcmVwbGFjZXIudHNcbmluaXRfZXNtX3NoaW1zKCk7XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9jdXN0b20udHNcbmluaXRfZXNtX3NoaW1zKCk7XG5mdW5jdGlvbiBnZXRGdW5jdGlvbkRldGFpbHMoZnVuYykge1xuICBsZXQgc3RyaW5nID0gXCJcIjtcbiAgbGV0IG1hdGNoZXMgPSBudWxsO1xuICB0cnkge1xuICAgIHN0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGZ1bmMpO1xuICAgIG1hdGNoZXMgPSBTdHJpbmcucHJvdG90eXBlLm1hdGNoLmNhbGwoc3RyaW5nLCAvXFwoW1xcc1xcU10qP1xcKS8pO1xuICB9IGNhdGNoIChlKSB7XG4gIH1cbiAgY29uc3QgbWF0Y2ggPSBtYXRjaGVzICYmIG1hdGNoZXNbMF07XG4gIGNvbnN0IGFyZ3MgPSB0eXBlb2YgbWF0Y2ggPT09IFwic3RyaW5nXCIgPyBtYXRjaCA6IFwiKD8pXCI7XG4gIGNvbnN0IG5hbWUgPSB0eXBlb2YgZnVuYy5uYW1lID09PSBcInN0cmluZ1wiID8gZnVuYy5uYW1lIDogXCJcIjtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcImZ1bmN0aW9uXCIsXG4gICAgICBkaXNwbGF5VGV4dDogYDxzcGFuIHN0eWxlPVwib3BhY2l0eTouODttYXJnaW4tcmlnaHQ6NXB4O1wiPmZ1bmN0aW9uPC9zcGFuPiA8c3BhbiBzdHlsZT1cIndoaXRlLXNwYWNlOm5vd3JhcDtcIj4ke2VzY2FwZShuYW1lKX0ke2FyZ3N9PC9zcGFuPmAsXG4gICAgICB0b29sdGlwVGV4dDogc3RyaW5nLnRyaW0oKSA/IGA8cHJlPiR7c3RyaW5nfTwvcHJlPmAgOiBudWxsXG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0QmlnSW50RGV0YWlscyh2YWwpIHtcbiAgY29uc3Qgc3RyaW5naWZpZWRCaWdJbnQgPSBCaWdJbnQucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKTtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcImJpZ2ludFwiLFxuICAgICAgZGlzcGxheVRleHQ6IGBCaWdJbnQoJHtzdHJpbmdpZmllZEJpZ0ludH0pYCxcbiAgICAgIHZhbHVlOiBzdHJpbmdpZmllZEJpZ0ludFxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldERhdGVEZXRhaWxzKHZhbCkge1xuICBjb25zdCBkYXRlID0gbmV3IERhdGUodmFsLmdldFRpbWUoKSk7XG4gIGRhdGUuc2V0TWludXRlcyhkYXRlLmdldE1pbnV0ZXMoKSAtIGRhdGUuZ2V0VGltZXpvbmVPZmZzZXQoKSk7XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICBkaXNwbGF5VGV4dDogRGF0ZS5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLFxuICAgICAgdmFsdWU6IGRhdGUudG9JU09TdHJpbmcoKS5zbGljZSgwLCAtMSlcbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRNYXBEZXRhaWxzKHZhbCkge1xuICBjb25zdCBsaXN0ID0gT2JqZWN0LmZyb21FbnRyaWVzKHZhbCk7XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJtYXBcIixcbiAgICAgIGRpc3BsYXlUZXh0OiBcIk1hcFwiLFxuICAgICAgdmFsdWU6IGxpc3QsXG4gICAgICByZWFkT25seTogdHJ1ZSxcbiAgICAgIGZpZWxkczoge1xuICAgICAgICBhYnN0cmFjdDogdHJ1ZVxuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cbmZ1bmN0aW9uIGdldFNldERldGFpbHModmFsKSB7XG4gIGNvbnN0IGxpc3QgPSBBcnJheS5mcm9tKHZhbCk7XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJzZXRcIixcbiAgICAgIGRpc3BsYXlUZXh0OiBgU2V0WyR7bGlzdC5sZW5ndGh9XWAsXG4gICAgICB2YWx1ZTogbGlzdCxcbiAgICAgIHJlYWRPbmx5OiB0cnVlXG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0Q2F1Z2h0R2V0dGVycyhzdG9yZSkge1xuICBjb25zdCBnZXR0ZXJzID0ge307XG4gIGNvbnN0IG9yaWdHZXR0ZXJzID0gc3RvcmUuZ2V0dGVycyB8fCB7fTtcbiAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKG9yaWdHZXR0ZXJzKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qga2V5ID0ga2V5c1tpXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ2V0dGVycywga2V5LCB7XG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgZ2V0OiAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIG9yaWdHZXR0ZXJzW2tleV07XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIHJldHVybiBnZXR0ZXJzO1xufVxuZnVuY3Rpb24gcmVkdWNlU3RhdGVMaXN0KGxpc3QpIHtcbiAgaWYgKCFsaXN0Lmxlbmd0aClcbiAgICByZXR1cm4gdm9pZCAwO1xuICByZXR1cm4gbGlzdC5yZWR1Y2UoKG1hcCwgaXRlbSkgPT4ge1xuICAgIGNvbnN0IGtleSA9IGl0ZW0udHlwZSB8fCBcImRhdGFcIjtcbiAgICBjb25zdCBvYmogPSBtYXBba2V5XSA9IG1hcFtrZXldIHx8IHt9O1xuICAgIG9ialtpdGVtLmtleV0gPSBpdGVtLnZhbHVlO1xuICAgIHJldHVybiBtYXA7XG4gIH0sIHt9KTtcbn1cbmZ1bmN0aW9uIG5hbWVkTm9kZU1hcFRvT2JqZWN0KG1hcCkge1xuICBjb25zdCByZXN1bHQgPSB7fTtcbiAgY29uc3QgbCA9IG1hcC5sZW5ndGg7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgY29uc3Qgbm9kZSA9IG1hcC5pdGVtKGkpO1xuICAgIHJlc3VsdFtub2RlLm5hbWVdID0gbm9kZS52YWx1ZTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gZ2V0U3RvcmVEZXRhaWxzKHN0b3JlKSB7XG4gIHJldHVybiB7XG4gICAgX2N1c3RvbToge1xuICAgICAgdHlwZTogXCJzdG9yZVwiLFxuICAgICAgZGlzcGxheVRleHQ6IFwiU3RvcmVcIixcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIHN0YXRlOiBzdG9yZS5zdGF0ZSxcbiAgICAgICAgZ2V0dGVyczogZ2V0Q2F1Z2h0R2V0dGVycyhzdG9yZSlcbiAgICAgIH0sXG4gICAgICBmaWVsZHM6IHtcbiAgICAgICAgYWJzdHJhY3Q6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRSb3V0ZXJEZXRhaWxzKHJvdXRlcikge1xuICByZXR1cm4ge1xuICAgIF9jdXN0b206IHtcbiAgICAgIHR5cGU6IFwicm91dGVyXCIsXG4gICAgICBkaXNwbGF5VGV4dDogXCJWdWVSb3V0ZXJcIixcbiAgICAgIHZhbHVlOiB7XG4gICAgICAgIG9wdGlvbnM6IHJvdXRlci5vcHRpb25zLFxuICAgICAgICBjdXJyZW50Um91dGU6IHJvdXRlci5jdXJyZW50Um91dGVcbiAgICAgIH0sXG4gICAgICBmaWVsZHM6IHtcbiAgICAgICAgYWJzdHJhY3Q6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRJbnN0YW5jZURldGFpbHMoaW5zdGFuY2UpIHtcbiAgaWYgKGluc3RhbmNlLl8pXG4gICAgaW5zdGFuY2UgPSBpbnN0YW5jZS5fO1xuICBjb25zdCBzdGF0ZSA9IHByb2Nlc3NJbnN0YW5jZVN0YXRlKGluc3RhbmNlKTtcbiAgcmV0dXJuIHtcbiAgICBfY3VzdG9tOiB7XG4gICAgICB0eXBlOiBcImNvbXBvbmVudFwiLFxuICAgICAgaWQ6IGluc3RhbmNlLl9fVlVFX0RFVlRPT0xTX05FWFRfVUlEX18sXG4gICAgICBkaXNwbGF5VGV4dDogZ2V0SW5zdGFuY2VOYW1lKGluc3RhbmNlKSxcbiAgICAgIHRvb2x0aXBUZXh0OiBcIkNvbXBvbmVudCBpbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IHJlZHVjZVN0YXRlTGlzdChzdGF0ZSksXG4gICAgICBmaWVsZHM6IHtcbiAgICAgICAgYWJzdHJhY3Q6IHRydWVcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5mdW5jdGlvbiBnZXRDb21wb25lbnREZWZpbml0aW9uRGV0YWlscyhkZWZpbml0aW9uKSB7XG4gIGxldCBkaXNwbGF5ID0gZ2V0Q29tcG9uZW50TmFtZShkZWZpbml0aW9uKTtcbiAgaWYgKGRpc3BsYXkpIHtcbiAgICBpZiAoZGVmaW5pdGlvbi5uYW1lICYmIGRlZmluaXRpb24uX19maWxlKVxuICAgICAgZGlzcGxheSArPSBgIDxzcGFuPigke2RlZmluaXRpb24uX19maWxlfSk8L3NwYW4+YDtcbiAgfSBlbHNlIHtcbiAgICBkaXNwbGF5ID0gXCI8aT5Vbmtub3duIENvbXBvbmVudDwvaT5cIjtcbiAgfVxuICByZXR1cm4ge1xuICAgIF9jdXN0b206IHtcbiAgICAgIHR5cGU6IFwiY29tcG9uZW50LWRlZmluaXRpb25cIixcbiAgICAgIGRpc3BsYXlUZXh0OiBkaXNwbGF5LFxuICAgICAgdG9vbHRpcFRleHQ6IFwiQ29tcG9uZW50IGRlZmluaXRpb25cIixcbiAgICAgIC4uLmRlZmluaXRpb24uX19maWxlID8ge1xuICAgICAgICBmaWxlOiBkZWZpbml0aW9uLl9fZmlsZVxuICAgICAgfSA6IHt9XG4gICAgfVxuICB9O1xufVxuZnVuY3Rpb24gZ2V0SFRNTEVsZW1lbnREZXRhaWxzKHZhbHVlKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jdXN0b206IHtcbiAgICAgICAgdHlwZTogXCJIVE1MRWxlbWVudFwiLFxuICAgICAgICBkaXNwbGF5VGV4dDogYDxzcGFuIGNsYXNzPVwib3BhY2l0eS0zMFwiPiZsdDs8L3NwYW4+PHNwYW4gY2xhc3M9XCJ0ZXh0LWJsdWUtNTAwXCI+JHt2YWx1ZS50YWdOYW1lLnRvTG93ZXJDYXNlKCl9PC9zcGFuPjxzcGFuIGNsYXNzPVwib3BhY2l0eS0zMFwiPiZndDs8L3NwYW4+YCxcbiAgICAgICAgdmFsdWU6IG5hbWVkTm9kZU1hcFRvT2JqZWN0KHZhbHVlLmF0dHJpYnV0ZXMpXG4gICAgICB9XG4gICAgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7XG4gICAgICBfY3VzdG9tOiB7XG4gICAgICAgIHR5cGU6IFwiSFRNTEVsZW1lbnRcIixcbiAgICAgICAgZGlzcGxheVRleHQ6IGA8c3BhbiBjbGFzcz1cInRleHQtYmx1ZS01MDBcIj4ke1N0cmluZyh2YWx1ZSl9PC9zcGFuPmBcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiB0cnlHZXRSZWZWYWx1ZShyZWYpIHtcbiAgaWYgKGVuc3VyZVByb3BlcnR5RXhpc3RzKHJlZiwgXCJfdmFsdWVcIiwgdHJ1ZSkpIHtcbiAgICByZXR1cm4gcmVmLl92YWx1ZTtcbiAgfVxuICBpZiAoZW5zdXJlUHJvcGVydHlFeGlzdHMocmVmLCBcInZhbHVlXCIsIHRydWUpKSB7XG4gICAgcmV0dXJuIHJlZi52YWx1ZTtcbiAgfVxufVxuZnVuY3Rpb24gZ2V0T2JqZWN0RGV0YWlscyhvYmplY3QpIHtcbiAgdmFyIF9hMjUsIF9iMjUsIF9jLCBfZDtcbiAgY29uc3QgaW5mbyA9IGdldFNldHVwU3RhdGVUeXBlKG9iamVjdCk7XG4gIGNvbnN0IGlzU3RhdGUgPSBpbmZvLnJlZiB8fCBpbmZvLmNvbXB1dGVkIHx8IGluZm8ucmVhY3RpdmU7XG4gIGlmIChpc1N0YXRlKSB7XG4gICAgY29uc3Qgc3RhdGVUeXBlTmFtZSA9IGluZm8uY29tcHV0ZWQgPyBcIkNvbXB1dGVkXCIgOiBpbmZvLnJlZiA/IFwiUmVmXCIgOiBpbmZvLnJlYWN0aXZlID8gXCJSZWFjdGl2ZVwiIDogbnVsbDtcbiAgICBjb25zdCB2YWx1ZSA9IHRvUmF3MihpbmZvLnJlYWN0aXZlID8gb2JqZWN0IDogdHJ5R2V0UmVmVmFsdWUob2JqZWN0KSk7XG4gICAgY29uc3QgcmF3ID0gZW5zdXJlUHJvcGVydHlFeGlzdHMob2JqZWN0LCBcImVmZmVjdFwiKSA/ICgoX2IyNSA9IChfYTI1ID0gb2JqZWN0LmVmZmVjdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hMjUucmF3KSA9PSBudWxsID8gdm9pZCAwIDogX2IyNS50b1N0cmluZygpKSB8fCAoKF9kID0gKF9jID0gb2JqZWN0LmVmZmVjdCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jLmZuKSA9PSBudWxsID8gdm9pZCAwIDogX2QudG9TdHJpbmcoKSkgOiBudWxsO1xuICAgIHJldHVybiB7XG4gICAgICBfY3VzdG9tOiB7XG4gICAgICAgIHR5cGU6IHN0YXRlVHlwZU5hbWUgPT0gbnVsbCA/IHZvaWQgMCA6IHN0YXRlVHlwZU5hbWUudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgc3RhdGVUeXBlTmFtZSxcbiAgICAgICAgdmFsdWUsXG4gICAgICAgIC4uLnJhdyA/IHsgdG9vbHRpcFRleHQ6IGA8c3BhbiBjbGFzcz1cImZvbnQtbW9ub1wiPiR7cmF3fTwvc3Bhbj5gIH0gOiB7fVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgaWYgKGVuc3VyZVByb3BlcnR5RXhpc3RzKG9iamVjdCwgXCJfX2FzeW5jTG9hZGVyXCIpICYmIHR5cGVvZiBvYmplY3QuX19hc3luY0xvYWRlciA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIF9jdXN0b206IHtcbiAgICAgICAgdHlwZTogXCJjb21wb25lbnQtZGVmaW5pdGlvblwiLFxuICAgICAgICBkaXNwbGF5OiBcIkFzeW5jIGNvbXBvbmVudCBkZWZpbml0aW9uXCJcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbi8vIHNyYy9jb3JlL2NvbXBvbmVudC9zdGF0ZS9yZXBsYWNlci50c1xuZnVuY3Rpb24gc3RyaW5naWZ5UmVwbGFjZXIoa2V5LCBfdmFsdWUsIGRlcHRoLCBzZWVuSW5zdGFuY2UpIHtcbiAgdmFyIF9hMjU7XG4gIGlmIChrZXkgPT09IFwiY29tcGlsZXJPcHRpb25zXCIpXG4gICAgcmV0dXJuO1xuICBjb25zdCB2YWwgPSB0aGlzW2tleV07XG4gIGNvbnN0IHR5cGUgPSB0eXBlb2YgdmFsO1xuICBpZiAoQXJyYXkuaXNBcnJheSh2YWwpKSB7XG4gICAgY29uc3QgbCA9IHZhbC5sZW5ndGg7XG4gICAgaWYgKGwgPiBNQVhfQVJSQVlfU0laRSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgX2lzQXJyYXk6IHRydWUsXG4gICAgICAgIGxlbmd0aDogbCxcbiAgICAgICAgaXRlbXM6IHZhbC5zbGljZSgwLCBNQVhfQVJSQVlfU0laRSlcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB2YWw7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gXCJzdHJpbmdcIikge1xuICAgIGlmICh2YWwubGVuZ3RoID4gTUFYX1NUUklOR19TSVpFKVxuICAgICAgcmV0dXJuIGAke3ZhbC5zdWJzdHJpbmcoMCwgTUFYX1NUUklOR19TSVpFKX0uLi4gKCR7dmFsLmxlbmd0aH0gdG90YWwgbGVuZ3RoKWA7XG4gICAgZWxzZVxuICAgICAgcmV0dXJuIHZhbDtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgcmV0dXJuIFVOREVGSU5FRDtcbiAgfSBlbHNlIGlmICh2YWwgPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSkge1xuICAgIHJldHVybiBJTkZJTklUWTtcbiAgfSBlbHNlIGlmICh2YWwgPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkge1xuICAgIHJldHVybiBORUdBVElWRV9JTkZJTklUWTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gZ2V0RnVuY3Rpb25EZXRhaWxzKHZhbCk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gXCJzeW1ib2xcIikge1xuICAgIHJldHVybiBgW25hdGl2ZSBTeW1ib2wgJHtTeW1ib2wucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKX1dYDtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsID09PSBcImJpZ2ludFwiKSB7XG4gICAgcmV0dXJuIGdldEJpZ0ludERldGFpbHModmFsKTtcbiAgfSBlbHNlIGlmICh2YWwgIT09IG51bGwgJiYgdHlwZW9mIHZhbCA9PT0gXCJvYmplY3RcIikge1xuICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCk7XG4gICAgaWYgKHByb3RvID09PSBcIltvYmplY3QgTWFwXVwiKSB7XG4gICAgICByZXR1cm4gZ2V0TWFwRGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAocHJvdG8gPT09IFwiW29iamVjdCBTZXRdXCIpIHtcbiAgICAgIHJldHVybiBnZXRTZXREZXRhaWxzKHZhbCk7XG4gICAgfSBlbHNlIGlmIChwcm90byA9PT0gXCJbb2JqZWN0IFJlZ0V4cF1cIikge1xuICAgICAgcmV0dXJuIGBbbmF0aXZlIFJlZ0V4cCAke1JlZ0V4cC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpfV1gO1xuICAgIH0gZWxzZSBpZiAocHJvdG8gPT09IFwiW29iamVjdCBEYXRlXVwiKSB7XG4gICAgICByZXR1cm4gZ2V0RGF0ZURldGFpbHModmFsKTtcbiAgICB9IGVsc2UgaWYgKHByb3RvID09PSBcIltvYmplY3QgRXJyb3JdXCIpIHtcbiAgICAgIHJldHVybiBgW25hdGl2ZSBFcnJvciAke3ZhbC5tZXNzYWdlfTw+JHt2YWwuc3RhY2t9XWA7XG4gICAgfSBlbHNlIGlmIChlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWwsIFwic3RhdGVcIiwgdHJ1ZSkgJiYgZW5zdXJlUHJvcGVydHlFeGlzdHModmFsLCBcIl92bVwiLCB0cnVlKSkge1xuICAgICAgcmV0dXJuIGdldFN0b3JlRGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAodmFsLmNvbnN0cnVjdG9yICYmIHZhbC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIlZ1ZVJvdXRlclwiKSB7XG4gICAgICByZXR1cm4gZ2V0Um91dGVyRGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAoaXNWdWVJbnN0YW5jZSh2YWwpKSB7XG4gICAgICBjb25zdCBjb21wb25lbnRWYWwgPSBnZXRJbnN0YW5jZURldGFpbHModmFsKTtcbiAgICAgIGNvbnN0IHBhcmVudEluc3RhbmNlRGVwdGggPSBzZWVuSW5zdGFuY2UgPT0gbnVsbCA/IHZvaWQgMCA6IHNlZW5JbnN0YW5jZS5nZXQodmFsKTtcbiAgICAgIGlmIChwYXJlbnRJbnN0YW5jZURlcHRoICYmIHBhcmVudEluc3RhbmNlRGVwdGggPCBkZXB0aCkge1xuICAgICAgICByZXR1cm4gYFtbQ2lyY3VsYXJSZWZdXSA8JHtjb21wb25lbnRWYWwuX2N1c3RvbS5kaXNwbGF5VGV4dH0+YDtcbiAgICAgIH1cbiAgICAgIHNlZW5JbnN0YW5jZSA9PSBudWxsID8gdm9pZCAwIDogc2Vlbkluc3RhbmNlLnNldCh2YWwsIGRlcHRoKTtcbiAgICAgIHJldHVybiBjb21wb25lbnRWYWw7XG4gICAgfSBlbHNlIGlmIChlbnN1cmVQcm9wZXJ0eUV4aXN0cyh2YWwsIFwicmVuZGVyXCIsIHRydWUpICYmIHR5cGVvZiB2YWwucmVuZGVyID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIHJldHVybiBnZXRDb21wb25lbnREZWZpbml0aW9uRGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAodmFsLmNvbnN0cnVjdG9yICYmIHZhbC5jb25zdHJ1Y3Rvci5uYW1lID09PSBcIlZOb2RlXCIpIHtcbiAgICAgIHJldHVybiBgW25hdGl2ZSBWTm9kZSA8JHt2YWwudGFnfT5dYDtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCAhPT0gXCJ1bmRlZmluZWRcIiAmJiB2YWwgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgcmV0dXJuIGdldEhUTUxFbGVtZW50RGV0YWlscyh2YWwpO1xuICAgIH0gZWxzZSBpZiAoKChfYTI1ID0gdmFsLmNvbnN0cnVjdG9yKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5uYW1lKSA9PT0gXCJTdG9yZVwiICYmIFwiX3dyYXBwZWRHZXR0ZXJzXCIgaW4gdmFsKSB7XG4gICAgICByZXR1cm4gXCJbb2JqZWN0IFN0b3JlXVwiO1xuICAgIH0gZWxzZSBpZiAoZW5zdXJlUHJvcGVydHlFeGlzdHModmFsLCBcImN1cnJlbnRSb3V0ZVwiLCB0cnVlKSkge1xuICAgICAgcmV0dXJuIFwiW29iamVjdCBSb3V0ZXJdXCI7XG4gICAgfVxuICAgIGNvbnN0IGN1c3RvbURldGFpbHMgPSBnZXRPYmplY3REZXRhaWxzKHZhbCk7XG4gICAgaWYgKGN1c3RvbURldGFpbHMgIT0gbnVsbClcbiAgICAgIHJldHVybiBjdXN0b21EZXRhaWxzO1xuICB9IGVsc2UgaWYgKE51bWJlci5pc05hTih2YWwpKSB7XG4gICAgcmV0dXJuIE5BTjtcbiAgfVxuICByZXR1cm4gc2FuaXRpemUodmFsKTtcbn1cblxuLy8gc3JjL3NoYXJlZC90cmFuc2Zlci50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBNQVhfU0VSSUFMSVpFRF9TSVpFID0gMiAqIDEwMjQgKiAxMDI0O1xuZnVuY3Rpb24gaXNPYmplY3QoX2RhdGEsIHByb3RvKSB7XG4gIHJldHVybiBwcm90byA9PT0gXCJbb2JqZWN0IE9iamVjdF1cIjtcbn1cbmZ1bmN0aW9uIGlzQXJyYXkzKF9kYXRhLCBwcm90bykge1xuICByZXR1cm4gcHJvdG8gPT09IFwiW29iamVjdCBBcnJheV1cIjtcbn1cbmZ1bmN0aW9uIGlzVnVlUmVhY3RpdmVMaW5rTm9kZShub2RlKSB7XG4gIHZhciBfYTI1O1xuICBjb25zdCBjb25zdHJ1Y3Rvck5hbWUgPSAoX2EyNSA9IG5vZGUgPT0gbnVsbCA/IHZvaWQgMCA6IG5vZGUuY29uc3RydWN0b3IpID09IG51bGwgPyB2b2lkIDAgOiBfYTI1Lm5hbWU7XG4gIHJldHVybiBjb25zdHJ1Y3Rvck5hbWUgPT09IFwiRGVwXCIgJiYgXCJhY3RpdmVMaW5rXCIgaW4gbm9kZSB8fCBjb25zdHJ1Y3Rvck5hbWUgPT09IFwiTGlua1wiICYmIFwiZGVwXCIgaW4gbm9kZTtcbn1cbmZ1bmN0aW9uIGVuY29kZShkYXRhLCByZXBsYWNlciwgbGlzdCwgc2VlbiwgZGVwdGggPSAwLCBzZWVuVnVlSW5zdGFuY2UgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpKSB7XG4gIGxldCBzdG9yZWQ7XG4gIGxldCBrZXk7XG4gIGxldCB2YWx1ZTtcbiAgbGV0IGk7XG4gIGxldCBsO1xuICBjb25zdCBzZWVuSW5kZXggPSBzZWVuLmdldChkYXRhKTtcbiAgaWYgKHNlZW5JbmRleCAhPSBudWxsKVxuICAgIHJldHVybiBzZWVuSW5kZXg7XG4gIGNvbnN0IGluZGV4ID0gbGlzdC5sZW5ndGg7XG4gIGNvbnN0IHByb3RvID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGRhdGEpO1xuICBpZiAoaXNPYmplY3QoZGF0YSwgcHJvdG8pKSB7XG4gICAgaWYgKGlzVnVlUmVhY3RpdmVMaW5rTm9kZShkYXRhKSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgICBzdG9yZWQgPSB7fTtcbiAgICBzZWVuLnNldChkYXRhLCBpbmRleCk7XG4gICAgbGlzdC5wdXNoKHN0b3JlZCk7XG4gICAgY29uc3Qga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIGZvciAoaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmIChrZXkgPT09IFwiY29tcGlsZXJPcHRpb25zXCIpXG4gICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgIHZhbHVlID0gZGF0YVtrZXldO1xuICAgICAgY29uc3QgaXNWbSA9IHZhbHVlICE9IG51bGwgJiYgaXNPYmplY3QodmFsdWUsIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhKSkgJiYgaXNWdWVJbnN0YW5jZSh2YWx1ZSk7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAocmVwbGFjZXIpIHtcbiAgICAgICAgICB2YWx1ZSA9IHJlcGxhY2VyLmNhbGwoZGF0YSwga2V5LCB2YWx1ZSwgZGVwdGgsIHNlZW5WdWVJbnN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdmFsdWUgPSBlO1xuICAgICAgfVxuICAgICAgc3RvcmVkW2tleV0gPSBlbmNvZGUodmFsdWUsIHJlcGxhY2VyLCBsaXN0LCBzZWVuLCBkZXB0aCArIDEsIHNlZW5WdWVJbnN0YW5jZSk7XG4gICAgICBpZiAoaXNWbSkge1xuICAgICAgICBzZWVuVnVlSW5zdGFuY2UuZGVsZXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheTMoZGF0YSwgcHJvdG8pKSB7XG4gICAgc3RvcmVkID0gW107XG4gICAgc2Vlbi5zZXQoZGF0YSwgaW5kZXgpO1xuICAgIGxpc3QucHVzaChzdG9yZWQpO1xuICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFsdWUgPSBkYXRhW2ldO1xuICAgICAgICBpZiAocmVwbGFjZXIpXG4gICAgICAgICAgdmFsdWUgPSByZXBsYWNlci5jYWxsKGRhdGEsIGksIHZhbHVlLCBkZXB0aCwgc2VlblZ1ZUluc3RhbmNlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgdmFsdWUgPSBlO1xuICAgICAgfVxuICAgICAgc3RvcmVkW2ldID0gZW5jb2RlKHZhbHVlLCByZXBsYWNlciwgbGlzdCwgc2VlbiwgZGVwdGggKyAxLCBzZWVuVnVlSW5zdGFuY2UpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaXN0LnB1c2goZGF0YSk7XG4gIH1cbiAgcmV0dXJuIGluZGV4O1xufVxuZnVuY3Rpb24gZGVjb2RlKGxpc3QsIHJldml2ZXIyID0gbnVsbCkge1xuICBsZXQgaSA9IGxpc3QubGVuZ3RoO1xuICBsZXQgaiwgaywgZGF0YSwga2V5LCB2YWx1ZSwgcHJvdG87XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkYXRhID0gbGlzdFtpXTtcbiAgICBwcm90byA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkYXRhKTtcbiAgICBpZiAocHJvdG8gPT09IFwiW29iamVjdCBPYmplY3RdXCIpIHtcbiAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcbiAgICAgIGZvciAoaiA9IDAsIGsgPSBrZXlzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICB2YWx1ZSA9IGxpc3RbZGF0YVtrZXldXTtcbiAgICAgICAgaWYgKHJldml2ZXIyKVxuICAgICAgICAgIHZhbHVlID0gcmV2aXZlcjIuY2FsbChkYXRhLCBrZXksIHZhbHVlKTtcbiAgICAgICAgZGF0YVtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChwcm90byA9PT0gXCJbb2JqZWN0IEFycmF5XVwiKSB7XG4gICAgICBmb3IgKGogPSAwLCBrID0gZGF0YS5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgdmFsdWUgPSBsaXN0W2RhdGFbal1dO1xuICAgICAgICBpZiAocmV2aXZlcjIpXG4gICAgICAgICAgdmFsdWUgPSByZXZpdmVyMi5jYWxsKGRhdGEsIGosIHZhbHVlKTtcbiAgICAgICAgZGF0YVtqXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuZnVuY3Rpb24gc3RyaW5naWZ5Q2lyY3VsYXJBdXRvQ2h1bmtzKGRhdGEsIHJlcGxhY2VyID0gbnVsbCwgc3BhY2UgPSBudWxsKSB7XG4gIGxldCByZXN1bHQ7XG4gIHRyeSB7XG4gICAgcmVzdWx0ID0gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogSlNPTi5zdHJpbmdpZnkoZGF0YSwgKGssIHYpID0+IHtcbiAgICAgIHZhciBfYTI1O1xuICAgICAgcmV0dXJuIChfYTI1ID0gcmVwbGFjZXIgPT0gbnVsbCA/IHZvaWQgMCA6IHJlcGxhY2VyKGssIHYpKSA9PSBudWxsID8gdm9pZCAwIDogX2EyNS5jYWxsKHRoaXMpO1xuICAgIH0sIHNwYWNlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJlc3VsdCA9IHN0cmluZ2lmeVN0cmljdENpcmN1bGFyQXV0b0NodW5rcyhkYXRhLCByZXBsYWNlciwgc3BhY2UpO1xuICB9XG4gIGlmIChyZXN1bHQubGVuZ3RoID4gTUFYX1NFUklBTElaRURfU0laRSkge1xuICAgIGNvbnN0IGNodW5rQ291bnQgPSBNYXRoLmNlaWwocmVzdWx0Lmxlbmd0aCAvIE1BWF9TRVJJQUxJWkVEX1NJWkUpO1xuICAgIGNvbnN0IGNodW5rcyA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2h1bmtDb3VudDsgaSsrKVxuICAgICAgY2h1bmtzLnB1c2gocmVzdWx0LnNsaWNlKGkgKiBNQVhfU0VSSUFMSVpFRF9TSVpFLCAoaSArIDEpICogTUFYX1NFUklBTElaRURfU0laRSkpO1xuICAgIHJldHVybiBjaHVua3M7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIHN0cmluZ2lmeVN0cmljdENpcmN1bGFyQXV0b0NodW5rcyhkYXRhLCByZXBsYWNlciA9IG51bGwsIHNwYWNlID0gbnVsbCkge1xuICBjb25zdCBsaXN0ID0gW107XG4gIGVuY29kZShkYXRhLCByZXBsYWNlciwgbGlzdCwgLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKSk7XG4gIHJldHVybiBzcGFjZSA/IGAgJHtKU09OLnN0cmluZ2lmeShsaXN0LCBudWxsLCBzcGFjZSl9YCA6IGAgJHtKU09OLnN0cmluZ2lmeShsaXN0KX1gO1xufVxuZnVuY3Rpb24gcGFyc2VDaXJjdWxhckF1dG9DaHVua3MoZGF0YSwgcmV2aXZlcjIgPSBudWxsKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KGRhdGEpKVxuICAgIGRhdGEgPSBkYXRhLmpvaW4oXCJcIik7XG4gIGNvbnN0IGhhc0NpcmN1bGFyID0gL15cXHMvLnRlc3QoZGF0YSk7XG4gIGlmICghaGFzQ2lyY3VsYXIpIHtcbiAgICByZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA9PT0gMSA/IEpTT04ucGFyc2UoZGF0YSkgOiBKU09OLnBhcnNlKGRhdGEsIHJldml2ZXIyKTtcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBsaXN0ID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICBkZWNvZGUobGlzdCwgcmV2aXZlcjIpO1xuICAgIHJldHVybiBsaXN0WzBdO1xuICB9XG59XG5cbi8vIHNyYy9zaGFyZWQvdXRpbC50c1xuZnVuY3Rpb24gc3RyaW5naWZ5MihkYXRhKSB7XG4gIHJldHVybiBzdHJpbmdpZnlDaXJjdWxhckF1dG9DaHVua3MoZGF0YSwgc3RyaW5naWZ5UmVwbGFjZXIpO1xufVxuZnVuY3Rpb24gcGFyc2UyKGRhdGEsIHJldml2ZTIgPSBmYWxzZSkge1xuICBpZiAoZGF0YSA9PSB2b2lkIDApXG4gICAgcmV0dXJuIHt9O1xuICByZXR1cm4gcmV2aXZlMiA/IHBhcnNlQ2lyY3VsYXJBdXRvQ2h1bmtzKGRhdGEsIHJldml2ZXIpIDogcGFyc2VDaXJjdWxhckF1dG9DaHVua3MoZGF0YSk7XG59XG5cbi8vIHNyYy9pbmRleC50c1xudmFyIGRldnRvb2xzID0ge1xuICBob29rLFxuICBpbml0OiAoKSA9PiB7XG4gICAgaW5pdERldlRvb2xzKCk7XG4gIH0sXG4gIGdldCBjdHgoKSB7XG4gICAgcmV0dXJuIGRldnRvb2xzQ29udGV4dDtcbiAgfSxcbiAgZ2V0IGFwaSgpIHtcbiAgICByZXR1cm4gZGV2dG9vbHNDb250ZXh0LmFwaTtcbiAgfVxufTtcbmV4cG9ydCB7XG4gIERldlRvb2xzQ29udGV4dEhvb2tLZXlzLFxuICBEZXZUb29sc01lc3NhZ2luZ0hvb2tLZXlzLFxuICBEZXZUb29sc1Y2UGx1Z2luQVBJSG9va0tleXMsXG4gIElORklOSVRZLFxuICBOQU4sXG4gIE5FR0FUSVZFX0lORklOSVRZLFxuICBST1VURVJfSU5GT19LRVksXG4gIFJPVVRFUl9LRVksXG4gIFVOREVGSU5FRCxcbiAgYWN0aXZlQXBwUmVjb3JkLFxuICBhZGRDdXN0b21Db21tYW5kLFxuICBhZGRDdXN0b21UYWIsXG4gIGFkZERldlRvb2xzQXBwUmVjb3JkLFxuICBhZGREZXZUb29sc1BsdWdpblRvQnVmZmVyLFxuICBhZGRJbnNwZWN0b3IsXG4gIGNhbGxDb25uZWN0ZWRVcGRhdGVkSG9vayxcbiAgY2FsbERldlRvb2xzUGx1Z2luU2V0dXBGbixcbiAgY2FsbEluc3BlY3RvclVwZGF0ZWRIb29rLFxuICBjYWxsU3RhdGVVcGRhdGVkSG9vayxcbiAgY3JlYXRlQ29tcG9uZW50c0RldlRvb2xzUGx1Z2luLFxuICBjcmVhdGVEZXZUb29sc0FwaSxcbiAgY3JlYXRlRGV2VG9vbHNDdHhIb29rcyxcbiAgY3JlYXRlUnBjQ2xpZW50LFxuICBjcmVhdGVScGNQcm94eSxcbiAgY3JlYXRlUnBjU2VydmVyLFxuICBkZXZ0b29scyxcbiAgZGV2dG9vbHNBcHBSZWNvcmRzLFxuICBkZXZ0b29sc0NvbnRleHQsXG4gIGRldnRvb2xzSW5zcGVjdG9yLFxuICBkZXZ0b29sc1BsdWdpbkJ1ZmZlcixcbiAgZGV2dG9vbHNSb3V0ZXIsXG4gIGRldnRvb2xzUm91dGVySW5mbyxcbiAgZGV2dG9vbHNTdGF0ZSxcbiAgZXNjYXBlLFxuICBmb3JtYXRJbnNwZWN0b3JTdGF0ZVZhbHVlLFxuICBnZXRBY3RpdmVJbnNwZWN0b3JzLFxuICBnZXREZXZUb29sc0VudixcbiAgZ2V0RXh0ZW5zaW9uQ2xpZW50Q29udGV4dCxcbiAgZ2V0SW5zcGVjdG9yLFxuICBnZXRJbnNwZWN0b3JBY3Rpb25zLFxuICBnZXRJbnNwZWN0b3JJbmZvLFxuICBnZXRJbnNwZWN0b3JOb2RlQWN0aW9ucyxcbiAgZ2V0SW5zcGVjdG9yU3RhdGVWYWx1ZVR5cGUsXG4gIGdldFJhdyxcbiAgZ2V0UnBjQ2xpZW50LFxuICBnZXRScGNTZXJ2ZXIsXG4gIGdldFZpdGVScGNDbGllbnQsXG4gIGdldFZpdGVScGNTZXJ2ZXIsXG4gIGluaXREZXZUb29scyxcbiAgaXNQbGFpbk9iamVjdCxcbiAgb25EZXZUb29sc0NsaWVudENvbm5lY3RlZCxcbiAgb25EZXZUb29sc0Nvbm5lY3RlZCxcbiAgcGFyc2UyIGFzIHBhcnNlLFxuICByZWdpc3RlckRldlRvb2xzUGx1Z2luLFxuICByZW1vdmVDdXN0b21Db21tYW5kLFxuICByZW1vdmVEZXZUb29sc0FwcFJlY29yZCxcbiAgcmVtb3ZlUmVnaXN0ZXJlZFBsdWdpbkFwcCxcbiAgcmVzZXREZXZUb29sc1N0YXRlLFxuICBzZXRBY3RpdmVBcHBSZWNvcmQsXG4gIHNldEFjdGl2ZUFwcFJlY29yZElkLFxuICBzZXREZXZUb29sc0VudixcbiAgc2V0RWxlY3Ryb25DbGllbnRDb250ZXh0LFxuICBzZXRFbGVjdHJvblByb3h5Q29udGV4dCxcbiAgc2V0RWxlY3Ryb25TZXJ2ZXJDb250ZXh0LFxuICBzZXRFeHRlbnNpb25DbGllbnRDb250ZXh0LFxuICBzZXRJZnJhbWVTZXJ2ZXJDb250ZXh0LFxuICBzZXRPcGVuSW5FZGl0b3JCYXNlVXJsLFxuICBzZXRScGNTZXJ2ZXJUb0dsb2JhbCxcbiAgc2V0Vml0ZUNsaWVudENvbnRleHQsXG4gIHNldFZpdGVScGNDbGllbnRUb0dsb2JhbCxcbiAgc2V0Vml0ZVJwY1NlcnZlclRvR2xvYmFsLFxuICBzZXRWaXRlU2VydmVyQ29udGV4dCxcbiAgc2V0dXBEZXZUb29sc1BsdWdpbixcbiAgc3RyaW5naWZ5MiBhcyBzdHJpbmdpZnksXG4gIHRvRWRpdCxcbiAgdG9TdWJtaXQsXG4gIHRvZ2dsZUNsaWVudENvbm5lY3RlZCxcbiAgdG9nZ2xlQ29tcG9uZW50SW5zcGVjdG9yRW5hYmxlZCxcbiAgdG9nZ2xlSGlnaFBlcmZNb2RlLFxuICB1cGRhdGVEZXZUb29sc0NsaWVudERldGVjdGVkLFxuICB1cGRhdGVEZXZUb29sc1N0YXRlLFxuICB1cGRhdGVUaW1lbGluZUxheWVyc1N0YXRlXG59O1xuIiwidmFyIF9fY3JlYXRlID0gT2JqZWN0LmNyZWF0ZTtcbnZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19nZXRPd25Qcm9wRGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I7XG52YXIgX19nZXRPd25Qcm9wTmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcztcbnZhciBfX2dldFByb3RvT2YgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX2VzbSA9IChmbiwgcmVzKSA9PiBmdW5jdGlvbiBfX2luaXQoKSB7XG4gIHJldHVybiBmbiAmJiAocmVzID0gKDAsIGZuW19fZ2V0T3duUHJvcE5hbWVzKGZuKVswXV0pKGZuID0gMCkpLCByZXM7XG59O1xudmFyIF9fY29tbW9uSlMgPSAoY2IsIG1vZCkgPT4gZnVuY3Rpb24gX19yZXF1aXJlKCkge1xuICByZXR1cm4gbW9kIHx8ICgwLCBjYltfX2dldE93blByb3BOYW1lcyhjYilbMF1dKSgobW9kID0geyBleHBvcnRzOiB7fSB9KS5leHBvcnRzLCBtb2QpLCBtb2QuZXhwb3J0cztcbn07XG52YXIgX19jb3B5UHJvcHMgPSAodG8sIGZyb20sIGV4Y2VwdCwgZGVzYykgPT4ge1xuICBpZiAoZnJvbSAmJiB0eXBlb2YgZnJvbSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgZnJvbSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZm9yIChsZXQga2V5IG9mIF9fZ2V0T3duUHJvcE5hbWVzKGZyb20pKVxuICAgICAgaWYgKCFfX2hhc093blByb3AuY2FsbCh0bywga2V5KSAmJiBrZXkgIT09IGV4Y2VwdClcbiAgICAgICAgX19kZWZQcm9wKHRvLCBrZXksIHsgZ2V0OiAoKSA9PiBmcm9tW2tleV0sIGVudW1lcmFibGU6ICEoZGVzYyA9IF9fZ2V0T3duUHJvcERlc2MoZnJvbSwga2V5KSkgfHwgZGVzYy5lbnVtZXJhYmxlIH0pO1xuICB9XG4gIHJldHVybiB0bztcbn07XG52YXIgX190b0VTTSA9IChtb2QsIGlzTm9kZU1vZGUsIHRhcmdldDIpID0+ICh0YXJnZXQyID0gbW9kICE9IG51bGwgPyBfX2NyZWF0ZShfX2dldFByb3RvT2YobW9kKSkgOiB7fSwgX19jb3B5UHJvcHMoXG4gIC8vIElmIHRoZSBpbXBvcnRlciBpcyBpbiBub2RlIGNvbXBhdGliaWxpdHkgbW9kZSBvciB0aGlzIGlzIG5vdCBhbiBFU01cbiAgLy8gZmlsZSB0aGF0IGhhcyBiZWVuIGNvbnZlcnRlZCB0byBhIENvbW1vbkpTIGZpbGUgdXNpbmcgYSBCYWJlbC1cbiAgLy8gY29tcGF0aWJsZSB0cmFuc2Zvcm0gKGkuZS4gXCJfX2VzTW9kdWxlXCIgaGFzIG5vdCBiZWVuIHNldCksIHRoZW4gc2V0XG4gIC8vIFwiZGVmYXVsdFwiIHRvIHRoZSBDb21tb25KUyBcIm1vZHVsZS5leHBvcnRzXCIgZm9yIG5vZGUgY29tcGF0aWJpbGl0eS5cbiAgaXNOb2RlTW9kZSB8fCAhbW9kIHx8ICFtb2QuX19lc01vZHVsZSA/IF9fZGVmUHJvcCh0YXJnZXQyLCBcImRlZmF1bHRcIiwgeyB2YWx1ZTogbW9kLCBlbnVtZXJhYmxlOiB0cnVlIH0pIDogdGFyZ2V0MixcbiAgbW9kXG4pKTtcblxuLy8gLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3RzdXBAOC40LjBfQG1pY3Jvc29mdCthcGktZXh0cmFjdG9yQDcuNTEuMV9AdHlwZXMrbm9kZUAyMi4xMy4xNF9faml0aUAyLjQuMl9wb3N0Y3NzQDguNV85NmViMDVhOWQ2NTM0MzAyMWU1Mzc5MWRkODNmMzc3My9ub2RlX21vZHVsZXMvdHN1cC9hc3NldHMvZXNtX3NoaW1zLmpzXG52YXIgaW5pdF9lc21fc2hpbXMgPSBfX2VzbSh7XG4gIFwiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3RzdXBAOC40LjBfQG1pY3Jvc29mdCthcGktZXh0cmFjdG9yQDcuNTEuMV9AdHlwZXMrbm9kZUAyMi4xMy4xNF9faml0aUAyLjQuMl9wb3N0Y3NzQDguNV85NmViMDVhOWQ2NTM0MzAyMWU1Mzc5MWRkODNmMzc3My9ub2RlX21vZHVsZXMvdHN1cC9hc3NldHMvZXNtX3NoaW1zLmpzXCIoKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gIH1cbn0pO1xuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vcmZkY0AxLjQuMS9ub2RlX21vZHVsZXMvcmZkYy9pbmRleC5qc1xudmFyIHJlcXVpcmVfcmZkYyA9IF9fY29tbW9uSlMoe1xuICBcIi4uLy4uL25vZGVfbW9kdWxlcy8ucG5wbS9yZmRjQDEuNC4xL25vZGVfbW9kdWxlcy9yZmRjL2luZGV4LmpzXCIoZXhwb3J0cywgbW9kdWxlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaW5pdF9lc21fc2hpbXMoKTtcbiAgICBtb2R1bGUuZXhwb3J0cyA9IHJmZGMyO1xuICAgIGZ1bmN0aW9uIGNvcHlCdWZmZXIoY3VyKSB7XG4gICAgICBpZiAoY3VyIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShjdXIpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ldyBjdXIuY29uc3RydWN0b3IoY3VyLmJ1ZmZlci5zbGljZSgpLCBjdXIuYnl0ZU9mZnNldCwgY3VyLmxlbmd0aCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIHJmZGMyKG9wdHMpIHtcbiAgICAgIG9wdHMgPSBvcHRzIHx8IHt9O1xuICAgICAgaWYgKG9wdHMuY2lyY2xlcykgcmV0dXJuIHJmZGNDaXJjbGVzKG9wdHMpO1xuICAgICAgY29uc3QgY29uc3RydWN0b3JIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBjb25zdHJ1Y3RvckhhbmRsZXJzLnNldChEYXRlLCAobykgPT4gbmV3IERhdGUobykpO1xuICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoTWFwLCAobywgZm4pID0+IG5ldyBNYXAoY2xvbmVBcnJheShBcnJheS5mcm9tKG8pLCBmbikpKTtcbiAgICAgIGNvbnN0cnVjdG9ySGFuZGxlcnMuc2V0KFNldCwgKG8sIGZuKSA9PiBuZXcgU2V0KGNsb25lQXJyYXkoQXJyYXkuZnJvbShvKSwgZm4pKSk7XG4gICAgICBpZiAob3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlcjIgb2Ygb3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoaGFuZGxlcjJbMF0sIGhhbmRsZXIyWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhhbmRsZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIG9wdHMucHJvdG8gPyBjbG9uZVByb3RvIDogY2xvbmU7XG4gICAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGEsIGZuKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgY29uc3QgYTIgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBhW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYTJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBhMltrXSA9IGhhbmRsZXIoY3VyLCBmbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgYTJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGEyW2tdID0gZm4oY3VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGEyO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2xvbmUobykge1xuICAgICAgICBpZiAodHlwZW9mIG8gIT09IFwib2JqZWN0XCIgfHwgbyA9PT0gbnVsbCkgcmV0dXJuIG87XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pKSByZXR1cm4gY2xvbmVBcnJheShvLCBjbG9uZSk7XG4gICAgICAgIGlmIChvLmNvbnN0cnVjdG9yICE9PSBPYmplY3QgJiYgKGhhbmRsZXIgPSBjb25zdHJ1Y3RvckhhbmRsZXJzLmdldChvLmNvbnN0cnVjdG9yKSkpIHtcbiAgICAgICAgICByZXR1cm4gaGFuZGxlcihvLCBjbG9uZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbzIgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobywgaykgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgbzJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG8yW2tdID0gY2xvbmUoY3VyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG8yO1xuICAgICAgfVxuICAgICAgZnVuY3Rpb24gY2xvbmVQcm90byhvKSB7XG4gICAgICAgIGlmICh0eXBlb2YgbyAhPT0gXCJvYmplY3RcIiB8fCBvID09PSBudWxsKSByZXR1cm4gbztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobykpIHJldHVybiBjbG9uZUFycmF5KG8sIGNsb25lUHJvdG8pO1xuICAgICAgICBpZiAoby5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ICYmIChoYW5kbGVyID0gY29uc3RydWN0b3JIYW5kbGVycy5nZXQoby5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIobywgY2xvbmVQcm90byk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbzIgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZVByb3RvKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhjdXIpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGNvcHlCdWZmZXIoY3VyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbzJba10gPSBjbG9uZVByb3RvKGN1cik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvMjtcbiAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gcmZkY0NpcmNsZXMob3B0cykge1xuICAgICAgY29uc3QgcmVmcyA9IFtdO1xuICAgICAgY29uc3QgcmVmc05ldyA9IFtdO1xuICAgICAgY29uc3QgY29uc3RydWN0b3JIYW5kbGVycyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7XG4gICAgICBjb25zdHJ1Y3RvckhhbmRsZXJzLnNldChEYXRlLCAobykgPT4gbmV3IERhdGUobykpO1xuICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoTWFwLCAobywgZm4pID0+IG5ldyBNYXAoY2xvbmVBcnJheShBcnJheS5mcm9tKG8pLCBmbikpKTtcbiAgICAgIGNvbnN0cnVjdG9ySGFuZGxlcnMuc2V0KFNldCwgKG8sIGZuKSA9PiBuZXcgU2V0KGNsb25lQXJyYXkoQXJyYXkuZnJvbShvKSwgZm4pKSk7XG4gICAgICBpZiAob3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgIGZvciAoY29uc3QgaGFuZGxlcjIgb2Ygb3B0cy5jb25zdHJ1Y3RvckhhbmRsZXJzKSB7XG4gICAgICAgICAgY29uc3RydWN0b3JIYW5kbGVycy5zZXQoaGFuZGxlcjJbMF0sIGhhbmRsZXIyWzFdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgbGV0IGhhbmRsZXIgPSBudWxsO1xuICAgICAgcmV0dXJuIG9wdHMucHJvdG8gPyBjbG9uZVByb3RvIDogY2xvbmU7XG4gICAgICBmdW5jdGlvbiBjbG9uZUFycmF5KGEsIGZuKSB7XG4gICAgICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhhKTtcbiAgICAgICAgY29uc3QgYTIgPSBuZXcgQXJyYXkoa2V5cy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBrID0ga2V5c1tpXTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBhW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgYTJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBhMltrXSA9IGhhbmRsZXIoY3VyLCBmbik7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgYTJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gcmVmcy5pbmRleE9mKGN1cik7XG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGEyW2tdID0gcmVmc05ld1tpbmRleF07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhMltrXSA9IGZuKGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhMjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNsb25lKG8pIHtcbiAgICAgICAgaWYgKHR5cGVvZiBvICE9PSBcIm9iamVjdFwiIHx8IG8gPT09IG51bGwpIHJldHVybiBvO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShvKSkgcmV0dXJuIGNsb25lQXJyYXkobywgY2xvbmUpO1xuICAgICAgICBpZiAoby5jb25zdHJ1Y3RvciAhPT0gT2JqZWN0ICYmIChoYW5kbGVyID0gY29uc3RydWN0b3JIYW5kbGVycy5nZXQoby5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgcmV0dXJuIGhhbmRsZXIobywgY2xvbmUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8yID0ge307XG4gICAgICAgIHJlZnMucHVzaChvKTtcbiAgICAgICAgcmVmc05ldy5wdXNoKG8yKTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobywgaykgPT09IGZhbHNlKSBjb250aW51ZTtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZSk7XG4gICAgICAgICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoY3VyKSkge1xuICAgICAgICAgICAgbzJba10gPSBjb3B5QnVmZmVyKGN1cik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByZWZzLmluZGV4T2YoY3VyKTtcbiAgICAgICAgICAgIGlmIChpICE9PSAtMSkge1xuICAgICAgICAgICAgICBvMltrXSA9IHJlZnNOZXdbaV07XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBvMltrXSA9IGNsb25lKGN1cik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJlZnMucG9wKCk7XG4gICAgICAgIHJlZnNOZXcucG9wKCk7XG4gICAgICAgIHJldHVybiBvMjtcbiAgICAgIH1cbiAgICAgIGZ1bmN0aW9uIGNsb25lUHJvdG8obykge1xuICAgICAgICBpZiAodHlwZW9mIG8gIT09IFwib2JqZWN0XCIgfHwgbyA9PT0gbnVsbCkgcmV0dXJuIG87XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KG8pKSByZXR1cm4gY2xvbmVBcnJheShvLCBjbG9uZVByb3RvKTtcbiAgICAgICAgaWYgKG8uY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KG8uY29uc3RydWN0b3IpKSkge1xuICAgICAgICAgIHJldHVybiBoYW5kbGVyKG8sIGNsb25lUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8yID0ge307XG4gICAgICAgIHJlZnMucHVzaChvKTtcbiAgICAgICAgcmVmc05ldy5wdXNoKG8yKTtcbiAgICAgICAgZm9yIChjb25zdCBrIGluIG8pIHtcbiAgICAgICAgICBjb25zdCBjdXIgPSBvW2tdO1xuICAgICAgICAgIGlmICh0eXBlb2YgY3VyICE9PSBcIm9iamVjdFwiIHx8IGN1ciA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbzJba10gPSBjdXI7XG4gICAgICAgICAgfSBlbHNlIGlmIChjdXIuY29uc3RydWN0b3IgIT09IE9iamVjdCAmJiAoaGFuZGxlciA9IGNvbnN0cnVjdG9ySGFuZGxlcnMuZ2V0KGN1ci5jb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGhhbmRsZXIoY3VyLCBjbG9uZVByb3RvKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKEFycmF5QnVmZmVyLmlzVmlldyhjdXIpKSB7XG4gICAgICAgICAgICBvMltrXSA9IGNvcHlCdWZmZXIoY3VyKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaSA9IHJlZnMuaW5kZXhPZihjdXIpO1xuICAgICAgICAgICAgaWYgKGkgIT09IC0xKSB7XG4gICAgICAgICAgICAgIG8yW2tdID0gcmVmc05ld1tpXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIG8yW2tdID0gY2xvbmVQcm90byhjdXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZWZzLnBvcCgpO1xuICAgICAgICByZWZzTmV3LnBvcCgpO1xuICAgICAgICByZXR1cm4gbzI7XG4gICAgICB9XG4gICAgfVxuICB9XG59KTtcblxuLy8gc3JjL2luZGV4LnRzXG5pbml0X2VzbV9zaGltcygpO1xuXG4vLyBzcmMvY29uc3RhbnRzLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIFZJRVdfTU9ERV9TVE9SQUdFX0tFWSA9IFwiX192dWUtZGV2dG9vbHMtdmlldy1tb2RlX19cIjtcbnZhciBWSVRFX1BMVUdJTl9ERVRFQ1RFRF9TVE9SQUdFX0tFWSA9IFwiX192dWUtZGV2dG9vbHMtdml0ZS1wbHVnaW4tZGV0ZWN0ZWRfX1wiO1xudmFyIFZJVEVfUExVR0lOX0NMSUVOVF9VUkxfU1RPUkFHRV9LRVkgPSBcIl9fdnVlLWRldnRvb2xzLXZpdGUtcGx1Z2luLWNsaWVudC11cmxfX1wiO1xudmFyIEJST0FEQ0FTVF9DSEFOTkVMX05BTUUgPSBcIl9fdnVlLWRldnRvb2xzLWJyb2FkY2FzdC1jaGFubmVsX19cIjtcblxuLy8gc3JjL2Vudi50c1xuaW5pdF9lc21fc2hpbXMoKTtcbnZhciBpc0Jyb3dzZXIgPSB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiO1xudmFyIHRhcmdldCA9IHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIiA/IGdsb2JhbFRoaXMgOiB0eXBlb2YgZ2xvYmFsICE9PSBcInVuZGVmaW5lZFwiID8gZ2xvYmFsIDoge307XG52YXIgaXNJbkNocm9tZVBhbmVsID0gdHlwZW9mIHRhcmdldC5jaHJvbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgISF0YXJnZXQuY2hyb21lLmRldnRvb2xzO1xudmFyIGlzSW5JZnJhbWUgPSBpc0Jyb3dzZXIgJiYgdGFyZ2V0LnNlbGYgIT09IHRhcmdldC50b3A7XG52YXIgX2E7XG52YXIgaXNJbkVsZWN0cm9uID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gXCJ1bmRlZmluZWRcIiAmJiAoKF9hID0gbmF2aWdhdG9yLnVzZXJBZ2VudCkgPT0gbnVsbCA/IHZvaWQgMCA6IF9hLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJlbGVjdHJvblwiKSk7XG52YXIgaXNOdXh0QXBwID0gdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhIXdpbmRvdy5fX05VWFRfXztcbnZhciBpc0luU2VwYXJhdGVXaW5kb3cgPSAhaXNJbklmcmFtZSAmJiAhaXNJbkNocm9tZVBhbmVsICYmICFpc0luRWxlY3Ryb247XG5cbi8vIHNyYy9nZW5lcmFsLnRzXG5pbml0X2VzbV9zaGltcygpO1xudmFyIGltcG9ydF9yZmRjID0gX190b0VTTShyZXF1aXJlX3JmZGMoKSwgMSk7XG5mdW5jdGlvbiBOT09QKCkge1xufVxudmFyIGlzTnVtZXJpYyA9IChzdHIpID0+IGAkeytzdHJ9YCA9PT0gc3RyO1xudmFyIGlzTWFjT1MgPSAoKSA9PiAobmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IucGxhdGZvcm0pID8gbmF2aWdhdG9yID09IG51bGwgPyB2b2lkIDAgOiBuYXZpZ2F0b3IucGxhdGZvcm0udG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhcIm1hY1wiKSA6IC9NYWNpbnRvc2gvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstXy9dKShcXHcpL2c7XG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcbnZhciBrZWJhYml6ZVJFID0gLyhbYS16MC05XSkoW0EtWl0pL2c7XG5mdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiBcIlwiO1xufVxuZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHJldHVybiBzdHIgJiYgYCR7c3RyfWAucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbn1cbmZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuICByZXR1cm4gc3RyICYmIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xufVxuZnVuY3Rpb24ga2ViYWJpemUoc3RyKSB7XG4gIHJldHVybiBzdHIgJiYgc3RyLnJlcGxhY2Uoa2ViYWJpemVSRSwgKF8sIGxvd2VyQ2FzZUNoYXJhY3RlciwgdXBwZXJDYXNlTGV0dGVyKSA9PiB7XG4gICAgcmV0dXJuIGAke2xvd2VyQ2FzZUNoYXJhY3Rlcn0tJHt1cHBlckNhc2VMZXR0ZXJ9YDtcbiAgfSkudG9Mb3dlckNhc2UoKTtcbn1cbmZ1bmN0aW9uIGJhc2VuYW1lKGZpbGVuYW1lLCBleHQpIHtcbiAgbGV0IG5vcm1hbGl6ZWRGaWxlbmFtZSA9IGZpbGVuYW1lLnJlcGxhY2UoL15bYS16XTovaSwgXCJcIikucmVwbGFjZSgvXFxcXC9nLCBcIi9cIik7XG4gIGlmIChub3JtYWxpemVkRmlsZW5hbWUuZW5kc1dpdGgoYGluZGV4JHtleHR9YCkpIHtcbiAgICBub3JtYWxpemVkRmlsZW5hbWUgPSBub3JtYWxpemVkRmlsZW5hbWUucmVwbGFjZShgL2luZGV4JHtleHR9YCwgZXh0KTtcbiAgfVxuICBjb25zdCBsYXN0U2xhc2hJbmRleCA9IG5vcm1hbGl6ZWRGaWxlbmFtZS5sYXN0SW5kZXhPZihcIi9cIik7XG4gIGNvbnN0IGJhc2VOYW1lV2l0aEV4dCA9IG5vcm1hbGl6ZWRGaWxlbmFtZS5zdWJzdHJpbmcobGFzdFNsYXNoSW5kZXggKyAxKTtcbiAgaWYgKGV4dCkge1xuICAgIGNvbnN0IGV4dEluZGV4ID0gYmFzZU5hbWVXaXRoRXh0Lmxhc3RJbmRleE9mKGV4dCk7XG4gICAgcmV0dXJuIGJhc2VOYW1lV2l0aEV4dC5zdWJzdHJpbmcoMCwgZXh0SW5kZXgpO1xuICB9XG4gIHJldHVybiBcIlwiO1xufVxuZnVuY3Rpb24gc29ydEJ5S2V5KHN0YXRlKSB7XG4gIHJldHVybiBzdGF0ZSAmJiBzdGF0ZS5zbGljZSgpLnNvcnQoKGEsIGIpID0+IHtcbiAgICBpZiAoYS5rZXkgPCBiLmtleSlcbiAgICAgIHJldHVybiAtMTtcbiAgICBpZiAoYS5rZXkgPiBiLmtleSlcbiAgICAgIHJldHVybiAxO1xuICAgIHJldHVybiAwO1xuICB9KTtcbn1cbnZhciBIVFRQX1VSTF9SRSA9IC9eaHR0cHM/OlxcL1xcLy87XG5mdW5jdGlvbiBpc1VybFN0cmluZyhzdHIpIHtcbiAgcmV0dXJuIHN0ci5zdGFydHNXaXRoKFwiL1wiKSB8fCBIVFRQX1VSTF9SRS50ZXN0KHN0cik7XG59XG52YXIgZGVlcENsb25lID0gKDAsIGltcG9ydF9yZmRjLmRlZmF1bHQpKHsgY2lyY2xlczogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHJhbmRvbVN0cigpIHtcbiAgcmV0dXJuIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpO1xufVxuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gXCJvYmplY3RcIiAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUgIT09IG51bGw7XG59XG5mdW5jdGlvbiBpc0FycmF5KHZhbHVlKSB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cbmZ1bmN0aW9uIGlzU2V0KHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFNldDtcbn1cbmZ1bmN0aW9uIGlzTWFwKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIE1hcDtcbn1cbmV4cG9ydCB7XG4gIEJST0FEQ0FTVF9DSEFOTkVMX05BTUUsXG4gIE5PT1AsXG4gIFZJRVdfTU9ERV9TVE9SQUdFX0tFWSxcbiAgVklURV9QTFVHSU5fQ0xJRU5UX1VSTF9TVE9SQUdFX0tFWSxcbiAgVklURV9QTFVHSU5fREVURUNURURfU1RPUkFHRV9LRVksXG4gIGJhc2VuYW1lLFxuICBjYW1lbGl6ZSxcbiAgY2xhc3NpZnksXG4gIGRlZXBDbG9uZSxcbiAgaXNBcnJheSxcbiAgaXNCcm93c2VyLFxuICBpc0luQ2hyb21lUGFuZWwsXG4gIGlzSW5FbGVjdHJvbixcbiAgaXNJbklmcmFtZSxcbiAgaXNJblNlcGFyYXRlV2luZG93LFxuICBpc01hY09TLFxuICBpc01hcCxcbiAgaXNOdW1lcmljLFxuICBpc051eHRBcHAsXG4gIGlzT2JqZWN0LFxuICBpc1NldCxcbiAgaXNVcmxTdHJpbmcsXG4gIGtlYmFiaXplLFxuICByYW5kb21TdHIsXG4gIHNvcnRCeUtleSxcbiAgdGFyZ2V0XG59O1xuIiwiY29uc3QgVFlQRV9SRVFVRVNUID0gXCJxXCI7XG5jb25zdCBUWVBFX1JFU1BPTlNFID0gXCJzXCI7XG5jb25zdCBERUZBVUxUX1RJTUVPVVQgPSA2ZTQ7XG5mdW5jdGlvbiBkZWZhdWx0U2VyaWFsaXplKGkpIHtcbiAgcmV0dXJuIGk7XG59XG5jb25zdCBkZWZhdWx0RGVzZXJpYWxpemUgPSBkZWZhdWx0U2VyaWFsaXplO1xuY29uc3QgeyBjbGVhclRpbWVvdXQsIHNldFRpbWVvdXQgfSA9IGdsb2JhbFRoaXM7XG5jb25zdCByYW5kb20gPSBNYXRoLnJhbmRvbS5iaW5kKE1hdGgpO1xuZnVuY3Rpb24gY3JlYXRlQmlycGMoZnVuY3Rpb25zLCBvcHRpb25zKSB7XG4gIGNvbnN0IHtcbiAgICBwb3N0LFxuICAgIG9uLFxuICAgIG9mZiA9ICgpID0+IHtcbiAgICB9LFxuICAgIGV2ZW50TmFtZXMgPSBbXSxcbiAgICBzZXJpYWxpemUgPSBkZWZhdWx0U2VyaWFsaXplLFxuICAgIGRlc2VyaWFsaXplID0gZGVmYXVsdERlc2VyaWFsaXplLFxuICAgIHJlc29sdmVyLFxuICAgIGJpbmQgPSBcInJwY1wiLFxuICAgIHRpbWVvdXQgPSBERUZBVUxUX1RJTUVPVVRcbiAgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHJwY1Byb21pc2VNYXAgPSAvKiBAX19QVVJFX18gKi8gbmV3IE1hcCgpO1xuICBsZXQgX3Byb21pc2U7XG4gIGxldCBjbG9zZWQgPSBmYWxzZTtcbiAgY29uc3QgcnBjID0gbmV3IFByb3h5KHt9LCB7XG4gICAgZ2V0KF8sIG1ldGhvZCkge1xuICAgICAgaWYgKG1ldGhvZCA9PT0gXCIkZnVuY3Rpb25zXCIpXG4gICAgICAgIHJldHVybiBmdW5jdGlvbnM7XG4gICAgICBpZiAobWV0aG9kID09PSBcIiRjbG9zZVwiKVxuICAgICAgICByZXR1cm4gY2xvc2U7XG4gICAgICBpZiAobWV0aG9kID09PSBcIiRyZWplY3RQZW5kaW5nQ2FsbHNcIikge1xuICAgICAgICByZXR1cm4gcmVqZWN0UGVuZGluZ0NhbGxzO1xuICAgICAgfVxuICAgICAgaWYgKG1ldGhvZCA9PT0gXCIkY2xvc2VkXCIpXG4gICAgICAgIHJldHVybiBjbG9zZWQ7XG4gICAgICBpZiAobWV0aG9kID09PSBcInRoZW5cIiAmJiAhZXZlbnROYW1lcy5pbmNsdWRlcyhcInRoZW5cIikgJiYgIShcInRoZW5cIiBpbiBmdW5jdGlvbnMpKVxuICAgICAgICByZXR1cm4gdm9pZCAwO1xuICAgICAgY29uc3Qgc2VuZEV2ZW50ID0gKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgcG9zdChzZXJpYWxpemUoeyBtOiBtZXRob2QsIGE6IGFyZ3MsIHQ6IFRZUEVfUkVRVUVTVCB9KSk7XG4gICAgICB9O1xuICAgICAgaWYgKGV2ZW50TmFtZXMuaW5jbHVkZXMobWV0aG9kKSkge1xuICAgICAgICBzZW5kRXZlbnQuYXNFdmVudCA9IHNlbmRFdmVudDtcbiAgICAgICAgcmV0dXJuIHNlbmRFdmVudDtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNlbmRDYWxsID0gYXN5bmMgKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKGNsb3NlZClcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFtiaXJwY10gcnBjIGlzIGNsb3NlZCwgY2Fubm90IGNhbGwgXCIke21ldGhvZH1cImApO1xuICAgICAgICBpZiAoX3Byb21pc2UpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgX3Byb21pc2U7XG4gICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIF9wcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGlkID0gbmFub2lkKCk7XG4gICAgICAgICAgbGV0IHRpbWVvdXRJZDtcbiAgICAgICAgICBpZiAodGltZW91dCA+PSAwKSB7XG4gICAgICAgICAgICB0aW1lb3V0SWQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBjb25zdCBoYW5kbGVSZXN1bHQgPSBvcHRpb25zLm9uVGltZW91dEVycm9yPy4obWV0aG9kLCBhcmdzKTtcbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlUmVzdWx0ICE9PSB0cnVlKVxuICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBbYmlycGNdIHRpbWVvdXQgb24gY2FsbGluZyBcIiR7bWV0aG9kfVwiYCk7XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgcnBjUHJvbWlzZU1hcC5kZWxldGUoaWQpO1xuICAgICAgICAgICAgfSwgdGltZW91dCk7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHRpbWVvdXRJZCA9PT0gXCJvYmplY3RcIilcbiAgICAgICAgICAgICAgdGltZW91dElkID0gdGltZW91dElkLnVucmVmPy4oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcnBjUHJvbWlzZU1hcC5zZXQoaWQsIHsgcmVzb2x2ZSwgcmVqZWN0LCB0aW1lb3V0SWQsIG1ldGhvZCB9KTtcbiAgICAgICAgICBwb3N0KHNlcmlhbGl6ZSh7IG06IG1ldGhvZCwgYTogYXJncywgaTogaWQsIHQ6IFwicVwiIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgc2VuZENhbGwuYXNFdmVudCA9IHNlbmRFdmVudDtcbiAgICAgIHJldHVybiBzZW5kQ2FsbDtcbiAgICB9XG4gIH0pO1xuICBmdW5jdGlvbiBjbG9zZShjdXN0b21FcnJvcikge1xuICAgIGNsb3NlZCA9IHRydWU7XG4gICAgcnBjUHJvbWlzZU1hcC5mb3JFYWNoKCh7IHJlamVjdCwgbWV0aG9kIH0pID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKGBbYmlycGNdIHJwYyBpcyBjbG9zZWQsIGNhbm5vdCBjYWxsIFwiJHttZXRob2R9XCJgKTtcbiAgICAgIGlmIChjdXN0b21FcnJvcikge1xuICAgICAgICBjdXN0b21FcnJvci5jYXVzZSA/Pz0gZXJyb3I7XG4gICAgICAgIHJldHVybiByZWplY3QoY3VzdG9tRXJyb3IpO1xuICAgICAgfVxuICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICB9KTtcbiAgICBycGNQcm9taXNlTWFwLmNsZWFyKCk7XG4gICAgb2ZmKG9uTWVzc2FnZSk7XG4gIH1cbiAgZnVuY3Rpb24gcmVqZWN0UGVuZGluZ0NhbGxzKGhhbmRsZXIpIHtcbiAgICBjb25zdCBlbnRyaWVzID0gQXJyYXkuZnJvbShycGNQcm9taXNlTWFwLnZhbHVlcygpKTtcbiAgICBjb25zdCBoYW5kbGVyUmVzdWx0cyA9IGVudHJpZXMubWFwKCh7IG1ldGhvZCwgcmVqZWN0IH0pID0+IHtcbiAgICAgIGlmICghaGFuZGxlcikge1xuICAgICAgICByZXR1cm4gcmVqZWN0KG5ldyBFcnJvcihgW2JpcnBjXTogcmVqZWN0ZWQgcGVuZGluZyBjYWxsIFwiJHttZXRob2R9XCIuYCkpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhbmRsZXIoeyBtZXRob2QsIHJlamVjdCB9KTtcbiAgICB9KTtcbiAgICBycGNQcm9taXNlTWFwLmNsZWFyKCk7XG4gICAgcmV0dXJuIGhhbmRsZXJSZXN1bHRzO1xuICB9XG4gIGFzeW5jIGZ1bmN0aW9uIG9uTWVzc2FnZShkYXRhLCAuLi5leHRyYSkge1xuICAgIGxldCBtc2c7XG4gICAgdHJ5IHtcbiAgICAgIG1zZyA9IGRlc2VyaWFsaXplKGRhdGEpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIGlmIChvcHRpb25zLm9uR2VuZXJhbEVycm9yPy4oZSkgIT09IHRydWUpXG4gICAgICAgIHRocm93IGU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChtc2cudCA9PT0gVFlQRV9SRVFVRVNUKSB7XG4gICAgICBjb25zdCB7IG06IG1ldGhvZCwgYTogYXJncyB9ID0gbXNnO1xuICAgICAgbGV0IHJlc3VsdCwgZXJyb3I7XG4gICAgICBjb25zdCBmbiA9IHJlc29sdmVyID8gcmVzb2x2ZXIobWV0aG9kLCBmdW5jdGlvbnNbbWV0aG9kXSkgOiBmdW5jdGlvbnNbbWV0aG9kXTtcbiAgICAgIGlmICghZm4pIHtcbiAgICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoYFtiaXJwY10gZnVuY3Rpb24gXCIke21ldGhvZH1cIiBub3QgZm91bmRgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZm4uYXBwbHkoYmluZCA9PT0gXCJycGNcIiA/IHJwYyA6IGZ1bmN0aW9ucywgYXJncyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBlcnJvciA9IGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChtc2cuaSkge1xuICAgICAgICBpZiAoZXJyb3IgJiYgb3B0aW9ucy5vbkVycm9yKVxuICAgICAgICAgIG9wdGlvbnMub25FcnJvcihlcnJvciwgbWV0aG9kLCBhcmdzKTtcbiAgICAgICAgaWYgKGVycm9yICYmIG9wdGlvbnMub25GdW5jdGlvbkVycm9yKSB7XG4gICAgICAgICAgaWYgKG9wdGlvbnMub25GdW5jdGlvbkVycm9yKGVycm9yLCBtZXRob2QsIGFyZ3MpID09PSB0cnVlKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcG9zdChzZXJpYWxpemUoeyB0OiBUWVBFX1JFU1BPTlNFLCBpOiBtc2cuaSwgcjogcmVzdWx0IH0pLCAuLi5leHRyYSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgZXJyb3IgPSBlO1xuICAgICAgICAgICAgaWYgKG9wdGlvbnMub25HZW5lcmFsRXJyb3I/LihlLCBtZXRob2QsIGFyZ3MpICE9PSB0cnVlKVxuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0cnkge1xuICAgICAgICAgIHBvc3Qoc2VyaWFsaXplKHsgdDogVFlQRV9SRVNQT05TRSwgaTogbXNnLmksIGU6IGVycm9yIH0pLCAuLi5leHRyYSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBpZiAob3B0aW9ucy5vbkdlbmVyYWxFcnJvcj8uKGUsIG1ldGhvZCwgYXJncykgIT09IHRydWUpXG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IHsgaTogYWNrLCByOiByZXN1bHQsIGU6IGVycm9yIH0gPSBtc2c7XG4gICAgICBjb25zdCBwcm9taXNlID0gcnBjUHJvbWlzZU1hcC5nZXQoYWNrKTtcbiAgICAgIGlmIChwcm9taXNlKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChwcm9taXNlLnRpbWVvdXRJZCk7XG4gICAgICAgIGlmIChlcnJvcilcbiAgICAgICAgICBwcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICBwcm9taXNlLnJlc29sdmUocmVzdWx0KTtcbiAgICAgIH1cbiAgICAgIHJwY1Byb21pc2VNYXAuZGVsZXRlKGFjayk7XG4gICAgfVxuICB9XG4gIF9wcm9taXNlID0gb24ob25NZXNzYWdlKTtcbiAgcmV0dXJuIHJwYztcbn1cbmNvbnN0IGNhY2hlTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBXZWFrTWFwKCk7XG5mdW5jdGlvbiBjYWNoZWRNYXAoaXRlbXMsIGZuKSB7XG4gIHJldHVybiBpdGVtcy5tYXAoKGkpID0+IHtcbiAgICBsZXQgciA9IGNhY2hlTWFwLmdldChpKTtcbiAgICBpZiAoIXIpIHtcbiAgICAgIHIgPSBmbihpKTtcbiAgICAgIGNhY2hlTWFwLnNldChpLCByKTtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH0pO1xufVxuZnVuY3Rpb24gY3JlYXRlQmlycGNHcm91cChmdW5jdGlvbnMsIGNoYW5uZWxzLCBvcHRpb25zID0ge30pIHtcbiAgY29uc3QgZ2V0Q2hhbm5lbHMgPSAoKSA9PiB0eXBlb2YgY2hhbm5lbHMgPT09IFwiZnVuY3Rpb25cIiA/IGNoYW5uZWxzKCkgOiBjaGFubmVscztcbiAgY29uc3QgZ2V0Q2xpZW50cyA9IChjaGFubmVsczIgPSBnZXRDaGFubmVscygpKSA9PiBjYWNoZWRNYXAoY2hhbm5lbHMyLCAocykgPT4gY3JlYXRlQmlycGMoZnVuY3Rpb25zLCB7IC4uLm9wdGlvbnMsIC4uLnMgfSkpO1xuICBjb25zdCBicm9hZGNhc3RQcm94eSA9IG5ldyBQcm94eSh7fSwge1xuICAgIGdldChfLCBtZXRob2QpIHtcbiAgICAgIGNvbnN0IGNsaWVudCA9IGdldENsaWVudHMoKTtcbiAgICAgIGNvbnN0IGNhbGxiYWNrcyA9IGNsaWVudC5tYXAoKGMpID0+IGNbbWV0aG9kXSk7XG4gICAgICBjb25zdCBzZW5kQ2FsbCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChjYWxsYmFja3MubWFwKChpKSA9PiBpKC4uLmFyZ3MpKSk7XG4gICAgICB9O1xuICAgICAgc2VuZENhbGwuYXNFdmVudCA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNhbGxiYWNrcy5tYXAoKGkpID0+IGkuYXNFdmVudCguLi5hcmdzKSk7XG4gICAgICB9O1xuICAgICAgcmV0dXJuIHNlbmRDYWxsO1xuICAgIH1cbiAgfSk7XG4gIGZ1bmN0aW9uIHVwZGF0ZUNoYW5uZWxzKGZuKSB7XG4gICAgY29uc3QgY2hhbm5lbHMyID0gZ2V0Q2hhbm5lbHMoKTtcbiAgICBmbj8uKGNoYW5uZWxzMik7XG4gICAgcmV0dXJuIGdldENsaWVudHMoY2hhbm5lbHMyKTtcbiAgfVxuICBnZXRDbGllbnRzKCk7XG4gIHJldHVybiB7XG4gICAgZ2V0IGNsaWVudHMoKSB7XG4gICAgICByZXR1cm4gZ2V0Q2xpZW50cygpO1xuICAgIH0sXG4gICAgZnVuY3Rpb25zLFxuICAgIHVwZGF0ZUNoYW5uZWxzLFxuICAgIGJyb2FkY2FzdDogYnJvYWRjYXN0UHJveHksXG4gICAgLyoqXG4gICAgICogQGRlcHJlY2F0ZWQgdXNlIGBicm9hZGNhc3RgXG4gICAgICovXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBkZXByZWNhdGVkXG4gICAgYm9hcmRjYXN0OiBicm9hZGNhc3RQcm94eVxuICB9O1xufVxuY29uc3QgdXJsQWxwaGFiZXQgPSBcInVzZWFuZG9tLTI2VDE5ODM0MFBYNzVweEpBQ0tWRVJZTUlOREJVU0hXT0xGX0dRWmJmZ2hqa2xxdnd5enJpY3RcIjtcbmZ1bmN0aW9uIG5hbm9pZChzaXplID0gMjEpIHtcbiAgbGV0IGlkID0gXCJcIjtcbiAgbGV0IGkgPSBzaXplO1xuICB3aGlsZSAoaS0tKVxuICAgIGlkICs9IHVybEFscGhhYmV0W3JhbmRvbSgpICogNjQgfCAwXTtcbiAgcmV0dXJuIGlkO1xufVxuXG5leHBvcnQgeyBERUZBVUxUX1RJTUVPVVQsIGNhY2hlZE1hcCwgY3JlYXRlQmlycGMsIGNyZWF0ZUJpcnBjR3JvdXAgfTtcbiIsImZ1bmN0aW9uIGZsYXRIb29rcyhjb25maWdIb29rcywgaG9va3MgPSB7fSwgcGFyZW50TmFtZSkge1xuICBmb3IgKGNvbnN0IGtleSBpbiBjb25maWdIb29rcykge1xuICAgIGNvbnN0IHN1Ykhvb2sgPSBjb25maWdIb29rc1trZXldO1xuICAgIGNvbnN0IG5hbWUgPSBwYXJlbnROYW1lID8gYCR7cGFyZW50TmFtZX06JHtrZXl9YCA6IGtleTtcbiAgICBpZiAodHlwZW9mIHN1Ykhvb2sgPT09IFwib2JqZWN0XCIgJiYgc3ViSG9vayAhPT0gbnVsbCkge1xuICAgICAgZmxhdEhvb2tzKHN1Ykhvb2ssIGhvb2tzLCBuYW1lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBzdWJIb29rID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgIGhvb2tzW25hbWVdID0gc3ViSG9vaztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGhvb2tzO1xufVxuZnVuY3Rpb24gbWVyZ2VIb29rcyguLi5ob29rcykge1xuICBjb25zdCBmaW5hbEhvb2tzID0ge307XG4gIGZvciAoY29uc3QgaG9vayBvZiBob29rcykge1xuICAgIGNvbnN0IGZsYXRlbkhvb2sgPSBmbGF0SG9va3MoaG9vayk7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gZmxhdGVuSG9vaykge1xuICAgICAgaWYgKGZpbmFsSG9va3Nba2V5XSkge1xuICAgICAgICBmaW5hbEhvb2tzW2tleV0ucHVzaChmbGF0ZW5Ib29rW2tleV0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmluYWxIb29rc1trZXldID0gW2ZsYXRlbkhvb2tba2V5XV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGZvciAoY29uc3Qga2V5IGluIGZpbmFsSG9va3MpIHtcbiAgICBpZiAoZmluYWxIb29rc1trZXldLmxlbmd0aCA+IDEpIHtcbiAgICAgIGNvbnN0IGFycmF5ID0gZmluYWxIb29rc1trZXldO1xuICAgICAgZmluYWxIb29rc1trZXldID0gKC4uLmFyZ3VtZW50c18pID0+IHNlcmlhbChhcnJheSwgKGZ1bmN0aW9uXykgPT4gZnVuY3Rpb25fKC4uLmFyZ3VtZW50c18pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmluYWxIb29rc1trZXldID0gZmluYWxIb29rc1trZXldWzBdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmluYWxIb29rcztcbn1cbmZ1bmN0aW9uIHNlcmlhbCh0YXNrcywgZnVuY3Rpb25fKSB7XG4gIHJldHVybiB0YXNrcy5yZWR1Y2UoXG4gICAgKHByb21pc2UsIHRhc2spID0+IHByb21pc2UudGhlbigoKSA9PiBmdW5jdGlvbl8odGFzaykpLFxuICAgIFByb21pc2UucmVzb2x2ZSgpXG4gICk7XG59XG5jb25zdCBkZWZhdWx0VGFzayA9IHsgcnVuOiAoZnVuY3Rpb25fKSA9PiBmdW5jdGlvbl8oKSB9O1xuY29uc3QgX2NyZWF0ZVRhc2sgPSAoKSA9PiBkZWZhdWx0VGFzaztcbmNvbnN0IGNyZWF0ZVRhc2sgPSB0eXBlb2YgY29uc29sZS5jcmVhdGVUYXNrICE9PSBcInVuZGVmaW5lZFwiID8gY29uc29sZS5jcmVhdGVUYXNrIDogX2NyZWF0ZVRhc2s7XG5mdW5jdGlvbiBzZXJpYWxUYXNrQ2FsbGVyKGhvb2tzLCBhcmdzKSB7XG4gIGNvbnN0IG5hbWUgPSBhcmdzLnNoaWZ0KCk7XG4gIGNvbnN0IHRhc2sgPSBjcmVhdGVUYXNrKG5hbWUpO1xuICByZXR1cm4gaG9va3MucmVkdWNlKFxuICAgIChwcm9taXNlLCBob29rRnVuY3Rpb24pID0+IHByb21pc2UudGhlbigoKSA9PiB0YXNrLnJ1bigoKSA9PiBob29rRnVuY3Rpb24oLi4uYXJncykpKSxcbiAgICBQcm9taXNlLnJlc29sdmUoKVxuICApO1xufVxuZnVuY3Rpb24gcGFyYWxsZWxUYXNrQ2FsbGVyKGhvb2tzLCBhcmdzKSB7XG4gIGNvbnN0IG5hbWUgPSBhcmdzLnNoaWZ0KCk7XG4gIGNvbnN0IHRhc2sgPSBjcmVhdGVUYXNrKG5hbWUpO1xuICByZXR1cm4gUHJvbWlzZS5hbGwoaG9va3MubWFwKChob29rKSA9PiB0YXNrLnJ1bigoKSA9PiBob29rKC4uLmFyZ3MpKSkpO1xufVxuZnVuY3Rpb24gc2VyaWFsQ2FsbGVyKGhvb2tzLCBhcmd1bWVudHNfKSB7XG4gIHJldHVybiBob29rcy5yZWR1Y2UoXG4gICAgKHByb21pc2UsIGhvb2tGdW5jdGlvbikgPT4gcHJvbWlzZS50aGVuKCgpID0+IGhvb2tGdW5jdGlvbiguLi5hcmd1bWVudHNfIHx8IFtdKSksXG4gICAgUHJvbWlzZS5yZXNvbHZlKClcbiAgKTtcbn1cbmZ1bmN0aW9uIHBhcmFsbGVsQ2FsbGVyKGhvb2tzLCBhcmdzKSB7XG4gIHJldHVybiBQcm9taXNlLmFsbChob29rcy5tYXAoKGhvb2spID0+IGhvb2soLi4uYXJncyB8fCBbXSkpKTtcbn1cbmZ1bmN0aW9uIGNhbGxFYWNoV2l0aChjYWxsYmFja3MsIGFyZzApIHtcbiAgZm9yIChjb25zdCBjYWxsYmFjayBvZiBbLi4uY2FsbGJhY2tzXSkge1xuICAgIGNhbGxiYWNrKGFyZzApO1xuICB9XG59XG5cbmNsYXNzIEhvb2thYmxlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5faG9va3MgPSB7fTtcbiAgICB0aGlzLl9iZWZvcmUgPSB2b2lkIDA7XG4gICAgdGhpcy5fYWZ0ZXIgPSB2b2lkIDA7XG4gICAgdGhpcy5fZGVwcmVjYXRlZE1lc3NhZ2VzID0gdm9pZCAwO1xuICAgIHRoaXMuX2RlcHJlY2F0ZWRIb29rcyA9IHt9O1xuICAgIHRoaXMuaG9vayA9IHRoaXMuaG9vay5iaW5kKHRoaXMpO1xuICAgIHRoaXMuY2FsbEhvb2sgPSB0aGlzLmNhbGxIb29rLmJpbmQodGhpcyk7XG4gICAgdGhpcy5jYWxsSG9va1dpdGggPSB0aGlzLmNhbGxIb29rV2l0aC5iaW5kKHRoaXMpO1xuICB9XG4gIGhvb2sobmFtZSwgZnVuY3Rpb25fLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIW5hbWUgfHwgdHlwZW9mIGZ1bmN0aW9uXyAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3Qgb3JpZ2luYWxOYW1lID0gbmFtZTtcbiAgICBsZXQgZGVwO1xuICAgIHdoaWxlICh0aGlzLl9kZXByZWNhdGVkSG9va3NbbmFtZV0pIHtcbiAgICAgIGRlcCA9IHRoaXMuX2RlcHJlY2F0ZWRIb29rc1tuYW1lXTtcbiAgICAgIG5hbWUgPSBkZXAudG87XG4gICAgfVxuICAgIGlmIChkZXAgJiYgIW9wdGlvbnMuYWxsb3dEZXByZWNhdGVkKSB7XG4gICAgICBsZXQgbWVzc2FnZSA9IGRlcC5tZXNzYWdlO1xuICAgICAgaWYgKCFtZXNzYWdlKSB7XG4gICAgICAgIG1lc3NhZ2UgPSBgJHtvcmlnaW5hbE5hbWV9IGhvb2sgaGFzIGJlZW4gZGVwcmVjYXRlZGAgKyAoZGVwLnRvID8gYCwgcGxlYXNlIHVzZSAke2RlcC50b31gIDogXCJcIik7XG4gICAgICB9XG4gICAgICBpZiAoIXRoaXMuX2RlcHJlY2F0ZWRNZXNzYWdlcykge1xuICAgICAgICB0aGlzLl9kZXByZWNhdGVkTWVzc2FnZXMgPSAvKiBAX19QVVJFX18gKi8gbmV3IFNldCgpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9kZXByZWNhdGVkTWVzc2FnZXMuaGFzKG1lc3NhZ2UpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihtZXNzYWdlKTtcbiAgICAgICAgdGhpcy5fZGVwcmVjYXRlZE1lc3NhZ2VzLmFkZChtZXNzYWdlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKCFmdW5jdGlvbl8ubmFtZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZ1bmN0aW9uXywgXCJuYW1lXCIsIHtcbiAgICAgICAgICBnZXQ6ICgpID0+IFwiX1wiICsgbmFtZS5yZXBsYWNlKC9cXFcrL2csIFwiX1wiKSArIFwiX2hvb2tfY2JcIixcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5faG9va3NbbmFtZV0gPSB0aGlzLl9ob29rc1tuYW1lXSB8fCBbXTtcbiAgICB0aGlzLl9ob29rc1tuYW1lXS5wdXNoKGZ1bmN0aW9uXyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmIChmdW5jdGlvbl8pIHtcbiAgICAgICAgdGhpcy5yZW1vdmVIb29rKG5hbWUsIGZ1bmN0aW9uXyk7XG4gICAgICAgIGZ1bmN0aW9uXyA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIGhvb2tPbmNlKG5hbWUsIGZ1bmN0aW9uXykge1xuICAgIGxldCBfdW5yZWc7XG4gICAgbGV0IF9mdW5jdGlvbiA9ICguLi5hcmd1bWVudHNfKSA9PiB7XG4gICAgICBpZiAodHlwZW9mIF91bnJlZyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgIF91bnJlZygpO1xuICAgICAgfVxuICAgICAgX3VucmVnID0gdm9pZCAwO1xuICAgICAgX2Z1bmN0aW9uID0gdm9pZCAwO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uXyguLi5hcmd1bWVudHNfKTtcbiAgICB9O1xuICAgIF91bnJlZyA9IHRoaXMuaG9vayhuYW1lLCBfZnVuY3Rpb24pO1xuICAgIHJldHVybiBfdW5yZWc7XG4gIH1cbiAgcmVtb3ZlSG9vayhuYW1lLCBmdW5jdGlvbl8pIHtcbiAgICBpZiAodGhpcy5faG9va3NbbmFtZV0pIHtcbiAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5faG9va3NbbmFtZV0uaW5kZXhPZihmdW5jdGlvbl8pO1xuICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLl9ob29rc1tuYW1lXS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX2hvb2tzW25hbWVdLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBkZWxldGUgdGhpcy5faG9va3NbbmFtZV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGRlcHJlY2F0ZUhvb2sobmFtZSwgZGVwcmVjYXRlZCkge1xuICAgIHRoaXMuX2RlcHJlY2F0ZWRIb29rc1tuYW1lXSA9IHR5cGVvZiBkZXByZWNhdGVkID09PSBcInN0cmluZ1wiID8geyB0bzogZGVwcmVjYXRlZCB9IDogZGVwcmVjYXRlZDtcbiAgICBjb25zdCBfaG9va3MgPSB0aGlzLl9ob29rc1tuYW1lXSB8fCBbXTtcbiAgICBkZWxldGUgdGhpcy5faG9va3NbbmFtZV07XG4gICAgZm9yIChjb25zdCBob29rIG9mIF9ob29rcykge1xuICAgICAgdGhpcy5ob29rKG5hbWUsIGhvb2spO1xuICAgIH1cbiAgfVxuICBkZXByZWNhdGVIb29rcyhkZXByZWNhdGVkSG9va3MpIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuX2RlcHJlY2F0ZWRIb29rcywgZGVwcmVjYXRlZEhvb2tzKTtcbiAgICBmb3IgKGNvbnN0IG5hbWUgaW4gZGVwcmVjYXRlZEhvb2tzKSB7XG4gICAgICB0aGlzLmRlcHJlY2F0ZUhvb2sobmFtZSwgZGVwcmVjYXRlZEhvb2tzW25hbWVdKTtcbiAgICB9XG4gIH1cbiAgYWRkSG9va3MoY29uZmlnSG9va3MpIHtcbiAgICBjb25zdCBob29rcyA9IGZsYXRIb29rcyhjb25maWdIb29rcyk7XG4gICAgY29uc3QgcmVtb3ZlRm5zID0gT2JqZWN0LmtleXMoaG9va3MpLm1hcChcbiAgICAgIChrZXkpID0+IHRoaXMuaG9vayhrZXksIGhvb2tzW2tleV0pXG4gICAgKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZm9yIChjb25zdCB1bnJlZyBvZiByZW1vdmVGbnMuc3BsaWNlKDAsIHJlbW92ZUZucy5sZW5ndGgpKSB7XG4gICAgICAgIHVucmVnKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuICByZW1vdmVIb29rcyhjb25maWdIb29rcykge1xuICAgIGNvbnN0IGhvb2tzID0gZmxhdEhvb2tzKGNvbmZpZ0hvb2tzKTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBob29rcykge1xuICAgICAgdGhpcy5yZW1vdmVIb29rKGtleSwgaG9va3Nba2V5XSk7XG4gICAgfVxuICB9XG4gIHJlbW92ZUFsbEhvb2tzKCkge1xuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX2hvb2tzKSB7XG4gICAgICBkZWxldGUgdGhpcy5faG9va3Nba2V5XTtcbiAgICB9XG4gIH1cbiAgY2FsbEhvb2sobmFtZSwgLi4uYXJndW1lbnRzXykge1xuICAgIGFyZ3VtZW50c18udW5zaGlmdChuYW1lKTtcbiAgICByZXR1cm4gdGhpcy5jYWxsSG9va1dpdGgoc2VyaWFsVGFza0NhbGxlciwgbmFtZSwgLi4uYXJndW1lbnRzXyk7XG4gIH1cbiAgY2FsbEhvb2tQYXJhbGxlbChuYW1lLCAuLi5hcmd1bWVudHNfKSB7XG4gICAgYXJndW1lbnRzXy51bnNoaWZ0KG5hbWUpO1xuICAgIHJldHVybiB0aGlzLmNhbGxIb29rV2l0aChwYXJhbGxlbFRhc2tDYWxsZXIsIG5hbWUsIC4uLmFyZ3VtZW50c18pO1xuICB9XG4gIGNhbGxIb29rV2l0aChjYWxsZXIsIG5hbWUsIC4uLmFyZ3VtZW50c18pIHtcbiAgICBjb25zdCBldmVudCA9IHRoaXMuX2JlZm9yZSB8fCB0aGlzLl9hZnRlciA/IHsgbmFtZSwgYXJnczogYXJndW1lbnRzXywgY29udGV4dDoge30gfSA6IHZvaWQgMDtcbiAgICBpZiAodGhpcy5fYmVmb3JlKSB7XG4gICAgICBjYWxsRWFjaFdpdGgodGhpcy5fYmVmb3JlLCBldmVudCk7XG4gICAgfVxuICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxlcihcbiAgICAgIG5hbWUgaW4gdGhpcy5faG9va3MgPyBbLi4udGhpcy5faG9va3NbbmFtZV1dIDogW10sXG4gICAgICBhcmd1bWVudHNfXG4gICAgKTtcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgcmV0dXJuIHJlc3VsdC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuX2FmdGVyICYmIGV2ZW50KSB7XG4gICAgICAgICAgY2FsbEVhY2hXaXRoKHRoaXMuX2FmdGVyLCBldmVudCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBpZiAodGhpcy5fYWZ0ZXIgJiYgZXZlbnQpIHtcbiAgICAgIGNhbGxFYWNoV2l0aCh0aGlzLl9hZnRlciwgZXZlbnQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGJlZm9yZUVhY2goZnVuY3Rpb25fKSB7XG4gICAgdGhpcy5fYmVmb3JlID0gdGhpcy5fYmVmb3JlIHx8IFtdO1xuICAgIHRoaXMuX2JlZm9yZS5wdXNoKGZ1bmN0aW9uXyk7XG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGlmICh0aGlzLl9iZWZvcmUgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2JlZm9yZS5pbmRleE9mKGZ1bmN0aW9uXyk7XG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICB0aGlzLl9iZWZvcmUuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uXykge1xuICAgIHRoaXMuX2FmdGVyID0gdGhpcy5fYWZ0ZXIgfHwgW107XG4gICAgdGhpcy5fYWZ0ZXIucHVzaChmdW5jdGlvbl8pO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5fYWZ0ZXIgIT09IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuX2FmdGVyLmluZGV4T2YoZnVuY3Rpb25fKTtcbiAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgICAgIHRoaXMuX2FmdGVyLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5mdW5jdGlvbiBjcmVhdGVIb29rcygpIHtcbiAgcmV0dXJuIG5ldyBIb29rYWJsZSgpO1xufVxuXG5jb25zdCBpc0Jyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiO1xuZnVuY3Rpb24gY3JlYXRlRGVidWdnZXIoaG9va3MsIF9vcHRpb25zID0ge30pIHtcbiAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICBpbnNwZWN0OiBpc0Jyb3dzZXIsXG4gICAgZ3JvdXA6IGlzQnJvd3NlcixcbiAgICBmaWx0ZXI6ICgpID0+IHRydWUsXG4gICAgLi4uX29wdGlvbnNcbiAgfTtcbiAgY29uc3QgX2ZpbHRlciA9IG9wdGlvbnMuZmlsdGVyO1xuICBjb25zdCBmaWx0ZXIgPSB0eXBlb2YgX2ZpbHRlciA9PT0gXCJzdHJpbmdcIiA/IChuYW1lKSA9PiBuYW1lLnN0YXJ0c1dpdGgoX2ZpbHRlcikgOiBfZmlsdGVyO1xuICBjb25zdCBfdGFnID0gb3B0aW9ucy50YWcgPyBgWyR7b3B0aW9ucy50YWd9XSBgIDogXCJcIjtcbiAgY29uc3QgbG9nUHJlZml4ID0gKGV2ZW50KSA9PiBfdGFnICsgZXZlbnQubmFtZSArIFwiXCIucGFkRW5kKGV2ZW50Ll9pZCwgXCJcXDBcIik7XG4gIGNvbnN0IF9pZEN0ciA9IHt9O1xuICBjb25zdCB1bnN1YnNjcmliZUJlZm9yZSA9IGhvb2tzLmJlZm9yZUVhY2goKGV2ZW50KSA9PiB7XG4gICAgaWYgKGZpbHRlciAhPT0gdm9pZCAwICYmICFmaWx0ZXIoZXZlbnQubmFtZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgX2lkQ3RyW2V2ZW50Lm5hbWVdID0gX2lkQ3RyW2V2ZW50Lm5hbWVdIHx8IDA7XG4gICAgZXZlbnQuX2lkID0gX2lkQ3RyW2V2ZW50Lm5hbWVdKys7XG4gICAgY29uc29sZS50aW1lKGxvZ1ByZWZpeChldmVudCkpO1xuICB9KTtcbiAgY29uc3QgdW5zdWJzY3JpYmVBZnRlciA9IGhvb2tzLmFmdGVyRWFjaCgoZXZlbnQpID0+IHtcbiAgICBpZiAoZmlsdGVyICE9PSB2b2lkIDAgJiYgIWZpbHRlcihldmVudC5uYW1lKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy5ncm91cCkge1xuICAgICAgY29uc29sZS5ncm91cENvbGxhcHNlZChldmVudC5uYW1lKTtcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaW5zcGVjdCkge1xuICAgICAgY29uc29sZS50aW1lTG9nKGxvZ1ByZWZpeChldmVudCksIGV2ZW50LmFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLnRpbWVFbmQobG9nUHJlZml4KGV2ZW50KSk7XG4gICAgfVxuICAgIGlmIChvcHRpb25zLmdyb3VwKSB7XG4gICAgICBjb25zb2xlLmdyb3VwRW5kKCk7XG4gICAgfVxuICAgIF9pZEN0cltldmVudC5uYW1lXS0tO1xuICB9KTtcbiAgcmV0dXJuIHtcbiAgICAvKiogU3RvcCBkZWJ1Z2dpbmcgYW5kIHJlbW92ZSBsaXN0ZW5lcnMgKi9cbiAgICBjbG9zZTogKCkgPT4ge1xuICAgICAgdW5zdWJzY3JpYmVCZWZvcmUoKTtcbiAgICAgIHVuc3Vic2NyaWJlQWZ0ZXIoKTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB7IEhvb2thYmxlLCBjcmVhdGVEZWJ1Z2dlciwgY3JlYXRlSG9va3MsIGZsYXRIb29rcywgbWVyZ2VIb29rcywgcGFyYWxsZWxDYWxsZXIsIHNlcmlhbCwgc2VyaWFsQ2FsbGVyIH07XG4iLCJjb25zdCBERUJPVU5DRV9ERUZBVUxUUyA9IHtcbiAgdHJhaWxpbmc6IHRydWVcbn07XG5mdW5jdGlvbiBkZWJvdW5jZShmbiwgd2FpdCA9IDI1LCBvcHRpb25zID0ge30pIHtcbiAgb3B0aW9ucyA9IHsgLi4uREVCT1VOQ0VfREVGQVVMVFMsIC4uLm9wdGlvbnMgfTtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUod2FpdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRXhwZWN0ZWQgYHdhaXRgIHRvIGJlIGEgZmluaXRlIG51bWJlclwiKTtcbiAgfVxuICBsZXQgbGVhZGluZ1ZhbHVlO1xuICBsZXQgdGltZW91dDtcbiAgbGV0IHJlc29sdmVMaXN0ID0gW107XG4gIGxldCBjdXJyZW50UHJvbWlzZTtcbiAgbGV0IHRyYWlsaW5nQXJncztcbiAgY29uc3QgYXBwbHlGbiA9IChfdGhpcywgYXJncykgPT4ge1xuICAgIGN1cnJlbnRQcm9taXNlID0gX2FwcGx5UHJvbWlzZWQoZm4sIF90aGlzLCBhcmdzKTtcbiAgICBjdXJyZW50UHJvbWlzZS5maW5hbGx5KCgpID0+IHtcbiAgICAgIGN1cnJlbnRQcm9taXNlID0gbnVsbDtcbiAgICAgIGlmIChvcHRpb25zLnRyYWlsaW5nICYmIHRyYWlsaW5nQXJncyAmJiAhdGltZW91dCkge1xuICAgICAgICBjb25zdCBwcm9taXNlID0gYXBwbHlGbihfdGhpcywgdHJhaWxpbmdBcmdzKTtcbiAgICAgICAgdHJhaWxpbmdBcmdzID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGN1cnJlbnRQcm9taXNlO1xuICB9O1xuICByZXR1cm4gZnVuY3Rpb24oLi4uYXJncykge1xuICAgIGlmIChjdXJyZW50UHJvbWlzZSkge1xuICAgICAgaWYgKG9wdGlvbnMudHJhaWxpbmcpIHtcbiAgICAgICAgdHJhaWxpbmdBcmdzID0gYXJncztcbiAgICAgIH1cbiAgICAgIHJldHVybiBjdXJyZW50UHJvbWlzZTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiB7XG4gICAgICBjb25zdCBzaG91bGRDYWxsTm93ID0gIXRpbWVvdXQgJiYgb3B0aW9ucy5sZWFkaW5nO1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IG9wdGlvbnMubGVhZGluZyA/IGxlYWRpbmdWYWx1ZSA6IGFwcGx5Rm4odGhpcywgYXJncyk7XG4gICAgICAgIGZvciAoY29uc3QgX3Jlc29sdmUgb2YgcmVzb2x2ZUxpc3QpIHtcbiAgICAgICAgICBfcmVzb2x2ZShwcm9taXNlKTtcbiAgICAgICAgfVxuICAgICAgICByZXNvbHZlTGlzdCA9IFtdO1xuICAgICAgfSwgd2FpdCk7XG4gICAgICBpZiAoc2hvdWxkQ2FsbE5vdykge1xuICAgICAgICBsZWFkaW5nVmFsdWUgPSBhcHBseUZuKHRoaXMsIGFyZ3MpO1xuICAgICAgICByZXNvbHZlKGxlYWRpbmdWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXNvbHZlTGlzdC5wdXNoKHJlc29sdmUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xufVxuYXN5bmMgZnVuY3Rpb24gX2FwcGx5UHJvbWlzZWQoZm4sIF90aGlzLCBhcmdzKSB7XG4gIHJldHVybiBhd2FpdCBmbi5hcHBseShfdGhpcywgYXJncyk7XG59XG5cbmV4cG9ydCB7IGRlYm91bmNlIH07XG4iLCIvKiFcbiAqIHBpbmlhIHYzLjAuM1xuICogKGMpIDIwMjUgRWR1YXJkbyBTYW4gTWFydGluIE1vcm90ZVxuICogQGxpY2Vuc2UgTUlUXG4gKi9cbmltcG9ydCB7IGhhc0luamVjdGlvbkNvbnRleHQsIGluamVjdCwgdG9SYXcsIHdhdGNoLCB1bnJlZiwgbWFya1JhdywgZWZmZWN0U2NvcGUsIHJlZiwgaXNSZWYsIGlzUmVhY3RpdmUsIGdldEN1cnJlbnRTY29wZSwgb25TY29wZURpc3Bvc2UsIGdldEN1cnJlbnRJbnN0YW5jZSwgcmVhY3RpdmUsIHRvUmVmLCBuZXh0VGljaywgY29tcHV0ZWQsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7XG5pbXBvcnQgeyBzZXR1cERldnRvb2xzUGx1Z2luIH0gZnJvbSAnQHZ1ZS9kZXZ0b29scy1hcGknO1xuXG4vKipcbiAqIHNldEFjdGl2ZVBpbmlhIG11c3QgYmUgY2FsbGVkIHRvIGhhbmRsZSBTU1IgYXQgdGhlIHRvcCBvZiBmdW5jdGlvbnMgbGlrZVxuICogYGZldGNoYCwgYHNldHVwYCwgYHNlcnZlclByZWZldGNoYCBhbmQgb3RoZXJzXG4gKi9cbmxldCBhY3RpdmVQaW5pYTtcbi8qKlxuICogU2V0cyBvciB1bnNldHMgdGhlIGFjdGl2ZSBwaW5pYS4gVXNlZCBpbiBTU1IgYW5kIGludGVybmFsbHkgd2hlbiBjYWxsaW5nXG4gKiBhY3Rpb25zIGFuZCBnZXR0ZXJzXG4gKlxuICogQHBhcmFtIHBpbmlhIC0gUGluaWEgaW5zdGFuY2VcbiAqL1xuLy8gQHRzLWV4cGVjdC1lcnJvcjogY2Fubm90IGNvbnN0cmFpbiB0aGUgdHlwZSBvZiB0aGUgcmV0dXJuXG5jb25zdCBzZXRBY3RpdmVQaW5pYSA9IChwaW5pYSkgPT4gKGFjdGl2ZVBpbmlhID0gcGluaWEpO1xuLyoqXG4gKiBHZXQgdGhlIGN1cnJlbnRseSBhY3RpdmUgcGluaWEgaWYgdGhlcmUgaXMgYW55LlxuICovXG5jb25zdCBnZXRBY3RpdmVQaW5pYSA9ICgpID0+IChoYXNJbmplY3Rpb25Db250ZXh0KCkgJiYgaW5qZWN0KHBpbmlhU3ltYm9sKSkgfHwgYWN0aXZlUGluaWE7XG5jb25zdCBwaW5pYVN5bWJvbCA9ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgPyBTeW1ib2woJ3BpbmlhJykgOiAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqLyBTeW1ib2woKSk7XG5cbmZ1bmN0aW9uIGlzUGxhaW5PYmplY3QoXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxubykge1xuICAgIHJldHVybiAobyAmJlxuICAgICAgICB0eXBlb2YgbyA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pID09PSAnW29iamVjdCBPYmplY3RdJyAmJlxuICAgICAgICB0eXBlb2Ygby50b0pTT04gIT09ICdmdW5jdGlvbicpO1xufVxuLy8gdHlwZSBEZWVwUmVhZG9ubHk8VD4gPSB7IHJlYWRvbmx5IFtQIGluIGtleW9mIFRdOiBEZWVwUmVhZG9ubHk8VFtQXT4gfVxuLy8gVE9ETzogY2FuIHdlIGNoYW5nZSB0aGVzZSB0byBudW1iZXJzP1xuLyoqXG4gKiBQb3NzaWJsZSB0eXBlcyBmb3IgU3Vic2NyaXB0aW9uQ2FsbGJhY2tcbiAqL1xudmFyIE11dGF0aW9uVHlwZTtcbihmdW5jdGlvbiAoTXV0YXRpb25UeXBlKSB7XG4gICAgLyoqXG4gICAgICogRGlyZWN0IG11dGF0aW9uIG9mIHRoZSBzdGF0ZTpcbiAgICAgKlxuICAgICAqIC0gYHN0b3JlLm5hbWUgPSAnbmV3IG5hbWUnYFxuICAgICAqIC0gYHN0b3JlLiRzdGF0ZS5uYW1lID0gJ25ldyBuYW1lJ2BcbiAgICAgKiAtIGBzdG9yZS5saXN0LnB1c2goJ25ldyBpdGVtJylgXG4gICAgICovXG4gICAgTXV0YXRpb25UeXBlW1wiZGlyZWN0XCJdID0gXCJkaXJlY3RcIjtcbiAgICAvKipcbiAgICAgKiBNdXRhdGVkIHRoZSBzdGF0ZSB3aXRoIGAkcGF0Y2hgIGFuZCBhbiBvYmplY3RcbiAgICAgKlxuICAgICAqIC0gYHN0b3JlLiRwYXRjaCh7IG5hbWU6ICduZXdOYW1lJyB9KWBcbiAgICAgKi9cbiAgICBNdXRhdGlvblR5cGVbXCJwYXRjaE9iamVjdFwiXSA9IFwicGF0Y2ggb2JqZWN0XCI7XG4gICAgLyoqXG4gICAgICogTXV0YXRlZCB0aGUgc3RhdGUgd2l0aCBgJHBhdGNoYCBhbmQgYSBmdW5jdGlvblxuICAgICAqXG4gICAgICogLSBgc3RvcmUuJHBhdGNoKHN0YXRlID0+IHN0YXRlLm5hbWUgPSAnbmV3TmFtZScpYFxuICAgICAqL1xuICAgIE11dGF0aW9uVHlwZVtcInBhdGNoRnVuY3Rpb25cIl0gPSBcInBhdGNoIGZ1bmN0aW9uXCI7XG4gICAgLy8gbWF5YmUgcmVzZXQ/IGZvciAkc3RhdGUgPSB7fSBhbmQgJHJlc2V0XG59KShNdXRhdGlvblR5cGUgfHwgKE11dGF0aW9uVHlwZSA9IHt9KSk7XG5cbmNvbnN0IElTX0NMSUVOVCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xuXG4vKlxuICogRmlsZVNhdmVyLmpzIEEgc2F2ZUFzKCkgRmlsZVNhdmVyIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIE9yaWdpbmFsbHkgYnkgRWxpIEdyZXksIGFkYXB0ZWQgYXMgYW4gRVNNIG1vZHVsZSBieSBFZHVhcmRvIFNhbiBNYXJ0aW5cbiAqIE1vcm90ZS5cbiAqXG4gKiBMaWNlbnNlIDogTUlUXG4gKi9cbi8vIFRoZSBvbmUgYW5kIG9ubHkgd2F5IG9mIGdldHRpbmcgZ2xvYmFsIHNjb3BlIGluIGFsbCBlbnZpcm9ubWVudHNcbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zMjc3MTgyLzEwMDg5OTlcbmNvbnN0IF9nbG9iYWwgPSAvKiNfX1BVUkVfXyovICgoKSA9PiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJiB3aW5kb3cud2luZG93ID09PSB3aW5kb3dcbiAgICA/IHdpbmRvd1xuICAgIDogdHlwZW9mIHNlbGYgPT09ICdvYmplY3QnICYmIHNlbGYuc2VsZiA9PT0gc2VsZlxuICAgICAgICA/IHNlbGZcbiAgICAgICAgOiB0eXBlb2YgZ2xvYmFsID09PSAnb2JqZWN0JyAmJiBnbG9iYWwuZ2xvYmFsID09PSBnbG9iYWxcbiAgICAgICAgICAgID8gZ2xvYmFsXG4gICAgICAgICAgICA6IHR5cGVvZiBnbG9iYWxUaGlzID09PSAnb2JqZWN0J1xuICAgICAgICAgICAgICAgID8gZ2xvYmFsVGhpc1xuICAgICAgICAgICAgICAgIDogeyBIVE1MRWxlbWVudDogbnVsbCB9KSgpO1xuZnVuY3Rpb24gYm9tKGJsb2IsIHsgYXV0b0JvbSA9IGZhbHNlIH0gPSB7fSkge1xuICAgIC8vIHByZXBlbmQgQk9NIGZvciBVVEYtOCBYTUwgYW5kIHRleHQvKiB0eXBlcyAoaW5jbHVkaW5nIEhUTUwpXG4gICAgLy8gbm90ZTogeW91ciBicm93c2VyIHdpbGwgYXV0b21hdGljYWxseSBjb252ZXJ0IFVURi0xNiBVK0ZFRkYgdG8gRUYgQkIgQkZcbiAgICBpZiAoYXV0b0JvbSAmJlxuICAgICAgICAvXlxccyooPzp0ZXh0XFwvXFxTKnxhcHBsaWNhdGlvblxcL3htbHxcXFMqXFwvXFxTKlxcK3htbClcXHMqOy4qY2hhcnNldFxccyo9XFxzKnV0Zi04L2kudGVzdChibG9iLnR5cGUpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmxvYihbU3RyaW5nLmZyb21DaGFyQ29kZSgweGZlZmYpLCBibG9iXSwgeyB0eXBlOiBibG9iLnR5cGUgfSk7XG4gICAgfVxuICAgIHJldHVybiBibG9iO1xufVxuZnVuY3Rpb24gZG93bmxvYWQodXJsLCBuYW1lLCBvcHRzKSB7XG4gICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJztcbiAgICB4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBzYXZlQXMoeGhyLnJlc3BvbnNlLCBuYW1lLCBvcHRzKTtcbiAgICB9O1xuICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdjb3VsZCBub3QgZG93bmxvYWQgZmlsZScpO1xuICAgIH07XG4gICAgeGhyLnNlbmQoKTtcbn1cbmZ1bmN0aW9uIGNvcnNFbmFibGVkKHVybCkge1xuICAgIGNvbnN0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgIC8vIHVzZSBzeW5jIHRvIGF2b2lkIHBvcHVwIGJsb2NrZXJcbiAgICB4aHIub3BlbignSEVBRCcsIHVybCwgZmFsc2UpO1xuICAgIHRyeSB7XG4gICAgICAgIHhoci5zZW5kKCk7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7IH1cbiAgICByZXR1cm4geGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTk7XG59XG4vLyBgYS5jbGljaygpYCBkb2Vzbid0IHdvcmsgZm9yIGFsbCBicm93c2VycyAoIzQ2NSlcbmZ1bmN0aW9uIGNsaWNrKG5vZGUpIHtcbiAgICB0cnkge1xuICAgICAgICBub2RlLmRpc3BhdGNoRXZlbnQobmV3IE1vdXNlRXZlbnQoJ2NsaWNrJykpO1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICBjb25zdCBldnQgPSBuZXcgTW91c2VFdmVudCgnY2xpY2snLCB7XG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIHZpZXc6IHdpbmRvdyxcbiAgICAgICAgICAgIGRldGFpbDogMCxcbiAgICAgICAgICAgIHNjcmVlblg6IDgwLFxuICAgICAgICAgICAgc2NyZWVuWTogMjAsXG4gICAgICAgICAgICBjbGllbnRYOiA4MCxcbiAgICAgICAgICAgIGNsaWVudFk6IDIwLFxuICAgICAgICAgICAgY3RybEtleTogZmFsc2UsXG4gICAgICAgICAgICBhbHRLZXk6IGZhbHNlLFxuICAgICAgICAgICAgc2hpZnRLZXk6IGZhbHNlLFxuICAgICAgICAgICAgbWV0YUtleTogZmFsc2UsXG4gICAgICAgICAgICBidXR0b246IDAsXG4gICAgICAgICAgICByZWxhdGVkVGFyZ2V0OiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgICAgbm9kZS5kaXNwYXRjaEV2ZW50KGV2dCk7XG4gICAgfVxufVxuY29uc3QgX25hdmlnYXRvciA9IHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnID8gbmF2aWdhdG9yIDogeyB1c2VyQWdlbnQ6ICcnIH07XG4vLyBEZXRlY3QgV2ViVmlldyBpbnNpZGUgYSBuYXRpdmUgbWFjT1MgYXBwIGJ5IHJ1bGluZyBvdXQgYWxsIGJyb3dzZXJzXG4vLyBXZSBqdXN0IG5lZWQgdG8gY2hlY2sgZm9yICdTYWZhcmknIGJlY2F1c2UgYWxsIG90aGVyIGJyb3dzZXJzIChiZXNpZGVzIEZpcmVmb3gpIGluY2x1ZGUgdGhhdCB0b29cbi8vIGh0dHBzOi8vd3d3LndoYXRpc215YnJvd3Nlci5jb20vZ3VpZGVzL3RoZS1sYXRlc3QtdXNlci1hZ2VudC9tYWNvc1xuY29uc3QgaXNNYWNPU1dlYlZpZXcgPSAvKiNfX1BVUkVfXyovICgoKSA9PiAvTWFjaW50b3NoLy50ZXN0KF9uYXZpZ2F0b3IudXNlckFnZW50KSAmJlxuICAgIC9BcHBsZVdlYktpdC8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkgJiZcbiAgICAhL1NhZmFyaS8udGVzdChfbmF2aWdhdG9yLnVzZXJBZ2VudCkpKCk7XG5jb25zdCBzYXZlQXMgPSAhSVNfQ0xJRU5UXG4gICAgPyAoKSA9PiB7IH0gLy8gbm9vcFxuICAgIDogLy8gVXNlIGRvd25sb2FkIGF0dHJpYnV0ZSBmaXJzdCBpZiBwb3NzaWJsZSAoIzE5MyBMdW1pYSBtb2JpbGUpIHVubGVzcyB0aGlzIGlzIGEgbWFjT1MgV2ViVmlldyBvciBtaW5pIHByb2dyYW1cbiAgICAgICAgdHlwZW9mIEhUTUxBbmNob3JFbGVtZW50ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgICAgJ2Rvd25sb2FkJyBpbiBIVE1MQW5jaG9yRWxlbWVudC5wcm90b3R5cGUgJiZcbiAgICAgICAgICAgICFpc01hY09TV2ViVmlld1xuICAgICAgICAgICAgPyBkb3dubG9hZFNhdmVBc1xuICAgICAgICAgICAgOiAvLyBVc2UgbXNTYXZlT3JPcGVuQmxvYiBhcyBhIHNlY29uZCBhcHByb2FjaFxuICAgICAgICAgICAgICAgICdtc1NhdmVPck9wZW5CbG9iJyBpbiBfbmF2aWdhdG9yXG4gICAgICAgICAgICAgICAgICAgID8gbXNTYXZlQXNcbiAgICAgICAgICAgICAgICAgICAgOiAvLyBGYWxsYmFjayB0byB1c2luZyBGaWxlUmVhZGVyIGFuZCBhIHBvcHVwXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlU2F2ZXJTYXZlQXM7XG5mdW5jdGlvbiBkb3dubG9hZFNhdmVBcyhibG9iLCBuYW1lID0gJ2Rvd25sb2FkJywgb3B0cykge1xuICAgIGNvbnN0IGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XG4gICAgYS5kb3dubG9hZCA9IG5hbWU7XG4gICAgYS5yZWwgPSAnbm9vcGVuZXInOyAvLyB0YWJuYWJiaW5nXG4gICAgLy8gVE9ETzogZGV0ZWN0IGNocm9tZSBleHRlbnNpb25zICYgcGFja2FnZWQgYXBwc1xuICAgIC8vIGEudGFyZ2V0ID0gJ19ibGFuaydcbiAgICBpZiAodHlwZW9mIGJsb2IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIC8vIFN1cHBvcnQgcmVndWxhciBsaW5rc1xuICAgICAgICBhLmhyZWYgPSBibG9iO1xuICAgICAgICBpZiAoYS5vcmlnaW4gIT09IGxvY2F0aW9uLm9yaWdpbikge1xuICAgICAgICAgICAgaWYgKGNvcnNFbmFibGVkKGEuaHJlZikpIHtcbiAgICAgICAgICAgICAgICBkb3dubG9hZChibG9iLCBuYW1lLCBvcHRzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGEudGFyZ2V0ID0gJ19ibGFuayc7XG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjbGljayhhKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gU3VwcG9ydCBibG9ic1xuICAgICAgICBhLmhyZWYgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIFVSTC5yZXZva2VPYmplY3RVUkwoYS5ocmVmKTtcbiAgICAgICAgfSwgNGU0KTsgLy8gNDBzXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgIH0sIDApO1xuICAgIH1cbn1cbmZ1bmN0aW9uIG1zU2F2ZUFzKGJsb2IsIG5hbWUgPSAnZG93bmxvYWQnLCBvcHRzKSB7XG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJykge1xuICAgICAgICBpZiAoY29yc0VuYWJsZWQoYmxvYikpIHtcbiAgICAgICAgICAgIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgICAgIGEuaHJlZiA9IGJsb2I7XG4gICAgICAgICAgICBhLnRhcmdldCA9ICdfYmxhbmsnO1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgY2xpY2soYSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZTogd29ya3Mgb24gd2luZG93c1xuICAgICAgICBuYXZpZ2F0b3IubXNTYXZlT3JPcGVuQmxvYihib20oYmxvYiwgb3B0cyksIG5hbWUpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGZpbGVTYXZlclNhdmVBcyhibG9iLCBuYW1lLCBvcHRzLCBwb3B1cCkge1xuICAgIC8vIE9wZW4gYSBwb3B1cCBpbW1lZGlhdGVseSBkbyBnbyBhcm91bmQgcG9wdXAgYmxvY2tlclxuICAgIC8vIE1vc3RseSBvbmx5IGF2YWlsYWJsZSBvbiB1c2VyIGludGVyYWN0aW9uIGFuZCB0aGUgZmlsZVJlYWRlciBpcyBhc3luYyBzby4uLlxuICAgIHBvcHVwID0gcG9wdXAgfHwgb3BlbignJywgJ19ibGFuaycpO1xuICAgIGlmIChwb3B1cCkge1xuICAgICAgICBwb3B1cC5kb2N1bWVudC50aXRsZSA9IHBvcHVwLmRvY3VtZW50LmJvZHkuaW5uZXJUZXh0ID0gJ2Rvd25sb2FkaW5nLi4uJztcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBibG9iID09PSAnc3RyaW5nJylcbiAgICAgICAgcmV0dXJuIGRvd25sb2FkKGJsb2IsIG5hbWUsIG9wdHMpO1xuICAgIGNvbnN0IGZvcmNlID0gYmxvYi50eXBlID09PSAnYXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtJztcbiAgICBjb25zdCBpc1NhZmFyaSA9IC9jb25zdHJ1Y3Rvci9pLnRlc3QoU3RyaW5nKF9nbG9iYWwuSFRNTEVsZW1lbnQpKSB8fCAnc2FmYXJpJyBpbiBfZ2xvYmFsO1xuICAgIGNvbnN0IGlzQ2hyb21lSU9TID0gL0NyaU9TXFwvW1xcZF0rLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpO1xuICAgIGlmICgoaXNDaHJvbWVJT1MgfHwgKGZvcmNlICYmIGlzU2FmYXJpKSB8fCBpc01hY09TV2ViVmlldykgJiZcbiAgICAgICAgdHlwZW9mIEZpbGVSZWFkZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIC8vIFNhZmFyaSBkb2Vzbid0IGFsbG93IGRvd25sb2FkaW5nIG9mIGJsb2IgVVJMc1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkZW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgbGV0IHVybCA9IHJlYWRlci5yZXN1bHQ7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICBwb3B1cCA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXcm9uZyByZWFkZXIucmVzdWx0IHR5cGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVybCA9IGlzQ2hyb21lSU9TXG4gICAgICAgICAgICAgICAgPyB1cmxcbiAgICAgICAgICAgICAgICA6IHVybC5yZXBsYWNlKC9eZGF0YTpbXjtdKjsvLCAnZGF0YTphdHRhY2htZW50L2ZpbGU7Jyk7XG4gICAgICAgICAgICBpZiAocG9wdXApIHtcbiAgICAgICAgICAgICAgICBwb3B1cC5sb2NhdGlvbi5ocmVmID0gdXJsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3B1cCA9IG51bGw7IC8vIHJldmVyc2UtdGFibmFiYmluZyAjNDYwXG4gICAgICAgIH07XG4gICAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGJsb2IpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgY29uc3QgdXJsID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgaWYgKHBvcHVwKVxuICAgICAgICAgICAgcG9wdXAubG9jYXRpb24uYXNzaWduKHVybCk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGxvY2F0aW9uLmhyZWYgPSB1cmw7XG4gICAgICAgIHBvcHVwID0gbnVsbDsgLy8gcmV2ZXJzZS10YWJuYWJiaW5nICM0NjBcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0sIDRlNCk7IC8vIDQwc1xuICAgIH1cbn1cblxuLyoqXG4gKiBTaG93cyBhIHRvYXN0IG9yIGNvbnNvbGUubG9nXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBtZXNzYWdlIHRvIGxvZ1xuICogQHBhcmFtIHR5cGUgLSBkaWZmZXJlbnQgY29sb3Igb2YgdGhlIHRvb2x0aXBcbiAqL1xuZnVuY3Rpb24gdG9hc3RNZXNzYWdlKG1lc3NhZ2UsIHR5cGUpIHtcbiAgICBjb25zdCBwaW5pYU1lc3NhZ2UgPSAn8J+NjSAnICsgbWVzc2FnZTtcbiAgICBpZiAodHlwZW9mIF9fVlVFX0RFVlRPT0xTX1RPQVNUX18gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8gTm8gbG9uZ2VyIGF2YWlsYWJsZSA6KFxuICAgICAgICBfX1ZVRV9ERVZUT09MU19UT0FTVF9fKHBpbmlhTWVzc2FnZSwgdHlwZSk7XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGUgPT09ICdlcnJvcicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihwaW5pYU1lc3NhZ2UpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlID09PSAnd2FybicpIHtcbiAgICAgICAgY29uc29sZS53YXJuKHBpbmlhTWVzc2FnZSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZyhwaW5pYU1lc3NhZ2UpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGlzUGluaWEobykge1xuICAgIHJldHVybiAnX2EnIGluIG8gJiYgJ2luc3RhbGwnIGluIG87XG59XG5cbi8qKlxuICogVGhpcyBmaWxlIGNvbnRhaW4gZGV2dG9vbHMgYWN0aW9ucywgdGhleSBhcmUgbm90IFBpbmlhIGFjdGlvbnMuXG4gKi9cbi8vIC0tLVxuZnVuY3Rpb24gY2hlY2tDbGlwYm9hcmRBY2Nlc3MoKSB7XG4gICAgaWYgKCEoJ2NsaXBib2FyZCcgaW4gbmF2aWdhdG9yKSkge1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYFlvdXIgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgdGhlIENsaXBib2FyZCBBUElgLCAnZXJyb3InKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuZnVuY3Rpb24gY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJlxuICAgICAgICBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2RvY3VtZW50IGlzIG5vdCBmb2N1c2VkJykpIHtcbiAgICAgICAgdG9hc3RNZXNzYWdlKCdZb3UgbmVlZCB0byBhY3RpdmF0ZSB0aGUgXCJFbXVsYXRlIGEgZm9jdXNlZCBwYWdlXCIgc2V0dGluZyBpbiB0aGUgXCJSZW5kZXJpbmdcIiBwYW5lbCBvZiBkZXZ0b29scy4nLCAnd2FybicpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsQ29weVN0YXRlKHBpbmlhKSB7XG4gICAgaWYgKGNoZWNrQ2xpcGJvYXJkQWNjZXNzKCkpXG4gICAgICAgIHJldHVybjtcbiAgICB0cnkge1xuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChKU09OLnN0cmluZ2lmeShwaW5pYS5zdGF0ZS52YWx1ZSkpO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBjb3BpZWQgdG8gY2xpcGJvYXJkLicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGNoZWNrTm90Rm9jdXNlZEVycm9yKGVycm9yKSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gc2VyaWFsaXplIHRoZSBzdGF0ZS4gQ2hlY2sgdGhlIGNvbnNvbGUgZm9yIG1vcmUgZGV0YWlscy5gLCAnZXJyb3InKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gYWN0aW9uR2xvYmFsUGFzdGVTdGF0ZShwaW5pYSkge1xuICAgIGlmIChjaGVja0NsaXBib2FyZEFjY2VzcygpKVxuICAgICAgICByZXR1cm47XG4gICAgdHJ5IHtcbiAgICAgICAgbG9hZFN0b3Jlc1N0YXRlKHBpbmlhLCBKU09OLnBhcnNlKGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQucmVhZFRleHQoKSkpO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoJ0dsb2JhbCBzdGF0ZSBwYXN0ZWQgZnJvbSBjbGlwYm9hcmQuJyk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICBpZiAoY2hlY2tOb3RGb2N1c2VkRXJyb3IoZXJyb3IpKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB0b2FzdE1lc3NhZ2UoYEZhaWxlZCB0byBkZXNlcmlhbGl6ZSB0aGUgc3RhdGUgZnJvbSBjbGlwYm9hcmQuIENoZWNrIHRoZSBjb25zb2xlIGZvciBtb3JlIGRldGFpbHMuYCwgJ2Vycm9yJyk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIH1cbn1cbmFzeW5jIGZ1bmN0aW9uIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSkge1xuICAgIHRyeSB7XG4gICAgICAgIHNhdmVBcyhuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkocGluaWEuc3RhdGUudmFsdWUpXSwge1xuICAgICAgICAgICAgdHlwZTogJ3RleHQvcGxhaW47Y2hhcnNldD11dGYtOCcsXG4gICAgICAgIH0pLCAncGluaWEtc3RhdGUuanNvbicpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdG9hc3RNZXNzYWdlKGBGYWlsZWQgdG8gZXhwb3J0IHRoZSBzdGF0ZSBhcyBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5sZXQgZmlsZUlucHV0O1xuZnVuY3Rpb24gZ2V0RmlsZU9wZW5lcigpIHtcbiAgICBpZiAoIWZpbGVJbnB1dCkge1xuICAgICAgICBmaWxlSW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpO1xuICAgICAgICBmaWxlSW5wdXQudHlwZSA9ICdmaWxlJztcbiAgICAgICAgZmlsZUlucHV0LmFjY2VwdCA9ICcuanNvbic7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG9wZW5GaWxlKCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2hhbmdlID0gYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gZmlsZUlucHV0LmZpbGVzO1xuICAgICAgICAgICAgICAgIGlmICghZmlsZXMpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKG51bGwpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy5pdGVtKDApO1xuICAgICAgICAgICAgICAgIGlmICghZmlsZSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoeyB0ZXh0OiBhd2FpdCBmaWxlLnRleHQoKSwgZmlsZSB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlOiBUT0RPOiBjaGFuZ2VkIGZyb20gNC4zIHRvIDQuNFxuICAgICAgICAgICAgZmlsZUlucHV0Lm9uY2FuY2VsID0gKCkgPT4gcmVzb2x2ZShudWxsKTtcbiAgICAgICAgICAgIGZpbGVJbnB1dC5vbmVycm9yID0gcmVqZWN0O1xuICAgICAgICAgICAgZmlsZUlucHV0LmNsaWNrKCk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gb3BlbkZpbGU7XG59XG5hc3luYyBmdW5jdGlvbiBhY3Rpb25HbG9iYWxPcGVuU3RhdGVGaWxlKHBpbmlhKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgb3BlbiA9IGdldEZpbGVPcGVuZXIoKTtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgb3BlbigpO1xuICAgICAgICBpZiAoIXJlc3VsdClcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY29uc3QgeyB0ZXh0LCBmaWxlIH0gPSByZXN1bHQ7XG4gICAgICAgIGxvYWRTdG9yZXNTdGF0ZShwaW5pYSwgSlNPTi5wYXJzZSh0ZXh0KSk7XG4gICAgICAgIHRvYXN0TWVzc2FnZShgR2xvYmFsIHN0YXRlIGltcG9ydGVkIGZyb20gXCIke2ZpbGUubmFtZX1cIi5gKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIHRvYXN0TWVzc2FnZShgRmFpbGVkIHRvIGltcG9ydCB0aGUgc3RhdGUgZnJvbSBKU09OLiBDaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLmAsICdlcnJvcicpO1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB9XG59XG5mdW5jdGlvbiBsb2FkU3RvcmVzU3RhdGUocGluaWEsIHN0YXRlKSB7XG4gICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUpIHtcbiAgICAgICAgY29uc3Qgc3RvcmVTdGF0ZSA9IHBpbmlhLnN0YXRlLnZhbHVlW2tleV07XG4gICAgICAgIC8vIHN0b3JlIGlzIGFscmVhZHkgaW5zdGFudGlhdGVkLCBwYXRjaCBpdFxuICAgICAgICBpZiAoc3RvcmVTdGF0ZSkge1xuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihzdG9yZVN0YXRlLCBzdGF0ZVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIHN0b3JlIGlzIG5vdCBpbnN0YW50aWF0ZWQsIHNldCB0aGUgaW5pdGlhbCBzdGF0ZVxuICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVba2V5XSA9IHN0YXRlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdERpc3BsYXkoZGlzcGxheSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIF9jdXN0b206IHtcbiAgICAgICAgICAgIGRpc3BsYXksXG4gICAgICAgIH0sXG4gICAgfTtcbn1cbmNvbnN0IFBJTklBX1JPT1RfTEFCRUwgPSAn8J+NjSBQaW5pYSAocm9vdCknO1xuY29uc3QgUElOSUFfUk9PVF9JRCA9ICdfcm9vdCc7XG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclRyZWUoc3RvcmUpIHtcbiAgICByZXR1cm4gaXNQaW5pYShzdG9yZSlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBpZDogUElOSUFfUk9PVF9JRCxcbiAgICAgICAgICAgIGxhYmVsOiBQSU5JQV9ST09UX0xBQkVMLFxuICAgICAgICB9XG4gICAgICAgIDoge1xuICAgICAgICAgICAgaWQ6IHN0b3JlLiRpZCxcbiAgICAgICAgICAgIGxhYmVsOiBzdG9yZS4kaWQsXG4gICAgICAgIH07XG59XG5mdW5jdGlvbiBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKHN0b3JlKSB7XG4gICAgaWYgKGlzUGluaWEoc3RvcmUpKSB7XG4gICAgICAgIGNvbnN0IHN0b3JlTmFtZXMgPSBBcnJheS5mcm9tKHN0b3JlLl9zLmtleXMoKSk7XG4gICAgICAgIGNvbnN0IHN0b3JlTWFwID0gc3RvcmUuX3M7XG4gICAgICAgIGNvbnN0IHN0YXRlID0ge1xuICAgICAgICAgICAgc3RhdGU6IHN0b3JlTmFtZXMubWFwKChzdG9yZUlkKSA9PiAoe1xuICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGtleTogc3RvcmVJZCxcbiAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuc3RhdGUudmFsdWVbc3RvcmVJZF0sXG4gICAgICAgICAgICB9KSksXG4gICAgICAgICAgICBnZXR0ZXJzOiBzdG9yZU5hbWVzXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaWQpID0+IHN0b3JlTWFwLmdldChpZCkuX2dldHRlcnMpXG4gICAgICAgICAgICAgICAgLm1hcCgoaWQpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHN0b3JlTWFwLmdldChpZCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgZWRpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBrZXk6IGlkLFxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RvcmUuX2dldHRlcnMucmVkdWNlKChnZXR0ZXJzLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IHN0b3JlW2tleV07XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycztcbiAgICAgICAgICAgICAgICAgICAgfSwge30pLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cbiAgICBjb25zdCBzdGF0ZSA9IHtcbiAgICAgICAgc3RhdGU6IE9iamVjdC5rZXlzKHN0b3JlLiRzdGF0ZSkubWFwKChrZXkpID0+ICh7XG4gICAgICAgICAgICBlZGl0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGtleSxcbiAgICAgICAgICAgIHZhbHVlOiBzdG9yZS4kc3RhdGVba2V5XSxcbiAgICAgICAgfSkpLFxuICAgIH07XG4gICAgLy8gYXZvaWQgYWRkaW5nIGVtcHR5IGdldHRlcnNcbiAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XG4gICAgICAgIHN0YXRlLmdldHRlcnMgPSBzdG9yZS5fZ2V0dGVycy5tYXAoKGdldHRlck5hbWUpID0+ICh7XG4gICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICBrZXk6IGdldHRlck5hbWUsXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVbZ2V0dGVyTmFtZV0sXG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaWYgKHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLnNpemUpIHtcbiAgICAgICAgc3RhdGUuY3VzdG9tUHJvcGVydGllcyA9IEFycmF5LmZyb20oc3RvcmUuX2N1c3RvbVByb3BlcnRpZXMpLm1hcCgoa2V5KSA9PiAoe1xuICAgICAgICAgICAgZWRpdGFibGU6IHRydWUsXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICB2YWx1ZTogc3RvcmVba2V5XSxcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZXR1cm4gc3RhdGU7XG59XG5mdW5jdGlvbiBmb3JtYXRFdmVudERhdGEoZXZlbnRzKSB7XG4gICAgaWYgKCFldmVudHMpXG4gICAgICAgIHJldHVybiB7fTtcbiAgICBpZiAoQXJyYXkuaXNBcnJheShldmVudHMpKSB7XG4gICAgICAgIC8vIFRPRE86IGhhbmRsZSBhZGQgYW5kIGRlbGV0ZSBmb3IgYXJyYXlzIGFuZCBvYmplY3RzXG4gICAgICAgIHJldHVybiBldmVudHMucmVkdWNlKChkYXRhLCBldmVudCkgPT4ge1xuICAgICAgICAgICAgZGF0YS5rZXlzLnB1c2goZXZlbnQua2V5KTtcbiAgICAgICAgICAgIGRhdGEub3BlcmF0aW9ucy5wdXNoKGV2ZW50LnR5cGUpO1xuICAgICAgICAgICAgZGF0YS5vbGRWYWx1ZVtldmVudC5rZXldID0gZXZlbnQub2xkVmFsdWU7XG4gICAgICAgICAgICBkYXRhLm5ld1ZhbHVlW2V2ZW50LmtleV0gPSBldmVudC5uZXdWYWx1ZTtcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgICBvbGRWYWx1ZToge30sXG4gICAgICAgICAgICBrZXlzOiBbXSxcbiAgICAgICAgICAgIG9wZXJhdGlvbnM6IFtdLFxuICAgICAgICAgICAgbmV3VmFsdWU6IHt9LFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvcGVyYXRpb246IGZvcm1hdERpc3BsYXkoZXZlbnRzLnR5cGUpLFxuICAgICAgICAgICAga2V5OiBmb3JtYXREaXNwbGF5KGV2ZW50cy5rZXkpLFxuICAgICAgICAgICAgb2xkVmFsdWU6IGV2ZW50cy5vbGRWYWx1ZSxcbiAgICAgICAgICAgIG5ld1ZhbHVlOiBldmVudHMubmV3VmFsdWUsXG4gICAgICAgIH07XG4gICAgfVxufVxuZnVuY3Rpb24gZm9ybWF0TXV0YXRpb25UeXBlKHR5cGUpIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSBNdXRhdGlvblR5cGUuZGlyZWN0OlxuICAgICAgICAgICAgcmV0dXJuICdtdXRhdGlvbic7XG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb246XG4gICAgICAgICAgICByZXR1cm4gJyRwYXRjaCc7XG4gICAgICAgIGNhc2UgTXV0YXRpb25UeXBlLnBhdGNoT2JqZWN0OlxuICAgICAgICAgICAgcmV0dXJuICckcGF0Y2gnO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuICd1bmtub3duJztcbiAgICB9XG59XG5cbi8vIHRpbWVsaW5lIGNhbiBiZSBwYXVzZWQgd2hlbiBkaXJlY3RseSBjaGFuZ2luZyB0aGUgc3RhdGVcbmxldCBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcbmNvbnN0IGNvbXBvbmVudFN0YXRlVHlwZXMgPSBbXTtcbmNvbnN0IE1VVEFUSU9OU19MQVlFUl9JRCA9ICdwaW5pYTptdXRhdGlvbnMnO1xuY29uc3QgSU5TUEVDVE9SX0lEID0gJ3BpbmlhJztcbmNvbnN0IHsgYXNzaWduOiBhc3NpZ24kMSB9ID0gT2JqZWN0O1xuLyoqXG4gKiBHZXRzIHRoZSBkaXNwbGF5ZWQgbmFtZSBvZiBhIHN0b3JlIGluIGRldnRvb2xzXG4gKlxuICogQHBhcmFtIGlkIC0gaWQgb2YgdGhlIHN0b3JlXG4gKiBAcmV0dXJucyBhIGZvcm1hdHRlZCBzdHJpbmdcbiAqL1xuY29uc3QgZ2V0U3RvcmVUeXBlID0gKGlkKSA9PiAn8J+NjSAnICsgaWQ7XG4vKipcbiAqIEFkZCB0aGUgcGluaWEgcGx1Z2luIHdpdGhvdXQgYW55IHN0b3JlLiBBbGxvd3MgZGlzcGxheWluZyBhIFBpbmlhIHBsdWdpbiB0YWJcbiAqIGFzIHNvb24gYXMgaXQgaXMgYWRkZWQgdG8gdGhlIGFwcGxpY2F0aW9uLlxuICpcbiAqIEBwYXJhbSBhcHAgLSBWdWUgYXBwbGljYXRpb25cbiAqIEBwYXJhbSBwaW5pYSAtIHBpbmlhIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIHJlZ2lzdGVyUGluaWFEZXZ0b29scyhhcHAsIHBpbmlhKSB7XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcbiAgICAgICAgYXBwLFxuICAgIH0sIChhcGkpID0+IHtcbiAgICAgICAgaWYgKHR5cGVvZiBhcGkubm93ICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0b2FzdE1lc3NhZ2UoJ1lvdSBzZWVtIHRvIGJlIHVzaW5nIGFuIG91dGRhdGVkIHZlcnNpb24gb2YgVnVlIERldnRvb2xzLiBBcmUgeW91IHN0aWxsIHVzaW5nIHRoZSBCZXRhIHJlbGVhc2UgaW5zdGVhZCBvZiB0aGUgc3RhYmxlIG9uZT8gWW91IGNhbiBmaW5kIHRoZSBsaW5rcyBhdCBodHRwczovL2RldnRvb2xzLnZ1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbC4nKTtcbiAgICAgICAgfVxuICAgICAgICBhcGkuYWRkVGltZWxpbmVMYXllcih7XG4gICAgICAgICAgICBpZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgbGFiZWw6IGBQaW5pYSDwn42NYCxcbiAgICAgICAgICAgIGNvbG9yOiAweGU1ZGY4OCxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwaS5hZGRJbnNwZWN0b3Ioe1xuICAgICAgICAgICAgaWQ6IElOU1BFQ1RPUl9JRCxcbiAgICAgICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgICAgICBpY29uOiAnc3RvcmFnZScsXG4gICAgICAgICAgICB0cmVlRmlsdGVyUGxhY2Vob2xkZXI6ICdTZWFyY2ggc3RvcmVzJyxcbiAgICAgICAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdjb250ZW50X2NvcHknLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbENvcHlTdGF0ZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTZXJpYWxpemUgYW5kIGNvcHkgdGhlIHN0YXRlJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2NvbnRlbnRfcGFzdGUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGFjdGlvbkdsb2JhbFBhc3RlU3RhdGUocGluaWEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXBsYWNlIHRoZSBzdGF0ZSB3aXRoIHRoZSBjb250ZW50IG9mIHlvdXIgY2xpcGJvYXJkJyxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3NhdmUnLFxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkdsb2JhbFNhdmVTdGF0ZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdTYXZlIHRoZSBzdGF0ZSBhcyBhIEpTT04gZmlsZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGljb246ICdmb2xkZXJfb3BlbicsXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYWN0aW9uR2xvYmFsT3BlblN0YXRlRmlsZShwaW5pYSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwaS5zZW5kSW5zcGVjdG9yU3RhdGUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogJ0ltcG9ydCB0aGUgc3RhdGUgZnJvbSBhIEpTT04gZmlsZScsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBub2RlQWN0aW9uczogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3Jlc3RvcmUnLFxuICAgICAgICAgICAgICAgICAgICB0b29sdGlwOiAnUmVzZXQgdGhlIHN0YXRlICh3aXRoIFwiJHJlc2V0XCIpJyxcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZUlkKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChub2RlSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgQ2Fubm90IHJlc2V0IFwiJHtub2RlSWR9XCIgc3RvcmUgYmVjYXVzZSBpdCB3YXNuJ3QgZm91bmQuYCwgJ3dhcm4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBzdG9yZS4kcmVzZXQgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYENhbm5vdCByZXNldCBcIiR7bm9kZUlkfVwiIHN0b3JlIGJlY2F1c2UgaXQgZG9lc24ndCBoYXZlIGEgXCIkcmVzZXRcIiBtZXRob2QgaW1wbGVtZW50ZWQuYCwgJ3dhcm4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLiRyZXNldCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgU3RvcmUgXCIke25vZGVJZH1cIiByZXNldC5gKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgXSxcbiAgICAgICAgfSk7XG4gICAgICAgIGFwaS5vbi5pbnNwZWN0Q29tcG9uZW50KChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm94eSA9IChwYXlsb2FkLmNvbXBvbmVudEluc3RhbmNlICYmXG4gICAgICAgICAgICAgICAgcGF5bG9hZC5jb21wb25lbnRJbnN0YW5jZS5wcm94eSk7XG4gICAgICAgICAgICBpZiAocHJveHkgJiYgcHJveHkuX3BTdG9yZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwaW5pYVN0b3JlcyA9IHBheWxvYWQuY29tcG9uZW50SW5zdGFuY2UucHJveHkuX3BTdG9yZXM7XG4gICAgICAgICAgICAgICAgT2JqZWN0LnZhbHVlcyhwaW5pYVN0b3JlcykuZm9yRWFjaCgoc3RvcmUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgcGF5bG9hZC5pbnN0YW5jZURhdGEuc3RhdGUucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleTogJ3N0YXRlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9pc09wdGlvbnNBUElcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX2N1c3RvbToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHRvUmF3KHN0b3JlLiRzdGF0ZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25zOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAncmVzdG9yZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdSZXNldCB0aGUgc3RhdGUgb2YgdGhpcyBzdG9yZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKCkgPT4gc3RvcmUuJHJlc2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogLy8gTk9URTogd29ya2Fyb3VuZCB0byB1bndyYXAgdHJhbnNmZXJyZWQgcmVmc1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLnJlZHVjZSgoc3RhdGUsIGtleSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVba2V5XSA9IHN0b3JlLiRzdGF0ZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCB7fSksXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmUuX2dldHRlcnMgJiYgc3RvcmUuX2dldHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkLmluc3RhbmNlRGF0YS5zdGF0ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrZXk6ICdnZXR0ZXJzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0YWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0b3JlLl9nZXR0ZXJzLnJlZHVjZSgoZ2V0dGVycywga2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzW2tleV0gPSBzdG9yZVtrZXldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UganVzdCB3YW50IHRvIHNob3cgaXQgaW4gZGV2dG9vbHNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdldHRlcnNba2V5XSA9IGVycm9yO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXR0ZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIHt9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yVHJlZSgocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQuYXBwID09PSBhcHAgJiYgcGF5bG9hZC5pbnNwZWN0b3JJZCA9PT0gSU5TUEVDVE9SX0lEKSB7XG4gICAgICAgICAgICAgICAgbGV0IHN0b3JlcyA9IFtwaW5pYV07XG4gICAgICAgICAgICAgICAgc3RvcmVzID0gc3RvcmVzLmNvbmNhdChBcnJheS5mcm9tKHBpbmlhLl9zLnZhbHVlcygpKSk7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5yb290Tm9kZXMgPSAocGF5bG9hZC5maWx0ZXJcbiAgICAgICAgICAgICAgICAgICAgPyBzdG9yZXMuZmlsdGVyKChzdG9yZSkgPT4gJyRpZCcgaW4gc3RvcmVcbiAgICAgICAgICAgICAgICAgICAgICAgID8gc3RvcmUuJGlkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRvTG93ZXJDYXNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuaW5jbHVkZXMocGF5bG9hZC5maWx0ZXIudG9Mb3dlckNhc2UoKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIDogUElOSUFfUk9PVF9MQUJFTC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKHBheWxvYWQuZmlsdGVyLnRvTG93ZXJDYXNlKCkpKVxuICAgICAgICAgICAgICAgICAgICA6IHN0b3JlcykubWFwKGZvcm1hdFN0b3JlRm9ySW5zcGVjdG9yVHJlZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBFeHBvc2UgcGluaWEgaW5zdGFuY2UgYXMgJHBpbmlhIHRvIHdpbmRvd1xuICAgICAgICBnbG9iYWxUaGlzLiRwaW5pYSA9IHBpbmlhO1xuICAgICAgICBhcGkub24uZ2V0SW5zcGVjdG9yU3RhdGUoKHBheWxvYWQpID0+IHtcbiAgICAgICAgICAgIGlmIChwYXlsb2FkLmFwcCA9PT0gYXBwICYmIHBheWxvYWQuaW5zcGVjdG9ySWQgPT09IElOU1BFQ1RPUl9JRCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGluc3BlY3RlZFN0b3JlID0gcGF5bG9hZC5ub2RlSWQgPT09IFBJTklBX1JPT1RfSURcbiAgICAgICAgICAgICAgICAgICAgPyBwaW5pYVxuICAgICAgICAgICAgICAgICAgICA6IHBpbmlhLl9zLmdldChwYXlsb2FkLm5vZGVJZCk7XG4gICAgICAgICAgICAgICAgaWYgKCFpbnNwZWN0ZWRTdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGNvdWxkIGJlIHRoZSBzZWxlY3RlZCBzdG9yZSByZXN0b3JlZCBmb3IgYSBkaWZmZXJlbnQgcHJvamVjdFxuICAgICAgICAgICAgICAgICAgICAvLyBzbyBpdCdzIGJldHRlciBub3QgdG8gc2F5IGFueXRoaW5nIGhlcmVcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRXhwb3NlIHNlbGVjdGVkIHN0b3JlIGFzICRzdG9yZSB0byB3aW5kb3dcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBheWxvYWQubm9kZUlkICE9PSBQSU5JQV9ST09UX0lEKVxuICAgICAgICAgICAgICAgICAgICAgICAgZ2xvYmFsVGhpcy4kc3RvcmUgPSB0b1JhdyhpbnNwZWN0ZWRTdG9yZSk7XG4gICAgICAgICAgICAgICAgICAgIHBheWxvYWQuc3RhdGUgPSBmb3JtYXRTdG9yZUZvckluc3BlY3RvclN0YXRlKGluc3BlY3RlZFN0b3JlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBhcGkub24uZWRpdEluc3BlY3RvclN0YXRlKChwYXlsb2FkKSA9PiB7XG4gICAgICAgICAgICBpZiAocGF5bG9hZC5hcHAgPT09IGFwcCAmJiBwYXlsb2FkLmluc3BlY3RvcklkID09PSBJTlNQRUNUT1JfSUQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnNwZWN0ZWRTdG9yZSA9IHBheWxvYWQubm9kZUlkID09PSBQSU5JQV9ST09UX0lEXG4gICAgICAgICAgICAgICAgICAgID8gcGluaWFcbiAgICAgICAgICAgICAgICAgICAgOiBwaW5pYS5fcy5nZXQocGF5bG9hZC5ub2RlSWQpO1xuICAgICAgICAgICAgICAgIGlmICghaW5zcGVjdGVkU3RvcmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgc3RvcmUgXCIke3BheWxvYWQubm9kZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKCFpc1BpbmlhKGluc3BlY3RlZFN0b3JlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBhY2Nlc3Mgb25seSB0aGUgc3RhdGVcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoICE9PSAxIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAhaW5zcGVjdGVkU3RvcmUuX2N1c3RvbVByb3BlcnRpZXMuaGFzKHBhdGhbMF0pIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwYXRoWzBdIGluIGluc3BlY3RlZFN0b3JlLiRzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCckc3RhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gUm9vdCBhY2Nlc3MsIHdlIGNhbiBvbWl0IHRoZSBgLnZhbHVlYCBiZWNhdXNlIHRoZSBkZXZ0b29scyBBUEkgZG9lcyBpdCBmb3IgdXNcbiAgICAgICAgICAgICAgICAgICAgcGF0aC51bnNoaWZ0KCdzdGF0ZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcGF5bG9hZC5zZXQoaW5zcGVjdGVkU3RvcmUsIHBhdGgsIHBheWxvYWQuc3RhdGUudmFsdWUpO1xuICAgICAgICAgICAgICAgIGlzVGltZWxpbmVBY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgYXBpLm9uLmVkaXRDb21wb25lbnRTdGF0ZSgocGF5bG9hZCkgPT4ge1xuICAgICAgICAgICAgaWYgKHBheWxvYWQudHlwZS5zdGFydHNXaXRoKCfwn42NJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUlkID0gcGF5bG9hZC50eXBlLnJlcGxhY2UoL17wn42NXFxzKi8sICcnKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChzdG9yZUlkKTtcbiAgICAgICAgICAgICAgICBpZiAoIXN0b3JlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b2FzdE1lc3NhZ2UoYHN0b3JlIFwiJHtzdG9yZUlkfVwiIG5vdCBmb3VuZGAsICdlcnJvcicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB7IHBhdGggfSA9IHBheWxvYWQ7XG4gICAgICAgICAgICAgICAgaWYgKHBhdGhbMF0gIT09ICdzdGF0ZScpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRvYXN0TWVzc2FnZShgSW52YWxpZCBwYXRoIGZvciBzdG9yZSBcIiR7c3RvcmVJZH1cIjpcXG4ke3BhdGh9XFxuT25seSBzdGF0ZSBjYW4gYmUgbW9kaWZpZWQuYCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHJld3JpdGUgdGhlIGZpcnN0IGVudHJ5IHRvIGJlIGFibGUgdG8gZGlyZWN0bHkgc2V0IHRoZSBzdGF0ZSBhc1xuICAgICAgICAgICAgICAgIC8vIHdlbGwgYXMgYW55IG90aGVyIHBhdGhcbiAgICAgICAgICAgICAgICBwYXRoWzBdID0gJyRzdGF0ZSc7XG4gICAgICAgICAgICAgICAgaXNUaW1lbGluZUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHBheWxvYWQuc2V0KHN0b3JlLCBwYXRoLCBwYXlsb2FkLnN0YXRlLnZhbHVlKTtcbiAgICAgICAgICAgICAgICBpc1RpbWVsaW5lQWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5mdW5jdGlvbiBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBzdG9yZSkge1xuICAgIGlmICghY29tcG9uZW50U3RhdGVUeXBlcy5pbmNsdWRlcyhnZXRTdG9yZVR5cGUoc3RvcmUuJGlkKSkpIHtcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcy5wdXNoKGdldFN0b3JlVHlwZShzdG9yZS4kaWQpKTtcbiAgICB9XG4gICAgc2V0dXBEZXZ0b29sc1BsdWdpbih7XG4gICAgICAgIGlkOiAnZGV2LmVzbS5waW5pYScsXG4gICAgICAgIGxhYmVsOiAnUGluaWEg8J+NjScsXG4gICAgICAgIGxvZ286ICdodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9sb2dvLnN2ZycsXG4gICAgICAgIHBhY2thZ2VOYW1lOiAncGluaWEnLFxuICAgICAgICBob21lcGFnZTogJ2h0dHBzOi8vcGluaWEudnVlanMub3JnJyxcbiAgICAgICAgY29tcG9uZW50U3RhdGVUeXBlcyxcbiAgICAgICAgYXBwLFxuICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgbG9nU3RvcmVDaGFuZ2VzOiB7XG4gICAgICAgICAgICAgICAgbGFiZWw6ICdOb3RpZnkgYWJvdXQgbmV3L2RlbGV0ZWQgc3RvcmVzJyxcbiAgICAgICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIC8vIHVzZUVtb2ppczoge1xuICAgICAgICAgICAgLy8gICBsYWJlbDogJ1VzZSBlbW9qaXMgaW4gbWVzc2FnZXMg4pqh77iPJyxcbiAgICAgICAgICAgIC8vICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICAgICAgLy8gICBkZWZhdWx0VmFsdWU6IHRydWUsXG4gICAgICAgICAgICAvLyB9LFxuICAgICAgICB9LFxuICAgIH0sIChhcGkpID0+IHtcbiAgICAgICAgLy8gZ3JhY2VmdWxseSBoYW5kbGUgZXJyb3JzXG4gICAgICAgIGNvbnN0IG5vdyA9IHR5cGVvZiBhcGkubm93ID09PSAnZnVuY3Rpb24nID8gYXBpLm5vdy5iaW5kKGFwaSkgOiBEYXRlLm5vdztcbiAgICAgICAgc3RvcmUuJG9uQWN0aW9uKCh7IGFmdGVyLCBvbkVycm9yLCBuYW1lLCBhcmdzIH0pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwSWQgPSBydW5uaW5nQWN0aW9uSWQrKztcbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdGltZTogbm93KCksXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+bqyAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdzdGFydCcsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlOiBmb3JtYXREaXNwbGF5KHN0b3JlLiRpZCksXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IGZvcm1hdERpc3BsYXkobmFtZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGFmdGVyKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+brCAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBncm91cElkLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBvbkVycm9yKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAgIGFjdGl2ZUFjdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIGxheWVySWQ6IE1VVEFUSU9OU19MQVlFUl9JRCxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbG9nVHlwZTogJ2Vycm9yJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn8J+SpSAnICsgbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRpdGxlOiAnZW5kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogZm9ybWF0RGlzcGxheShuYW1lKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdyb3VwSWQsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgdHJ1ZSk7XG4gICAgICAgIHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmZvckVhY2goKG5hbWUpID0+IHtcbiAgICAgICAgICAgIHdhdGNoKCgpID0+IHVucmVmKHN0b3JlW25hbWVdKSwgKG5ld1ZhbHVlLCBvbGRWYWx1ZSkgPT4ge1xuICAgICAgICAgICAgICAgIGFwaS5ub3RpZnlDb21wb25lbnRVcGRhdGUoKTtcbiAgICAgICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICAgICAgaWYgKGlzVGltZWxpbmVBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgYXBpLmFkZFRpbWVsaW5lRXZlbnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lOiBub3coKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6IG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXdWYWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCB7IGRlZXA6IHRydWUgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzdG9yZS4kc3Vic2NyaWJlKCh7IGV2ZW50cywgdHlwZSB9LCBzdGF0ZSkgPT4ge1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICAgICAgaWYgKCFpc1RpbWVsaW5lQWN0aXZlKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIC8vIHJvb3RTdG9yZS5zdGF0ZVtzdG9yZS5pZF0gPSBzdGF0ZVxuICAgICAgICAgICAgY29uc3QgZXZlbnREYXRhID0ge1xuICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgIHRpdGxlOiBmb3JtYXRNdXRhdGlvblR5cGUodHlwZSksXG4gICAgICAgICAgICAgICAgZGF0YTogYXNzaWduJDEoeyBzdG9yZTogZm9ybWF0RGlzcGxheShzdG9yZS4kaWQpIH0sIGZvcm1hdEV2ZW50RGF0YShldmVudHMpKSxcbiAgICAgICAgICAgICAgICBncm91cElkOiBhY3RpdmVBY3Rpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKHR5cGUgPT09IE11dGF0aW9uVHlwZS5wYXRjaEZ1bmN0aW9uKSB7XG4gICAgICAgICAgICAgICAgZXZlbnREYXRhLnN1YnRpdGxlID0gJ+Kkte+4jyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlID09PSBNdXRhdGlvblR5cGUucGF0Y2hPYmplY3QpIHtcbiAgICAgICAgICAgICAgICBldmVudERhdGEuc3VidGl0bGUgPSAn8J+nqSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChldmVudHMgJiYgIUFycmF5LmlzQXJyYXkoZXZlbnRzKSkge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5zdWJ0aXRsZSA9IGV2ZW50cy50eXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGV2ZW50cykge1xuICAgICAgICAgICAgICAgIGV2ZW50RGF0YS5kYXRhWydyYXdFdmVudChzKSddID0ge1xuICAgICAgICAgICAgICAgICAgICBfY3VzdG9tOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnRGVidWdnZXJFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvb2x0aXA6ICdyYXcgRGVidWdnZXJFdmVudFtdJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBldmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFwaS5hZGRUaW1lbGluZUV2ZW50KHtcbiAgICAgICAgICAgICAgICBsYXllcklkOiBNVVRBVElPTlNfTEFZRVJfSUQsXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50RGF0YSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LCB7IGRldGFjaGVkOiB0cnVlLCBmbHVzaDogJ3N5bmMnIH0pO1xuICAgICAgICBjb25zdCBob3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICBzdG9yZS5faG90VXBkYXRlID0gbWFya1JhdygobmV3U3RvcmUpID0+IHtcbiAgICAgICAgICAgIGhvdFVwZGF0ZShuZXdTdG9yZSk7XG4gICAgICAgICAgICBhcGkuYWRkVGltZWxpbmVFdmVudCh7XG4gICAgICAgICAgICAgICAgbGF5ZXJJZDogTVVUQVRJT05TX0xBWUVSX0lELFxuICAgICAgICAgICAgICAgIGV2ZW50OiB7XG4gICAgICAgICAgICAgICAgICAgIHRpbWU6IG5vdygpLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ/CflKUgJyArIHN0b3JlLiRpZCxcbiAgICAgICAgICAgICAgICAgICAgc3VidGl0bGU6ICdITVIgdXBkYXRlJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmU6IGZvcm1hdERpc3BsYXkoc3RvcmUuJGlkKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm86IGZvcm1hdERpc3BsYXkoYEhNUiB1cGRhdGVgKSxcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGRldnRvb2xzIHRvb1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCB7ICRkaXNwb3NlIH0gPSBzdG9yZTtcbiAgICAgICAgc3RvcmUuJGRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgICAgICAkZGlzcG9zZSgpO1xuICAgICAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JUcmVlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuc2VuZEluc3BlY3RvclN0YXRlKElOU1BFQ1RPUl9JRCk7XG4gICAgICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgICAgICB0b2FzdE1lc3NhZ2UoYERpc3Bvc2VkIFwiJHtzdG9yZS4kaWR9XCIgc3RvcmUg8J+XkWApO1xuICAgICAgICB9O1xuICAgICAgICAvLyB0cmlnZ2VyIGFuIHVwZGF0ZSBzbyBpdCBjYW4gZGlzcGxheSBuZXcgcmVnaXN0ZXJlZCBzdG9yZXNcbiAgICAgICAgYXBpLm5vdGlmeUNvbXBvbmVudFVwZGF0ZSgpO1xuICAgICAgICBhcGkuc2VuZEluc3BlY3RvclRyZWUoSU5TUEVDVE9SX0lEKTtcbiAgICAgICAgYXBpLnNlbmRJbnNwZWN0b3JTdGF0ZShJTlNQRUNUT1JfSUQpO1xuICAgICAgICBhcGkuZ2V0U2V0dGluZ3MoKS5sb2dTdG9yZUNoYW5nZXMgJiZcbiAgICAgICAgICAgIHRvYXN0TWVzc2FnZShgXCIke3N0b3JlLiRpZH1cIiBzdG9yZSBpbnN0YWxsZWQg8J+GlWApO1xuICAgIH0pO1xufVxubGV0IHJ1bm5pbmdBY3Rpb25JZCA9IDA7XG5sZXQgYWN0aXZlQWN0aW9uO1xuLyoqXG4gKiBQYXRjaGVzIGEgc3RvcmUgdG8gZW5hYmxlIGFjdGlvbiBncm91cGluZyBpbiBkZXZ0b29scyBieSB3cmFwcGluZyB0aGUgc3RvcmUgd2l0aCBhIFByb3h5IHRoYXQgaXMgcGFzc2VkIGFzIHRoZVxuICogY29udGV4dCBvZiBhbGwgYWN0aW9ucywgYWxsb3dpbmcgdXMgdG8gc2V0IGBydW5uaW5nQWN0aW9uYCBvbiBlYWNoIGFjY2VzcyBhbmQgZWZmZWN0aXZlbHkgYXNzb2NpYXRpbmcgYW55IHN0YXRlXG4gKiBtdXRhdGlvbiB0byB0aGUgYWN0aW9uLlxuICpcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIHBhdGNoXG4gKiBAcGFyYW0gYWN0aW9uTmFtZXMgLSBsaXN0IG9mIGFjdGlvbnN0IHRvIHBhdGNoXG4gKi9cbmZ1bmN0aW9uIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIGFjdGlvbk5hbWVzLCB3cmFwV2l0aFByb3h5KSB7XG4gICAgLy8gb3JpZ2luYWwgYWN0aW9ucyBvZiB0aGUgc3RvcmUgYXMgdGhleSBhcmUgZ2l2ZW4gYnkgcGluaWEuIFdlIGFyZSBnb2luZyB0byBvdmVycmlkZSB0aGVtXG4gICAgY29uc3QgYWN0aW9ucyA9IGFjdGlvbk5hbWVzLnJlZHVjZSgoc3RvcmVBY3Rpb25zLCBhY3Rpb25OYW1lKSA9PiB7XG4gICAgICAgIC8vIHVzZSB0b1JhdyB0byBhdm9pZCB0cmFja2luZyAjNTQxXG4gICAgICAgIHN0b3JlQWN0aW9uc1thY3Rpb25OYW1lXSA9IHRvUmF3KHN0b3JlKVthY3Rpb25OYW1lXTtcbiAgICAgICAgcmV0dXJuIHN0b3JlQWN0aW9ucztcbiAgICB9LCB7fSk7XG4gICAgZm9yIChjb25zdCBhY3Rpb25OYW1lIGluIGFjdGlvbnMpIHtcbiAgICAgICAgc3RvcmVbYWN0aW9uTmFtZV0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyB0aGUgcnVubmluZyBhY3Rpb24gaWQgaXMgaW5jcmVtZW50ZWQgaW4gYSBiZWZvcmUgYWN0aW9uIGhvb2tcbiAgICAgICAgICAgIGNvbnN0IF9hY3Rpb25JZCA9IHJ1bm5pbmdBY3Rpb25JZDtcbiAgICAgICAgICAgIGNvbnN0IHRyYWNrZWRTdG9yZSA9IHdyYXBXaXRoUHJveHlcbiAgICAgICAgICAgICAgICA/IG5ldyBQcm94eShzdG9yZSwge1xuICAgICAgICAgICAgICAgICAgICBnZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3QuZ2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzZXQoLi4uYXJncykge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlQWN0aW9uID0gX2FjdGlvbklkO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJlZmxlY3Quc2V0KC4uLmFyZ3MpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgOiBzdG9yZTtcbiAgICAgICAgICAgIC8vIEZvciBTZXR1cCBTdG9yZXMgd2UgbmVlZCBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1hc3luYy1jb250ZXh0XG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSBfYWN0aW9uSWQ7XG4gICAgICAgICAgICBjb25zdCByZXRWYWx1ZSA9IGFjdGlvbnNbYWN0aW9uTmFtZV0uYXBwbHkodHJhY2tlZFN0b3JlLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgLy8gdGhpcyBpcyBzYWZlciBhcyBhc3luYyBhY3Rpb25zIGluIFNldHVwIFN0b3JlcyB3b3VsZCBhc3NvY2lhdGUgbXV0YXRpb25zIGRvbmUgb3V0c2lkZSBvZiB0aGUgYWN0aW9uXG4gICAgICAgICAgICBhY3RpdmVBY3Rpb24gPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICByZXR1cm4gcmV0VmFsdWU7XG4gICAgICAgIH07XG4gICAgfVxufVxuLyoqXG4gKiBwaW5pYS51c2UoZGV2dG9vbHNQbHVnaW4pXG4gKi9cbmZ1bmN0aW9uIGRldnRvb2xzUGx1Z2luKHsgYXBwLCBzdG9yZSwgb3B0aW9ucyB9KSB7XG4gICAgLy8gSE1SIG1vZHVsZVxuICAgIGlmIChzdG9yZS4kaWQuc3RhcnRzV2l0aCgnX19ob3Q6JykpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBkZXRlY3Qgb3B0aW9uIGFwaSB2cyBzZXR1cCBhcGlcbiAgICBzdG9yZS5faXNPcHRpb25zQVBJID0gISFvcHRpb25zLnN0YXRlO1xuICAgIC8vIERvIG5vdCBvdmVyd3JpdGUgYWN0aW9ucyBtb2NrZWQgYnkgQHBpbmlhL3Rlc3RpbmcgKCMyMjk4KVxuICAgIGlmICghc3RvcmUuX3AuX3Rlc3RpbmcpIHtcbiAgICAgICAgcGF0Y2hBY3Rpb25Gb3JHcm91cGluZyhzdG9yZSwgT2JqZWN0LmtleXMob3B0aW9ucy5hY3Rpb25zKSwgc3RvcmUuX2lzT3B0aW9uc0FQSSk7XG4gICAgICAgIC8vIFVwZ3JhZGUgdGhlIEhNUiB0byBhbHNvIHVwZGF0ZSB0aGUgbmV3IGFjdGlvbnNcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxIb3RVcGRhdGUgPSBzdG9yZS5faG90VXBkYXRlO1xuICAgICAgICB0b1JhdyhzdG9yZSkuX2hvdFVwZGF0ZSA9IGZ1bmN0aW9uIChuZXdTdG9yZSkge1xuICAgICAgICAgICAgb3JpZ2luYWxIb3RVcGRhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHBhdGNoQWN0aW9uRm9yR3JvdXBpbmcoc3RvcmUsIE9iamVjdC5rZXlzKG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpLCAhIXN0b3JlLl9pc09wdGlvbnNBUEkpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICBhZGRTdG9yZVRvRGV2dG9vbHMoYXBwLCBcbiAgICAvLyBGSVhNRTogaXMgdGhlcmUgYSB3YXkgdG8gYWxsb3cgdGhlIGFzc2lnbm1lbnQgZnJvbSBTdG9yZTxJZCwgUywgRywgQT4gdG8gU3RvcmVHZW5lcmljP1xuICAgIHN0b3JlKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgUGluaWEgaW5zdGFuY2UgdG8gYmUgdXNlZCBieSB0aGUgYXBwbGljYXRpb25cbiAqL1xuZnVuY3Rpb24gY3JlYXRlUGluaWEoKSB7XG4gICAgY29uc3Qgc2NvcGUgPSBlZmZlY3RTY29wZSh0cnVlKTtcbiAgICAvLyBOT1RFOiBoZXJlIHdlIGNvdWxkIGNoZWNrIHRoZSB3aW5kb3cgb2JqZWN0IGZvciBhIHN0YXRlIGFuZCBkaXJlY3RseSBzZXQgaXRcbiAgICAvLyBpZiB0aGVyZSBpcyBhbnl0aGluZyBsaWtlIGl0IHdpdGggVnVlIDMgU1NSXG4gICAgY29uc3Qgc3RhdGUgPSBzY29wZS5ydW4oKCkgPT4gcmVmKHt9KSk7XG4gICAgbGV0IF9wID0gW107XG4gICAgLy8gcGx1Z2lucyBhZGRlZCBiZWZvcmUgY2FsbGluZyBhcHAudXNlKHBpbmlhKVxuICAgIGxldCB0b0JlSW5zdGFsbGVkID0gW107XG4gICAgY29uc3QgcGluaWEgPSBtYXJrUmF3KHtcbiAgICAgICAgaW5zdGFsbChhcHApIHtcbiAgICAgICAgICAgIC8vIHRoaXMgYWxsb3dzIGNhbGxpbmcgdXNlU3RvcmUoKSBvdXRzaWRlIG9mIGEgY29tcG9uZW50IHNldHVwIGFmdGVyXG4gICAgICAgICAgICAvLyBpbnN0YWxsaW5nIHBpbmlhJ3MgcGx1Z2luXG4gICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgICAgICBwaW5pYS5fYSA9IGFwcDtcbiAgICAgICAgICAgIGFwcC5wcm92aWRlKHBpbmlhU3ltYm9sLCBwaW5pYSk7XG4gICAgICAgICAgICBhcHAuY29uZmlnLmdsb2JhbFByb3BlcnRpZXMuJHBpbmlhID0gcGluaWE7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICByZWdpc3RlclBpbmlhRGV2dG9vbHMoYXBwLCBwaW5pYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0b0JlSW5zdGFsbGVkLmZvckVhY2goKHBsdWdpbikgPT4gX3AucHVzaChwbHVnaW4pKTtcbiAgICAgICAgICAgIHRvQmVJbnN0YWxsZWQgPSBbXTtcbiAgICAgICAgfSxcbiAgICAgICAgdXNlKHBsdWdpbikge1xuICAgICAgICAgICAgaWYgKCF0aGlzLl9hKSB7XG4gICAgICAgICAgICAgICAgdG9CZUluc3RhbGxlZC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBfcC5wdXNoKHBsdWdpbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcbiAgICAgICAgX3AsXG4gICAgICAgIC8vIGl0J3MgYWN0dWFsbHkgdW5kZWZpbmVkIGhlcmVcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICBfYTogbnVsbCxcbiAgICAgICAgX2U6IHNjb3BlLFxuICAgICAgICBfczogbmV3IE1hcCgpLFxuICAgICAgICBzdGF0ZSxcbiAgICB9KTtcbiAgICAvLyBwaW5pYSBkZXZ0b29scyByZWx5IG9uIGRldiBvbmx5IGZlYXR1cmVzIHNvIHRoZXkgY2Fubm90IGJlIGZvcmNlZCB1bmxlc3NcbiAgICAvLyB0aGUgZGV2IGJ1aWxkIG9mIFZ1ZSBpcyB1c2VkLiBBdm9pZCBvbGQgYnJvd3NlcnMgbGlrZSBJRTExLlxuICAgIGlmICgoKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAodHlwZW9mIF9fVlVFX1BST0RfREVWVE9PTFNfXyAhPT0gJ3VuZGVmaW5lZCcgJiYgX19WVUVfUFJPRF9ERVZUT09MU19fKSkgJiYgIShwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Rlc3QnKSkgJiYgSVNfQ0xJRU5UICYmIHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcGluaWEudXNlKGRldnRvb2xzUGx1Z2luKTtcbiAgICB9XG4gICAgcmV0dXJuIHBpbmlhO1xufVxuLyoqXG4gKiBEaXNwb3NlIGEgUGluaWEgaW5zdGFuY2UgYnkgc3RvcHBpbmcgaXRzIGVmZmVjdFNjb3BlIGFuZCByZW1vdmluZyB0aGUgc3RhdGUsIHBsdWdpbnMgYW5kIHN0b3Jlcy4gVGhpcyBpcyBtb3N0bHlcbiAqIHVzZWZ1bCBpbiB0ZXN0cywgd2l0aCBib3RoIGEgdGVzdGluZyBwaW5pYSBvciBhIHJlZ3VsYXIgcGluaWEgYW5kIGluIGFwcGxpY2F0aW9ucyB0aGF0IHVzZSBtdWx0aXBsZSBwaW5pYSBpbnN0YW5jZXMuXG4gKiBPbmNlIGRpc3Bvc2VkLCB0aGUgcGluaWEgaW5zdGFuY2UgY2Fubm90IGJlIHVzZWQgYW55bW9yZS5cbiAqXG4gKiBAcGFyYW0gcGluaWEgLSBwaW5pYSBpbnN0YW5jZVxuICovXG5mdW5jdGlvbiBkaXNwb3NlUGluaWEocGluaWEpIHtcbiAgICBwaW5pYS5fZS5zdG9wKCk7XG4gICAgcGluaWEuX3MuY2xlYXIoKTtcbiAgICBwaW5pYS5fcC5zcGxpY2UoMCk7XG4gICAgcGluaWEuc3RhdGUudmFsdWUgPSB7fTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub24gdmFsaWRcbiAgICBwaW5pYS5fYSA9IG51bGw7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgZnVuY3Rpb24gaXMgYSBgU3RvcmVEZWZpbml0aW9uYC5cbiAqXG4gKiBAcGFyYW0gZm4gLSBvYmplY3QgdG8gdGVzdFxuICogQHJldHVybnMgdHJ1ZSBpZiBgZm5gIGlzIGEgU3RvcmVEZWZpbml0aW9uXG4gKi9cbmNvbnN0IGlzVXNlU3RvcmUgPSAoZm4pID0+IHtcbiAgICByZXR1cm4gdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBmbi4kaWQgPT09ICdzdHJpbmcnO1xufTtcbi8qKlxuICogTXV0YXRlcyBpbiBwbGFjZSBgbmV3U3RhdGVgIHdpdGggYG9sZFN0YXRlYCB0byBfaG90IHVwZGF0ZV8gaXQuIEl0IHdpbGxcbiAqIHJlbW92ZSBhbnkga2V5IG5vdCBleGlzdGluZyBpbiBgbmV3U3RhdGVgIGFuZCByZWN1cnNpdmVseSBtZXJnZSBwbGFpblxuICogb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0gbmV3U3RhdGUgLSBuZXcgc3RhdGUgb2JqZWN0IHRvIGJlIHBhdGNoZWRcbiAqIEBwYXJhbSBvbGRTdGF0ZSAtIG9sZCBzdGF0ZSB0aGF0IHNob3VsZCBiZSB1c2VkIHRvIHBhdGNoIG5ld1N0YXRlXG4gKiBAcmV0dXJucyAtIG5ld1N0YXRlXG4gKi9cbmZ1bmN0aW9uIHBhdGNoT2JqZWN0KG5ld1N0YXRlLCBvbGRTdGF0ZSkge1xuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvbGRTdGF0ZSkge1xuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IG9sZFN0YXRlW2tleV07XG4gICAgICAgIC8vIHNraXAgdGhlIHdob2xlIHN1YiB0cmVlXG4gICAgICAgIGlmICghKGtleSBpbiBuZXdTdGF0ZSkpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gbmV3U3RhdGVba2V5XTtcbiAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QodGFyZ2V0VmFsdWUpICYmXG4gICAgICAgICAgICBpc1BsYWluT2JqZWN0KHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZVtrZXldID0gcGF0Y2hPYmplY3QodGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIG9iamVjdHMgYXJlIGVpdGhlciBhIGJpdCBtb3JlIGNvbXBsZXggKGUuZy4gcmVmcykgb3IgcHJpbWl0aXZlcywgc28gd2VcbiAgICAgICAgICAgIC8vIGp1c3Qgc2V0IHRoZSB3aG9sZSB0aGluZ1xuICAgICAgICAgICAgbmV3U3RhdGVba2V5XSA9IHN1YlBhdGNoO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuZXdTdGF0ZTtcbn1cbi8qKlxuICogQ3JlYXRlcyBhbiBfYWNjZXB0XyBmdW5jdGlvbiB0byBwYXNzIHRvIGBpbXBvcnQubWV0YS5ob3RgIGluIFZpdGUgYXBwbGljYXRpb25zLlxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGBqc1xuICogY29uc3QgdXNlVXNlciA9IGRlZmluZVN0b3JlKC4uLilcbiAqIGlmIChpbXBvcnQubWV0YS5ob3QpIHtcbiAqICAgaW1wb3J0Lm1ldGEuaG90LmFjY2VwdChhY2NlcHRITVJVcGRhdGUodXNlVXNlciwgaW1wb3J0Lm1ldGEuaG90KSlcbiAqIH1cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSBpbml0aWFsVXNlU3RvcmUgLSByZXR1cm4gb2YgdGhlIGRlZmluZVN0b3JlIHRvIGhvdCB1cGRhdGVcbiAqIEBwYXJhbSBob3QgLSBgaW1wb3J0Lm1ldGEuaG90YFxuICovXG5mdW5jdGlvbiBhY2NlcHRITVJVcGRhdGUoaW5pdGlhbFVzZVN0b3JlLCBob3QpIHtcbiAgICAvLyBzdHJpcCBhcyBtdWNoIGFzIHBvc3NpYmxlIGZyb20gaWlmZS5wcm9kXG4gICAgaWYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcbiAgICB9XG4gICAgcmV0dXJuIChuZXdNb2R1bGUpID0+IHtcbiAgICAgICAgY29uc3QgcGluaWEgPSBob3QuZGF0YS5waW5pYSB8fCBpbml0aWFsVXNlU3RvcmUuX3BpbmlhO1xuICAgICAgICBpZiAoIXBpbmlhKSB7XG4gICAgICAgICAgICAvLyB0aGlzIHN0b3JlIGlzIHN0aWxsIG5vdCB1c2VkXG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gcHJlc2VydmUgdGhlIHBpbmlhIGluc3RhbmNlIGFjcm9zcyBsb2Fkc1xuICAgICAgICBob3QuZGF0YS5waW5pYSA9IHBpbmlhO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnZ290IGRhdGEnLCBuZXdTdG9yZSlcbiAgICAgICAgZm9yIChjb25zdCBleHBvcnROYW1lIGluIG5ld01vZHVsZSkge1xuICAgICAgICAgICAgY29uc3QgdXNlU3RvcmUgPSBuZXdNb2R1bGVbZXhwb3J0TmFtZV07XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hlY2tpbmcgZm9yJywgZXhwb3J0TmFtZSlcbiAgICAgICAgICAgIGlmIChpc1VzZVN0b3JlKHVzZVN0b3JlKSAmJiBwaW5pYS5fcy5oYXModXNlU3RvcmUuJGlkKSkge1xuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdBY2NlcHRpbmcgdXBkYXRlIGZvcicsIHVzZVN0b3JlLiRpZClcbiAgICAgICAgICAgICAgICBjb25zdCBpZCA9IHVzZVN0b3JlLiRpZDtcbiAgICAgICAgICAgICAgICBpZiAoaWQgIT09IGluaXRpYWxVc2VTdG9yZS4kaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBUaGUgaWQgb2YgdGhlIHN0b3JlIGNoYW5nZWQgZnJvbSBcIiR7aW5pdGlhbFVzZVN0b3JlLiRpZH1cIiB0byBcIiR7aWR9XCIuIFJlbG9hZGluZy5gKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGltcG9ydC5tZXRhLmhvdC5pbnZhbGlkYXRlKClcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGhvdC5pbnZhbGlkYXRlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nU3RvcmUgPSBwaW5pYS5fcy5nZXQoaWQpO1xuICAgICAgICAgICAgICAgIGlmICghZXhpc3RpbmdTdG9yZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgW1BpbmlhXTogc2tpcHBpbmcgaG1yIGJlY2F1c2Ugc3RvcmUgZG9lc24ndCBleGlzdCB5ZXRgKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB1c2VTdG9yZShwaW5pYSwgZXhpc3RpbmdTdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBub29wID0gKCkgPT4geyB9O1xuZnVuY3Rpb24gYWRkU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbnMsIGNhbGxiYWNrLCBkZXRhY2hlZCwgb25DbGVhbnVwID0gbm9vcCkge1xuICAgIHN1YnNjcmlwdGlvbnMucHVzaChjYWxsYmFjayk7XG4gICAgY29uc3QgcmVtb3ZlU3Vic2NyaXB0aW9uID0gKCkgPT4ge1xuICAgICAgICBjb25zdCBpZHggPSBzdWJzY3JpcHRpb25zLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgICBpZiAoaWR4ID4gLTEpIHtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgICAgICBvbkNsZWFudXAoKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgaWYgKCFkZXRhY2hlZCAmJiBnZXRDdXJyZW50U2NvcGUoKSkge1xuICAgICAgICBvblNjb3BlRGlzcG9zZShyZW1vdmVTdWJzY3JpcHRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gcmVtb3ZlU3Vic2NyaXB0aW9uO1xufVxuZnVuY3Rpb24gdHJpZ2dlclN1YnNjcmlwdGlvbnMoc3Vic2NyaXB0aW9ucywgLi4uYXJncykge1xuICAgIHN1YnNjcmlwdGlvbnMuc2xpY2UoKS5mb3JFYWNoKChjYWxsYmFjaykgPT4ge1xuICAgICAgICBjYWxsYmFjayguLi5hcmdzKTtcbiAgICB9KTtcbn1cblxuY29uc3QgZmFsbGJhY2tSdW5XaXRoQ29udGV4dCA9IChmbikgPT4gZm4oKTtcbi8qKlxuICogTWFya3MgYSBmdW5jdGlvbiBhcyBhbiBhY3Rpb24gZm9yIGAkb25BY3Rpb25gXG4gKiBAaW50ZXJuYWxcbiAqL1xuY29uc3QgQUNUSU9OX01BUktFUiA9IFN5bWJvbCgpO1xuLyoqXG4gKiBBY3Rpb24gbmFtZSBzeW1ib2wuIEFsbG93cyB0byBhZGQgYSBuYW1lIHRvIGFuIGFjdGlvbiBhZnRlciBkZWZpbmluZyBpdFxuICogQGludGVybmFsXG4gKi9cbmNvbnN0IEFDVElPTl9OQU1FID0gU3ltYm9sKCk7XG5mdW5jdGlvbiBtZXJnZVJlYWN0aXZlT2JqZWN0cyh0YXJnZXQsIHBhdGNoVG9BcHBseSkge1xuICAgIC8vIEhhbmRsZSBNYXAgaW5zdGFuY2VzXG4gICAgaWYgKHRhcmdldCBpbnN0YW5jZW9mIE1hcCAmJiBwYXRjaFRvQXBwbHkgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgcGF0Y2hUb0FwcGx5LmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHRhcmdldC5zZXQoa2V5LCB2YWx1ZSkpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBTZXQgJiYgcGF0Y2hUb0FwcGx5IGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgIC8vIEhhbmRsZSBTZXQgaW5zdGFuY2VzXG4gICAgICAgIHBhdGNoVG9BcHBseS5mb3JFYWNoKHRhcmdldC5hZGQsIHRhcmdldCk7XG4gICAgfVxuICAgIC8vIG5vIG5lZWQgdG8gZ28gdGhyb3VnaCBzeW1ib2xzIGJlY2F1c2UgdGhleSBjYW5ub3QgYmUgc2VyaWFsaXplZCBhbnl3YXlcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBwYXRjaFRvQXBwbHkpIHtcbiAgICAgICAgaWYgKCFwYXRjaFRvQXBwbHkuaGFzT3duUHJvcGVydHkoa2V5KSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBzdWJQYXRjaCA9IHBhdGNoVG9BcHBseVtrZXldO1xuICAgICAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHRhcmdldFtrZXldO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdCh0YXJnZXRWYWx1ZSkgJiZcbiAgICAgICAgICAgIGlzUGxhaW5PYmplY3Qoc3ViUGF0Y2gpICYmXG4gICAgICAgICAgICB0YXJnZXQuaGFzT3duUHJvcGVydHkoa2V5KSAmJlxuICAgICAgICAgICAgIWlzUmVmKHN1YlBhdGNoKSAmJlxuICAgICAgICAgICAgIWlzUmVhY3RpdmUoc3ViUGF0Y2gpKSB7XG4gICAgICAgICAgICAvLyBOT1RFOiBoZXJlIEkgd2FudGVkIHRvIHdhcm4gYWJvdXQgaW5jb25zaXN0ZW50IHR5cGVzIGJ1dCBpdCdzIG5vdCBwb3NzaWJsZSBiZWNhdXNlIGluIHNldHVwIHN0b3JlcyBvbmUgbWlnaHRcbiAgICAgICAgICAgIC8vIHN0YXJ0IHRoZSB2YWx1ZSBvZiBhIHByb3BlcnR5IGFzIGEgY2VydGFpbiB0eXBlIGUuZy4gYSBNYXAsIGFuZCB0aGVuIGZvciBzb21lIHJlYXNvbiwgZHVyaW5nIFNTUiwgY2hhbmdlIHRoYXRcbiAgICAgICAgICAgIC8vIHRvIGB1bmRlZmluZWRgLiBXaGVuIHRyeWluZyB0byBoeWRyYXRlLCB3ZSB3YW50IHRvIG92ZXJyaWRlIHRoZSBNYXAgd2l0aCBgdW5kZWZpbmVkYC5cbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gbWVyZ2VSZWFjdGl2ZU9iamVjdHModGFyZ2V0VmFsdWUsIHN1YlBhdGNoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHN1YlBhdGNoIGlzIGEgdmFsaWQgdmFsdWVcbiAgICAgICAgICAgIHRhcmdldFtrZXldID0gc3ViUGF0Y2g7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRhcmdldDtcbn1cbmNvbnN0IHNraXBIeWRyYXRlU3ltYm9sID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpXG4gICAgPyBTeW1ib2woJ3BpbmlhOnNraXBIeWRyYXRpb24nKVxuICAgIDogLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi8gU3ltYm9sKCk7XG4vKipcbiAqIFRlbGxzIFBpbmlhIHRvIHNraXAgdGhlIGh5ZHJhdGlvbiBwcm9jZXNzIG9mIGEgZ2l2ZW4gb2JqZWN0LiBUaGlzIGlzIHVzZWZ1bCBpbiBzZXR1cCBzdG9yZXMgKG9ubHkpIHdoZW4geW91IHJldHVybiBhXG4gKiBzdGF0ZWZ1bCBvYmplY3QgaW4gdGhlIHN0b3JlIGJ1dCBpdCBpc24ndCByZWFsbHkgc3RhdGUuIGUuZy4gcmV0dXJuaW5nIGEgcm91dGVyIGluc3RhbmNlIGluIGEgc2V0dXAgc3RvcmUuXG4gKlxuICogQHBhcmFtIG9iaiAtIHRhcmdldCBvYmplY3RcbiAqIEByZXR1cm5zIG9ialxuICovXG5mdW5jdGlvbiBza2lwSHlkcmF0ZShvYmopIHtcbiAgICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgc2tpcEh5ZHJhdGVTeW1ib2wsIHt9KTtcbn1cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFsdWUgc2hvdWxkIGJlIGh5ZHJhdGVkXG4gKlxuICogQHBhcmFtIG9iaiAtIHRhcmdldCB2YXJpYWJsZVxuICogQHJldHVybnMgdHJ1ZSBpZiBgb2JqYCBzaG91bGQgYmUgaHlkcmF0ZWRcbiAqL1xuZnVuY3Rpb24gc2hvdWxkSHlkcmF0ZShvYmopIHtcbiAgICByZXR1cm4gKCFpc1BsYWluT2JqZWN0KG9iaikgfHxcbiAgICAgICAgIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHNraXBIeWRyYXRlU3ltYm9sKSk7XG59XG5jb25zdCB7IGFzc2lnbiB9ID0gT2JqZWN0O1xuZnVuY3Rpb24gaXNDb21wdXRlZChvKSB7XG4gICAgcmV0dXJuICEhKGlzUmVmKG8pICYmIG8uZWZmZWN0KTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnNTdG9yZShpZCwgb3B0aW9ucywgcGluaWEsIGhvdCkge1xuICAgIGNvbnN0IHsgc3RhdGUsIGFjdGlvbnMsIGdldHRlcnMgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbaWRdO1xuICAgIGxldCBzdG9yZTtcbiAgICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgICAgaWYgKCFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbaWRdID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gYXZvaWQgY3JlYXRpbmcgYSBzdGF0ZSBpbiBwaW5pYS5zdGF0ZS52YWx1ZVxuICAgICAgICBjb25zdCBsb2NhbFN0YXRlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdFxuICAgICAgICAgICAgPyAvLyB1c2UgcmVmKCkgdG8gdW53cmFwIHJlZnMgaW5zaWRlIHN0YXRlIFRPRE86IGNoZWNrIGlmIHRoaXMgaXMgc3RpbGwgbmVjZXNzYXJ5XG4gICAgICAgICAgICAgICAgdG9SZWZzKHJlZihzdGF0ZSA/IHN0YXRlKCkgOiB7fSkudmFsdWUpXG4gICAgICAgICAgICA6IHRvUmVmcyhwaW5pYS5zdGF0ZS52YWx1ZVtpZF0pO1xuICAgICAgICByZXR1cm4gYXNzaWduKGxvY2FsU3RhdGUsIGFjdGlvbnMsIE9iamVjdC5rZXlzKGdldHRlcnMgfHwge30pLnJlZHVjZSgoY29tcHV0ZWRHZXR0ZXJzLCBuYW1lKSA9PiB7XG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIG5hbWUgaW4gbG9jYWxTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBBIGdldHRlciBjYW5ub3QgaGF2ZSB0aGUgc2FtZSBuYW1lIGFzIGFub3RoZXIgc3RhdGUgcHJvcGVydHkuIFJlbmFtZSBvbmUgb2YgdGhlbS4gRm91bmQgd2l0aCBcIiR7bmFtZX1cIiBpbiBzdG9yZSBcIiR7aWR9XCIuYCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb21wdXRlZEdldHRlcnNbbmFtZV0gPSBtYXJrUmF3KGNvbXB1dGVkKCgpID0+IHtcbiAgICAgICAgICAgICAgICBzZXRBY3RpdmVQaW5pYShwaW5pYSk7XG4gICAgICAgICAgICAgICAgLy8gaXQgd2FzIGNyZWF0ZWQganVzdCBiZWZvcmVcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHBpbmlhLl9zLmdldChpZCk7XG4gICAgICAgICAgICAgICAgLy8gYWxsb3cgY3Jvc3MgdXNpbmcgc3RvcmVzXG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgIC8vIHJldHVybiBnZXR0ZXJzIVtuYW1lXS5jYWxsKGNvbnRleHQsIGNvbnRleHQpXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogYXZvaWQgcmVhZGluZyB0aGUgZ2V0dGVyIHdoaWxlIGFzc2lnbmluZyB3aXRoIGEgZ2xvYmFsIHZhcmlhYmxlXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdldHRlcnNbbmFtZV0uY2FsbChzdG9yZSwgc3RvcmUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGVkR2V0dGVycztcbiAgICAgICAgfSwge30pKTtcbiAgICB9XG4gICAgc3RvcmUgPSBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIGhvdCwgdHJ1ZSk7XG4gICAgcmV0dXJuIHN0b3JlO1xufVxuZnVuY3Rpb24gY3JlYXRlU2V0dXBTdG9yZSgkaWQsIHNldHVwLCBvcHRpb25zID0ge30sIHBpbmlhLCBob3QsIGlzT3B0aW9uc1N0b3JlKSB7XG4gICAgbGV0IHNjb3BlO1xuICAgIGNvbnN0IG9wdGlvbnNGb3JQbHVnaW4gPSBhc3NpZ24oeyBhY3Rpb25zOiB7fSB9LCBvcHRpb25zKTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmICFwaW5pYS5fZS5hY3RpdmUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQaW5pYSBkZXN0cm95ZWQnKTtcbiAgICB9XG4gICAgLy8gd2F0Y2hlciBvcHRpb25zIGZvciAkc3Vic2NyaWJlXG4gICAgY29uc3QgJHN1YnNjcmliZU9wdGlvbnMgPSB7IGRlZXA6IHRydWUgfTtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgJHN1YnNjcmliZU9wdGlvbnMub25UcmlnZ2VyID0gKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKGlzTGlzdGVuaW5nKSB7XG4gICAgICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBldmVudDtcbiAgICAgICAgICAgICAgICAvLyBhdm9pZCB0cmlnZ2VyaW5nIHRoaXMgd2hpbGUgdGhlIHN0b3JlIGlzIGJlaW5nIGJ1aWx0IGFuZCB0aGUgc3RhdGUgaXMgYmVpbmcgc2V0IGluIHBpbmlhXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc0xpc3RlbmluZyA9PSBmYWxzZSAmJiAhc3RvcmUuX2hvdFVwZGF0aW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gbGV0IHBhdGNoIHNlbmQgYWxsIHRoZSBldmVudHMgdG9nZXRoZXIgbGF0ZXJcbiAgICAgICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KGRlYnVnZ2VyRXZlbnRzKSkge1xuICAgICAgICAgICAgICAgICAgICBkZWJ1Z2dlckV2ZW50cy5wdXNoKGV2ZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfjY0gZGVidWdnZXJFdmVudHMgc2hvdWxkIGJlIGFuIGFycmF5LiBUaGlzIGlzIG1vc3QgbGlrZWx5IGFuIGludGVybmFsIFBpbmlhIGJ1Zy4nKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIGludGVybmFsIHN0YXRlXG4gICAgbGV0IGlzTGlzdGVuaW5nOyAvLyBzZXQgdG8gdHJ1ZSBhdCB0aGUgZW5kXG4gICAgbGV0IGlzU3luY0xpc3RlbmluZzsgLy8gc2V0IHRvIHRydWUgYXQgdGhlIGVuZFxuICAgIGxldCBzdWJzY3JpcHRpb25zID0gW107XG4gICAgbGV0IGFjdGlvblN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICBsZXQgZGVidWdnZXJFdmVudHM7XG4gICAgY29uc3QgaW5pdGlhbFN0YXRlID0gcGluaWEuc3RhdGUudmFsdWVbJGlkXTtcbiAgICAvLyBhdm9pZCBzZXR0aW5nIHRoZSBzdGF0ZSBmb3Igb3B0aW9uIHN0b3JlcyBpZiBpdCBpcyBzZXRcbiAgICAvLyBieSB0aGUgc2V0dXBcbiAgICBpZiAoIWlzT3B0aW9uc1N0b3JlICYmICFpbml0aWFsU3RhdGUgJiYgKCEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgIWhvdCkpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0gPSB7fTtcbiAgICB9XG4gICAgY29uc3QgaG90U3RhdGUgPSByZWYoe30pO1xuICAgIC8vIGF2b2lkIHRyaWdnZXJpbmcgdG9vIG1hbnkgbGlzdGVuZXJzXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3BpbmlhL2lzc3Vlcy8xMTI5XG4gICAgbGV0IGFjdGl2ZUxpc3RlbmVyO1xuICAgIGZ1bmN0aW9uICRwYXRjaChwYXJ0aWFsU3RhdGVPck11dGF0b3IpIHtcbiAgICAgICAgbGV0IHN1YnNjcmlwdGlvbk11dGF0aW9uO1xuICAgICAgICBpc0xpc3RlbmluZyA9IGlzU3luY0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAvLyByZXNldCB0aGUgZGVidWdnZXIgZXZlbnRzIHNpbmNlIHBhdGNoZXMgYXJlIHN5bmNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgZGVidWdnZXJFdmVudHMgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHBhcnRpYWxTdGF0ZU9yTXV0YXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcGFydGlhbFN0YXRlT3JNdXRhdG9yKHBpbmlhLnN0YXRlLnZhbHVlWyRpZF0pO1xuICAgICAgICAgICAgc3Vic2NyaXB0aW9uTXV0YXRpb24gPSB7XG4gICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLnBhdGNoRnVuY3Rpb24sXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocGluaWEuc3RhdGUudmFsdWVbJGlkXSwgcGFydGlhbFN0YXRlT3JNdXRhdG9yKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbk11dGF0aW9uID0ge1xuICAgICAgICAgICAgICAgIHR5cGU6IE11dGF0aW9uVHlwZS5wYXRjaE9iamVjdCxcbiAgICAgICAgICAgICAgICBwYXlsb2FkOiBwYXJ0aWFsU3RhdGVPck11dGF0b3IsXG4gICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG15TGlzdGVuZXJJZCA9IChhY3RpdmVMaXN0ZW5lciA9IFN5bWJvbCgpKTtcbiAgICAgICAgbmV4dFRpY2soKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChhY3RpdmVMaXN0ZW5lciA9PT0gbXlMaXN0ZW5lcklkKSB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBwYXVzZWQgdGhlIHdhdGNoZXIsIHdlIG5lZWQgdG8gbWFudWFsbHkgY2FsbCB0aGUgc3Vic2NyaXB0aW9uc1xuICAgICAgICB0cmlnZ2VyU3Vic2NyaXB0aW9ucyhzdWJzY3JpcHRpb25zLCBzdWJzY3JpcHRpb25NdXRhdGlvbiwgcGluaWEuc3RhdGUudmFsdWVbJGlkXSk7XG4gICAgfVxuICAgIGNvbnN0ICRyZXNldCA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgID8gZnVuY3Rpb24gJHJlc2V0KCkge1xuICAgICAgICAgICAgY29uc3QgeyBzdGF0ZSB9ID0gb3B0aW9ucztcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0YXRlID0gc3RhdGUgPyBzdGF0ZSgpIDoge307XG4gICAgICAgICAgICAvLyB3ZSB1c2UgYSBwYXRjaCB0byBncm91cCBhbGwgY2hhbmdlcyBpbnRvIG9uZSBzaW5nbGUgc3Vic2NyaXB0aW9uXG4gICAgICAgICAgICB0aGlzLiRwYXRjaCgoJHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZG4ndCBlcnJvcj9cbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBuZXdTdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICA6IC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgICAgICAgICAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJylcbiAgICAgICAgICAgICAgICA/ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGDwn42NOiBTdG9yZSBcIiR7JGlkfVwiIGlzIGJ1aWx0IHVzaW5nIHRoZSBzZXR1cCBzeW50YXggYW5kIGRvZXMgbm90IGltcGxlbWVudCAkcmVzZXQoKS5gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiBub29wO1xuICAgIGZ1bmN0aW9uICRkaXNwb3NlKCkge1xuICAgICAgICBzY29wZS5zdG9wKCk7XG4gICAgICAgIHN1YnNjcmlwdGlvbnMgPSBbXTtcbiAgICAgICAgYWN0aW9uU3Vic2NyaXB0aW9ucyA9IFtdO1xuICAgICAgICBwaW5pYS5fcy5kZWxldGUoJGlkKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSGVscGVyIHRoYXQgd3JhcHMgZnVuY3Rpb24gc28gaXQgY2FuIGJlIHRyYWNrZWQgd2l0aCAkb25BY3Rpb25cbiAgICAgKiBAcGFyYW0gZm4gLSBhY3Rpb24gdG8gd3JhcFxuICAgICAqIEBwYXJhbSBuYW1lIC0gbmFtZSBvZiB0aGUgYWN0aW9uXG4gICAgICovXG4gICAgY29uc3QgYWN0aW9uID0gKGZuLCBuYW1lID0gJycpID0+IHtcbiAgICAgICAgaWYgKEFDVElPTl9NQVJLRVIgaW4gZm4pIHtcbiAgICAgICAgICAgIGZuW0FDVElPTl9OQU1FXSA9IG5hbWU7XG4gICAgICAgICAgICByZXR1cm4gZm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgd3JhcHBlZEFjdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgIGNvbnN0IGFyZ3MgPSBBcnJheS5mcm9tKGFyZ3VtZW50cyk7XG4gICAgICAgICAgICBjb25zdCBhZnRlckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgY29uc3Qgb25FcnJvckNhbGxiYWNrTGlzdCA9IFtdO1xuICAgICAgICAgICAgZnVuY3Rpb24gYWZ0ZXIoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBhZnRlckNhbGxiYWNrTGlzdC5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoY2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICBvbkVycm9yQ2FsbGJhY2tMaXN0LnB1c2goY2FsbGJhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWN0aW9uU3Vic2NyaXB0aW9ucywge1xuICAgICAgICAgICAgICAgIGFyZ3MsXG4gICAgICAgICAgICAgICAgbmFtZTogd3JhcHBlZEFjdGlvbltBQ1RJT05fTkFNRV0sXG4gICAgICAgICAgICAgICAgc3RvcmUsXG4gICAgICAgICAgICAgICAgYWZ0ZXIsXG4gICAgICAgICAgICAgICAgb25FcnJvcixcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgbGV0IHJldDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0ID0gZm4uYXBwbHkodGhpcyAmJiB0aGlzLiRpZCA9PT0gJGlkID8gdGhpcyA6IHN0b3JlLCBhcmdzKTtcbiAgICAgICAgICAgICAgICAvLyBoYW5kbGUgc3luYyBlcnJvcnNcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKG9uRXJyb3JDYWxsYmFja0xpc3QsIGVycm9yKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChyZXQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldFxuICAgICAgICAgICAgICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMoYWZ0ZXJDYWxsYmFja0xpc3QsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlclN1YnNjcmlwdGlvbnMob25FcnJvckNhbGxiYWNrTGlzdCwgZXJyb3IpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhZnRlciBjYWxsYmFja3NcbiAgICAgICAgICAgIHRyaWdnZXJTdWJzY3JpcHRpb25zKGFmdGVyQ2FsbGJhY2tMaXN0LCByZXQpO1xuICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgfTtcbiAgICAgICAgd3JhcHBlZEFjdGlvbltBQ1RJT05fTUFSS0VSXSA9IHRydWU7XG4gICAgICAgIHdyYXBwZWRBY3Rpb25bQUNUSU9OX05BTUVdID0gbmFtZTsgLy8gd2lsbCBiZSBzZXQgbGF0ZXJcbiAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogd2UgYXJlIGludGVudGlvbmFsbHkgbGltaXRpbmcgdGhlIHJldHVybmVkIHR5cGUgdG8ganVzdCBGblxuICAgICAgICAvLyBiZWNhdXNlIGFsbCB0aGUgYWRkZWQgcHJvcGVydGllcyBhcmUgaW50ZXJuYWxzIHRoYXQgYXJlIGV4cG9zZWQgdGhyb3VnaCBgJG9uQWN0aW9uKClgIG9ubHlcbiAgICAgICAgcmV0dXJuIHdyYXBwZWRBY3Rpb247XG4gICAgfTtcbiAgICBjb25zdCBfaG1yUGF5bG9hZCA9IC8qI19fUFVSRV9fKi8gbWFya1Jhdyh7XG4gICAgICAgIGFjdGlvbnM6IHt9LFxuICAgICAgICBnZXR0ZXJzOiB7fSxcbiAgICAgICAgc3RhdGU6IFtdLFxuICAgICAgICBob3RTdGF0ZSxcbiAgICB9KTtcbiAgICBjb25zdCBwYXJ0aWFsU3RvcmUgPSB7XG4gICAgICAgIF9wOiBwaW5pYSxcbiAgICAgICAgLy8gX3M6IHNjb3BlLFxuICAgICAgICAkaWQsXG4gICAgICAgICRvbkFjdGlvbjogYWRkU3Vic2NyaXB0aW9uLmJpbmQobnVsbCwgYWN0aW9uU3Vic2NyaXB0aW9ucyksXG4gICAgICAgICRwYXRjaCxcbiAgICAgICAgJHJlc2V0LFxuICAgICAgICAkc3Vic2NyaWJlKGNhbGxiYWNrLCBvcHRpb25zID0ge30pIHtcbiAgICAgICAgICAgIGNvbnN0IHJlbW92ZVN1YnNjcmlwdGlvbiA9IGFkZFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb25zLCBjYWxsYmFjaywgb3B0aW9ucy5kZXRhY2hlZCwgKCkgPT4gc3RvcFdhdGNoZXIoKSk7XG4gICAgICAgICAgICBjb25zdCBzdG9wV2F0Y2hlciA9IHNjb3BlLnJ1bigoKSA9PiB3YXRjaCgoKSA9PiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdLCAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5mbHVzaCA9PT0gJ3N5bmMnID8gaXNTeW5jTGlzdGVuaW5nIDogaXNMaXN0ZW5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soe1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVJZDogJGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogTXV0YXRpb25UeXBlLmRpcmVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50czogZGVidWdnZXJFdmVudHMsXG4gICAgICAgICAgICAgICAgICAgIH0sIHN0YXRlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBhc3NpZ24oe30sICRzdWJzY3JpYmVPcHRpb25zLCBvcHRpb25zKSkpO1xuICAgICAgICAgICAgcmV0dXJuIHJlbW92ZVN1YnNjcmlwdGlvbjtcbiAgICAgICAgfSxcbiAgICAgICAgJGRpc3Bvc2UsXG4gICAgfTtcbiAgICBjb25zdCBzdG9yZSA9IHJlYWN0aXZlKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB8fCAoKCgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgfHwgKHR5cGVvZiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18gIT09ICd1bmRlZmluZWQnICYmIF9fVlVFX1BST0RfREVWVE9PTFNfXykpICYmICEocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JykpICYmIElTX0NMSUVOVClcbiAgICAgICAgPyBhc3NpZ24oe1xuICAgICAgICAgICAgX2htclBheWxvYWQsXG4gICAgICAgICAgICBfY3VzdG9tUHJvcGVydGllczogbWFya1JhdyhuZXcgU2V0KCkpLCAvLyBkZXZ0b29scyBjdXN0b20gcHJvcGVydGllc1xuICAgICAgICB9LCBwYXJ0aWFsU3RvcmVcbiAgICAgICAgLy8gbXVzdCBiZSBhZGRlZCBsYXRlclxuICAgICAgICAvLyBzZXR1cFN0b3JlXG4gICAgICAgIClcbiAgICAgICAgOiBwYXJ0aWFsU3RvcmUpO1xuICAgIC8vIHN0b3JlIHRoZSBwYXJ0aWFsIHN0b3JlIG5vdyBzbyB0aGUgc2V0dXAgb2Ygc3RvcmVzIGNhbiBpbnN0YW50aWF0ZSBlYWNoIG90aGVyIGJlZm9yZSB0aGV5IGFyZSBmaW5pc2hlZCB3aXRob3V0XG4gICAgLy8gY3JlYXRpbmcgaW5maW5pdGUgbG9vcHMuXG4gICAgcGluaWEuX3Muc2V0KCRpZCwgc3RvcmUpO1xuICAgIGNvbnN0IHJ1bldpdGhDb250ZXh0ID0gKHBpbmlhLl9hICYmIHBpbmlhLl9hLnJ1bldpdGhDb250ZXh0KSB8fCBmYWxsYmFja1J1bldpdGhDb250ZXh0O1xuICAgIC8vIFRPRE86IGlkZWEgY3JlYXRlIHNraXBTZXJpYWxpemUgdGhhdCBtYXJrcyBwcm9wZXJ0aWVzIGFzIG5vbiBzZXJpYWxpemFibGUgYW5kIHRoZXkgYXJlIHNraXBwZWRcbiAgICBjb25zdCBzZXR1cFN0b3JlID0gcnVuV2l0aENvbnRleHQoKCkgPT4gcGluaWEuX2UucnVuKCgpID0+IChzY29wZSA9IGVmZmVjdFNjb3BlKCkpLnJ1bigoKSA9PiBzZXR1cCh7IGFjdGlvbiB9KSkpKTtcbiAgICAvLyBvdmVyd3JpdGUgZXhpc3RpbmcgYWN0aW9ucyB0byBzdXBwb3J0ICRvbkFjdGlvblxuICAgIGZvciAoY29uc3Qga2V5IGluIHNldHVwU3RvcmUpIHtcbiAgICAgICAgY29uc3QgcHJvcCA9IHNldHVwU3RvcmVba2V5XTtcbiAgICAgICAgaWYgKChpc1JlZihwcm9wKSAmJiAhaXNDb21wdXRlZChwcm9wKSkgfHwgaXNSZWFjdGl2ZShwcm9wKSkge1xuICAgICAgICAgICAgLy8gbWFyayBpdCBhcyBhIHBpZWNlIG9mIHN0YXRlIHRvIGJlIHNlcmlhbGl6ZWRcbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90KSB7XG4gICAgICAgICAgICAgICAgaG90U3RhdGUudmFsdWVba2V5XSA9IHRvUmVmKHNldHVwU3RvcmUsIGtleSk7XG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlT3B0aW9uU3RvcmUgZGlyZWN0bHkgc2V0cyB0aGUgc3RhdGUgaW4gcGluaWEuc3RhdGUudmFsdWUgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4ganVzdCBza2lwIHRoYXRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKCFpc09wdGlvbnNTdG9yZSkge1xuICAgICAgICAgICAgICAgIC8vIGluIHNldHVwIHN0b3JlcyB3ZSBtdXN0IGh5ZHJhdGUgdGhlIHN0YXRlIGFuZCBzeW5jIHBpbmlhIHN0YXRlIHRyZWUgd2l0aCB0aGUgcmVmcyB0aGUgdXNlciBqdXN0IGNyZWF0ZWRcbiAgICAgICAgICAgICAgICBpZiAoaW5pdGlhbFN0YXRlICYmIHNob3VsZEh5ZHJhdGUocHJvcCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlzUmVmKHByb3ApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wLnZhbHVlID0gaW5pdGlhbFN0YXRlW2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBwcm9iYWJseSBhIHJlYWN0aXZlIG9iamVjdCwgbGV0cyByZWN1cnNpdmVseSBhc3NpZ25cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHByb3AgaXMgdW5rbm93blxuICAgICAgICAgICAgICAgICAgICAgICAgbWVyZ2VSZWFjdGl2ZU9iamVjdHMocHJvcCwgaW5pdGlhbFN0YXRlW2tleV0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWYgdG8gdGhlIHBpbmlhIHN0YXRlIHRvIGtlZXAgZXZlcnl0aGluZyBpbiBzeW5jXG4gICAgICAgICAgICAgICAgcGluaWEuc3RhdGUudmFsdWVbJGlkXVtrZXldID0gcHJvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gICAgICAgICAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgICAgICAgICAgX2htclBheWxvYWQuc3RhdGUucHVzaChrZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gYWN0aW9uXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodHlwZW9mIHByb3AgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNvbnN0IGFjdGlvblZhbHVlID0gKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmIGhvdCA/IHByb3AgOiBhY3Rpb24ocHJvcCwga2V5KTtcbiAgICAgICAgICAgIC8vIHRoaXMgYSBob3QgbW9kdWxlIHJlcGxhY2VtZW50IHN0b3JlIGJlY2F1c2UgdGhlIGhvdFVwZGF0ZSBtZXRob2QgbmVlZHNcbiAgICAgICAgICAgIC8vIHRvIGRvIGl0IHdpdGggdGhlIHJpZ2h0IGNvbnRleHRcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHNldHVwU3RvcmVba2V5XSA9IGFjdGlvblZhbHVlO1xuICAgICAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgICAgIGlmICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykpIHtcbiAgICAgICAgICAgICAgICBfaG1yUGF5bG9hZC5hY3Rpb25zW2tleV0gPSBwcm9wO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbGlzdCBhY3Rpb25zIHNvIHRoZXkgY2FuIGJlIHVzZWQgaW4gcGx1Z2luc1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgb3B0aW9uc0ZvclBsdWdpbi5hY3Rpb25zW2tleV0gPSBwcm9wO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgLy8gYWRkIGdldHRlcnMgZm9yIGRldnRvb2xzXG4gICAgICAgICAgICBpZiAoaXNDb21wdXRlZChwcm9wKSkge1xuICAgICAgICAgICAgICAgIF9obXJQYXlsb2FkLmdldHRlcnNba2V5XSA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgICAgICAgICAgICAgID8gLy8gQHRzLWV4cGVjdC1lcnJvclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5nZXR0ZXJzW2tleV1cbiAgICAgICAgICAgICAgICAgICAgOiBwcm9wO1xuICAgICAgICAgICAgICAgIGlmIChJU19DTElFTlQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVycyA9IHNldHVwU3RvcmUuX2dldHRlcnMgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHNhbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIChzZXR1cFN0b3JlLl9nZXR0ZXJzID0gbWFya1JhdyhbXSkpO1xuICAgICAgICAgICAgICAgICAgICBnZXR0ZXJzLnB1c2goa2V5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gYWRkIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIGFjdGlvbiBwcm9wZXJ0aWVzXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgYXNzaWduKHN0b3JlLCBzZXR1cFN0b3JlKTtcbiAgICAvLyBhbGxvd3MgcmV0cmlldmluZyByZWFjdGl2ZSBvYmplY3RzIHdpdGggYHN0b3JlVG9SZWZzKClgLiBNdXN0IGJlIGNhbGxlZCBhZnRlciBhc3NpZ25pbmcgdG8gdGhlIHJlYWN0aXZlIG9iamVjdC5cbiAgICAvLyBNYWtlIGBzdG9yZVRvUmVmcygpYCB3b3JrIHdpdGggYHJlYWN0aXZlKClgICM3OTlcbiAgICBhc3NpZ24odG9SYXcoc3RvcmUpLCBzZXR1cFN0b3JlKTtcbiAgICAvLyB1c2UgdGhpcyBpbnN0ZWFkIG9mIGEgY29tcHV0ZWQgd2l0aCBzZXR0ZXIgdG8gYmUgYWJsZSB0byBjcmVhdGUgaXQgYW55d2hlcmVcbiAgICAvLyB3aXRob3V0IGxpbmtpbmcgdGhlIGNvbXB1dGVkIGxpZmVzcGFuIHRvIHdoZXJldmVyIHRoZSBzdG9yZSBpcyBmaXJzdFxuICAgIC8vIGNyZWF0ZWQuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHN0b3JlLCAnJHN0YXRlJywge1xuICAgICAgICBnZXQ6ICgpID0+ICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykgJiYgaG90ID8gaG90U3RhdGUudmFsdWUgOiBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdKSxcbiAgICAgICAgc2V0OiAoc3RhdGUpID0+IHtcbiAgICAgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2Nhbm5vdCBzZXQgaG90U3RhdGUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICRwYXRjaCgoJHN0YXRlKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZG4ndCBlcnJvcj9cbiAgICAgICAgICAgICAgICBhc3NpZ24oJHN0YXRlLCBzdGF0ZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICB9KTtcbiAgICAvLyBhZGQgdGhlIGhvdFVwZGF0ZSBiZWZvcmUgcGx1Z2lucyB0byBhbGxvdyB0aGVtIHRvIG92ZXJyaWRlIGl0XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpKSB7XG4gICAgICAgIHN0b3JlLl9ob3RVcGRhdGUgPSBtYXJrUmF3KChuZXdTdG9yZSkgPT4ge1xuICAgICAgICAgICAgc3RvcmUuX2hvdFVwZGF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG5ld1N0b3JlLl9obXJQYXlsb2FkLnN0YXRlLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlS2V5IGluIHN0b3JlLiRzdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuZXdTdGF0ZVRhcmdldCA9IG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV07XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG9sZFN0YXRlU291cmNlID0gc3RvcmUuJHN0YXRlW3N0YXRlS2V5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuZXdTdGF0ZVRhcmdldCA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGxhaW5PYmplY3QobmV3U3RhdGVUYXJnZXQpICYmXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BsYWluT2JqZWN0KG9sZFN0YXRlU291cmNlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcGF0Y2hPYmplY3QobmV3U3RhdGVUYXJnZXQsIG9sZFN0YXRlU291cmNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyYW5zZmVyIHRoZSByZWZcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld1N0b3JlLiRzdGF0ZVtzdGF0ZUtleV0gPSBvbGRTdGF0ZVNvdXJjZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBwYXRjaCBkaXJlY3QgYWNjZXNzIHByb3BlcnRpZXMgdG8gYWxsb3cgc3RvcmUuc3RhdGVQcm9wZXJ0eSB0byB3b3JrIGFzXG4gICAgICAgICAgICAgICAgLy8gc3RvcmUuJHN0YXRlLnN0YXRlUHJvcGVydHlcbiAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBhbnkgdHlwZVxuICAgICAgICAgICAgICAgIHN0b3JlW3N0YXRlS2V5XSA9IHRvUmVmKG5ld1N0b3JlLiRzdGF0ZSwgc3RhdGVLZXkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyByZW1vdmUgZGVsZXRlZCBzdGF0ZSBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yZS4kc3RhdGUpLmZvckVhY2goKHN0YXRlS2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhdGVLZXkgaW4gbmV3U3RvcmUuJHN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBub29wIGlmIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JlW3N0YXRlS2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIGF2b2lkIGRldnRvb2xzIGxvZ2dpbmcgdGhpcyBhcyBhIG11dGF0aW9uXG4gICAgICAgICAgICBpc0xpc3RlbmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBwaW5pYS5zdGF0ZS52YWx1ZVskaWRdID0gdG9SZWYobmV3U3RvcmUuX2htclBheWxvYWQsICdob3RTdGF0ZScpO1xuICAgICAgICAgICAgaXNTeW5jTGlzdGVuaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIG5leHRUaWNrKCkudGhlbigoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbk5hbWUgaW4gbmV3U3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGlvbkZuID0gbmV3U3RvcmVbYWN0aW9uTmFtZV07XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogYWN0aW9uTmFtZSBpcyBhIHN0cmluZ1xuICAgICAgICAgICAgICAgIHN0b3JlW2FjdGlvbk5hbWVdID1cbiAgICAgICAgICAgICAgICAgICAgLy9cbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uKGFjdGlvbkZuLCBhY3Rpb25OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFRPRE86IGRvZXMgdGhpcyB3b3JrIGluIGJvdGggc2V0dXAgYW5kIG9wdGlvbiBzdG9yZT9cbiAgICAgICAgICAgIGZvciAoY29uc3QgZ2V0dGVyTmFtZSBpbiBuZXdTdG9yZS5faG1yUGF5bG9hZC5nZXR0ZXJzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2V0dGVyID0gbmV3U3RvcmUuX2htclBheWxvYWQuZ2V0dGVyc1tnZXR0ZXJOYW1lXTtcbiAgICAgICAgICAgICAgICBjb25zdCBnZXR0ZXJWYWx1ZSA9IGlzT3B0aW9uc1N0b3JlXG4gICAgICAgICAgICAgICAgICAgID8gLy8gc3BlY2lhbCBoYW5kbGluZyBvZiBvcHRpb25zIGFwaVxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcHV0ZWQoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVyLmNhbGwoc3RvcmUsIHN0b3JlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIDogZ2V0dGVyO1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGdldHRlck5hbWUgaXMgYSBzdHJpbmdcbiAgICAgICAgICAgICAgICBzdG9yZVtnZXR0ZXJOYW1lXSA9XG4gICAgICAgICAgICAgICAgICAgIC8vXG4gICAgICAgICAgICAgICAgICAgIGdldHRlclZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gcmVtb3ZlIGRlbGV0ZWQgZ2V0dGVyc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuZ2V0dGVycykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmdldHRlcnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vb3AgaWYgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBvbGQgYWN0aW9uc1xuICAgICAgICAgICAgT2JqZWN0LmtleXMoc3RvcmUuX2htclBheWxvYWQuYWN0aW9ucykuZm9yRWFjaCgoa2V5KSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCEoa2V5IGluIG5ld1N0b3JlLl9obXJQYXlsb2FkLmFjdGlvbnMpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vb3AgaWYgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmVba2V5XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHVwZGF0ZSB0aGUgdmFsdWVzIHVzZWQgaW4gZGV2dG9vbHMgYW5kIHRvIGFsbG93IGRlbGV0aW5nIG5ldyBwcm9wZXJ0aWVzIGxhdGVyIG9uXG4gICAgICAgICAgICBzdG9yZS5faG1yUGF5bG9hZCA9IG5ld1N0b3JlLl9obXJQYXlsb2FkO1xuICAgICAgICAgICAgc3RvcmUuX2dldHRlcnMgPSBuZXdTdG9yZS5fZ2V0dGVycztcbiAgICAgICAgICAgIHN0b3JlLl9ob3RVcGRhdGluZyA9IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgY29uc3Qgbm9uRW51bWVyYWJsZSA9IHtcbiAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgLy8gYXZvaWQgd2FybmluZyBvbiBkZXZ0b29scyB0cnlpbmcgdG8gZGlzcGxheSB0aGlzIHByb3BlcnR5XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgfTtcbiAgICAgICAgWydfcCcsICdfaG1yUGF5bG9hZCcsICdfZ2V0dGVycycsICdfY3VzdG9tUHJvcGVydGllcyddLmZvckVhY2goKHApID0+IHtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzdG9yZSwgcCwgYXNzaWduKHsgdmFsdWU6IHN0b3JlW3BdIH0sIG5vbkVudW1lcmFibGUpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIGFwcGx5IGFsbCBwbHVnaW5zXG4gICAgcGluaWEuX3AuZm9yRWFjaCgoZXh0ZW5kZXIpID0+IHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgICAgICAgaWYgKCgoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHx8ICh0eXBlb2YgX19WVUVfUFJPRF9ERVZUT09MU19fICE9PSAndW5kZWZpbmVkJyAmJiBfX1ZVRV9QUk9EX0RFVlRPT0xTX18pKSAmJiAhKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAndGVzdCcpKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgIGNvbnN0IGV4dGVuc2lvbnMgPSBzY29wZS5ydW4oKCkgPT4gZXh0ZW5kZXIoe1xuICAgICAgICAgICAgICAgIHN0b3JlOiBzdG9yZSxcbiAgICAgICAgICAgICAgICBhcHA6IHBpbmlhLl9hLFxuICAgICAgICAgICAgICAgIHBpbmlhLFxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IG9wdGlvbnNGb3JQbHVnaW4sXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBPYmplY3Qua2V5cyhleHRlbnNpb25zIHx8IHt9KS5mb3JFYWNoKChrZXkpID0+IHN0b3JlLl9jdXN0b21Qcm9wZXJ0aWVzLmFkZChrZXkpKTtcbiAgICAgICAgICAgIGFzc2lnbihzdG9yZSwgZXh0ZW5zaW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBhc3NpZ24oc3RvcmUsIHNjb3BlLnJ1bigoKSA9PiBleHRlbmRlcih7XG4gICAgICAgICAgICAgICAgc3RvcmU6IHN0b3JlLFxuICAgICAgICAgICAgICAgIGFwcDogcGluaWEuX2EsXG4gICAgICAgICAgICAgICAgcGluaWEsXG4gICAgICAgICAgICAgICAgb3B0aW9uczogb3B0aW9uc0ZvclBsdWdpbixcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICBpZiAoKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpICYmXG4gICAgICAgIHN0b3JlLiRzdGF0ZSAmJlxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB0eXBlb2Ygc3RvcmUuJHN0YXRlLmNvbnN0cnVjdG9yID09PSAnZnVuY3Rpb24nICYmXG4gICAgICAgICFzdG9yZS4kc3RhdGUuY29uc3RydWN0b3IudG9TdHJpbmcoKS5pbmNsdWRlcygnW25hdGl2ZSBjb2RlXScpKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgW/CfjY1dOiBUaGUgXCJzdGF0ZVwiIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuIEl0IGNhbm5vdCBiZVxcbmAgK1xuICAgICAgICAgICAgYFxcdHN0YXRlOiAoKSA9PiBuZXcgTXlDbGFzcygpXFxuYCArXG4gICAgICAgICAgICBgRm91bmQgaW4gc3RvcmUgXCIke3N0b3JlLiRpZH1cIi5gKTtcbiAgICB9XG4gICAgLy8gb25seSBhcHBseSBoeWRyYXRlIHRvIG9wdGlvbiBzdG9yZXMgd2l0aCBhbiBpbml0aWFsIHN0YXRlIGluIHBpbmlhXG4gICAgaWYgKGluaXRpYWxTdGF0ZSAmJlxuICAgICAgICBpc09wdGlvbnNTdG9yZSAmJlxuICAgICAgICBvcHRpb25zLmh5ZHJhdGUpIHtcbiAgICAgICAgb3B0aW9ucy5oeWRyYXRlKHN0b3JlLiRzdGF0ZSwgaW5pdGlhbFN0YXRlKTtcbiAgICB9XG4gICAgaXNMaXN0ZW5pbmcgPSB0cnVlO1xuICAgIGlzU3luY0xpc3RlbmluZyA9IHRydWU7XG4gICAgcmV0dXJuIHN0b3JlO1xufVxuLy8gYWxsb3dzIHVudXNlZCBzdG9yZXMgdG8gYmUgdHJlZSBzaGFrZW5cbi8qISAjX19OT19TSURFX0VGRkVDVFNfXyAqL1xuZnVuY3Rpb24gZGVmaW5lU3RvcmUoXG4vLyBUT0RPOiBhZGQgcHJvcGVyIHR5cGVzIGZyb20gYWJvdmVcbmlkLCBzZXR1cCwgc2V0dXBPcHRpb25zKSB7XG4gICAgbGV0IG9wdGlvbnM7XG4gICAgY29uc3QgaXNTZXR1cFN0b3JlID0gdHlwZW9mIHNldHVwID09PSAnZnVuY3Rpb24nO1xuICAgIC8vIHRoZSBvcHRpb24gc3RvcmUgc2V0dXAgd2lsbCBjb250YWluIHRoZSBhY3R1YWwgb3B0aW9ucyBpbiB0aGlzIGNhc2VcbiAgICBvcHRpb25zID0gaXNTZXR1cFN0b3JlID8gc2V0dXBPcHRpb25zIDogc2V0dXA7XG4gICAgZnVuY3Rpb24gdXNlU3RvcmUocGluaWEsIGhvdCkge1xuICAgICAgICBjb25zdCBoYXNDb250ZXh0ID0gaGFzSW5qZWN0aW9uQ29udGV4dCgpO1xuICAgICAgICBwaW5pYSA9XG4gICAgICAgICAgICAvLyBpbiB0ZXN0IG1vZGUsIGlnbm9yZSB0aGUgYXJndW1lbnQgcHJvdmlkZWQgYXMgd2UgY2FuIGFsd2F5cyByZXRyaWV2ZSBhXG4gICAgICAgICAgICAvLyBwaW5pYSBpbnN0YW5jZSB3aXRoIGdldEFjdGl2ZVBpbmlhKClcbiAgICAgICAgICAgICgocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICd0ZXN0JykgJiYgYWN0aXZlUGluaWEgJiYgYWN0aXZlUGluaWEuX3Rlc3RpbmcgPyBudWxsIDogcGluaWEpIHx8XG4gICAgICAgICAgICAgICAgKGhhc0NvbnRleHQgPyBpbmplY3QocGluaWFTeW1ib2wsIG51bGwpIDogbnVsbCk7XG4gICAgICAgIGlmIChwaW5pYSlcbiAgICAgICAgICAgIHNldEFjdGl2ZVBpbmlhKHBpbmlhKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiAhYWN0aXZlUGluaWEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgW/CfjY1dOiBcImdldEFjdGl2ZVBpbmlhKClcIiB3YXMgY2FsbGVkIGJ1dCB0aGVyZSB3YXMgbm8gYWN0aXZlIFBpbmlhLiBBcmUgeW91IHRyeWluZyB0byB1c2UgYSBzdG9yZSBiZWZvcmUgY2FsbGluZyBcImFwcC51c2UocGluaWEpXCI/XFxuYCArXG4gICAgICAgICAgICAgICAgYFNlZSBodHRwczovL3BpbmlhLnZ1ZWpzLm9yZy9jb3JlLWNvbmNlcHRzL291dHNpZGUtY29tcG9uZW50LXVzYWdlLmh0bWwgZm9yIGhlbHAuXFxuYCArXG4gICAgICAgICAgICAgICAgYFRoaXMgd2lsbCBmYWlsIGluIHByb2R1Y3Rpb24uYCk7XG4gICAgICAgIH1cbiAgICAgICAgcGluaWEgPSBhY3RpdmVQaW5pYTtcbiAgICAgICAgaWYgKCFwaW5pYS5fcy5oYXMoaWQpKSB7XG4gICAgICAgICAgICAvLyBjcmVhdGluZyB0aGUgc3RvcmUgcmVnaXN0ZXJzIGl0IGluIGBwaW5pYS5fc2BcbiAgICAgICAgICAgIGlmIChpc1NldHVwU3RvcmUpIHtcbiAgICAgICAgICAgICAgICBjcmVhdGVTZXR1cFN0b3JlKGlkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY3JlYXRlT3B0aW9uc1N0b3JlKGlkLCBvcHRpb25zLCBwaW5pYSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICAgICAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IG5vdCB0aGUgcmlnaHQgaW5mZXJyZWQgdHlwZVxuICAgICAgICAgICAgICAgIHVzZVN0b3JlLl9waW5pYSA9IHBpbmlhO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHN0b3JlID0gcGluaWEuX3MuZ2V0KGlkKTtcbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBob3QpIHtcbiAgICAgICAgICAgIGNvbnN0IGhvdElkID0gJ19faG90OicgKyBpZDtcbiAgICAgICAgICAgIGNvbnN0IG5ld1N0b3JlID0gaXNTZXR1cFN0b3JlXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVTZXR1cFN0b3JlKGhvdElkLCBzZXR1cCwgb3B0aW9ucywgcGluaWEsIHRydWUpXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVPcHRpb25zU3RvcmUoaG90SWQsIGFzc2lnbih7fSwgb3B0aW9ucyksIHBpbmlhLCB0cnVlKTtcbiAgICAgICAgICAgIGhvdC5faG90VXBkYXRlKG5ld1N0b3JlKTtcbiAgICAgICAgICAgIC8vIGNsZWFudXAgdGhlIHN0YXRlIHByb3BlcnRpZXMgYW5kIHRoZSBzdG9yZSBmcm9tIHRoZSBjYWNoZVxuICAgICAgICAgICAgZGVsZXRlIHBpbmlhLnN0YXRlLnZhbHVlW2hvdElkXTtcbiAgICAgICAgICAgIHBpbmlhLl9zLmRlbGV0ZShob3RJZCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBJU19DTElFTlQpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbnN0YW5jZSA9IGdldEN1cnJlbnRJbnN0YW5jZSgpO1xuICAgICAgICAgICAgLy8gc2F2ZSBzdG9yZXMgaW4gaW5zdGFuY2VzIHRvIGFjY2VzcyB0aGVtIGRldnRvb2xzXG4gICAgICAgICAgICBpZiAoY3VycmVudEluc3RhbmNlICYmXG4gICAgICAgICAgICAgICAgY3VycmVudEluc3RhbmNlLnByb3h5ICYmXG4gICAgICAgICAgICAgICAgLy8gYXZvaWQgYWRkaW5nIHN0b3JlcyB0aGF0IGFyZSBqdXN0IGJ1aWx0IGZvciBob3QgbW9kdWxlIHJlcGxhY2VtZW50XG4gICAgICAgICAgICAgICAgIWhvdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHZtID0gY3VycmVudEluc3RhbmNlLnByb3h5O1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gJ19wU3RvcmVzJyBpbiB2bSA/IHZtLl9wU3RvcmVzIDogKHZtLl9wU3RvcmVzID0ge30pO1xuICAgICAgICAgICAgICAgIGNhY2hlW2lkXSA9IHN0b3JlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFN0b3JlR2VuZXJpYyBjYW5ub3QgYmUgY2FzdGVkIHRvd2FyZHMgU3RvcmVcbiAgICAgICAgcmV0dXJuIHN0b3JlO1xuICAgIH1cbiAgICB1c2VTdG9yZS4kaWQgPSBpZDtcbiAgICByZXR1cm4gdXNlU3RvcmU7XG59XG5cbmxldCBtYXBTdG9yZVN1ZmZpeCA9ICdTdG9yZSc7XG4vKipcbiAqIENoYW5nZXMgdGhlIHN1ZmZpeCBhZGRlZCBieSBgbWFwU3RvcmVzKClgLiBDYW4gYmUgc2V0IHRvIGFuIGVtcHR5IHN0cmluZy5cbiAqIERlZmF1bHRzIHRvIGBcIlN0b3JlXCJgLiBNYWtlIHN1cmUgdG8gZXh0ZW5kIHRoZSBNYXBTdG9yZXNDdXN0b21pemF0aW9uXG4gKiBpbnRlcmZhY2UgaWYgeW91IGFyZSB1c2luZyBUeXBlU2NyaXB0LlxuICpcbiAqIEBwYXJhbSBzdWZmaXggLSBuZXcgc3VmZml4XG4gKi9cbmZ1bmN0aW9uIHNldE1hcFN0b3JlU3VmZml4KHN1ZmZpeCAvLyBjb3VsZCBiZSAnU3RvcmUnIGJ1dCB0aGF0IHdvdWxkIGJlIGFubm95aW5nIGZvciBKU1xuKSB7XG4gICAgbWFwU3RvcmVTdWZmaXggPSBzdWZmaXg7XG59XG4vKipcbiAqIEFsbG93cyB1c2luZyBzdG9yZXMgd2l0aG91dCB0aGUgY29tcG9zaXRpb24gQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW5cbiAqIG9iamVjdCB0byBiZSBzcHJlYWQgaW4gdGhlIGBjb21wdXRlZGAgZmllbGQgb2YgYSBjb21wb25lbnQuIEl0IGFjY2VwdHMgYSBsaXN0XG4gKiBvZiBzdG9yZSBkZWZpbml0aW9ucy5cbiAqXG4gKiBAZXhhbXBsZVxuICogYGBganNcbiAqIGV4cG9ydCBkZWZhdWx0IHtcbiAqICAgY29tcHV0ZWQ6IHtcbiAqICAgICAvLyBvdGhlciBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gKiAgICAgLi4ubWFwU3RvcmVzKHVzZVVzZXJTdG9yZSwgdXNlQ2FydFN0b3JlKVxuICogICB9LFxuICpcbiAqICAgY3JlYXRlZCgpIHtcbiAqICAgICB0aGlzLnVzZXJTdG9yZSAvLyBzdG9yZSB3aXRoIGlkIFwidXNlclwiXG4gKiAgICAgdGhpcy5jYXJ0U3RvcmUgLy8gc3RvcmUgd2l0aCBpZCBcImNhcnRcIlxuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0gc3RvcmVzIC0gbGlzdCBvZiBzdG9yZXMgdG8gbWFwIHRvIGFuIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBTdG9yZXMoLi4uc3RvcmVzKSB7XG4gICAgaWYgKChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSAmJiBBcnJheS5pc0FycmF5KHN0b3Jlc1swXSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBb8J+NjV06IERpcmVjdGx5IHBhc3MgYWxsIHN0b3JlcyB0byBcIm1hcFN0b3JlcygpXCIgd2l0aG91dCBwdXR0aW5nIHRoZW0gaW4gYW4gYXJyYXk6XFxuYCArXG4gICAgICAgICAgICBgUmVwbGFjZVxcbmAgK1xuICAgICAgICAgICAgYFxcdG1hcFN0b3JlcyhbdXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmVdKVxcbmAgK1xuICAgICAgICAgICAgYHdpdGhcXG5gICtcbiAgICAgICAgICAgIGBcXHRtYXBTdG9yZXModXNlQXV0aFN0b3JlLCB1c2VDYXJ0U3RvcmUpXFxuYCArXG4gICAgICAgICAgICBgVGhpcyB3aWxsIGZhaWwgaW4gcHJvZHVjdGlvbiBpZiBub3QgZml4ZWQuYCk7XG4gICAgICAgIHN0b3JlcyA9IHN0b3Jlc1swXTtcbiAgICB9XG4gICAgcmV0dXJuIHN0b3Jlcy5yZWR1Y2UoKHJlZHVjZWQsIHVzZVN0b3JlKSA9PiB7XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6ICRpZCBpcyBhZGRlZCBieSBkZWZpbmVTdG9yZVxuICAgICAgICByZWR1Y2VkW3VzZVN0b3JlLiRpZCArIG1hcFN0b3JlU3VmZml4XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgIH0sIHt9KTtcbn1cbi8qKlxuICogQWxsb3dzIHVzaW5nIHN0YXRlIGFuZCBnZXR0ZXJzIGZyb20gb25lIHN0b3JlIHdpdGhvdXQgdXNpbmcgdGhlIGNvbXBvc2l0aW9uXG4gKiBBUEkgKGBzZXR1cCgpYCkgYnkgZ2VuZXJhdGluZyBhbiBvYmplY3QgdG8gYmUgc3ByZWFkIGluIHRoZSBgY29tcHV0ZWRgIGZpZWxkXG4gKiBvZiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV07XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KVxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZSA9IHVzZVN0b3JlKHRoaXMuJHBpbmlhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzdG9yZUtleSA9IGtleXNPck1hcHBlcltrZXldO1xuICAgICAgICAgICAgICAgIC8vIGZvciBzb21lIHJlYXNvbiBUUyBpcyB1bmFibGUgdG8gaW5mZXIgdGhlIHR5cGUgb2Ygc3RvcmVLZXkgdG8gYmUgYVxuICAgICAgICAgICAgICAgIC8vIGZ1bmN0aW9uXG4gICAgICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBzdG9yZUtleSA9PT0gJ2Z1bmN0aW9uJ1xuICAgICAgICAgICAgICAgICAgICA/IHN0b3JlS2V5LmNhbGwodGhpcywgc3RvcmUpXG4gICAgICAgICAgICAgICAgICAgIDogLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZCB3b3JrP1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmVbc3RvcmVLZXldO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSk7XG59XG4vKipcbiAqIEFsaWFzIGZvciBgbWFwU3RhdGUoKWAuIFlvdSBzaG91bGQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxuICogQGRlcHJlY2F0ZWQgdXNlIGBtYXBTdGF0ZSgpYCBpbnN0ZWFkLlxuICovXG5jb25zdCBtYXBHZXR0ZXJzID0gbWFwU3RhdGU7XG4vKipcbiAqIEFsbG93cyBkaXJlY3RseSB1c2luZyBhY3Rpb25zIGZyb20geW91ciBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYG1ldGhvZHNgIGZpZWxkXG4gKiBvZiBhIGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gdXNlU3RvcmUgLSBzdG9yZSB0byBtYXAgZnJvbVxuICogQHBhcmFtIGtleXNPck1hcHBlciAtIGFycmF5IG9yIG9iamVjdFxuICovXG5mdW5jdGlvbiBtYXBBY3Rpb25zKHVzZVN0b3JlLCBrZXlzT3JNYXBwZXIpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShrZXlzT3JNYXBwZXIpXG4gICAgICAgID8ga2V5c09yTWFwcGVyLnJlZHVjZSgocmVkdWNlZCwga2V5KSA9PiB7XG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICAgICAgICByZWR1Y2VkW2tleV0gPSBmdW5jdGlvbiAoLi4uYXJncykge1xuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IEZJWE1FOiBzaG91bGQgd29yaz9cbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0oLi4uYXJncyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KVxuICAgICAgICA6IE9iamVjdC5rZXlzKGtleXNPck1hcHBlcikucmVkdWNlKChyZWR1Y2VkLCBrZXkpID0+IHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICAgIHJlZHVjZWRba2V5XSA9IGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogRklYTUU6IHNob3VsZCB3b3JrP1xuICAgICAgICAgICAgICAgIHJldHVybiB1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dKC4uLmFyZ3MpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiByZWR1Y2VkO1xuICAgICAgICB9LCB7fSk7XG59XG4vKipcbiAqIEFsbG93cyB1c2luZyBzdGF0ZSBhbmQgZ2V0dGVycyBmcm9tIG9uZSBzdG9yZSB3aXRob3V0IHVzaW5nIHRoZSBjb21wb3NpdGlvblxuICogQVBJIChgc2V0dXAoKWApIGJ5IGdlbmVyYXRpbmcgYW4gb2JqZWN0IHRvIGJlIHNwcmVhZCBpbiB0aGUgYGNvbXB1dGVkYCBmaWVsZFxuICogb2YgYSBjb21wb25lbnQuXG4gKlxuICogQHBhcmFtIHVzZVN0b3JlIC0gc3RvcmUgdG8gbWFwIGZyb21cbiAqIEBwYXJhbSBrZXlzT3JNYXBwZXIgLSBhcnJheSBvciBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWFwV3JpdGFibGVTdGF0ZSh1c2VTdG9yZSwga2V5c09yTWFwcGVyKSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoa2V5c09yTWFwcGVyKVxuICAgICAgICA/IGtleXNPck1hcHBlci5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXldO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAodXNlU3RvcmUodGhpcy4kcGluaWEpW2tleV0gPSB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gcmVkdWNlZDtcbiAgICAgICAgfSwge30pXG4gICAgICAgIDogT2JqZWN0LmtleXMoa2V5c09yTWFwcGVyKS5yZWR1Y2UoKHJlZHVjZWQsIGtleSkgPT4ge1xuICAgICAgICAgICAgcmVkdWNlZFtrZXldID0ge1xuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVzZVN0b3JlKHRoaXMuJHBpbmlhKVtrZXlzT3JNYXBwZXJba2V5XV07XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICh1c2VTdG9yZSh0aGlzLiRwaW5pYSlba2V5c09yTWFwcGVyW2tleV1dID0gdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHJlZHVjZWQ7XG4gICAgICAgIH0sIHt9KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9iamVjdCBvZiByZWZlcmVuY2VzIHdpdGggYWxsIHRoZSBzdGF0ZSwgZ2V0dGVycywgYW5kIHBsdWdpbi1hZGRlZFxuICogc3RhdGUgcHJvcGVydGllcyBvZiB0aGUgc3RvcmUuIFNpbWlsYXIgdG8gYHRvUmVmcygpYCBidXQgc3BlY2lmaWNhbGx5XG4gKiBkZXNpZ25lZCBmb3IgUGluaWEgc3RvcmVzIHNvIG1ldGhvZHMgYW5kIG5vbiByZWFjdGl2ZSBwcm9wZXJ0aWVzIGFyZVxuICogY29tcGxldGVseSBpZ25vcmVkLlxuICpcbiAqIEBwYXJhbSBzdG9yZSAtIHN0b3JlIHRvIGV4dHJhY3QgdGhlIHJlZnMgZnJvbVxuICovXG5mdW5jdGlvbiBzdG9yZVRvUmVmcyhzdG9yZSkge1xuICAgIGNvbnN0IHJhd1N0b3JlID0gdG9SYXcoc3RvcmUpO1xuICAgIGNvbnN0IHJlZnMgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBpbiByYXdTdG9yZSkge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHJhd1N0b3JlW2tleV07XG4gICAgICAgIC8vIFRoZXJlIGlzIG5vIG5hdGl2ZSBtZXRob2QgdG8gY2hlY2sgZm9yIGEgY29tcHV0ZWRcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL2NvcmUvcHVsbC80MTY1XG4gICAgICAgIGlmICh2YWx1ZS5lZmZlY3QpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRvbyBoYXJkIHRvIHR5cGUgY29ycmVjdGx5XG4gICAgICAgICAgICByZWZzW2tleV0gPVxuICAgICAgICAgICAgICAgIC8vIC4uLlxuICAgICAgICAgICAgICAgIGNvbXB1dGVkKHtcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiAoKSA9PiBzdG9yZVtrZXldLFxuICAgICAgICAgICAgICAgICAgICBzZXQodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JlW2tleV0gPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChpc1JlZih2YWx1ZSkgfHwgaXNSZWFjdGl2ZSh2YWx1ZSkpIHtcbiAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRoZSBrZXkgaXMgc3RhdGUgb3IgZ2V0dGVyXG4gICAgICAgICAgICByZWZzW2tleV0gPVxuICAgICAgICAgICAgICAgIC8vIC0tLVxuICAgICAgICAgICAgICAgIHRvUmVmKHN0b3JlLCBrZXkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZWZzO1xufVxuXG5leHBvcnQgeyBNdXRhdGlvblR5cGUsIGFjY2VwdEhNUlVwZGF0ZSwgY3JlYXRlUGluaWEsIGRlZmluZVN0b3JlLCBkaXNwb3NlUGluaWEsIGdldEFjdGl2ZVBpbmlhLCBtYXBBY3Rpb25zLCBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSwgbWFwU3RvcmVzLCBtYXBXcml0YWJsZVN0YXRlLCBzZXRBY3RpdmVQaW5pYSwgc2V0TWFwU3RvcmVTdWZmaXgsIHNob3VsZEh5ZHJhdGUsIHNraXBIeWRyYXRlLCBzdG9yZVRvUmVmcyB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9