/*! For license information please see 873.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[873],{4208:(t,n,r)=>{r.r(n),r.d(n,{default:()=>L});var e=r(1425),o=(r(2675),r(9463),r(6280),r(6918),r(4170),r(2010),r(9868),r(9904),r(4185),r(875),r(3548),r(287),r(6099),r(3362),r(8199)),i=r(3699);function a(){var t,n,r="function"==typeof Symbol?Symbol:{},e=r.iterator||"@@iterator",o=r.toStringTag||"@@toStringTag";function i(r,e,o,i){var a=e&&e.prototype instanceof s?e:s,l=Object.create(a.prototype);return c(l,"_invoke",function(r,e,o){var i,a,c,s=0,l=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(n,r){return i=n,a=0,c=t,f.n=r,u}};function d(r,e){for(a=r,c=e,n=0;!p&&s&&!o&&n<l.length;n++){var o,i=l[n],d=f.p,v=i[2];r>3?(o=v===e)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=r<2&&d<i[1])?(a=0,f.v=e,f.n=i[1]):d<v&&(o=r<3||i[0]>e||e>v)&&(i[4]=r,i[5]=e,f.n=v,a=0))}if(o||r>1)return u;throw p=!0,e}return function(o,l,v){if(s>1)throw TypeError("Generator is already running");for(p&&1===l&&d(l,v),a=l,c=v;(n=a<2?t:c)||!p;){i||(a?a<3?(a>1&&(f.n=-1),d(a,c)):f.n=c:f.v=c);try{if(s=2,i){if(a||(o="next"),n=i[o]){if(!(n=n.call(i,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,a<2&&(a=0)}else 1===a&&(n=i.return)&&n.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((n=(p=f.n<0)?c:r.call(e,f))!==u)break}catch(n){i=t,a=1,c=n}finally{s=1}}return{value:n,done:p}}}(r,o,i),!0),l}var u={};function s(){}function l(){}function p(){}n=Object.getPrototypeOf;var f=[][e]?n(n([][e]())):(c(n={},e,function(){return this}),n),d=p.prototype=s.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,c(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return l.prototype=p,c(d,"constructor",p),c(p,"constructor",l),l.displayName="GeneratorFunction",c(p,o,"GeneratorFunction"),c(d),c(d,o,"Generator"),c(d,e,function(){return this}),c(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:i,m:v}})()}function c(t,n,r,e){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}c=function(t,n,r,e){if(n)o?o(t,n,{value:r,enumerable:!e,configurable:!e,writable:!e}):t[n]=r;else{var i=function(n,r){c(t,n,function(t){return this._invoke(n,r,t)})};i("next",0),i("throw",1),i("return",2)}},c(t,n,r,e)}function u(t,n,r,e,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?n(u):Promise.resolve(u).then(e,o)}var s={class:"cart-container"},l={key:0,class:"cart-loading"},p={class:"cart-items"},f={class:"cart-item-image"},d=["src"],v={class:"cart-item-info"},k={class:"cart-item-actions"},m=["onClick"],h=["onClick"],y={class:"cart-summary"};const b={__name:"CartView",setup:function(t){var n=(0,o.x)(),r=(0,i.d)();function c(){var t;return t=a().m(function t(e){return a().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.removeProduct(e);case 1:r.showToast("Produit supprimé du panier","success");case 2:return t.a(2)}},t)}),c=function(){var n=this,r=arguments;return new Promise(function(e,o){var i=t.apply(n,r);function a(t){u(i,e,o,a,c,"next",t)}function c(t){u(i,e,o,a,c,"throw",t)}a(void 0)})},c.apply(this,arguments)}function b(){confirm("Êtes-vous sûr de vouloir vider votre panier ?")&&(n.clearCart(),r.showToast("Panier vidé","success"))}return(0,e.sV)(function(){n.fetchSummary()}),function(t,r){return(0,e.uX)(),(0,e.CE)("div",s,[(0,e.Q3)(" État de chargement "),(0,e.R1)(n).loading?((0,e.uX)(),(0,e.CE)("div",l,r[0]||(r[0]=[(0,e.Lk)("h2",null,"Chargement en cours...",-1),(0,e.Lk)("p",null,"Récupération de votre panier...",-1)]))):(0,e.R1)(n).isEmpty?((0,e.uX)(),(0,e.CE)(e.FK,{key:1},[(0,e.Q3)(" Panier vide "),r[1]||(r[1]=(0,e.Lk)("div",{class:"cart-empty"},[(0,e.Lk)("h2",null,"Votre panier est vide"),(0,e.Lk)("p",null,"Il semble que vous n'ayez pas encore ajouté de produit."),(0,e.Lk)("a",{href:"/",class:"btn-continue-shopping"},"Voir les produits")],-1))],2112)):((0,e.uX)(),(0,e.CE)(e.FK,{key:2},[(0,e.Q3)(" Contenu du panier "),(0,e.Lk)("div",null,[r[3]||(r[3]=(0,e.Lk)("h2",{class:"cart-title"},"Contenu de votre panier",-1)),(0,e.Lk)("div",p,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)((0,e.R1)(n).items,function(t){return(0,e.uX)(),(0,e.CE)("div",{key:t.product.id,class:"cart-item"},[(0,e.Lk)("div",f,[(0,e.Lk)("img",{src:t.product.imageUrl||"https://via.placeholder.com/80",alt:""},null,8,d)]),(0,e.Lk)("div",v,[(0,e.Lk)("h3",null,(0,e.v_)(t.product.name),1),(0,e.Lk)("p",null,"Quantité : "+(0,e.v_)((t.quantity/1e3).toFixed(2))+"kg",1),(0,e.Lk)("p",null,"Prix unitaire : "+(0,e.v_)(t.unitPrice.toFixed(2))+" €/kg",1),(0,e.Lk)("p",null,"Total : "+(0,e.v_)(t.totalTTC.toFixed(2))+" €",1)]),(0,e.Lk)("div",k,[(0,e.Lk)("button",{onClick:function(n){return r=t.product.id,void(window.location.href="/product/".concat(r));var r},class:"btn-modify-item"},"Modifier",8,m),(0,e.Lk)("button",{onClick:function(n){return function(t){return c.apply(this,arguments)}(t.product.id)},class:"btn-remove-item"},"Supprimer",8,h)])])}),128))]),(0,e.Lk)("div",y,[(0,e.Lk)("h3",null,"Total TTC : "+(0,e.v_)((0,e.R1)(n).totalPrice.toFixed(2))+" €",1),(0,e.Lk)("div",{class:"cart-actions"},[(0,e.Lk)("button",{onClick:b,class:"btn-clear-cart"},"Vider le panier"),r[2]||(r[2]=(0,e.Lk)("a",{href:"/checkout",class:"btn-checkout"},"Valider le panier",-1))])])])],2112))])}}};var C=r(8457);const L={__name:"CartApp",setup:function(t){return function(t,n){return(0,e.uX)(),(0,e.CE)("div",null,[(0,e.Q3)(" Composant principal d'affichage du panier "),(0,e.bF)(b),(0,e.Q3)(" Composant pour les notifications (toast animé) "),(0,e.bF)(C.A)])}}}}}]);