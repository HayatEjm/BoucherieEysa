/*! For license information please see admin.js.LICENSE.txt */
"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[884],{533:(t,e,n)=>{var r=n(9504),o=n(8014),a=n(655),i=n(2333),u=n(7750),c=r(i),l=r("".slice),s=Math.ceil,p=function(t){return function(e,n,r){var i,p,f=a(u(e)),d=o(n),v=f.length,y=void 0===r?" ":a(r);return d<=v||""===y?f:((p=c(y,s((i=d-v)/y.length))).length>i&&(p=l(p,0,i)),t?f+p:p+f)}};t.exports={start:p(!1),end:p(!0)}},659:(t,e,n)=>{var r=n(1425);n(2675),n(9463),n(6280),n(6918),n(8706),n(3792),n(4782),n(739),n(3288),n(4170),n(3110),n(9868),n(9904),n(4185),n(875),n(3548),n(287),n(6099),n(3362),n(7495),n(8781),n(7764),n(8156),n(5440),n(5746),n(2953),n(8408),n(4603),n(7566),n(8721);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,o,i){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return a(s,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,u=t,f.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!p&&l&&!o&&e<s.length;e++){var o,a=s[e],d=f.p,v=a[2];n>3?(o=v===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,f.v=r,f.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,i=0))}if(o||n>1)return c;throw p=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,v),i=s,u=v;(e=i<2?t:u)||!p;){a||(i?i<3?(i>1&&(f.n=-1),d(i,u)):f.n=u:f.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(p=f.n<0)?u:n.call(r,f))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:p}}}(n,o,i),!0),s}var c={};function l(){}function s(){}function p(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=p.prototype=l.prototype=Object.create(f);function v(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,a(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=p,a(d,"constructor",p),a(p,"constructor",s),s.displayName="GeneratorFunction",a(p,i,"GeneratorFunction"),a(d),a(d,i,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:u,m:v}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,n,r)}function i(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function u(t){i(a,r,o,u,c,"next",t)}function c(t){i(a,r,o,u,c,"throw",t)}u(void 0)})}}var c={class:"card-eysa",style:{padding:"16px"}},l={class:"grid-eysa grid-eysa-4",style:{"margin-bottom":"12px"}},s={class:"admin-table"},p={key:0,style:{color:"#666"}},f={style:{color:"#666"}},d={key:0},v={key:1,style:{color:"#999"}},y=["value","onChange"],h={key:0},m={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const b={__name:"OrdersTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),a=(0,r.KR)(!1),i=(0,r.Kh)({status:"",search:""});function b(){return k.apply(this,arguments)}function k(){return(k=u(o().m(function t(){var r,u,c;return o().w(function(t){for(;;)switch(t.n){case 0:return a.value=!0,t.p=1,r=new URLSearchParams,i.status&&r.set("status",i.status),i.search&&r.set("search",i.search),t.n=2,fetch("".concat(e.endpoints.list,"?").concat(r.toString()));case 2:return u=t.v,t.n=3,u.json();case 3:c=t.v,n.value=c.items||[];case 4:return t.p=4,a.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function g(){i.status="",i.search="",b()}function L(){return(L=u(o().m(function t(n,r){var a,i;return o().w(function(t){for(;;)switch(t.n){case 0:return a=e.endpoints.status.replace("{id}",n.id),t.n=1,fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({status:r})});case 1:return i=t.v,t.n=2,i.json();case 2:t.v.success?n.status=r:alert("Erreur lors de la mise à jour du statut");case 3:return t.a(2)}},t)}))).apply(this,arguments)}function O(t){return{pending:"En attente",confirmed:"Confirmée",ready:"Prête",completed:"Terminée",cancelled:"Annulée"}[t]||t}function j(t,e){if(!t)return"";var n=new Date(t),r=function(t){return String(t).padStart(2,"0")},o={dd:r(n.getDate()),MM:r(n.getMonth()+1),yyyy:n.getFullYear(),HH:r(n.getHours()),mm:r(n.getMinutes())};return e.replace(/dd|MM|yyyy|HH|mm/g,function(t){return o[t]})}return(0,r.sV)(b),function(t,e){return(0,r.uX)(),(0,r.CE)("div",c,[e[7]||(e[7]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Commandes",-1)),(0,r.Q3)(" Filtres "),(0,r.Lk)("div",l,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return i.status=t}),onChange:b,class:"form-control"},e[2]||(e[2]=[(0,r.Fv)('<option value="" data-v-1fb84df6>Tous les statuts</option><option value="pending" data-v-1fb84df6>En attente</option><option value="confirmed" data-v-1fb84df6>Confirmée</option><option value="ready" data-v-1fb84df6>Prête</option><option value="completed" data-v-1fb84df6>Terminée</option><option value="cancelled" data-v-1fb84df6>Annulée</option>',6)]),544),[[r.u1,i.status]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return i.search=t}),onKeyup:(0,r.jR)(b,["enter"]),placeholder:"Recherche client / email",class:"form-control"},null,544),[[r.Jo,i.search,void 0,{trim:!0}]]),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-primary",onClick:b},"Appliquer"),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:g},"Réinitialiser")]),(0,r.Q3)(" Table "),(0,r.Lk)("div",s,[(0,r.Lk)("table",null,[e[6]||(e[6]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"#"),(0,r.Lk)("th",null,"Client"),(0,r.Lk)("th",null,"Date"),(0,r.Lk)("th",null,"Créneau"),(0,r.Lk)("th",null,"Total"),(0,r.Lk)("th",null,"Statut"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var n,o,a;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"#"+(0,r.v_)((a=t.id,String(a).slice(-6).toUpperCase())),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",null,(0,r.v_)(t.customerName||"Client"),1),t.customerEmail?((0,r.uX)(),(0,r.CE)("small",p,(0,r.v_)(t.customerEmail),1)):(0,r.Q3)("v-if",!0)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",null,(0,r.v_)(j(t.createdAt,"dd/MM/yyyy")),1),(0,r.Lk)("small",f,(0,r.v_)(j(t.createdAt,"HH:mm")),1)]),(0,r.Lk)("td",null,[t.pickupDate?((0,r.uX)(),(0,r.CE)("span",d,(0,r.v_)(j(t.pickupDate,"dd/MM"))+" • "+(0,r.v_)(t.pickupTime||"--:--"),1)):((0,r.uX)(),(0,r.CE)("span",v,e[3]||(e[3]=[(0,r.Lk)("i",null,"Non défini",-1)])))]),(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"€ "+(0,r.v_)((null!==(n=t.total)&&void 0!==n?n:0).toFixed(2)),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(["badge",(o=t.status,{pending:"status-pending",confirmed:"status-confirmed",ready:"status-ready",completed:"status-completed",cancelled:"status-cancelled"}[o]||"status-pending")])},(0,r.v_)(O(t.status)),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("select",{value:t.status,onChange:function(e){return function(t,e){return L.apply(this,arguments)}(t,e.target.value)},class:"form-control",style:{"max-width":"150px"}},e[4]||(e[4]=[(0,r.Fv)('<option value="pending" data-v-1fb84df6>En attente</option><option value="confirmed" data-v-1fb84df6>Confirmée</option><option value="ready" data-v-1fb84df6>Prête</option><option value="completed" data-v-1fb84df6>Terminée</option><option value="cancelled" data-v-1fb84df6>Annulée</option>',5)]),40,y)])])}),128)),a.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",h,e[5]||(e[5]=[(0,r.Lk)("td",{colspan:"7",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucune commande trouvée",-1)])))])])]),a.value?((0,r.uX)(),(0,r.CE)("div",m,"Chargement…")):(0,r.Q3)("v-if",!0)])}}};var k=n(6262);const g=(0,k.A)(b,[["__scopeId","data-v-1fb84df6"]]);n(2259),n(5700),n(2008),n(1629),n(2062),n(4114),n(9572),n(2010),n(2892),n(7945),n(3851),n(1278),n(9432),n(8992),n(4520),n(3949),n(1454),n(3500);function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}function O(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return j(l,"_invoke",function(n,r,o){var a,u,c,l=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,u=0,c=t,f.n=n,i}};function d(n,r){for(u=n,c=r,e=0;!p&&l&&!o&&e<s.length;e++){var o,a=s[e],d=f.p,v=a[2];n>3?(o=v===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,f.v=r,f.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,u=0))}if(o||n>1)return i;throw p=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,v),u=s,c=v;(e=u<2?t:c)||!p;){a||(u?u<3?(u>1&&(f.n=-1),d(u,c)):f.n=c:f.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(p=f.n<0)?c:n.call(r,f))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:p}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(j(e={},r,function(){return this}),e),p=l.prototype=u.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,j(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return c.prototype=l,j(p,"constructor",l),j(l,"constructor",c),c.displayName="GeneratorFunction",j(l,o,"GeneratorFunction"),j(p),j(p,o,"Generator"),j(p,r,function(){return this}),j(p,"toString",function(){return"[object Generator]"}),(O=function(){return{w:a,m:f}})()}function j(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}j=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){j(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},j(t,e,n,r)}function w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?w(Object(n),!0).forEach(function(e){_(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=L(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==L(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function E(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function x(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){E(a,r,o,i,u,"next",t)}function u(t){E(a,r,o,i,u,"throw",t)}i(void 0)})}}var C={class:"card-eysa",style:{padding:"16px"}},P={class:"admin-table"},T={style:{display:"flex",gap:"6px","align-items":"center"}},A=["onUpdate:modelValue"],X=["onClick"],M=["href"],F={key:0},R={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const N={__name:"ProductsTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),o=(0,r.KR)(!1);function a(){return(a=x(O().m(function t(){var r,a;return O().w(function(t){for(;;)switch(t.n){case 0:return o.value=!0,t.p=1,t.n=2,fetch(e.endpoints.list);case 2:return r=t.v,t.n=3,r.json();case 3:a=t.v,n.value=(a.items||[]).map(function(t){var e;return S(S({},t),{},{_stock:null!==(e=t.stock)&&void 0!==e?e:0})});case 4:return t.p=4,o.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function i(){return(i=x(O().m(function t(n){var r,o;return O().w(function(t){for(;;)switch(t.n){case 0:return r=e.endpoints.stock.replace("{id}",n.id),t.n=1,fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({stock:Number(n._stock)})});case 1:return o=t.v,t.n=2,o.json();case 2:t.v.success||alert("Erreur de mise à jour du stock");case 3:return t.a(2)}},t)}))).apply(this,arguments)}return(0,r.sV)(function(){return a.apply(this,arguments)}),function(t,e){return(0,r.uX)(),(0,r.CE)("div",C,[e[2]||(e[2]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Produits",-1)),(0,r.Lk)("div",P,[(0,r.Lk)("table",null,[e[1]||(e[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Produit"),(0,r.Lk)("th",null,"Prix"),(0,r.Lk)("th",null,"Stock"),(0,r.Lk)("th",null,"Catégorie"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var e;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,(0,r.v_)(t.name),1),(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"€ "+(0,r.v_)((null!==(e=t.price)&&void 0!==e?e:0).toFixed(2)),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",T,[(0,r.bo)((0,r.Lk)("input",{type:"number",min:"0","onUpdate:modelValue":function(e){return t._stock=e},class:"form-control",style:{width:"95px"}},null,8,A),[[r.Jo,t._stock,void 0,{number:!0}]]),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:function(e){return function(t){return i.apply(this,arguments)}(t)}},"Sauver",8,X)])]),(0,r.Lk)("td",null,(0,r.v_)(t.categoryName||"Non classé"),1),(0,r.Lk)("td",null,[(0,r.Lk)("a",{href:"/admin/products/".concat(t.id,"/edit"),class:"btn-eysa btn-eysa-outline"},"Modifier",8,M)])])}),128)),o.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",F,e[0]||(e[0]=[(0,r.Lk)("td",{colspan:"5",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucun produit",-1)])))])])]),o.value?((0,r.uX)(),(0,r.CE)("div",R,"Chargement…")):(0,r.Q3)("v-if",!0)])}}},G=(0,k.A)(N,[["__scopeId","data-v-ecd474f8"]]);n(8598);function I(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function a(n,r,o,a){var c=r&&r.prototype instanceof u?r:u,l=Object.create(c.prototype);return D(l,"_invoke",function(n,r,o){var a,u,c,l=0,s=o||[],p=!1,f={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,u=0,c=t,f.n=n,i}};function d(n,r){for(u=n,c=r,e=0;!p&&l&&!o&&e<s.length;e++){var o,a=s[e],d=f.p,v=a[2];n>3?(o=v===r)&&(c=a[(u=a[4])?5:(u=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(u=0,f.v=r,f.n=a[1]):d<v&&(o=n<3||a[0]>r||r>v)&&(a[4]=n,a[5]=r,f.n=v,u=0))}if(o||n>1)return i;throw p=!0,r}return function(o,s,v){if(l>1)throw TypeError("Generator is already running");for(p&&1===s&&d(s,v),u=s,c=v;(e=u<2?t:c)||!p;){a||(u?u<3?(u>1&&(f.n=-1),d(u,c)):f.n=c:f.v=c);try{if(l=2,a){if(u||(o="next"),e=a[o]){if(!(e=e.call(a,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,u<2&&(u=0)}else 1===u&&(e=a.return)&&e.call(a),u<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),u=1);a=t}else if((e=(p=f.n<0)?c:n.call(r,f))!==i)break}catch(e){a=t,u=1,c=e}finally{l=1}}return{value:e,done:p}}}(n,o,a),!0),l}var i={};function u(){}function c(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(D(e={},r,function(){return this}),e),p=l.prototype=u.prototype=Object.create(s);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,D(t,o,"GeneratorFunction")),t.prototype=Object.create(p),t}return c.prototype=l,D(p,"constructor",l),D(l,"constructor",c),c.displayName="GeneratorFunction",D(l,o,"GeneratorFunction"),D(p),D(p,o,"Generator"),D(p,r,function(){return this}),D(p,"toString",function(){return"[object Generator]"}),(I=function(){return{w:a,m:f}})()}function D(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}D=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){D(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},D(t,e,n,r)}function q(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function H(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){q(a,r,o,i,u,"next",t)}function u(t){q(a,r,o,i,u,"throw",t)}i(void 0)})}}var K={class:"card-eysa",style:{padding:"16px"}},Q={class:"admin-table"},J={style:{display:"flex",gap:"6px"}},U=["onClick"],V=["onClick"],W={key:0},B={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const Y={__name:"UsersTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),o=(0,r.KR)(!1);function a(){return(a=H(I().m(function t(){var r,a;return I().w(function(t){for(;;)switch(t.n){case 0:return o.value=!0,t.p=1,t.n=2,fetch(e.endpoints.list);case 2:return r=t.v,t.n=3,r.json();case 3:a=t.v,n.value=a.items||[];case 4:return t.p=4,o.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function i(){return(i=H(I().m(function t(n,r){var o,a;return I().w(function(t){for(;;)switch(t.n){case 0:return o=e.endpoints.toggle.replace("{id}",n.id),t.n=1,fetch(o,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({active:r})});case 1:return a=t.v,t.n=2,a.json();case 2:t.v.success?n.isActive=r:alert("Erreur lors de la modification du statut");case 3:return t.a(2)}},t)}))).apply(this,arguments)}function u(){return(u=H(I().m(function t(r){var o,a;return I().w(function(t){for(;;)switch(t.n){case 0:if(confirm("Supprimer cet utilisateur ?")){t.n=1;break}return t.a(2);case 1:return o=e.endpoints.remove.replace("{id}",r.id),t.n=2,fetch(o,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest"}});case 2:return a=t.v,t.n=3,a.json();case 3:t.v.success?n.value=n.value.filter(function(t){return t.id!==r.id}):alert("Erreur lors de la suppression");case 4:return t.a(2)}},t)}))).apply(this,arguments)}function c(t,e){if(!t)return"";var n=new Date(t),r=function(t){return String(t).padStart(2,"0")},o={dd:r(n.getDate()),MM:r(n.getMonth()+1),yyyy:n.getFullYear()};return e.replace(/dd|MM|yyyy/g,function(t){return o[t]})}return(0,r.sV)(function(){return a.apply(this,arguments)}),function(t,e){return(0,r.uX)(),(0,r.CE)("div",K,[e[2]||(e[2]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Utilisateurs",-1)),(0,r.Lk)("div",Q,[(0,r.Lk)("table",null,[e[1]||(e[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Nom"),(0,r.Lk)("th",null,"Email"),(0,r.Lk)("th",null,"Rôles"),(0,r.Lk)("th",null,"Inscription"),(0,r.Lk)("th",null,"Statut"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var e;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,(0,r.v_)(t.displayName),1),(0,r.Lk)("td",null,(0,r.v_)(t.email),1),(0,r.Lk)("td",null,(0,r.v_)(null===(e=t.roles)||void 0===e?void 0:e.join(", ")),1),(0,r.Lk)("td",null,(0,r.v_)(c(t.createdAt,"dd/MM/yyyy")),1),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(["badge",t.isActive?"status-completed":"status-cancelled"])},(0,r.v_)(t.isActive?"Actif":"Inactif"),3)]),(0,r.Lk)("td",J,[(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:function(e){return function(t,e){return i.apply(this,arguments)}(t,!t.isActive)}},(0,r.v_)(t.isActive?"Désactiver":"Activer"),9,U),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-outline",onClick:function(e){return function(t){return u.apply(this,arguments)}(t)}},"Supprimer",8,V)])])}),128)),o.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",W,e[0]||(e[0]=[(0,r.Lk)("td",{colspan:"6",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucun utilisateur",-1)])))])])]),o.value?((0,r.uX)(),(0,r.CE)("div",B,"Chargement…")):(0,r.Q3)("v-if",!0)])}}},z=(0,k.A)(Y,[["__scopeId","data-v-2d4a5b68"]]);var Z=document.getElementById("orders-table-root");Z&&(0,r.Ef)(g,{endpoints:{list:Z.dataset.endpointList,status:Z.dataset.endpointStatus}}).mount(Z);var $=document.getElementById("products-table-root");$&&(0,r.Ef)(G,{endpoints:{list:$.dataset.endpointList,stock:$.dataset.endpointStock}}).mount($);var tt=document.getElementById("users-table-root");tt&&(0,r.Ef)(z,{endpoints:{list:tt.dataset.endpointList,toggle:tt.dataset.endpointToggle,remove:tt.dataset.endpointDelete}}).mount(tt)},739:(t,e,n)=>{var r=n(6518),o=n(9039),a=n(8981),i=n(2777);r({target:"Date",proto:!0,arity:1,forced:o(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})})},{toJSON:function(t){var e=a(this),n=i(e,"number");return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},1454:(t,e,n)=>{n(1701)},1701:(t,e,n)=>{var r=n(6518),o=n(9565),a=n(9306),i=n(8551),u=n(1767),c=n(9462),l=n(6319),s=n(9539),p=n(684),f=n(4549),d=n(6395),v=!d&&!p("map",function(){}),y=!d&&!v&&f("map",TypeError),h=d||v||y,m=c(function(){var t=this.iterator,e=i(o(this.next,t));if(!(this.done=!!e.done))return l(t,this.mapper,[e.value,this.counter++],!0)});r({target:"Iterator",proto:!0,real:!0,forced:h},{map:function(t){i(this);try{a(t)}catch(t){s(this,"throw",t)}return y?o(y,this,t):new m(u(this),{mapper:t})}})},2062:(t,e,n)=>{var r=n(6518),o=n(9213).map;r({target:"Array",proto:!0,forced:!n(597)("map")},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},3063:(t,e,n)=>{var r=n(2839);t.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(r)},3470:t=>{t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},4782:(t,e,n)=>{var r=n(6518),o=n(4376),a=n(3517),i=n(34),u=n(5610),c=n(6198),l=n(5397),s=n(2278),p=n(8227),f=n(597),d=n(7680),v=f("slice"),y=p("species"),h=Array,m=Math.max;r({target:"Array",proto:!0,forced:!v},{slice:function(t,e){var n,r,p,f=l(this),v=c(f),b=u(t,v),k=u(void 0===e?v:e,v);if(o(f)&&(n=f.constructor,(a(n)&&(n===h||o(n.prototype))||i(n)&&null===(n=n[y]))&&(n=void 0),n===h||void 0===n))return d(f,b,k);for(r=new(void 0===n?h:n)(m(k-b,0)),p=0;b<k;b++,p++)b in f&&s(r,p,f[b]);return r.length=p,r}})},5746:(t,e,n)=>{var r=n(9565),o=n(9228),a=n(8551),i=n(34),u=n(7750),c=n(3470),l=n(655),s=n(5966),p=n(6682);o("search",function(t,e,n){return[function(e){var n=u(this),o=i(e)?s(e,t):void 0;return o?r(o,e,n):new RegExp(e)[t](l(n))},function(t){var r=a(this),o=l(t),i=n(e,r,o);if(i.done)return i.value;var u=r.lastIndex;c(u,0)||(r.lastIndex=0);var s=p(r,o);return c(r.lastIndex,u)||(r.lastIndex=u),null===s?-1:s.index}]})},8156:(t,e,n)=>{var r=n(6518),o=n(533).start;r({target:"String",proto:!0,forced:n(3063)},{padStart:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})},8598:(t,e,n)=>{var r=n(6518),o=n(9504),a=n(7055),i=n(5397),u=n(4598),c=o([].join);r({target:"Array",proto:!0,forced:a!==Object||!u("join",",")},{join:function(t){return c(i(this),void 0===t?",":t)}})}},t=>{t.O(0,[838,989,256],()=>{return e=659,t(t.s=e);var e});t.O()}]);