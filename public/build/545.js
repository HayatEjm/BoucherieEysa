/*! For license information please see 545.js.LICENSE.txt */
"use strict";(self.webpackChunkboucherieeysa=self.webpackChunkboucherieeysa||[]).push([[545],{986:(t,e,n)=>{n.d(e,{A:()=>h});n(52675),n(89463),n(2259),n(16280),n(76918),n(2008),n(23418),n(64346),n(23792),n(48598),n(34782),n(60739),n(23288),n(94170),n(62010),n(33110),n(59904),n(84185),n(40875),n(63548),n(10287),n(26099),n(3362),n(27495),n(90906),n(38781),n(47764),n(68156),n(25440),n(98992),n(54520),n(62953);var r=n(6934);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,o,i){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return a(s,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,u=t,p.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],d=p.p,y=a[2];n>3?(o=y===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,p.v=r,p.n=a[1]):d<y&&(o=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,p.n=y,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),i=s,u=y;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),s}var c={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=f.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,a(d,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,i,"GeneratorFunction"),a(d),a(d,i,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:u,m:y}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,n,r)}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,u,"next",t)}function u(t){c(a,r,o,i,u,"throw",t)}i(void 0)})}}var s={class:"card-eysa",style:{padding:"16px"}},f={class:"admin-table"},p={style:{display:"flex",gap:"6px"}},d=["onClick"],y=["onClick"],v={key:0},m={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const b={__name:"UsersTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),a=(0,r.KR)(!1);function u(){return(u=l(o().m(function t(){var r,i;return o().w(function(t){for(;;)switch(t.n){case 0:return a.value=!0,t.p=1,t.n=2,fetch(e.endpoints.list);case 2:return r=t.v,t.n=3,r.json();case 3:i=t.v,n.value=i.items||[];case 4:return t.p=4,a.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function c(){return(c=l(o().m(function t(n,r){var a,i;return o().w(function(t){for(;;)switch(t.n){case 0:return a=e.endpoints.toggle.replace("{id}",n.id),t.n=1,fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({active:r})});case 1:return i=t.v,t.n=2,i.json();case 2:t.v.success?n.isActive=r:alert("Erreur lors de la modification du statut");case 3:return t.a(2)}},t)}))).apply(this,arguments)}function b(){return(b=l(o().m(function t(r){var a,i;return o().w(function(t){for(;;)switch(t.n){case 0:if(confirm("Supprimer cet utilisateur ?")){t.n=1;break}return t.a(2);case 1:return a=e.endpoints.remove.replace("{id}",r.id),t.n=2,fetch(a,{method:"DELETE",headers:{"X-Requested-With":"XMLHttpRequest"}});case 2:return i=t.v,t.n=3,i.json();case 3:t.v.success?n.value=n.value.filter(function(t){return t.id!==r.id}):alert("Erreur lors de la suppression");case 4:return t.a(2)}},t)}))).apply(this,arguments)}function h(t,e){if(!t)return"";var n=new Date(t),r=function(t){return String(t).padStart(2,"0")},o={dd:r(n.getDate()),MM:r(n.getMonth()+1),yyyy:n.getFullYear()};return e.replace(/dd|MM|yyyy/g,function(t){return o[t]})}return(0,r.sV)(function(){return u.apply(this,arguments)}),function(t,e){return(0,r.uX)(),(0,r.CE)("div",s,[e[2]||(e[2]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Utilisateurs",-1)),(0,r.Lk)("div",f,[(0,r.Lk)("table",null,[e[1]||(e[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Nom"),(0,r.Lk)("th",null,"Email"),(0,r.Lk)("th",null,"Rôles"),(0,r.Lk)("th",null,"Inscription"),(0,r.Lk)("th",null,"Statut"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var e;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,(0,r.v_)(t.displayName),1),(0,r.Lk)("td",null,(0,r.v_)(t.email),1),(0,r.Lk)("td",null,(0,r.v_)(null===(e=t.roles)||void 0===e?void 0:e.join(", ")),1),(0,r.Lk)("td",null,(0,r.v_)(h(t.createdAt,"dd/MM/yyyy")),1),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(["badge",t.isActive?"status-completed":"status-cancelled"])},(0,r.v_)(t.isActive?"Actif":"Inactif"),3)]),(0,r.Lk)("td",p,[(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:function(e){return function(t,e){return c.apply(this,arguments)}(t,!t.isActive)}},(0,r.v_)(t.isActive?"Désactiver":"Activer"),9,d),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-outline",onClick:function(e){return function(t){return b.apply(this,arguments)}(t)}},"Supprimer",8,y)])])}),128)),a.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",v,i(e[0]||(e[0]=[(0,r.Lk)("td",{colspan:"6",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucun utilisateur",-1)]))))])])]),a.value?((0,r.uX)(),(0,r.CE)("div",m,"Chargement…")):(0,r.Q3)("v-if",!0)])}}};const h=(0,n(66262).A)(b,[["__scopeId","data-v-2d4a5b68"]])},53265:(t,e,n)=>{n.d(e,{A:()=>O});n(52675),n(89463),n(2259),n(45700),n(16280),n(76918),n(2008),n(51629),n(23418),n(64346),n(23792),n(62062),n(44114),n(34782),n(60739),n(89572),n(23288),n(94170),n(62010),n(33110),n(2892),n(9868),n(59904),n(67945),n(84185),n(83851),n(81278),n(40875),n(79432),n(63548),n(10287),n(26099),n(3362),n(27495),n(90906),n(38781),n(47764),n(25440),n(98992),n(54520),n(3949),n(81454),n(23500),n(62953);var r=n(6934);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function a(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function u(n,r,o,a){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return i(s,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,u=t,p.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],d=p.p,y=a[2];n>3?(o=y===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,p.v=r,p.n=a[1]):d<y&&(o=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,p.n=y,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),i=s,u=y;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,a),!0),s}var c={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(i(e={},r,function(){return this}),e),d=f.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,i(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,i(d,"constructor",f),i(f,"constructor",s),s.displayName="GeneratorFunction",i(f,o,"GeneratorFunction"),i(d),i(d,o,"Generator"),i(d,r,function(){return this}),i(d,"toString",function(){return"[object Generator]"}),(a=function(){return{w:u,m:y}})()}function i(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}i=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){i(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},i(t,e,n,r)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach(function(e){l(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=o(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==o(e)?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){p(a,r,o,i,u,"next",t)}function u(t){p(a,r,o,i,u,"throw",t)}i(void 0)})}}var y={class:"card-eysa",style:{padding:"16px"}},v={class:"admin-table"},m={style:{display:"flex",gap:"6px","align-items":"center"}},b=["onUpdate:modelValue"],h=["onClick"],k=["href"],g={key:0},L={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const j={__name:"ProductsTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),o=(0,r.KR)(!1);function i(){return(i=d(a().m(function t(){var r,i;return a().w(function(t){for(;;)switch(t.n){case 0:return o.value=!0,t.p=1,t.n=2,fetch(e.endpoints.list);case 2:return r=t.v,t.n=3,r.json();case 3:i=t.v,n.value=(i.items||[]).map(function(t){var e;return c(c({},t),{},{_stock:null!==(e=t.stock)&&void 0!==e?e:0})});case 4:return t.p=4,o.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function u(){return(u=d(a().m(function t(n){var r,o;return a().w(function(t){for(;;)switch(t.n){case 0:return r=e.endpoints.stock.replace("{id}",n.id),t.n=1,fetch(r,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({stock:Number(n._stock)})});case 1:return o=t.v,t.n=2,o.json();case 2:t.v.success||alert("Erreur de mise à jour du stock");case 3:return t.a(2)}},t)}))).apply(this,arguments)}return(0,r.sV)(function(){return i.apply(this,arguments)}),function(t,e){return(0,r.uX)(),(0,r.CE)("div",y,[e[2]||(e[2]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Produits",-1)),(0,r.Lk)("div",v,[(0,r.Lk)("table",null,[e[1]||(e[1]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Produit"),(0,r.Lk)("th",null,"Prix"),(0,r.Lk)("th",null,"Stock"),(0,r.Lk)("th",null,"Catégorie"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var e;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,(0,r.v_)(t.name),1),(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"€ "+(0,r.v_)((null!==(e=t.price)&&void 0!==e?e:0).toFixed(2)),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",m,[(0,r.bo)((0,r.Lk)("input",{type:"number",min:"0","onUpdate:modelValue":function(e){return t._stock=e},class:"form-control",style:{width:"95px"}},null,8,b),[[r.Jo,t._stock,void 0,{number:!0}]]),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:function(e){return function(t){return u.apply(this,arguments)}(t)}},"Sauver",8,h)])]),(0,r.Lk)("td",null,(0,r.v_)(t.categoryName||"Non classé"),1),(0,r.Lk)("td",null,[(0,r.Lk)("a",{href:"/admin/products/".concat(t.id,"/edit"),class:"btn-eysa btn-eysa-outline"},"Modifier",8,k)])])}),128)),o.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",g,s(e[0]||(e[0]=[(0,r.Lk)("td",{colspan:"5",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucun produit",-1)]))))])])]),o.value?((0,r.uX)(),(0,r.CE)("div",L,"Chargement…")):(0,r.Q3)("v-if",!0)])}}};const O=(0,n(66262).A)(j,[["__scopeId","data-v-ecd474f8"]])},89309:(t,e,n)=>{n.d(e,{A:()=>L});n(52675),n(89463),n(2259),n(16280),n(76918),n(28706),n(23418),n(64346),n(23792),n(34782),n(60739),n(23288),n(94170),n(62010),n(33110),n(9868),n(59904),n(84185),n(40875),n(63548),n(10287),n(26099),n(3362),n(27495),n(90906),n(38781),n(47764),n(68156),n(25440),n(5746),n(62953),n(48408),n(14603),n(47566),n(98721);var r=n(6934);function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function u(n,r,o,i){var u=r&&r.prototype instanceof l?r:l,s=Object.create(u.prototype);return a(s,"_invoke",function(n,r,o){var a,i,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return a=e,i=0,u=t,p.n=n,c}};function d(n,r){for(i=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,a=s[e],d=p.p,y=a[2];n>3?(o=y===r)&&(u=a[(i=a[4])?5:(i=3,3)],a[4]=a[5]=t):a[0]<=d&&((o=n<2&&d<a[1])?(i=0,p.v=r,p.n=a[1]):d<y&&(o=n<3||a[0]>r||r>y)&&(a[4]=n,a[5]=r,p.n=y,i=0))}if(o||n>1)return c;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),i=s,u=y;(e=i<2?t:u)||!f;){a||(i?i<3?(i>1&&(p.n=-1),d(i,u)):p.n=u:p.v=u);try{if(l=2,a){if(i||(o="next"),e=a[o]){if(!(e=e.call(a,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,i<2&&(i=0)}else 1===i&&(e=a.return)&&e.call(a),i<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),i=1);a=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==c)break}catch(e){a=t,i=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),s}var c={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=f.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,i,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,a(d,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,i,"GeneratorFunction"),a(d),a(d,i,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(o=function(){return{w:u,m:y}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){if(e)o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var i=function(e,n){a(t,e,function(t){return this._invoke(e,n,t)})};i("next",0),i("throw",1),i("return",2)}},a(t,e,n,r)}function i(t){return function(t){if(Array.isArray(t))return u(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e,n,r,o,a,i){try{var u=t[a](i),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}function l(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var a=t.apply(e,n);function i(t){c(a,r,o,i,u,"next",t)}function u(t){c(a,r,o,i,u,"throw",t)}i(void 0)})}}var s={class:"card-eysa",style:{padding:"16px"}},f={class:"grid-eysa grid-eysa-4",style:{"margin-bottom":"12px"}},p={class:"admin-table"},d={key:0,style:{color:"#666"}},y={style:{color:"#666"}},v={key:0},m={key:1,style:{color:"#999"}},b=["value","onChange"],h={key:0},k={key:0,class:"text-eysa-small",style:{opacity:".7","margin-top":"8px"}};const g={__name:"OrdersTable",props:{endpoints:{type:Object,required:!0}},setup:function(t){var e=t,n=(0,r.KR)([]),a=(0,r.KR)(!1),u=(0,r.Kh)({status:"",search:""});function c(){return g.apply(this,arguments)}function g(){return(g=l(o().m(function t(){var r,i,c;return o().w(function(t){for(;;)switch(t.n){case 0:return a.value=!0,t.p=1,r=new URLSearchParams,u.status&&r.set("status",u.status),u.search&&r.set("search",u.search),t.n=2,fetch("".concat(e.endpoints.list,"?").concat(r.toString()));case 2:return i=t.v,t.n=3,i.json();case 3:c=t.v,n.value=c.items||[];case 4:return t.p=4,a.value=!1,t.f(4);case 5:return t.a(2)}},t,null,[[1,,4,5]])}))).apply(this,arguments)}function L(){u.status="",u.search="",c()}function j(){return(j=l(o().m(function t(n,r){var a,i;return o().w(function(t){for(;;)switch(t.n){case 0:return a=e.endpoints.status.replace("{id}",n.id),t.n=1,fetch(a,{method:"POST",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({status:r})});case 1:return i=t.v,t.n=2,i.json();case 2:t.v.success?n.status=r:alert("Erreur lors de la mise à jour du statut");case 3:return t.a(2)}},t)}))).apply(this,arguments)}function O(t){return{pending:"En attente",confirmed:"Confirmée",ready:"Prête",completed:"Terminée",cancelled:"Annulée"}[t]||t}function w(t,e){if(!t)return"";var n=new Date(t),r=function(t){return String(t).padStart(2,"0")},o={dd:r(n.getDate()),MM:r(n.getMonth()+1),yyyy:n.getFullYear(),HH:r(n.getHours()),mm:r(n.getMinutes())};return e.replace(/dd|MM|yyyy|HH|mm/g,function(t){return o[t]})}return(0,r.sV)(c),function(t,e){return(0,r.uX)(),(0,r.CE)("div",s,[e[7]||(e[7]=(0,r.Lk)("h2",{class:"title-eysa-3",style:{"margin-bottom":"12px"}},"Commandes",-1)),(0,r.Q3)(" Filtres "),(0,r.Lk)("div",f,[(0,r.bo)((0,r.Lk)("select",{"onUpdate:modelValue":e[0]||(e[0]=function(t){return u.status=t}),onChange:c,class:"form-control"},i(e[2]||(e[2]=[(0,r.Fv)('<option value="" data-v-1fb84df6>Tous les statuts</option><option value="pending" data-v-1fb84df6>En attente</option><option value="confirmed" data-v-1fb84df6>Confirmée</option><option value="ready" data-v-1fb84df6>Prête</option><option value="completed" data-v-1fb84df6>Terminée</option><option value="cancelled" data-v-1fb84df6>Annulée</option>',6)])),544),[[r.u1,u.status]]),(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":e[1]||(e[1]=function(t){return u.search=t}),onKeyup:(0,r.jR)(c,["enter"]),placeholder:"Recherche client / email",class:"form-control"},null,544),[[r.Jo,u.search,void 0,{trim:!0}]]),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-primary",onClick:c},"Appliquer"),(0,r.Lk)("button",{class:"btn-eysa btn-eysa-secondary",onClick:L},"Réinitialiser")]),(0,r.Q3)(" Table "),(0,r.Lk)("div",p,[(0,r.Lk)("table",null,[e[6]||(e[6]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"#"),(0,r.Lk)("th",null,"Client"),(0,r.Lk)("th",null,"Date"),(0,r.Lk)("th",null,"Créneau"),(0,r.Lk)("th",null,"Total"),(0,r.Lk)("th",null,"Statut"),(0,r.Lk)("th",null,"Actions")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.value,function(t){var n,o,a;return(0,r.uX)(),(0,r.CE)("tr",{key:t.id},[(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"#"+(0,r.v_)((a=t.id,String(a).slice(-6).toUpperCase())),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",null,(0,r.v_)(t.customerName||"Client"),1),t.customerEmail?((0,r.uX)(),(0,r.CE)("small",d,(0,r.v_)(t.customerEmail),1)):(0,r.Q3)("v-if",!0)]),(0,r.Lk)("td",null,[(0,r.Lk)("div",null,(0,r.v_)(w(t.createdAt,"dd/MM/yyyy")),1),(0,r.Lk)("small",y,(0,r.v_)(w(t.createdAt,"HH:mm")),1)]),(0,r.Lk)("td",null,[t.pickupDate?((0,r.uX)(),(0,r.CE)("span",v,(0,r.v_)(w(t.pickupDate,"dd/MM"))+" • "+(0,r.v_)(t.pickupTime||"--:--"),1)):((0,r.uX)(),(0,r.CE)("span",m,i(e[3]||(e[3]=[(0,r.Lk)("i",null,"Non défini",-1)]))))]),(0,r.Lk)("td",null,[(0,r.Lk)("strong",null,"€ "+(0,r.v_)((null!==(n=t.total)&&void 0!==n?n:0).toFixed(2)),1)]),(0,r.Lk)("td",null,[(0,r.Lk)("span",{class:(0,r.C4)(["badge",(o=t.status,{pending:"status-pending",confirmed:"status-confirmed",ready:"status-ready",completed:"status-completed",cancelled:"status-cancelled"}[o]||"status-pending")])},(0,r.v_)(O(t.status)),3)]),(0,r.Lk)("td",null,[(0,r.Lk)("select",{value:t.status,onChange:function(e){return function(t,e){return j.apply(this,arguments)}(t,e.target.value)},class:"form-control",style:{"max-width":"150px"}},i(e[4]||(e[4]=[(0,r.Fv)('<option value="pending" data-v-1fb84df6>En attente</option><option value="confirmed" data-v-1fb84df6>Confirmée</option><option value="ready" data-v-1fb84df6>Prête</option><option value="completed" data-v-1fb84df6>Terminée</option><option value="cancelled" data-v-1fb84df6>Annulée</option>',5)])),40,b)])])}),128)),a.value||0!==n.value.length?(0,r.Q3)("v-if",!0):((0,r.uX)(),(0,r.CE)("tr",h,i(e[5]||(e[5]=[(0,r.Lk)("td",{colspan:"7",style:{"text-align":"center",color:"#666",padding:"22px"}},"Aucune commande trouvée",-1)]))))])])]),a.value?((0,r.uX)(),(0,r.CE)("div",k,"Chargement…")):(0,r.Q3)("v-if",!0)])}}};const L=(0,n(66262).A)(g,[["__scopeId","data-v-1fb84df6"]])}}]);