/* ========================================================================
   CSS POUR LE BADGE DYNAMIQUE DU PANIER
   ======================================================================== */

/* 
   Je crée ce fichier pour gérer l'affichage du badge qui indique
   le nombre d'articles dans le panier. Il apparaîtra sur l'icône
   panier du header et se mettra à jour en temps réel.
*/

/* ========================================================================
   CONTENEUR DE L'ICÔNE PANIER
   ======================================================================== */

/* Je dois d'abord m'assurer que l'icône panier a une position relative */
.cart-icon-container {
    position: relative;
    display: inline-block;
    cursor: pointer;
    transition: all 0.3s ease;
}

.cart-icon-container:hover {
    transform: scale(1.1);
}

/* Je style l'icône panier elle-même */
.cart-icon {
    font-size: 1.5rem;
    color: var(--primary-color);
    transition: all 0.3s ease;
}

.cart-icon:hover {
    color: var(--primary-dark);
}

/* ========================================================================
   LE BADGE DE COMPTEUR
   ======================================================================== */

/* Je crée le badge qui s'affiche au-dessus de l'icône */
.cart-badge {
    position: absolute !important;
    top: -8px !important;
    right: -8px !important;
    background: linear-gradient(135deg, var(--primary-color), var(--primary-dark)) !important;
    color: var(--white) !important;
    border-radius: 50% !important;
    width: 20px !important;
    height: 20px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-size: 0.75rem !important;
    font-weight: 700 !important;
    line-height: 1 !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2) !important;
    border: 2px solid var(--white) !important;
    z-index: 9999 !important;
}

/* Quand le panier est vide, je cache le badge */
.cart-badge.hidden {
    display: none;
}

/* ========================================================================
   ANIMATIONS DU BADGE
   ======================================================================== */

/* Animation quand un article est ajouté (pulse) */
.cart-badge.pulse {
    animation: badgePulse 0.6s ease-out;
}

@keyframes badgePulse {
    0% {
        transform: scale(1);
    }
    50% {
        transform: scale(1.3);
        background: var(--success-color);
    }
    100% {
        transform: scale(1);
    }
}

/* Animation quand un article est retiré (shake) */
.cart-badge.shake {
    animation: badgeShake 0.5s ease-out;
}

@keyframes badgeShake {
    0%, 100% {
        transform: translateX(0);
    }
    25% {
        transform: translateX(-3px);
    }
    75% {
        transform: translateX(3px);
    }
}

/* Animation d'apparition du badge */
.cart-badge.appear {
    animation: badgeAppear 0.4s ease-out;
}

@keyframes badgeAppear {
    0% {
        opacity: 0;
        transform: scale(0);
    }
    70% {
        transform: scale(1.2);
    }
    100% {
        opacity: 1;
        transform: scale(1);
    }
}

/* Animation de disparition du badge */
.cart-badge.disappear {
    animation: badgeDisappear 0.3s ease-in forwards;
}

@keyframes badgeDisappear {
    0% {
        opacity: 1;
        transform: scale(1);
    }
    100% {
        opacity: 0;
        transform: scale(0);
    }
}

/* ========================================================================
   ÉTATS VISUELS DU BADGE
   ======================================================================== */

/* Badge normal (1-9 articles) */
.cart-badge.normal {
    background: linear-gradient(135deg, var(--color-burgundy), var(--color-burgundy-dark));
}

/* Badge pour beaucoup d'articles (10+) */
.cart-badge.many {
    background: linear-gradient(135deg, var(--color-success), #38a169);
    font-size: 0.65rem;
}

/* Badge pour très beaucoup d'articles (100+) */
.cart-badge.lots {
    background: linear-gradient(135deg, #e53e3e, #c53030);
    font-size: 0.6rem;
    width: 22px;
    height: 22px;
}

/* ========================================================================
   CONTENU DU BADGE SELON LA QUANTITÉ
   ======================================================================== */

/* Je gère l'affichage du nombre selon la quantité */
.cart-badge[data-count="0"] {
    display: none;
}

/* Pour les grandes quantités, j'affiche 9+ ou 99+ */
.cart-badge[data-count="99+"] {
    font-size: 0.55rem;
    letter-spacing: -0.5px;
}

/* ========================================================================
   TOOLTIP AU SURVOL
   ======================================================================== */

/* J'ajoute un petit tooltip au survol pour plus d'info */
.cart-icon-container::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: -30px;
    left: 50%;
    transform: translateX(-50%);
    background: #8B1538; /* Rouge bordeaux comme le hover des onglets */
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.7rem;
    white-space: nowrap;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 20;
}

.cart-icon-container:hover::after {
    opacity: 1;
    visibility: visible;
    bottom: -35px;
}

/* Petite flèche pour le tooltip */
.cart-icon-container::before {
    content: '';
    position: absolute;
    bottom: -25px;
    left: 50%;
    transform: translateX(-50%);
    border-left: 4px solid transparent;
    border-right: 4px solid transparent;
    border-bottom: 4px solid #8B1538; /* Rouge bordeaux assorti */
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    z-index: 20;
}

.cart-icon-container:hover::before {
    opacity: 1;
    visibility: visible;
    bottom: -30px;
}

/* ========================================================================
   RESPONSIVE - ADAPTATION MOBILE
   ======================================================================== */

@media (max-width: 768px) {
    /* Sur mobile, je rends le badge un peu plus grand pour le touch */
    .cart-badge {
        width: 22px;
        height: 22px;
        font-size: 0.8rem;
        top: -10px;
        right: -10px;
    }
    
    .cart-icon {
        font-size: 1.6rem;
    }
    
    /* Je cache le tooltip sur mobile (pas nécessaire) */
    .cart-icon-container::after,
    .cart-icon-container::before {
        display: none;
    }
}

@media (max-width: 480px) {
    .cart-badge {
        width: 20px;
        height: 20px;
        font-size: 0.75rem;
        top: -8px;
        right: -8px;
    }
    
    .cart-icon {
        font-size: 1.4rem;
    }
}

/* ========================================================================
   ACCESSIBILITÉ
   ======================================================================== */

/* Je m'assure que le badge est accessible */
.cart-badge {
    /* Le badge aura un aria-label géré par JS */
    pointer-events: none; /* Le clic se fait sur le conteneur parent */
}

/* Focus visible pour l'accessibilité clavier */
.cart-icon-container:focus {
    outline: 2px solid var(--color-burgundy);
    outline-offset: 2px;
    border-radius: 4px;
}

/* ========================================================================
   THÈME SOMBRE (pour plus tard si besoin)
   ======================================================================== */

@media (prefers-color-scheme: dark) {
    .cart-badge {
        border-color: var(--color-dark-gray);
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.4);
    }
    
    .cart-icon-container::after {
        background: #2d3748;
    }
    
    .cart-icon-container::before {
        border-bottom-color: #2d3748;
    }
}

/* ========================================================================
   ANIMATIONS AVANCÉES POUR UNE MEILLEURE UX
   ======================================================================== */

/* Animation de "rebond" quand on ajoute plusieurs articles rapidement */
.cart-badge.bounce {
    animation: badgeBounce 0.4s ease-out;
}

@keyframes badgeBounce {
    0%, 20%, 50%, 80%, 100% {
        transform: translateY(0);
    }
    40% {
        transform: translateY(-4px);
    }
    60% {
        transform: translateY(-2px);
    }
}

/* Animation de "glow" pour attirer l'attention */
.cart-badge.glow {
    animation: badgeGlow 1s ease-in-out infinite alternate;
}

@keyframes badgeGlow {
    from {
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
    }
    to {
        box-shadow: 0 2px 12px rgba(139, 36, 36, 0.6);
    }
}
