{# templates/base.html.twig #}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="language" content="fr-FR">

    {# --- SEO / Préprod : bloque l'indexation (enlever à la mise en ligne) --- #}
    <meta name="robots" content="{% block meta_robots %}noindex, nofollow{% endblock %}">

    {# SEO de base #}
    <meta name="description" content="{% block meta_description %}Boucherie EYSA à Saumur - Click & Collect, viandes de qualité premium, produits locaux. Commandez en ligne et retirez en magasin. Service rapide et professionnel.{% endblock %}">
    <meta name="keywords" content="{% block meta_keywords %}boucherie, Saumur, viande, click collect, bœuf, agneau, volaille, charcuterie, produits locaux, qualité premium{% endblock %}">
    <meta name="author" content="Boucherie EYSA">

    {# Canonical #}
    <link rel="canonical" href="{% block canonical_url %}{{ app.request.uri }}{% endblock %}">

    {# Favicons / PWA (utilise les fichiers présents dans public/images) #}
    <link rel="icon" type="image/png" sizes="32x32" href="{{ asset('images/logo_favicon.png') }}?v=3">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ asset('images/logo_favicon.png') }}?v=3">
    <link rel="shortcut icon" href="{{ asset('images/logo_favicon.png') }}?v=3">
    <link rel="apple-touch-icon" sizes="180x180" href="{{ asset('images/logo_web.png') }}?v=3">
    <link rel="manifest" href="{{ asset('site.webmanifest') }}?v=3">
    <meta name="theme-color" content="#8B1538">

    {# Open Graph #}
    <meta property="og:title" content="{% block og_title %}{{ block('title') }}{% endblock %}">
    <meta property="og:description" content="{% block og_description %}{{ block('meta_description') }}{% endblock %}">
    <meta property="og:type" content="{% block og_type %}website{% endblock %}">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:site_name" content="Boucherie EYSA">

    {# Twitter #}
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ block('og_title') }}">
    <meta name="twitter:description" content="{{ block('og_description') }}">

    <title>{% block title %}Boucherie EYSA - Saumur - Click & Collect{% endblock %}</title>

    {# CSS via Webpack Encore (une seule fois) #}
    {{ encore_entry_link_tags('app') }}
    {% block stylesheets %}{% endblock %}

    {# JS via Webpack Encore #}
    {% block javascripts %}
        {{ encore_entry_script_tags('app') }}
        {{ encore_entry_link_tags('cart-app') }}
        {{ encore_entry_script_tags('cart-app') }}
    {% endblock %}


</head>
<body>
    {% include 'partials/header.html.twig' %}
    
        {# Conteneur global pour les toasts/notifications #}
        <div id="vue-toasts"></div>
    
    {# Messages flash (site public) #}
    <div class="flash-container" style="max-width: 1100px; margin: 10px auto; padding: 0 16px;">
        {% for type, messages in app.flashes %}
            {% for message in messages %}
                <div class="alert alert-{{ type == 'error' ? 'danger' : type }}" role="alert" style="display:flex;align-items:center;gap:.5rem;border:1px solid #ddd;border-left-width:4px;border-radius:8px;padding:10px 12px;margin:8px 0;background:#fff;{{ type == 'success' ? 'border-left-color:#2e7d32;background:#e8f5e9' : (type == 'error' ? 'border-left-color:#c62828;background:#ffebee' : (type == 'warning' ? 'border-left-color:#ef6c00;background:#fff3e0' : 'border-left-color:#1976d2;background:#e3f2fd')) }}">
                    <i class="fas fa-{{ type == 'success' ? 'check-circle' : (type == 'error' ? 'exclamation-circle' : (type == 'warning' ? 'exclamation-triangle' : 'info-circle')) }}" aria-hidden="true"></i>
                    <span>{{ message }}</span>
                </div>
            {% endfor %}
        {% endfor %}
    </div>
    {% block body %}{% endblock %}
    {% include 'partials/footer.html.twig' %}

    {# Bandeau cookie #}
    {% include 'components/cookie_banner.html.twig' %}
</body>


</html>
