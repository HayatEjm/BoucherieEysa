{% extends 'base.html.twig' %}

{% block title %}Commande confirmée - Boucherie Eysa{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('build/app.css') }}">
{% endblock %}

{% block body %}
<div class="checkout-success-page">
    
    {# EN-TÊTE DE CONFIRMATION #}
    <section class="checkout-success-header section-eysa">
        <div class="cc-container">
            <div class="checkout-success-content">
                <div class="success-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h1 class="title-eysa-2">
                    Commande confirmée !
                </h1>
                <p class="success-subtitle">
                    Merci {{ order.customerName }}, votre commande a été enregistrée avec succès.
                </p>
            </div>
        </div>
    </section>

    {# DÉTAILS DE LA COMMANDE #}
    <section class="checkout-success-details section-eysa-alt">
        <div class="cc-container">
            <div class="success-layout">
                
                {# INFORMATIONS DE RETRAIT #}
                <div class="success-card">
                    <h2 class="success-card__title">
                        <i class="fas fa-clock"></i>
                        Informations de retrait
                    </h2>
                    
                    <div class="pickup-details">
                        <div class="pickup-number">
                            <strong>Numéro de retrait :</strong>
                            <span class="pickup-number__value">{{ order.pickupNumber }}</span>
                        </div>
                        
                        <div class="pickup-datetime">
                            <p><strong>Date :</strong> {{ order.pickupDate|date('d/m/Y') }}</p>
                            <p><strong>Créneau :</strong> {{ order.pickupTimeSlot }}</p>
                        </div>
                        
                        <div class="pickup-address">
                            <p><strong>Adresse :</strong></p>
                            <address>
                                Boucherie Eysa<br>
                                123 Rue de la Viande<br>
                                75000 Paris<br>
                                Tél : 01 23 45 67 89
                            </address>
                        </div>
                    </div>
                </div>

                {# RÉCAPITULATIF DE LA COMMANDE #}
                <div class="success-card">
                    <h2 class="success-card__title">
                        <i class="fas fa-receipt"></i>
                        Récapitulatif
                    </h2>
                    
                    <div class="order-summary">
                        <p><strong>Commande n° :</strong> {{ order.orderNumber }}</p>
                        <p><strong>Date de commande :</strong> {{ order.createdAt|date('d/m/Y à H:i') }}</p>
                        
                        <div class="order-items">
                            {% for item in order.orderItems %}
                                <div class="order-item">
                                    <span>{{ item.quantity }}x {{ item.product.name }}</span>
                                    <span>{{ item.totalTtc|number_format(2, ',', ' ') }} €</span>
                                </div>
                            {% endfor %}
                        </div>
                        
                        <div class="order-total">
                            <strong>Total : {{ order.totalTtc|number_format(2, ',', ' ') }} € TTC</strong>
                        </div>
                    </div>
                </div>

                {# INSTRUCTIONS #}
                <div class="success-card">
                    <h2 class="success-card__title">
                        <i class="fas fa-info-circle"></i>
                        Prochaines étapes
                    </h2>
                    
                    <div class="next-steps">
                        <ol>
                            <li>
                                <strong>Préparation :</strong> 
                                Votre commande sera préparée avec soin par nos bouchers.
                            </li>
                            <li>
                                <strong>Notification :</strong> 
                                Nous vous contacterons au {{ order.customerPhone }} quand votre commande sera prête.
                            </li>
                            <li>
                                <strong>Retrait :</strong> 
                                Présentez-vous avec votre numéro de retrait <strong>{{ order.pickupNumber }}</strong> le {{ order.pickupDate|date('d/m/Y') }} entre {{ order.pickupTimeSlot }}.
                            </li>
                        </ol>
                    </div>
                </div>
            </div>

            {# ACTIONS #}
            <div class="success-actions">
                <a href="{{ path('app_home') }}" class="btn-eysa btn-eysa-primary">
                    <i class="fas fa-home"></i>
                    Retour à l'accueil
                </a>
                
                <a href="{{ path('app_checkout_order_details', {orderNumber: order.orderNumber}) }}" class="btn-eysa btn-eysa-secondary">
                    <i class="fas fa-print"></i>
                    Imprimer le récapitulatif
                </a>
            </div>
        </div>
    </section>
</div>
{% endblock %}
